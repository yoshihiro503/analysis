
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.sequences</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.sequences" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init()">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module mathcomp.analysis.sequences</h1>
<span class="vernacular">From</span><span class="id"> HB</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> structures</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> all_ssreflect</span><span class="id"> ssralg</span><span class="id"> ssrint</span><span class="id"> ssrnum</span><span class="id"> matrix</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> interval</span><span class="id"> rat</span><span class="id"> archimedean</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> mathcomp_extra</span><span class="id"> boolp</span><span class="id"> classical_sets</span><span class="id"> functions</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> set_interval</span><span class="id"> reals</span><span class="id"> ereal</span><span class="id"> signed</span><span class="id"> topology</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> tvs</span><span class="id"> normedtype</span><span class="id"> landau</span>.<br/>
<br/>
<div class="ssrdoc md">
# Definitions and lemmas about sequences

The purpose of this file is to gather generic definitions and lemmas about
sequences. Incidentally, it defines the exponential function.
```
    nondecreasing_seq u == the sequence u is non-decreasing
    nonincreasing_seq u == the sequence u is non-increasing
       increasing_seq u == the sequence u is (strictly) increasing
       decreasing_seq u == the sequence u is (strictly) decreasing
```

## About sequences of real numbers
```
       [sequence u_n]_n == the sequence of general element u_n
                 R ^nat == notation for the type of sequences, i.e.,
                           functions of type nat -&gt; R
                seqDU F == sequence F_0, F_1 \ F_0, F_2 \ (F_0 U F_1),...
                 seqD F == the sequence F_0, F_1 \ F_0, F_2 \ F_1,...
              series u_ == the sequence of partial sums of u_
           telescope u_ := [sequence u_ n.+1 - u_ n]_n
               harmonic == harmonic sequence
             arithmetic == arithmetic sequence
              geometric == geometric sequence
                           also arithmetic_mean, harmonic_mean,
                           root_mean_square
         [series u_n]_n == the series of general element u_n
             [normed S] == transforms a series S = [series u_n]_n in its
                           normed series [series `|u_n|]_n] (useful to
                           represent absolute and normed convergence:
                           cvg [norm S_n])
            exp_coeff n == the sequence of coefficients of the real
                           exponential
                 expR x == the exponential function defined on a realType
is_cvg_series_exp_coeff == convergence of \sum_n^+oo x^n / n!
       \sum_&lt;range&gt; F i == lim (fun n =&gt; (\sum_&lt;range&gt;) F i)) where
                           &lt;range&gt; can be (i &lt;oo), (i &lt;oo | P i),
                           (m &lt;= i &lt;oo), or (m &lt;= i &lt;oo | P i)
```

Sections sequences_R_* contain properties of sequences of real numbers.
For example:
```
nonincreasing_cvgn_ge u_ == if u_ is nonincreasing and convergent then
                            forall n, lim u_ &lt;= u_ n
nondecreasing_cvgn_le u_ == if u_ is nondecreasing and convergent then
                            forall n, lim u_ &gt;= u_ n
   nondecreasing_cvgn u_ == if u_ is nondecreasing and bounded then u_
                            is convergent and its limit is sup u_n
   nonincreasing_cvgn u_ == if u_ is nonincreasing u_ and bound by below
                            then u_ is convergent
                adjacent == adjacent sequences lemma
                  cesaro == Cesaro's lemma
```

## About sequences of natural numbers
```
               nseries u := fun n =&gt; \sum_(0 &lt;= k &lt; n) u k
                            where u has type nat^nat
```

## About sequences of extended real numbers
```
               eseries u := [sequence \sum_(0 &lt;= k &lt; n) u k]_n
                            where u has type (\bar R)^nat
            etelescope u := [sequence u n.+1 - u n]_n
```

Section sequences_ereal contain properties of sequences of extended real
numbers.

  Naming convention: lemmas about series of non-negative (resp.
  non-positive) extended numbers use the string "nneseries" (resp.
  "npeseries") as part of their identifier

## Limit superior and inferior for sequences
```
             sdrop u n := {u_k | k &gt;= n}
                sups u := [sequence sup (sdrop u n)]_n
                infs u := [sequence inf (sdrop u n)]_n
    limn_sup, limn_inf == limit sup/inferior for a sequence of reals
               esups u := [sequence ereal_sup (sdrop u n)]_n
               einfs u := [sequence ereal_inf (sdrop u n)]_n
limn_esup u, limn_einf == limit sup/inferior for a sequence of
                          of extended reals
```

## Bounded functions
This section proves Baire's Theorem, stating that complete normed spaces
are Baire spaces, and Banach-Steinhaus' theorem, stating that between a
complete normed vector space and a normed vector spaces, pointwise bounded
and uniformly bounded subset of functions correspond.
```
    bounded_fun_norm f == a function between normed spaces transforms a
                          bounded set into a bounded set
   pointwise_bounded F == F is a set of pointwise bounded functions
                          between normed spaces
     uniform_bounded F == F is a set of uniform bounded functions
                          between normed spaces
```
</div>
<br/>
<span class="gallina-kwd">Set</span><span class="vernacular"> Implicit</span><span class="vernacular"> Arguments</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Strict</span><span class="vernacular"> Implicit</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Printing</span><span class="vernacular"> Implicit</span><span class="vernacular"> Defensive</span>.<br/>
<span class="vernacular">Import</span><span class="id"> Order</span>.<span class="id">TTheory</span><span class="id"> GRing</span>.<span class="id">Theory</span><span class="id"> Num</span>.<span class="id">Def</span><span class="id"> Num</span>.<span class="id">Theory</span>.<br/>
<span class="vernacular">Import</span><span class="id"> numFieldNormedType</span>.<span class="vernacular">Exports</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> classical_set_scope</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ring_scope</span>.<br/>
<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;R ^nat&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 0</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;a `^ x&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 11</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;[ 'sequence' E ]_ n&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 0,</span><span class="id"> E</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 200,</span><span class="id"> n</span><span class="id"> name,</span><span class="id"> format</span> <span class="id">&quot;[ 'sequence'  E ]_ n&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;[ 'series' E ]_ n&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 0,</span><span class="id"> E</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 0,</span><span class="id"> n</span><span class="id"> name,</span><span class="id"> format</span> <span class="id">&quot;[ 'series'  E ]_ n&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;[ 'normed' E ]&quot;</span>  (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 0,</span><span class="id"> format</span> <span class="id">&quot;[ 'normed'  E ]&quot;</span>).<br/>
<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;\big [ op / idx ]_ ( m &lt;= i &lt;oo | P ) F&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 36,</span><span class="id"> F</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 36,</span><span class="id"> op,</span><span class="id"> idx</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 10,</span><span class="id"> m,</span><span class="id"> i</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;'[' \big [ op / idx ]_ ( m  &lt;=  i  &lt;oo  |  P )  F ']'&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;\big [ op / idx ]_ ( m &lt;= i &lt;oo ) F&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 36,</span><span class="id"> F</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 36,</span><span class="id"> op,</span><span class="id"> idx</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 10,</span><span class="id"> i,</span><span class="id"> m</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;'[' \big [ op / idx ]_ ( m  &lt;=  i  &lt;oo ) '/  '  F ']'&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;\big [ op / idx ]_ ( i &lt;oo | P ) F&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 36,</span><span class="id"> F</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 36,</span><span class="id"> op,</span><span class="id"> idx</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 10,</span><span class="id"> i</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;'[' \big [ op / idx ]_ ( i  &lt;oo |  P ) '/  '  F ']'&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;\big [ op / idx ]_ ( i &lt;oo ) F&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 36,</span><span class="id"> F</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 36,</span><span class="id"> op,</span><span class="id"> idx</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 10,</span><span class="id"> i</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;'[' \big [ op / idx ]_ ( i  &lt;oo )  F ']'&quot;</span>).<br/>
<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;\sum_ ( m &lt;= i '&lt;oo' | P ) F&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 41,</span><span class="id"> F</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 41,</span><span class="id"> i,</span><span class="id"> m</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;'[' \sum_ ( m  &lt;=  i  &lt;oo  |  P ) '/  '  F ']'&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;\sum_ ( m &lt;= i '&lt;oo' ) F&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 41,</span><span class="id"> F</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 41,</span><span class="id"> i,</span><span class="id"> m</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;'[' \sum_ ( m  &lt;=  i  &lt;oo ) '/  '  F ']'&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;\sum_ ( i '&lt;oo' | P ) F&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 41,</span><span class="id"> F</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 41,</span><span class="id"> i</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;'[' \sum_ ( i  &lt;oo  |  P ) '/  '  F ']'&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;\sum_ ( i '&lt;oo' ) F&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 41,</span><span class="id"> F</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 41,</span><span class="id"> i</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 50,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;'[' \sum_ ( i  &lt;oo ) '/  '  F ']'&quot;</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> sequence</span><span class="id"> R</span><span class="id"> :=</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> R</span>.<br/>
<span class="vernacular">Definition</span><span class="id"> mk_sequence</span><span class="id"> R</span><span class="id"> f</span><span class="id"> :</span><span class="id"> sequence</span><span class="id"> R</span><span class="id"> :=</span><span class="id"> f</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> mk_sequence</span><span class="id"> R</span><span class="id"> f</span><span class="id"> /</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;[ 'sequence' E ]_ n&quot;</span><span class="id"> :=</span> (<span class="id">mk_sequence</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> E%E</span>))<span class="id"> :</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;[ 'sequence' E ]_ n&quot;</span><span class="id"> :=</span> (<span class="id">mk_sequence</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> E</span>))<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;R ^nat&quot;</span><span class="id"> :=</span> (<span class="id">sequence</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> type_scope</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;'nondecreasing_seq' f&quot;</span><span class="id"> :=</span> (<span class="id">{homo</span><span class="id"> f</span><span class="id"> :</span><span class="id"> n</span><span class="id"> m</span><span class="id"> /</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%nat</span><span class="id"> &gt;-&gt;</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%O}</span>)<br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 10</span>).<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;'nonincreasing_seq' f&quot;</span><span class="id"> :=</span> (<span class="id">{homo</span><span class="id"> f</span><span class="id"> :</span><span class="id"> n</span><span class="id"> m</span><span class="id"> /</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%nat</span><span class="id"> &gt;-&gt;</span> (<span class="id">n</span><span class="id"> &gt;=</span><span class="id"> m</span>)<span class="id">%O}</span>)<br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 10</span>).<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;'increasing_seq' f&quot;</span><span class="id"> :=</span> (<span class="id">{mono</span><span class="id"> f</span><span class="id"> :</span><span class="id"> n</span><span class="id"> m</span><span class="id"> /</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%nat</span><span class="id"> &gt;-&gt;</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%O}</span>)<br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 10</span>).<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;'decreasing_seq' f&quot;</span><span class="id"> :=</span> (<span class="id">{mono</span><span class="id"> f</span><span class="id"> :</span><span class="id"> n</span><span class="id"> m</span><span class="id"> /</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%nat</span><span class="id"> &gt;-&gt;</span> (<span class="id">n</span><span class="id"> &gt;=</span><span class="id"> m</span>)<span class="id">%O}</span>)<br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 10</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_opp</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (<span class="id">-</span><span class="id"> u_</span>)<span class="id"> =</span><span class="id"> nonincreasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> du</span><span class="id"> x</span><span class="id"> y</span><span class="id"> /du;</span><span class="id"> rewrite</span><span class="id"> lerN2</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nonincreasing_opp</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> (<span class="id">-</span><span class="id"> u_</span>)<span class="id"> =</span><span class="id"> nondecreasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> du</span><span class="id"> x</span><span class="id"> y</span><span class="id"> /du;</span><span class="id"> rewrite</span><span class="id"> lerN2</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> decreasing_opp</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">decreasing_seq</span> (<span class="id">-</span><span class="id"> u_</span>)<span class="id"> =</span><span class="id"> increasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> du</span><span class="id"> x</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> -du</span><span class="id"> lerN2</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> increasing_opp</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">increasing_seq</span> (<span class="id">-</span><span class="id"> u_</span>)<span class="id"> =</span><span class="id"> decreasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> du</span><span class="id"> x</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> -du</span><span class="id"> lerN2</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_seqP</span><span class="id"> d</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> porderType</span><span class="id"> d</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%O</span><span class="id"> &lt;-&gt;</span><span class="id"> nondecreasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> split=&gt;</span><span class="id"> [|h</span><span class="id"> n];</span><span class="id"> [exact:</span><span class="id"> homo_leq</span><span class="id"> le_trans</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> h]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nonincreasing_seqP</span><span class="id"> d</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> porderType</span><span class="id"> d</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &gt;=</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%O</span><span class="id"> &lt;-&gt;</span><span class="id"> nonincreasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> homo_leq</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> u</span><span class="id"> v</span><span class="id"> =&gt;</span><span class="id"> le_trans</span><span class="id"> v</span><span class="id"> u</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> u_nincr</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> u_nincr</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> increasing_seqP</span><span class="id"> d</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> porderType</span><span class="id"> d</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%O</span><span class="id"> &lt;-&gt;</span><span class="id"> increasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> u_nondec;</span><span class="id"> apply:</span><span class="id"> le_mono;</span><span class="id"> apply:</span><span class="id"> homo_ltn</span><span class="id"> lt_trans</span><span class="id"> _</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> u_incr</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> lt_neqAle</span><span class="id"> eq_le</span><span class="id"> !u_incr</span><span class="id"> leqnSn</span><span class="id"> ltnn</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> decreasing_seqP</span><span class="id"> d</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> porderType</span><span class="id"> d</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &gt;</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%O</span><span class="id"> &lt;-&gt;</span><span class="id"> decreasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> u_noninc</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FIXME:&nbsp;add&nbsp;shortcut&nbsp;to&nbsp;order.v&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@total_homo_mono</span><span class="id"> _</span><span class="id"> T</span><span class="id"> u_</span><span class="id"> leq</span><span class="id"> ltn</span><span class="id"> _</span><span class="id"> _</span><span class="id"> leqnn</span><span class="id"> _</span><span class="id"> ltn_neqAle</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;_ (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> esym</span> (<span class="id">le_anti</span><span class="id"> _</span>))<span class="id"> leq_total</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">homo_ltn</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> u</span><span class="id"> v</span><span class="id"> =&gt;</span><span class="id"> lt_trans</span><span class="id"> v</span><span class="id"> u</span>)<span class="id"> u_noninc</span>))<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> eq_sym</span><span class="id"> -lt_neqAle</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> u_decr</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> lt_neqAle</span><span class="id"> eq_le</span><span class="id"> !u_decr</span><span class="id"> !leqnSn</span><span class="id"> ltnn</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lef_at</span> (<span class="id">aT</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>)<span class="id"> d</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> porderType</span><span class="id"> d</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">aT</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id">^nat</span>)<span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> {homo</span> (<span class="id">f^~</span><span class="id"> x</span>)<span class="id"> :</span><span class="id"> n</span><span class="id"> m</span><span class="id"> /</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%N</span><span class="id"> &gt;-&gt;</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%O}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> nf</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn;</span><span class="id"> have</span><span class="id"> /asboolP</span><span class="id"> :=</span><span class="id"> nf</span><span class="id"> _</span><span class="id"> _</span><span class="id"> mn;</span><span class="id"> exact</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_seqD</span><span class="id"> T</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> x,</span><span class="id"> nondecreasing_seq</span> (<span class="id">f</span><span class="id"> ^~</span><span class="id"> x</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> x,</span><span class="id"> nondecreasing_seq</span> (<span class="id">g</span><span class="id"> ^~</span><span class="id"> x</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> x,</span><span class="id"> nondecreasing_seq</span> ((<span class="id">f</span><span class="id"> \+</span><span class="id"> g</span>)<span class="id"> ^~</span><span class="id"> x</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ndf</span><span class="id"> ndg</span><span class="id"> t</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn;</span><span class="id"> apply:</span><span class="id"> lerD;</span><span class="id"> [exact/ndf|exact/ndg]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> eqolimn</span><span class="id"> :=</span> (<span class="id">@eqolim</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> eventually_filter</span>).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> eqolimPn</span><span class="id"> :=</span> (<span class="id">@eqolimP</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> eventually_filter</span>).<br/>
<br/>
<div class="doc">Sequences of sets </div>
<br/>
<span class="vernacular">Section</span><span class="id"> seqDU</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> F</span><span class="id"> :</span> (<span class="id">set</span><span class="id"> T</span>)<span class="id">^nat</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> seqDU</span><span class="id"> F</span><span class="id"> n</span><span class="id"> :=</span><span class="id"> F</span><span class="id"> n</span><span class="id"> `\`</span><span class="id"> \big[setU/set0]_</span>(<span class="id">k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> F</span><span class="id"> k</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> trivIset_seqDU</span><span class="id"> F</span><span class="id"> :</span><span class="id"> trivIset</span><span class="id"> setT</span> (<span class="id">seqDU</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> i</span><span class="id"> j</span><span class="id"> _</span><span class="id"> _;</span><span class="id"> wlog</span><span class="id"> ij</span><span class="id"> :</span><span class="id"> i</span><span class="id"> j</span><span class="id"> /</span> (<span class="id">i</span><span class="id"> &lt;</span><span class="id"> j</span>)<span class="id">%N</span><span class="id"> =&gt;</span><span class="id"> [/</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>)<span class="id"> tB|]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [ij</span><span class="id"> /tB-&gt;|ij|]</span><span class="id"> :=</span><span class="id"> ltngtP</span><span class="id"> i</span><span class="id"> j;</span><span class="id"> rewrite</span><span class="id"> //setIC</span><span class="id"> =&gt;</span><span class="id"> /tB</span><span class="id"> -&gt;</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /set0P;</span><span class="id"> apply:</span><span class="id"> contraNeq</span><span class="id"> =&gt;</span><span class="id"> _;</span><span class="id"> apply/eqP</span>.<br/>
<span class="id">rewrite</span><span class="id"> /seqDU</span><span class="id"> 2!setDE</span><span class="id"> !setIA</span><span class="id"> setIC</span> (<span class="id">bigD1</span> (<span class="id">Ordinal</span><span class="id"> ij</span>))<span class="id"> //=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> setCU</span><span class="id"> setIAC</span><span class="id"> !setIA</span><span class="id"> setICl</span><span class="id"> !set0I</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bigsetU_seqDU</span><span class="id"> F</span><span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\big[setU/set0]_</span>(<span class="id">k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> F</span><span class="id"> k</span><span class="id"> =</span><span class="id"> \big[setU/set0]_</span>(<span class="id">k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> seqDU</span><span class="id"> F</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">elim:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> [|n</span><span class="id"> ih];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> 2!big_ord0</span>.<br/>
<span class="id">rewrite</span><span class="id"> !big_ord_recr</span><span class="id"> /=</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split=&gt;</span><span class="id"> [[Ft|Fnt]|[Ft|[Fnt</span><span class="id"> Ft]]]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> left;</span><span class="id"> rewrite</span><span class="id"> -ih</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> [?|?]</span><span class="id"> :=</span><span class="id"> pselect</span> ((<span class="id">\big[setU/set0]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> seqDU</span><span class="id"> F</span><span class="id"> i</span>)<span class="id"> t</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> left</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> right;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ih</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> left;</span><span class="id"> rewrite</span><span class="id"> ih</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> right</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seqDU_bigcup_eq</span><span class="id"> F</span><span class="id"> :</span><span class="id"> \bigcup_k</span><span class="id"> F</span><span class="id"> k</span><span class="id"> =</span><span class="id"> \bigcup_k</span><span class="id"> seqDU</span><span class="id"> F</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /seqDU</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split=&gt;</span><span class="id"> [[n</span><span class="id"> _</span><span class="id"> Fnt]|[n</span><span class="id"> _]];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> setDE</span><span class="id"> =&gt;</span><span class="id"> -[?</span><span class="id"> _];</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">have</span><span class="id"> [UFnt|UFnt]</span><span class="id"> :=</span><span class="id"> pselect</span> ((<span class="id">\big[setU/set0]_</span>(<span class="id">k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> F</span><span class="id"> k</span>)<span class="id"> t</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">suff</span><span class="id"> [m</span><span class="id"> [Fmt</span><span class="id"> FNmt]]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> m,</span><span class="id"> F</span><span class="id"> m</span><span class="id"> t</span><span class="id"> /\</span><span class="gallina-kwd"> forall</span><span class="id"> k,</span> (<span class="id">k</span><span class="id"> &lt;</span><span class="id"> m</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> F</span><span class="id"> k</span><span class="id"> t</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> -bigcup_mkord</span><span class="id"> =&gt;</span><span class="id"> -[k</span><span class="id"> kj];</span><span class="id"> exact:</span><span class="id"> FNmt</span>.<br/>
<span class="id">move:</span><span class="id"> UFnt;</span><span class="id"> rewrite</span><span class="id"> -bigcup_mkord</span><span class="id"> =&gt;</span><span class="id"> -[/=</span><span class="id"> k</span><span class="id"> _</span><span class="id"> Fkt]</span><span class="id"> {Fnt</span><span class="id"> n}</span>.<br/>
<span class="id">have</span><span class="id"> [n</span><span class="id"> kn]</span><span class="id"> :=</span><span class="id"> ubnP</span><span class="id"> k;</span><span class="id"> elim:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> n</span><span class="id"> ih</span><span class="gallina-kwd"> in</span><span class="id"> t</span><span class="id"> k</span><span class="id"> Fkt</span><span class="id"> kn</span><span class="id"> *</span>.<br/>
<span class="id">case:</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> [|k]</span><span class="gallina-kwd"> in</span><span class="id"> Fkt</span><span class="id"> kn</span><span class="id"> *;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> O</span>.<br/>
<span class="id">have</span><span class="id"> [?|]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="gallina-kwd">forall</span><span class="id"> m,</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> F</span><span class="id"> m</span><span class="id"> t</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> k</span>.<span class="id">+1</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /existsNP[i]</span><span class="id"> /not_implyP[ik]</span><span class="id"> /contrapT</span><span class="id"> Fit;</span><span class="id"> apply:</span> (<span class="id">ih</span><span class="id"> t</span><span class="id"> i</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">leq_ltn_trans</span><span class="id"> ik</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seqDUIE</span> (<span class="id">S</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>) (<span class="id">F</span><span class="id"> :</span> (<span class="id">set</span><span class="id"> T</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">seqDU</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> S</span><span class="id"> `&amp;`</span><span class="id"> F</span><span class="id"> n</span>)<span class="id"> =</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> S</span><span class="id"> `&amp;`</span><span class="id"> F</span><span class="id"> n</span><span class="id"> `\`</span><span class="id"> \bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> F</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/funext</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> -setIDA;</span><span class="id"> apply/seteqP;</span><span class="id"> split;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> [Sx</span><span class="id"> [Fnx</span><span class="id"> UFx]];</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> contra_not</span><span class="id"> UFx</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> bigcup_mkord</span><span class="id"> -big_distrr/=</span><span class="id"> =&gt;</span><span class="id"> -[]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /seqDU</span><span class="id"> -setIDA</span><span class="id"> bigcup_mkord</span><span class="id"> -big_distrr/=</span><span class="id"> setDIr</span><span class="id"> setIUr</span><span class="id"> setDIK</span><span class="id"> set0U</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> seqDU</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> trivIset_seqDU</span><span class="id"> {T}</span><span class="id"> F</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Resolve</span><span class="id"> trivIset_seqDU</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> seqD</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> F</span><span class="id"> :</span> (<span class="id">set</span><span class="id"> T</span>)<span class="id"> ^nat</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> seqD</span><span class="id"> F</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="gallina-kwd"> if</span><span class="id"> n</span><span class="id"> isn't</span><span class="id"> n'</span>.<span class="id">+1</span><span class="gallina-kwd"> then</span><span class="id"> F</span><span class="id"> O</span><span class="gallina-kwd"> else</span><span class="id"> F</span><span class="id"> n</span><span class="id"> `\`</span><span class="id"> F</span><span class="id"> n'</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seqDU_seqD</span><span class="id"> F</span><span class="id"> :</span><span class="id"> nondecreasing_seq</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> seqDU</span><span class="id"> F</span><span class="id"> =</span><span class="id"> seqD</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ndF;</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> -[|n]</span><span class="id"> /=;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /seqDU</span><span class="id"> big_ord0</span><span class="id"> setD0</span>.<br/>
<span class="id">rewrite</span><span class="id"> /seqDU</span><span class="id"> big_ord_recr</span><span class="id"> /=</span><span class="id"> setUC;</span><span class="id"> congr</span> (_<span class="id"> `\`</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> apply/setUidPl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -bigcup_mkord</span><span class="id"> =&gt;</span><span class="id"> +</span><span class="id"> [k</span><span class="id"> /=</span><span class="id"> kn];</span><span class="id"> exact/subsetPset/ndF/ltnW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> trivIset_seqD</span><span class="id"> F</span><span class="id"> :</span><span class="id"> nondecreasing_seq</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> trivIset</span><span class="id"> setT</span> (<span class="id">seqD</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ndF;</span><span class="id"> rewrite</span><span class="id"> -seqDU_seqD</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> trivIset_seqDU</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bigsetU_seqD</span><span class="id"> F</span><span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\big[setU/set0]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> F</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \big[setU/set0]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> seqD</span><span class="id"> F</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> [|n];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> 2!big_ord0</span>.<br/>
<span class="id">elim:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> [|n</span><span class="id"> ih];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> !big_ord_recl</span><span class="id"> !big_ord0</span>.<br/>
<span class="id">rewrite</span><span class="id"> big_ord_recr</span><span class="id"> [in</span><span class="id"> RHS]big_ord_recr</span><span class="id"> /=</span><span class="id"> -{}ih</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> [?|?];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> left</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [?|?]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">F</span><span class="id"> n</span><span class="id"> x</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> right</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> left;</span><span class="id"> rewrite</span><span class="id"> big_ord_recr</span><span class="id"> /=;</span><span class="id"> right</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> [?|[?</span><span class="id"> ?]];</span><span class="id"> [left</span><span class="id"> |</span><span class="id"> right]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> setU_seqD</span><span class="id"> F</span><span class="id"> :</span><span class="id"> nondecreasing_seq</span><span class="id"> F</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> F</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> =</span><span class="id"> F</span><span class="id"> n</span><span class="id"> `|`</span><span class="id"> seqD</span><span class="id"> F</span><span class="id"> n</span>.<span class="id">+1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ndF</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /seqD</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> have</span><span class="id"> [?|?]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">F</span><span class="id"> n</span><span class="id"> x</span>)<span class="id">;</span><span class="id"> [left</span><span class="id"> |</span><span class="id"> right]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> -[|[]//];</span><span class="id"> move:</span><span class="id"> x;</span><span class="id"> exact/subsetPset/ndF</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_bigsetU_seqD</span><span class="id"> F</span><span class="id"> n</span><span class="id"> :</span><span class="id"> nondecreasing_seq</span><span class="id"> F</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\big[setU/set0]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> seqD</span><span class="id"> F</span><span class="id"> i</span><span class="id"> =</span><span class="id"> F</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ndF;</span><span class="id"> elim:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> [|n</span><span class="id"> ih];</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> big_ord_recl</span><span class="id"> big_ord0</span><span class="id"> setU0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> big_ord_recl</span><span class="id"> big_ord0;</span><span class="id"> left</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> big_ord_recr</span><span class="id"> /=</span><span class="id"> ih</span><span class="id"> =&gt;</span><span class="id"> -[|[]//];</span><span class="id"> move:</span><span class="id"> x;</span><span class="id"> exact/subsetPset/ndF</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span> (<span class="id">setU_seqD</span><span class="id"> ndF</span>)<span class="id"> =&gt;</span><span class="id"> -[|/=</span><span class="id"> [Fn1x</span><span class="id"> Fnx]]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> big_ord_recr</span><span class="id"> /=</span><span class="id"> -ih</span><span class="id"> =&gt;</span><span class="id"> Fnx;</span><span class="id"> left</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> big_ord_recr</span><span class="id"> /=;</span><span class="id"> right</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eq_bigcup_seqD</span><span class="id"> F</span><span class="id"> :</span><span class="id"> \bigcup_n</span><span class="id"> seqD</span><span class="id"> F</span><span class="id"> n</span><span class="id"> =</span><span class="id"> \bigcup_n</span><span class="id"> F</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [x</span><span class="id"> []|x</span><span class="id"> []]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> elim=&gt;</span><span class="id"> [_</span><span class="id"> /=</span><span class="id"> F0x|n</span><span class="id"> ih</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> [Fn1x</span><span class="id"> Fnx]];</span><span class="id"> [exists</span><span class="id"> O</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<span class="id">+1]</span>.<br/>
<span class="id">elim=&gt;</span><span class="id"> [_</span><span class="id"> F0x|n</span><span class="id"> ih</span><span class="id"> _</span><span class="id"> Fn1x];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> O</span>.<br/>
<span class="id">have</span><span class="id"> [|Fnx]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">F</span><span class="id"> n</span><span class="id"> x</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<span class="id">+1</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(<span class="id">ih</span><span class="id"> I</span>)<span class="id">[m</span><span class="id"> _</span><span class="id"> Fmx];</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eq_bigcup_seqD_bigsetU</span><span class="id"> F</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\bigcup_n</span> (<span class="id">seqD</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \big[setU/set0]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> F</span><span class="id"> i</span>)<span class="id"> n</span>)<span class="id"> =</span><span class="id"> \bigcup_n</span><span class="id"> F</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span> (<span class="id">eq_bigcup_seqD</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \big[setU/set0]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> F</span><span class="id"> i</span>)).<br/>
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [t</span><span class="id"> [i</span><span class="id"> _]|t</span><span class="id"> [i</span><span class="id"> _</span><span class="id"> Fit]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -bigcup_seq_cond</span><span class="id"> =&gt;</span><span class="id"> -[/=</span><span class="id"> j</span><span class="id"> _</span><span class="id"> Fjt];</span><span class="gallina-kwd"> exists</span><span class="id"> j</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> big_ord_recr</span><span class="id"> /=;</span><span class="id"> right</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bigcup_bigsetU_bigcup</span><span class="id"> F</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\bigcup_k</span><span class="id"> \big[setU/set0]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> k</span>.<span class="id">+1</span>)<span class="id"> F</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \bigcup_k</span><span class="id"> F</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/seteqP;</span><span class="id"> split=&gt;</span><span class="id"> [x</span><span class="id"> [i</span><span class="id"> _]|x</span><span class="id"> [i</span><span class="id"> _</span><span class="id"> Fix]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -bigcup_mkord</span><span class="id"> =&gt;</span><span class="id"> -[j</span><span class="id"> _</span><span class="id"> Fjx];</span><span class="gallina-kwd"> exists</span><span class="id"> j</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> big_ord_recr/=;</span><span class="id"> right</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> seqD</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 1.2.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `nondecreasing_bigsetU_seqD`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> eq_bigsetU_seqD</span><span class="id"> :=</span><span class="id"> nondecreasing_bigsetU_seqD</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<div class="doc">Convergence of patched sequences </div>
<br/>
<span class="vernacular">Section</span><span class="id"> sequences_patched</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> NatShift</span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span class="id">N</span><span class="id"> :</span><span class="id"> nat</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> ptopologicalType</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">u</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)  (<span class="id">l</span><span class="id"> :</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_restrict</span><span class="id"> f</span><span class="id"> u_</span><span class="id"> l</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">[sequence</span><span class="gallina-kwd"> if</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> N</span>)<span class="id">%N</span><span class="gallina-kwd"> then</span><span class="id"> f</span><span class="id"> n</span><span class="gallina-kwd"> else</span><span class="id"> u_</span><span class="id"> n]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>)<span class="id"> =</span><br/>
&nbsp;&nbsp;(<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> propeqE;</span><span class="id"> split;</span><span class="id"> apply:</span><span class="id"> cvg_trans;</span><span class="id"> apply:</span><span class="id"> near_eq_cvg;</span><br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> [move=&gt;</span><span class="id"> /=;</span><span class="id"> case:</span><span class="id"> ifP</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ltn_geF//]</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_restrict</span><span class="id"> f</span><span class="id"> u_</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> [sequence</span><span class="gallina-kwd"> if</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> N</span>)<span class="id">%nat</span><span class="gallina-kwd"> then</span><span class="id"> f</span><span class="id"> n</span><span class="gallina-kwd"> else</span><span class="id"> u_</span><span class="id"> n]_n</span><span class="id"> =</span><span class="id"> cvgn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split;</span><br/>
&nbsp;&nbsp;<span class="id">[rewrite</span><span class="id"> cvg_restrict|rewrite</span><span class="id"> -</span>(<span class="id">cvg_restrict</span><span class="id"> f</span>)<span class="id">]</span><span class="id"> =&gt;</span><span class="id"> /cvgP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_centern</span><span class="id"> u_</span><span class="id"> l</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">[sequence</span><span class="id"> u_</span> (<span class="id">n</span><span class="id"> -</span><span class="id"> N</span>)<span class="id">%N]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>)<span class="id"> =</span> (<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> propeqE;</span><span class="id"> split;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> cvg_comp;</span><span class="id"> apply:</span><span class="id"> cvg_subnr</span>.<br/>
<span class="id">gen</span><span class="id"> have</span><span class="id"> cD</span><span class="id"> :</span><span class="id"> u_</span><span class="id"> l</span><span class="id"> /</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> u_</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> N</span>)<span class="id">%N</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvg_comp;</span><span class="id"> apply:</span><span class="id"> cvg_addnr</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /cD</span><span class="id"> /=;</span><span class="id"> under</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> @</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> l]funext</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> addnK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_shiftn</span><span class="id"> u_</span><span class="id"> l</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">[sequence</span><span class="id"> u_</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> N</span>)<span class="id">%N]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>)<span class="id"> =</span> (<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> propeqE;</span><span class="id"> split;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> cvg_comp;</span><span class="id"> apply:</span><span class="id"> cvg_addnr</span>.<br/>
<span class="id">rewrite</span><span class="id"> -[X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> _]cvg_centern;</span><span class="id"> apply:</span><span class="id"> cvg_trans</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> near_eq_cvg;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> subnK;</span><span class="gallina-kwd"> exists</span><span class="id"> N</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> NatShift</span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> ptopologicalType</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_shiftS</span><span class="id"> u_</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">[sequence</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>)<span class="id"> =</span> (<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> [sequence</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1]_n</span><span class="id"> =</span><span class="id"> [sequence</span><span class="id"> u_</span>(<span class="id">n</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">%N]_n</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvg_shiftn</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n/=;</span><span class="id"> rewrite</span><span class="id"> addn1</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> sequences_patched</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> sequences_R_lemmas_realFieldType</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realFieldType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lt_lim</span><span class="id"> u</span> (<span class="id">M</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> nondecreasing_seq</span><span class="id"> u</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> M</span><span class="id"> &lt;</span><span class="id"> limn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> M</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ndu</span><span class="id"> cu</span><span class="id"> Ml;</span><span class="id"> have</span><span class="id"> [[n</span><span class="id"> Mun]|/forallNP</span><span class="id"> Mu]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="gallina-kwd">exists</span><span class="id"> n,</span><span class="id"> M</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>).<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> m;</span><span class="id"> suff</span><span class="id"> :</span><span class="id"> u</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> m</span><span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> le_trans</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> m;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> p</span><span class="id"> q;</span><span class="id"> apply/ndu/ltnW</span>.<br/>
<span class="id">have</span><span class="id"> {}Mu</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> M</span><span class="id"> &gt;</span><span class="id"> u</span><span class="id"> x</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> ltNge;</span><span class="id"> apply/negP</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> limn</span><span class="id"> u</span><span class="id"> &lt;=</span><span class="id"> M</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> limr_le</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> near=&gt;</span><span class="id"> m;</span><span class="id"> apply/ltW/Mu</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/</span>(<span class="id">lt_le_trans</span><span class="id"> Ml</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nonincreasing_cvgn_ge</span><span class="id"> u_</span><span class="id"> :</span><span class="id"> nonincreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u_</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> limn</span><span class="id"> u_</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> du</span><span class="id"> ul</span><span class="id"> p;</span><span class="id"> rewrite</span><span class="id"> leNgt;</span><span class="id"> apply/negP</span><span class="id"> =&gt;</span><span class="id"> up0</span>.<br/>
<span class="id">move/cvgrPdist_lt</span><span class="id"> :</span><span class="id"> ul</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> `|u_</span><span class="id"> p</span><span class="id"> -</span><span class="id"> limn</span><span class="id"> u_|%R</span>).<br/>
<span class="id">rewrite</span><span class="id"> {1}ltr0_norm</span><span class="id"> ?subr_lt0</span><span class="id"> //</span><span class="id"> opprB</span><span class="id"> subr_gt0</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> up0</span>)<span class="id"> ul</span>.<br/>
<span class="id">near</span><span class="id"> \oo</span><span class="id"> =&gt;</span><span class="id"> N</span>.<br/>
<span class="id">have</span><span class="id"> /du</span><span class="id"> uNp</span><span class="id"> :</span> (<span class="id">p</span><span class="id"> &lt;=</span><span class="id"> N</span>)<span class="id">%nat</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> N;</span><span class="id"> rewrite</span><span class="id"> nearE;</span><span class="gallina-kwd"> exists</span><span class="id"> p</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> `|limn</span><span class="id"> u_</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> N|</span><span class="id"> &gt;=</span><span class="id"> `|u_</span><span class="id"> p</span><span class="id"> -</span><span class="id"> limn</span><span class="id"> u_|%R</span>.<br/>
&nbsp;<span class="id">rewrite</span><span class="id"> ltr0_norm</span><span class="id"> //</span><span class="id"> ?subr_lt0</span><span class="id"> //</span><span class="id"> opprB</span><span class="id"> distrC</span>.<br/>
&nbsp;<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">limn</span><span class="id"> u_</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> N</span>))<span class="id"> //</span><span class="id"> ?lerB</span><span class="id"> //</span>.<br/>
&nbsp;<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> `|</span><span class="id"> _</span><span class="id"> |</span><span class="id"> =</span><span class="id"> `|u_</span><span class="id"> N</span><span class="id"> -</span><span class="id"> limn</span><span class="id"> u_|%R</span>)<span class="id"> //</span><span class="id"> ler0_norm</span><span class="id"> //</span><span class="id"> ?opprB</span><span class="id"> //</span>.<br/>
&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> subr_le0</span> (<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">ltW</span><span class="id"> up0</span>)).<br/>
<span class="id">rewrite</span><span class="id"> leNgt</span><span class="id"> =&gt;</span><span class="id"> /negP;</span><span class="id"> apply;</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> N</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_cvgn_le</span><span class="id"> u_</span><span class="id"> :</span><span class="id"> nondecreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u_</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> limn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> iu</span><span class="id"> cu</span><span class="id"> n;</span><span class="id"> move:</span> (<span class="id">@nonincreasing_cvgn_ge</span> (<span class="id">-</span><span class="id"> u_</span>)).<br/>
<span class="id">rewrite</span><span class="id"> -nondecreasing_opp</span><span class="id"> opprK</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> iu</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> is_cvgNE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> cu</span><span class="id"> n</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> limN</span><span class="id"> //</span><span class="id"> lerNl</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_has_ub</span><span class="id"> u_</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span><span class="id"> [set</span><span class="id"> `|u_</span><span class="id"> n|</span><span class="id"> |</span><span class="id"> n</span><span class="gallina-kwd"> in</span><span class="id"> setT]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvg_seq_bounded/pinfty_ex_gt0[M</span><span class="id"> M_gt0</span><span class="id"> /=</span><span class="id"> uM]</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> M;</span><span class="id"> apply/ubP</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> -[n</span><span class="id"> _</span><span class="id"> &lt;-{x}];</span><span class="id"> exact:</span><span class="id"> uM</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_has_sup</span><span class="id"> u_</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> has_sup</span> (<span class="id">u_</span><span class="id"> @`</span><span class="id"> setT</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move/cvg_has_ub;</span><span class="id"> rewrite</span><span class="id"> -/</span>(_<span class="id"> @`</span><span class="id"> _</span>)<span class="id"> -</span>(<span class="id">image_comp</span><span class="id"> u_</span><span class="id"> normr</span><span class="id"> setT</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /has_ub_image_norm</span><span class="id"> uM;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span> (<span class="id">u_</span><span class="id"> 0%N</span>)<span class="id">,</span><span class="id"> 0%N</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_has_inf</span><span class="id"> u_</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> has_inf</span> (<span class="id">u_</span><span class="id"> @`</span><span class="id"> setT</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move/is_cvgN/cvg_has_sup;</span><span class="id"> rewrite</span><span class="id"> -has_inf_supN</span><span class="id"> image_comp</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvgPpinfty_lt</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo%R</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span> (<span class="id">A</span><span class="id"> &lt;</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id">%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgryPgt</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgryPgt`, and generalized to any proper filter&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvgPpinfty_lt</span><span class="id"> :=</span><span class="id"> __deprecated__cvgPpinfty_lt</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvgPninfty_lt</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo%R</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span> (<span class="id">A</span><span class="id"> &gt;</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id">%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgrNyPlt</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgrNyPlt`, and generalized to any proper filter&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvgPninfty_lt</span><span class="id"> :=</span><span class="id"> __deprecated__cvgPninfty_lt</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvgPpinfty_near</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo%R</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span> (<span class="id">A</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id">%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgryPgey</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgryPgey`, and generalized to any proper filter&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvgPpinfty_near</span><span class="id"> :=</span><span class="id"> __deprecated__cvgPpinfty_near</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvgPninfty_near</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo%R</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span> (<span class="id">A</span><span class="id"> &gt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id">%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgrNyPleNy</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgrNyPleNy`, and generalized to any proper filter&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvgPninfty_near</span><span class="id"> :=</span><span class="id"> __deprecated__cvgPninfty_near</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvgPpinfty_lt_near</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo%R</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span> (<span class="id">A</span><span class="id"> &lt;</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id">%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgryPgty</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgryPgty`, and generalized to any proper filter&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvgPpinfty_lt_near</span><span class="id"> :=</span><span class="id"> __deprecated__cvgPpinfty_lt_near</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvgPninfty_lt_near</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo%R</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span> (<span class="id">A</span><span class="id"> &gt;</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id">%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgrNyPltNy</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgrNyPltNy`, and generalized to any proper filter&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvgPninfty_lt_near</span><span class="id"> :=</span><span class="id"> __deprecated__cvgPninfty_lt_near</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">End</span><span class="id"> sequences_R_lemmas_realFieldType</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `nonincreasing_cvgn_ge`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nonincreasing_cvg_ge</span><span class="id"> :=</span><span class="id"> nonincreasing_cvgn_ge</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `nondecreasing_cvgn_le`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nondecreasing_cvg_le</span><span class="id"> :=</span><span class="id"> nondecreasing_cvgn_le</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__invr_cvg0</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u</span><span class="id"> :</span><span class="id"> R^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> u</span><span class="id"> i</span>)<span class="id"> -&gt;</span> ((<span class="id">u</span><span class="id"> i</span>)<span class="id">^-1</span><span class="id"> @[i</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> gtr0_cvgV0//;</span><span class="id"> apply:</span><span class="id"> nearW</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `gtr0_cvgV0` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> invr_cvg0</span><span class="id"> :=</span><span class="id"> __deprecated__invr_cvg0</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__invr_cvg_pinfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u</span><span class="id"> :</span><span class="id"> R^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> u</span><span class="id"> i</span>)<span class="id"> -&gt;</span> ((<span class="id">u</span><span class="id"> i</span>)<span class="id">^-1</span><span class="id"> @[i</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> +oo</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">u</span><span class="id"> @</span><span class="id"> \oo--&gt;</span><span class="id"> 0</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> cvgrVy//;</span><span class="id"> apply:</span><span class="id"> nearW</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgrVy` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> invr_cvg_pinfty</span><span class="id"> :=</span><span class="id"> __deprecated__invr_cvg_pinfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> partial_sum</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> zmodType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> series</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k]_n</span>.<br/>
<span class="vernacular">Definition</span><span class="id"> telescope</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> n]_n</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesEnat</span><span class="id"> :</span><span class="id"> series</span><span class="id"> =</span><span class="id"> [sequence</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k]_n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> []</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesEord</span><span class="id"> :</span><span class="id"> series</span><span class="id"> =</span><span class="id"> [sequence</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k]_n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /series/=</span><span class="id"> big_mkord</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesSr</span><span class="id"> n</span><span class="id"> :</span><span class="id"> series</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> =</span><span class="id"> series</span><span class="id"> n</span><span class="id"> +</span><span class="id"> u_</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> !seriesEord/=</span><span class="id"> big_ord_recr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesS</span><span class="id"> n</span><span class="id"> :</span><span class="id"> series</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> =</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> +</span><span class="id"> series</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> addrC</span><span class="id"> seriesSr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesSB</span> (<span class="id">n</span><span class="id"> :</span><span class="id"> nat</span>)<span class="id"> :</span><span class="id"> series</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> series</span><span class="id"> n</span><span class="id"> =</span><span class="id"> u_</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> seriesS</span><span class="id"> addrK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> series_addn</span><span class="id"> m</span><span class="id"> n</span><span class="id"> :</span><span class="id"> series</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> m</span>)<span class="id">%N</span><span class="id"> =</span><span class="id"> series</span><span class="id"> m</span><span class="id"> +</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> +</span><span class="id"> m</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> seriesEnat/=</span><span class="id"> -big_cat_nat//</span><span class="id"> leq_addl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_series_geq</span><span class="id"> m</span><span class="id"> n</span><span class="id"> :</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">series</span><span class="id"> n</span><span class="id"> -</span><span class="id"> series</span><span class="id"> m</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /subnK&lt;-;</span><span class="id"> rewrite</span><span class="id"> series_addn</span><span class="id"> addrC</span><span class="id"> addKr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_series</span><span class="id"> m</span><span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">series</span><span class="id"> n</span><span class="id"> -</span><span class="id"> series</span><span class="id"> m</span><span class="id"> =</span><span class="gallina-kwd"> if</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> then</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span><span class="id"> -</span><span class="id"> \sum_</span>(<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> m</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> [mn|/ltnW</span><span class="id"> mn]</span><span class="id"> :=</span><span class="id"> leqP</span><span class="id"> m</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> -sub_series_geq//</span><span class="id"> opprB</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_double_series</span><span class="id"> n</span><span class="id"> :</span><span class="id"> series</span><span class="id"> n</span>.<span class="id">*2</span><span class="id"> -</span><span class="id"> series</span><span class="id"> n</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">*2</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> sub_series_geq//</span><span class="id"> -addnn</span><span class="id"> leq_addl</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> partial_sum</span>.<br/>
<br/>
<span class="vernacular">Arguments</span><span class="id"> series</span><span class="id"> {V}</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> :</span><span class="id"> simpl</span><span class="id"> never</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> telescope</span><span class="id"> {V}</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> :</span><span class="id"> simpl</span><span class="id"> never</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;[ 'series' E ]_ n&quot;</span><span class="id"> :=</span> (<span class="id">series</span><span class="id"> [sequence</span><span class="id"> E]_n</span>)<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesN</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> zmodType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> :</span><span class="id"> series</span> (<span class="id">-</span><span class="id"> f</span>)<span class="id"> =</span><span class="id"> -</span><span class="id"> series</span><span class="id"> f</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /series</span><span class="id"> /=</span><span class="id"> sumrN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesD</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> zmodType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> :</span><span class="id"> series</span> (<span class="id">f</span><span class="id"> +</span><span class="id"> g</span>)<span class="id"> =</span><span class="id"> series</span><span class="id"> f</span><span class="id"> +</span><span class="id"> series</span><span class="id"> g</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /series</span><span class="id"> /=</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> big_split</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesZ</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> ringType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> lmodType</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> k</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="id">k</span><span class="id"> *:</span><span class="id"> f</span>)<span class="id"> =</span><span class="id"> k</span><span class="id"> *:</span><span class="id"> series</span><span class="id"> f</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /series</span><span class="id"> /=</span><span class="id"> -scaler_sumr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> partial_sum_numFieldType</span>.<br/>
<span class="vernacular">Variables</span><span class="id"> V</span><span class="id"> :</span><span class="id"> numFieldType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_seriesN</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">series</span> (<span class="id">-</span><span class="id"> f</span>))<span class="id"> =</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> f</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> seriesN</span><span class="id"> is_cvgNE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_seriesN</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">series</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="id">series</span> (<span class="id">-</span><span class="id"> f</span>))<span class="id"> =</span><span class="id"> -</span><span class="id"> limn</span> (<span class="id">series</span><span class="id"> f</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf;</span><span class="id"> rewrite</span><span class="id"> seriesN</span><span class="id"> limN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_seriesZ</span><span class="id"> f</span><span class="id"> k</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span> (<span class="id">k</span><span class="id"> *:</span><span class="id"> f</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf;</span><span class="id"> rewrite</span><span class="id"> seriesZ;</span><span class="id"> exact:</span><span class="id"> is_cvgZr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_seriesZ</span><span class="id"> f</span><span class="id"> k</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="id">series</span> (<span class="id">k</span><span class="id"> *:</span><span class="id"> f</span>))<span class="id"> =</span><span class="id"> k</span><span class="id"> *:</span><span class="id"> limn</span> (<span class="id">series</span><span class="id"> f</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf;</span><span class="id"> rewrite</span><span class="id"> seriesZ</span><span class="id"> limZr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_seriesD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> g</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span> (<span class="id">f</span><span class="id"> +</span><span class="id"> g</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf</span><span class="id"> cg;</span><span class="id"> rewrite</span><span class="id"> seriesD;</span><span class="id"> exact:</span><span class="id"> is_cvgD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_seriesD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> g</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="id">series</span> (<span class="id">f</span><span class="id"> +</span><span class="id"> g</span>))<span class="id"> =</span><span class="id"> limn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> +</span><span class="id"> limn</span> (<span class="id">series</span><span class="id"> g</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf</span><span class="id"> cg;</span><span class="id"> rewrite</span><span class="id"> seriesD</span><span class="id"> limD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_seriesB</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> g</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span> (<span class="id">f</span><span class="id"> -</span><span class="id"> g</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf</span><span class="id"> cg;</span><span class="id"> apply:</span><span class="id"> is_cvg_seriesD;</span><span class="id"> rewrite</span><span class="id"> ?is_cvg_seriesN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_seriesB</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">series</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">series</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="id">series</span> (<span class="id">f</span><span class="id"> -</span><span class="id"> g</span>))<span class="id"> =</span><span class="id"> limn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -</span><span class="id"> limn</span> (<span class="id">series</span><span class="id"> g</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Cf</span><span class="id"> Cg;</span><span class="id"> rewrite</span><span class="id"> lim_seriesD</span><span class="id"> ?is_cvg_seriesN//</span><span class="id"> lim_seriesN</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> partial_sum_numFieldType</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_series_le</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> g</span>)<span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> f</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> &lt;=</span><span class="id"> limn</span> (<span class="id">series</span><span class="id"> g</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> cf</span><span class="id"> cg</span><span class="id"> fg;</span><span class="id"> apply:</span> (<span class="id">ler_lim</span><span class="id"> cf</span><span class="id"> cg</span>)<span class="id">;</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> ler_sum</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> telescopeK</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> zmodType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="id">telescope</span><span class="id"> u_</span>)<span class="id"> =</span><span class="id"> [sequence</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> 0%N]_n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> seriesEnat/=</span><span class="id"> telescope_sumr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> seriesK</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> zmodType</span>)<span class="id"> :</span><span class="id"> cancel</span> (<span class="id">@series</span><span class="id"> V</span>)<span class="id"> telescope</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact/funext/seriesSB</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eq_sum_telescope</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> zmodType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> n</span><span class="id"> =</span><span class="id"> u_</span><span class="id"> 0%N</span><span class="id"> +</span><span class="id"> series</span> (<span class="id">telescope</span><span class="id"> u_</span>)<span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> telescopeK/=</span><span class="id"> addrC</span><span class="id"> addrNK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> series_patched</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">N</span><span class="id"> :</span><span class="id"> nat</span>) (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">u</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)  (<span class="id">l</span><span class="id"> :</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_series_restrict</span><span class="id"> u_</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> [sequence</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k]_n</span><span class="id"> =</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> u_</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k</span>)<span class="id"> =</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="gallina-kwd"> if</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> N</span>)<span class="id">%N</span><span class="gallina-kwd"> then</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span><span class="id"> series</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> -</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> N</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> is_cvg_restrict/=</span><span class="id"> is_cvgDlE//;</span><span class="id"> apply:</span><span class="id"> is_cvg_cst</span>.<br/>
<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> case:</span><span class="id"> leqP</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ltNn;</span><span class="id"> apply:</span> (<span class="id">canRL</span> (<span class="id">addrK</span><span class="id"> _</span>)).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> seriesEnat</span><span class="id"> addrC</span><span class="id"> -big_cat_nat//</span><span class="id"> ltnW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> series_patched</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> sequences_R_lemmas</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_cvgn</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nondecreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span> (<span class="id">range</span><span class="id"> u_</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> sup</span> (<span class="id">range</span><span class="id"> u_</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> leu</span><span class="id"> u_ub;</span><span class="id"> set</span><span class="id"> M</span><span class="id"> :=</span><span class="id"> sup</span> (<span class="id">range</span><span class="id"> u_</span>).<br/>
<span class="id">have</span><span class="id"> su_</span><span class="id"> :</span><span class="id"> has_sup</span> (<span class="id">range</span><span class="id"> u_</span>)<span class="gallina-kwd"> by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span> (<span class="id">u_</span><span class="id"> 0%N</span>)<span class="id">,</span><span class="id"> 0%N</span>.<br/>
<span class="id">apply/cvgrPdist_le</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span>.<br/>
<span class="id">have</span><span class="id"> [p</span><span class="id"> Mu_p]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> p,</span><span class="id"> M</span><span class="id"> -</span><span class="id"> e%:num</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> p</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [_</span><span class="id"> -[p</span><span class="id"> _]</span><span class="id"> &lt;-</span><span class="id"> /ltW</span><span class="id"> Mu_p]</span><span class="id"> :=</span><span class="id"> sup_adherent</span> (<span class="id">gt0</span><span class="id"> e</span>)<span class="id"> su_</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> p;</span><span class="id"> rewrite</span><span class="id"> Mu_p</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> pn</span><span class="id"> :</span> (<span class="id">p</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> nbhs_infty_ge</span>.<br/>
<span class="id">rewrite</span><span class="id"> ler_distlC</span> (<span class="id">le_trans</span><span class="id"> Mu_p</span> (<span class="id">leu</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//=</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> M</span>)<span class="id"> ?lerDl//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /ubP</span><span class="id"> :=</span><span class="id"> sup_upper_bound</span><span class="id"> su_;</span><span class="id"> apply;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_is_cvgn</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span> (<span class="id">range</span><span class="id"> u_</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> u_nd</span><span class="id"> u_ub;</span><span class="id"> apply:</span><span class="id"> cvgP;</span><span class="id"> exact:</span><span class="id"> nondecreasing_cvgn</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_dvgn_lt</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> cvgn</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> nu</span><span class="id"> du;</span><span class="id"> apply:</span><span class="id"> contrapT</span><span class="id"> =&gt;</span><span class="id"> /cvgryPge/existsNP[l</span><span class="id"> lu];</span><span class="id"> apply:</span><span class="id"> du</span>.<br/>
<span class="id">apply:</span><span class="id"> nondecreasing_is_cvgn</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> l</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]</span>.<br/>
<span class="id">rewrite</span><span class="id"> leNgt;</span><span class="id"> apply/negP</span><span class="id"> =&gt;</span><span class="id"> lun;</span><span class="id"> apply:</span><span class="id"> lu;</span><span class="id"> near=&gt;</span><span class="id"> m</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_trans</span> (<span class="id">ltW</span><span class="id"> lun</span>))<span class="id"> //;</span><span class="id"> apply:</span><span class="id"> nu;</span><span class="id"> near:</span><span class="id"> m;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_nondecreasing_is_cvgn</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>) (<span class="id">M</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{near</span><span class="id"> \oo,</span><span class="id"> nondecreasing_seq</span><span class="id"> u_}</span><span class="id"> -&gt;</span> (<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> M</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [k</span><span class="id"> _</span><span class="id"> u_nd]</span><span class="id"> [k'</span><span class="id"> _</span><span class="id"> u_M]</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> [sequence</span><span class="id"> u_</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> maxn</span><span class="id"> k</span><span class="id"> k'</span>)<span class="id">%N]_n</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case/cvg_ex</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> l;</span><span class="id"> rewrite</span><span class="id"> cvg_shiftn</span><span class="id"> =&gt;</span><span class="id"> ul;</span><span class="id"> apply/cvg_ex;</span><span class="gallina-kwd"> exists</span><span class="id"> l</span>.<br/>
<span class="id">apply:</span><span class="id"> nondecreasing_is_cvgn;</span><span class="id"> [move=&gt;</span><span class="id"> /=</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn|exists</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> u_nd</span><span class="id"> ?leq_add2r//=</span> (<span class="id">leq_trans</span> (<span class="id">leq_maxl</span><span class="id"> _</span><span class="id"> _</span>) (<span class="id">leq_addl</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> u_M</span><span class="id"> //=</span> (<span class="id">leq_trans</span> (<span class="id">leq_maxr</span><span class="id"> _</span><span class="id"> _</span>) (<span class="id">leq_addl</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nonincreasing_cvgn</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nonincreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> has_lbound</span> (<span class="id">range</span><span class="id"> u_</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> inf</span> (<span class="id">u_</span><span class="id"> @`</span><span class="id"> setT</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -nondecreasing_opp</span><span class="id"> =&gt;</span><span class="id"> u_nd</span><span class="id"> u_lb;</span><span class="id"> rewrite</span><span class="id"> -[X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> @</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> _]</span>(<span class="id">opprK</span><span class="id"> u_</span>).<br/>
<span class="id">apply:</span><span class="id"> cvgN;</span><span class="id"> rewrite</span><span class="id"> image_comp;</span><span class="id"> apply:</span><span class="id"> nondecreasing_cvgn</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/has_lb_ubN</span><span class="id"> :</span><span class="id"> u_lb;</span><span class="id"> rewrite</span><span class="id"> image_comp</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nonincreasing_is_cvgn</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> has_lbound</span> (<span class="id">range</span><span class="id"> u_</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> u_decr</span><span class="id"> u_bnd;</span><span class="id"> apply:</span><span class="id"> cvgP;</span><span class="id"> exact:</span><span class="id"> nonincreasing_cvgn</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_nonincreasing_is_cvgn</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>) (<span class="id">m</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{near</span><span class="id"> \oo,</span><span class="id"> nonincreasing_seq</span><span class="id"> u_}</span><span class="id"> -&gt;</span> (<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> m</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_ni</span><span class="id"> u_m</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">opprK</span><span class="id"> u_</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> is_cvgN;</span><span class="id"> apply/</span>(<span class="id">@near_nondecreasing_is_cvgn</span><span class="id"> _</span> (<span class="id">-</span><span class="id"> m</span>)).<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> u_ni</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> u_x</span><span class="id"> y</span><span class="id"> xy;</span><span class="id"> rewrite</span><span class="id"> lerNl</span><span class="id"> opprK</span><span class="id"> u_x</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> u_m</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> u_x;</span><span class="id"> rewrite</span><span class="id"> lerNl</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> adjacent</span> (<span class="id">u_</span><span class="id"> v_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><span class="id"> nondecreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> nonincreasing_seq</span><span class="id"> v_</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">v_</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">[/\</span><span class="id"> limn</span><span class="id"> v_</span><span class="id"> =</span><span class="id"> limn</span><span class="id"> u_,</span><span class="id"> cvgn</span><span class="id"> u_</span><span class="id"> &amp;</span><span class="id"> cvgn</span><span class="id"> v_]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">set</span><span class="id"> w_</span><span class="id"> :=</span><span class="id"> v_</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> =&gt;</span><span class="id"> iu</span><span class="id"> dv</span><span class="id"> w0;</span><span class="id"> have</span><span class="id"> vu</span><span class="id"> n</span><span class="id"> :</span><span class="id"> v_</span><span class="id"> n</span><span class="id"> &gt;=</span><span class="id"> u_</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> :</span><span class="id"> limn</span><span class="id"> w_</span><span class="id"> &lt;=</span><span class="id"> w_</span><span class="id"> n</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">cvg_lim</span><span class="id"> _</span><span class="id"> w0</span>)<span class="id">//</span><span class="id"> subr_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">nonincreasing_cvgn_ge</span><span class="id"> _</span> (<span class="id">cvgP</span><span class="id"> _</span><span class="id"> w0</span>))<span class="id"> =&gt;</span><span class="id"> m</span><span class="id"> p</span><span class="id"> mp</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> lerB;</span><span class="id"> rewrite</span><span class="id"> ?iu</span><span class="id"> ?dv</span>.<br/>
<span class="id">have</span><span class="id"> cu</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u_</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> nondecreasing_is_cvgn</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span> (<span class="id">v_</span><span class="id"> 0%N</span>)<span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_trans</span> (<span class="id">vu</span><span class="id"> _</span>))<span class="id"> //</span><span class="id"> dv</span>.<br/>
<span class="id">have</span><span class="id"> cv</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> v_</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> nonincreasing_is_cvgn</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span> (<span class="id">u_</span><span class="id"> 0%N</span>)<span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">vu</span><span class="id"> _</span>))<span class="id"> //</span><span class="id"> iu</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> -subr_eq0</span><span class="id"> -limB</span><span class="id"> //;</span><span class="id"> exact/eqP/cvg_lim</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> sequences_R_lemmas</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `nonincreasing_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nonincreasing_cvg</span><span class="id"> :=</span><span class="id"> nonincreasing_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `nondecreasing_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nondecreasing_cvg</span><span class="id"> :=</span><span class="id"> nondecreasing_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `nonincreasing_is_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nonincreasing_is_cvg</span><span class="id"> :=</span><span class="id"> nonincreasing_is_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `nondecreasing_is_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nondecreasing_is_cvg</span><span class="id"> :=</span><span class="id"> nondecreasing_is_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `nondecreasing_dvgn_lt`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nondecreasing_dvg_lt</span><span class="id"> :=</span><span class="id"> nondecreasing_dvgn_lt</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `near_nondecreasing_is_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> near_nondecreasing_is_cvg</span><span class="id"> :=</span><span class="id"> near_nondecreasing_is_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `near_nonincreasing_is_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> near_nonincreasing_is_cvg</span><span class="id"> :=</span><span class="id"> near_nonincreasing_is_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> harmonic</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> fieldType}</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> n</span>.<span class="id">+1%:R^-1]_n</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> harmonic</span><span class="id"> {R}</span><span class="id"> n</span><span class="id"> /</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> harmonic_gt0</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> i</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> harmonic</span><span class="id"> i</span><span class="id"> :&gt;</span><span class="id"> R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /=</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> harmonic_ge0</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> i</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> harmonic</span><span class="id"> i</span><span class="id"> :&gt;</span><span class="id"> R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact/ltW/harmonic_gt0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_harmonic</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> archiFieldType}</span><span class="id"> :</span><span class="id"> @harmonic</span><span class="id"> R</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/cvgrPdist_le</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near=&gt;</span><span class="id"> i</span>.<br/>
<span class="id">rewrite</span><span class="id"> distrC</span><span class="id"> subr0</span><span class="id"> ger0_norm//=</span><span class="id"> -lef_pV2</span><span class="id"> ?qualifE//=</span><span class="id"> invrK</span>.<br/>
<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ltW</span> (<span class="id">archi_boundP</span><span class="id"> _</span>)))<span class="id">//</span><span class="id"> ler_nat</span><span class="id"> -add1n</span><span class="id"> -leq_subLR</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> i;</span><span class="id"> apply:</span><span class="id"> nbhs_infty_ge</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvge_harmonic</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> archiFieldType}</span><span class="id"> :</span> (<span class="id">EFin</span><span class="id"> \o</span><span class="id"> @harmonic</span><span class="id"> R</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> cvg_EFin;</span><span class="id"> [exact:</span><span class="id"> nearW</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> cvg_harmonic]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dvg_harmonic</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>)<span class="id"> :</span><span class="id"> ~</span><span class="id"> cvgn</span> (<span class="id">series</span> (<span class="id">@harmonic</span><span class="id"> R</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> ge_half</span><span class="id"> n</span><span class="id"> :</span> (<span class="id">0</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> 2^-1</span><span class="id"> &lt;=</span><span class="id"> \sum_</span>(<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">*2</span>)<span class="id"> harmonic</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> n</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">\sum_</span>(<span class="id">n</span>.<span class="id">+1</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>.<span class="id">*2</span>)<span class="id"> n</span>.<span class="id">+1</span>.<span class="id">*2%:R^-1</span>))<span class="id"> //=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> sumr_const_nat</span><span class="id"> -addnn</span><span class="id"> addnK</span><span class="id"> addnn</span><span class="id"> -mul2n</span><span class="id"> natrM</span><span class="id"> invfM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[_</span><span class="id"> *+</span><span class="id"> n</span>.<span class="id">+1]mulr_natr</span><span class="id"> divfK</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ler_sum_nat</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> /andP[?</span><span class="id"> ?];</span><span class="id"> rewrite</span><span class="id"> lef_pV2</span><span class="id"> ?qualifE/=</span><span class="id"> ?ler_nat</span>.<br/>
<span class="id">move/cvg_cauchy/cauchy_ballP</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> [gt0</span><span class="id"> of</span><span class="id"> 2^-1</span><span class="id"> :</span><span class="id"> R]</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> !near_map2</span>.<br/>
<span class="id">rewrite</span><span class="id"> -ball_normE</span><span class="id"> =&gt;</span><span class="id"> /nearP_dep</span><span class="id"> hcvg;</span><span class="id"> near</span><span class="id"> \oo</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> near</span><span class="id"> \oo</span><span class="id"> =&gt;</span><span class="id"> m</span>.<br/>
<span class="id">have:</span><span class="id"> `|series</span><span class="id"> harmonic</span><span class="id"> n</span><span class="id"> -</span><span class="id"> series</span><span class="id"> harmonic</span><span class="id"> m|</span><span class="id"> &lt;</span><span class="id"> 2^-1</span><span class="id"> :&gt;</span><span class="id"> R</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> m;</span><span class="id"> near:</span><span class="id"> n</span>.<br/>
<span class="id">rewrite</span><span class="id"> le_gtF//</span><span class="id"> distrC</span><span class="id"> -[X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> -</span><span class="id"> _]</span>(<span class="id">addrNK</span> (<span class="id">series</span><span class="id"> harmonic</span><span class="id"> n</span>.<span class="id">*2</span>)).<br/>
<span class="id">rewrite</span><span class="id"> sub_series_geq;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> m;</span><span class="id"> apply:</span><span class="id"> nbhs_infty_ge</span>.<br/>
<span class="id">rewrite</span><span class="id"> -addrA</span><span class="id"> sub_series_geq</span><span class="id"> -addnn</span><span class="id"> ?leq_addr//</span><span class="id"> addnn</span>.<br/>
<span class="id">have</span><span class="id"> sh_ge0</span><span class="id"> i</span><span class="id"> j</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> j</span>)<span class="id"> harmonic</span><span class="id"> k</span><span class="id"> :&gt;</span><span class="id"> R</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ?sumr_ge0//;</span><span class="id"> move=&gt;</span><span class="id"> k</span><span class="id"> _;</span><span class="id"> apply:</span><span class="id"> harmonic_ge0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ger0_norm//</span><span class="id"> ler_wpDl//</span><span class="id"> ge_half//;</span><span class="id"> near:</span><span class="id"> n</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> arithmetic_mean</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">[sequence</span><span class="id"> n</span>.<span class="id">+1%:R^-1</span><span class="id"> *</span> (<span class="id">series</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">]_n</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> harmonic_mean</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span><span class="id"> v</span><span class="id"> :=</span><span class="id"> [sequence</span> (<span class="id">u_</span><span class="id"> n</span>)<span class="id">^-1]_n</span><span class="gallina-kwd"> in</span><br/>
&nbsp;&nbsp;<span class="id">[sequence</span> (<span class="id">n</span>.<span class="id">+1%:R</span><span class="id"> /</span><span class="id"> series</span><span class="id"> v</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">]_n</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> root_mean_square</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">let</span><span class="id"> v_</span><span class="id"> :=</span><span class="id"> [sequence</span> (<span class="id">u_</span><span class="id"> k</span>)<span class="id">^+2]_k</span><span class="gallina-kwd"> in</span><br/>
&nbsp;&nbsp;<span class="id">[sequence</span><span class="id"> Num</span>.<span class="id">sqrt</span> (<span class="id">n</span>.<span class="id">+1%:R^-1</span><span class="id"> *</span><span class="id"> series</span><span class="id"> v_</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">]_n</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cesaro</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> archiFieldType</span>.<br/>
<br/>
<span class="vernacular">Theorem</span><span class="id"> cesaro</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>) (<span class="id">l</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">arithmetic_mean</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u0_cvg;</span><span class="id"> have</span><span class="id"> ssplit</span><span class="id"> v_</span><span class="id"> m</span><span class="id"> n</span><span class="id"> :</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> `|n%:R^-1</span><span class="id"> *</span><span class="id"> series</span><span class="id"> v_</span><span class="id"> n|</span><span class="id"> &lt;=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">n%:R^-1</span><span class="id"> *</span><span class="id"> `|series</span><span class="id"> v_</span><span class="id"> m|</span><span class="id"> +</span><span class="id"> n%:R^-1</span><span class="id"> *</span><span class="id"> `|\sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> v_</span><span class="id"> i|</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /subnK&lt;-;</span><span class="id"> rewrite</span><span class="id"> series_addn</span><span class="id"> mulrDr</span> (<span class="id">le_trans</span> (<span class="id">ler_normD</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> !normrM</span><span class="id"> ger0_norm</span>.<br/>
<span class="id">apply/cvgrPdist_lt=&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near</span><span class="id"> \oo</span><span class="id"> =&gt;</span><span class="id"> m;</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
<span class="id">have</span><span class="id"> {}/ssplit</span><span class="id"> -/</span>(_<span class="id"> _</span><span class="id"> [sequence</span><span class="id"> l</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> n]_n</span>)<span class="id"> :</span> (<span class="id">m</span>.<span class="id">+1</span><span class="id"> &lt;=</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%nat</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
<span class="id">rewrite</span><span class="id"> !seriesEnat</span><span class="id"> /=</span><span class="id"> big_split/=</span>.<br/>
<span class="id">rewrite</span><span class="id"> sumrN</span><span class="id"> mulrBr</span><span class="id"> sumr_const_nat</span><span class="id"> -</span>(<span class="id">mulr_natl</span><span class="id"> l</span>)<span class="id"> mulKf//</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /le_lt_trans-&gt;//;</span><span class="id"> rewrite</span><span class="id"> [e%:num]splitr</span><span class="id"> ltrD//</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [-&gt;|neq0]</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> m</span>.<span class="id">+1</span>) (<span class="id">l</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> k</span>))<span class="id"> 0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> normr0</span><span class="id"> mulr0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -ltr_pdivlMr</span><span class="id"> ?normr_gt0//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -ltf_pV2</span><span class="id"> ?qualifE//=</span><span class="id"> ?mulr_gt0</span><span class="id"> ?invr_gt0</span><span class="id"> ?normr_gt0//</span><span class="id"> invrK</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id">archi_boundP</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> ler_nat</span><span class="id"> leqW//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> nbhs_infty_ge</span>.<br/>
<span class="id">rewrite</span><span class="id"> ltr_pdivrMl</span><span class="id"> ?ltr0n</span><span class="id"> //</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_norm_sum</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> //</span>.<br/>
<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">@ler_sum_nat</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> e%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id"> _</span>))<span class="id">//;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> sumr_const_nat</span><span class="id"> mulr_natl</span><span class="id"> ltr_pMn2l//</span><span class="id"> ltn_subrL</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> i</span><span class="id"> /andP[mi</span><span class="id"> _];</span><span class="id"> move:</span><span class="id"> i</span><span class="id"> mi;</span><span class="id"> near:</span><span class="id"> m</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> `|l</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> x|</span><span class="id"> &lt;</span><span class="id"> e%:num</span><span class="id"> /</span><span class="id"> 2</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/cvgrPdist_lt</span><span class="id"> :</span><span class="id"> u0_cvg;</span><span class="id"> apply</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> -[N</span><span class="id"> _</span><span class="id"> Nu];</span><span class="gallina-kwd"> exists</span><span class="id"> N</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> k</span><span class="id"> Nk</span><span class="id"> i</span><span class="id"> ki</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltW//</span><span class="id"> Nu//=</span> (<span class="id">leq_trans</span><span class="id"> Nk</span>)<span class="id">//</span><span class="id"> ltnW</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cesaro</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cesaro_converse</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> archiFieldType</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> cesaro_converse_off_by_one</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[sequence</span><span class="id"> n</span>.<span class="id">+1%:R^-1</span><span class="id"> *</span><span class="id"> series</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">[sequence</span><span class="id"> n</span>.<span class="id">+1%:R^-1</span><span class="id"> *</span><span class="id"> series</span><span class="id"> u_</span><span class="id"> n]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> H;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span>.<br/>
<span class="id">move/cvgrPdist_lt</span><span class="id"> :</span><span class="id"> H</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span> (<span class="id">gt0</span><span class="id"> e</span>))<span class="id"> -[m</span><span class="id"> _</span><span class="id"> mu]</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> /=</span>.<br/>
<span class="id">have</span><span class="id"> /andP[n0]</span><span class="id"> :</span> ((<span class="id">0</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> &amp;&amp;</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>.<span class="id">-1</span>))<span class="id">%N</span>.<br/>
&nbsp;&nbsp;<span class="id">near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<span class="id">+1</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> k</span><span class="id"> mk;</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> mk</span>)<span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">leq_add2r</span><span class="id"> 1%N</span>)<span class="id"> !addn1</span><span class="id"> prednK</span><span class="id"> //</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> mk</span>).<br/>
<span class="id">move/mu</span><span class="id"> =&gt;</span><span class="id"> {mu};</span><span class="id"> rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> /=</span><span class="id"> prednK</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span>.<br/>
<span class="id">rewrite</span><span class="id"> !normrM</span><span class="id"> ler_wpM2r</span><span class="id"> //</span><span class="id"> ger0_norm</span><span class="id"> //</span><span class="id"> ger0_norm</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> lef_pV2</span><span class="id"> //</span><span class="id"> ?ler_nat</span><span class="id"> //</span><span class="id"> posrE</span><span class="id"> //</span><span class="id"> ltr0n</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cesaro_converse</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>) (<span class="id">l</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">telescope</span><span class="id"> u_</span><span class="id"> =o_\oo</span><span class="id"> @harmonic</span><span class="id"> R</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">arithmetic_mean</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">pose</span><span class="id"> a_</span><span class="id"> :=</span><span class="id"> telescope</span><span class="id"> u_</span><span class="id"> =&gt;</span><span class="id"> a_o</span><span class="id"> u_l</span>.<br/>
<span class="id">suff</span><span class="id"> abel</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">u_</span><span class="id"> n</span><span class="id"> -</span><span class="id"> arithmetic_mean</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">1</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> k%:R</span><span class="id"> /</span><span class="id"> n</span>.<span class="id">+1%:R</span><span class="id"> *</span><span class="id"> a_</span><span class="id"> k</span>.<span class="id">-1</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> K</span><span class="id"> :</span><span class="id"> u_</span><span class="id"> -</span><span class="id"> arithmetic_mean</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">add0r</span><span class="id"> l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> u_</span><span class="id"> =</span><span class="id"> u_</span><span class="id"> -</span><span class="id"> arithmetic_mean</span><span class="id"> u_</span><span class="id"> +</span><span class="id"> arithmetic_mean</span><span class="id"> u_</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> subrK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> cvgD</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> _</span><span class="id"> -</span><span class="id"> arithmetic_mean</span><span class="id"> u_</span><span class="id"> =</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">1</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> k%:R</span><span class="id"> /</span><span class="id"> n</span>.<span class="id">+1%:R</span><span class="id"> *</span><span class="id"> a_</span><span class="id"> k</span>.<span class="id">-1</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> {abel}</span><span class="id"> /=</span> (_<span class="id"> :</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> _</span>)<span class="id"> =</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> n</span>.<span class="id">+1%:R^-1</span><span class="id"> *</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> k</span>.<span class="id">+1%:R</span><span class="id"> *</span><span class="id"> a_</span><span class="id"> k</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> big_add1</span><span class="id"> /=</span><span class="id"> /=</span><span class="id"> big_distrr</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> mulrCA</span><span class="id"> mulrA</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> {}a_o</span><span class="id"> :</span><span class="id"> [sequence</span><span class="id"> n</span>.<span class="id">+1%:R</span><span class="id"> *</span><span class="id"> telescope</span><span class="id"> u_</span><span class="id"> n]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@eqolim0</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> eventually_filterType</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> a_o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set</span><span class="id"> h</span><span class="id"> :=</span><span class="id"> 'o_\oo</span> (<span class="id">@harmonic</span><span class="id"> R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply/eqoP</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> normr1</span><span class="id"> mulr1</span><span class="id"> normrM</span><span class="id"> -ler_pdivlMl//</span><span class="id"> ?normr_gt0//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> mulrC</span><span class="id"> -normrV</span><span class="id"> ?unitfE</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">near:</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case:</span> (<span class="id">eqoP</span><span class="id"> eventually_filterType</span> (<span class="id">@harmonic</span><span class="id"> R</span>)<span class="id"> h</span>)<span class="id"> =&gt;</span><span class="id"> Hh</span><span class="id"> _;</span><span class="id"> apply</span><span class="id"> Hh</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> (<span class="id">cesaro</span><span class="id"> a_o</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /arithmetic_mean</span><span class="id"> /series</span><span class="id"> /=</span><span class="id"> -/a_</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">@cesaro_converse_off_by_one</span> (<span class="gallina-kwd">fun</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> k</span>.<span class="id">+1%:R</span><span class="id"> *</span><span class="id"> a_</span><span class="id"> k</span>)).<br/>
<span class="id">case</span><span class="id"> =&gt;</span><span class="id"> [|n]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /arithmetic_mean/=</span><span class="id"> invr1</span><span class="id"> mul1r</span><span class="id"> !seriesEnat/=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> big_nat1</span><span class="id"> subrr</span><span class="id"> big_geq</span>.<br/>
<span class="id">rewrite</span><span class="id"> /arithmetic_mean</span><span class="id"> /=</span><span class="id"> seriesEnat</span><span class="id"> /=</span><span class="id"> big_nat_recl</span><span class="id"> //=</span>.<br/>
<span class="id">under</span><span class="id"> eq_bigr</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> eq_sum_telescope</span>.<br/>
<span class="id">rewrite</span><span class="id"> big_split</span><span class="id"> /=</span><span class="id"> big_const_nat</span><span class="id"> iter_addr</span><span class="id"> addr0</span><span class="id"> addrA</span><span class="id"> -mulrS</span><span class="id"> mulrDr</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">mulr_natl</span> (<span class="id">u_</span><span class="id"> O</span>))<span class="id"> mulrA</span><span class="id"> mulVr</span><span class="id"> ?unitfE</span><span class="id"> ?pnatr_eq0</span><span class="id"> //</span><span class="id"> mul1r</span><span class="id"> opprD</span><span class="id"> addrA</span>.<br/>
<span class="id">rewrite</span><span class="id"> eq_sum_telescope</span> (<span class="id">addrC</span> (<span class="id">u_</span><span class="id"> O</span>))<span class="id"> addrK</span>.<br/>
<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> _</span><span class="id"> -</span><span class="id"> _</span><span class="id"> *</span><span class="id"> X]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> |</span> (<span class="id">k</span><span class="id"> &lt;</span><span class="id"> i</span>.<span class="id">+1</span>)<span class="id">%N</span>)<span class="id"> a_</span><span class="id"> k</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> !big_mkord;</span><span class="id"> apply:</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> seriesEord/=</span><span class="id"> big_mkord</span><span class="id"> -big_ord_widen</span>.<br/>
<span class="id">rewrite</span> (<span class="id">exchange_big_dep_nat</span><span class="id"> xpredT</span>)<span class="id"> //=</span>.<br/>
<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> _</span><span class="id"> -</span><span class="id"> _</span><span class="id"> *</span><span class="id"> X]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;=</span><span class="id"> j</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> a_</span><span class="id"> i</span> )<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> congr_big_nat</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> i</span><span class="id"> ni</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> big_const_nat</span><span class="id"> iter_addr</span><span class="id"> addr0</span><span class="id"> -big_filter</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> big_const_seq</span><span class="id"> iter_addr</span><span class="id"> addr0;</span><span class="id"> congr</span> (_<span class="id"> *+</span><span class="id"> _</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /index_iota</span><span class="id"> subn0</span><span class="id"> -[in</span><span class="id"> LHS]</span>(<span class="id">subnKC</span> (<span class="id">ltnW</span><span class="id"> ni</span>))<span class="id"> iotaD</span><span class="id"> filter_cat</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> count_cat</span> (_<span class="id"> :</span><span class="id"> [seq</span><span class="id"> _</span><span class="id"> &lt;-</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _]</span><span class="id"> =</span><span class="id"> [::]</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">filter_pred0</span> (<span class="id">iota</span><span class="id"> 0</span><span class="id"> i</span>))<span class="id">;</span><span class="id"> apply:</span><span class="id"> eq_in_filter</span><span class="id"> =&gt;</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mem_iota</span><span class="id"> leq0n</span><span class="id"> andTb</span><span class="id"> add0n</span><span class="id"> =&gt;</span><span class="id"> ji;</span><span class="id"> rewrite</span><span class="id"> ltnNge</span><span class="id"> ji</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> 2!add0n</span> (_<span class="id"> :</span><span class="id"> [seq</span><span class="id"> _</span><span class="id"> &lt;-</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _]</span><span class="id"> =</span><span class="id"> iota</span><span class="id"> i</span> (<span class="id">n</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> i</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -[RHS]filter_predT;</span><span class="id"> apply:</span><span class="id"> eq_in_filter</span><span class="id"> =&gt;</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> mem_iota</span><span class="id"> =&gt;</span><span class="id"> /andP[ij];</span><span class="id"> rewrite</span><span class="id"> subnKC;</span><span class="id"> last</span><span class="id"> exact/ltnW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> jn;</span><span class="id"> rewrite</span><span class="id"> ltnS</span><span class="id"> ij</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> count_predT</span><span class="id"> size_iota</span>.<br/>
<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> _</span><span class="id"> -</span><span class="id"> _</span><span class="id"> *</span><span class="id"> X]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> a_</span><span class="id"> i</span><span class="id"> *</span> (<span class="id">n</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> i</span>)<span class="id">%:R</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> big_const_nat</span><span class="id"> iter_addr</span><span class="id"> addr0</span><span class="id"> mulr_natr</span>.<br/>
<span class="id">rewrite</span><span class="id"> big_distrr</span><span class="id"> /=</span><span class="id"> big_mkord</span> (<span class="id">big_morph</span><span class="id"> _</span> (<span class="id">@opprD</span><span class="id"> _</span>) (<span class="id">@oppr0</span><span class="id"> _</span>)).<br/>
<span class="id">rewrite</span><span class="id"> seriesEord</span><span class="id"> -big_split</span><span class="id"> /=</span><span class="id"> big_add1</span><span class="id"> /=</span><span class="id"> big_mkord;</span><span class="id"> apply:</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _</span>.<br/>
<span class="id">rewrite</span><span class="id"> mulrCA</span><span class="id"> -[X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> -</span><span class="id"> _]mulr1</span><span class="id"> -mulrBr</span><span class="id"> [RHS]mulrC;</span><span class="id"> congr</span> (_<span class="id"> *</span><span class="id"> _</span>).<br/>
<span class="id">rewrite</span><span class="id"> -[X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> -</span><span class="id"> _]</span>(<span class="id">@divrr</span><span class="id"> _</span> (<span class="id">n</span>.<span class="id">+2</span>)<span class="id">%:R</span>)<span class="id"> ?unitfE</span><span class="id"> ?pnatr_eq0</span><span class="id"> //</span>.<br/>
<span class="id">rewrite</span><span class="id"> [in</span><span class="id"> X</span><span class="gallina-kwd"> in</span><span class="id"> _</span><span class="id"> -</span><span class="id"> X]mulrC</span><span class="id"> -mulrBl;</span><span class="id"> congr</span> (_<span class="id"> /</span><span class="id"> _</span>).<br/>
<span class="id">rewrite</span><span class="id"> -natrB;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">@leq_trans</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> //</span><span class="id"> leq_subr</span>.<br/>
<span class="id">rewrite</span><span class="id"> subnBA;</span><span class="gallina-kwd"> by</span><span class="id"> [rewrite</span><span class="id"> addSnnS</span><span class="id"> addnC</span><span class="id"> addnK</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> ltnW]</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cesaro_converse</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> series_convergence</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_series_cvg_0</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="id">series</span><span class="id"> u_</span>)<span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cvg_series</span>.<br/>
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> u_</span><span class="id"> =</span><span class="gallina-kwd"> fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> series</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> series</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> seriesSB</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">subrr</span> (<span class="id">limn</span> (<span class="id">series</span><span class="id"> u_</span>))).<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvgB</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ?cvg_shiftS</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_series</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id">%R</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (<span class="gallina-kwd">fun</span><span class="id"> n=&gt;</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> u_</span><span class="id"> k</span>)<span class="id">%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_ge0;</span><span class="id"> apply/nondecreasing_seqP</span><span class="id"> =&gt;</span><span class="id"> n</span>.<br/>
<span class="id">rewrite</span><span class="id"> [in</span><span class="id"> leRHS]big_mkcond</span><span class="id"> [in</span><span class="id"> leRHS]big_nat_recr//=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[in</span><span class="id"> leRHS]big_mkcond/=</span><span class="id"> lerDl;</span><span class="id"> case:</span><span class="id"> ifPn</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> u_ge0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> increasing_series</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><span class="id"> increasing_seq</span> (<span class="id">series</span><span class="id"> u_</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_ge0;</span><span class="id"> apply/increasing_seqP</span><span class="id"> =&gt;</span><span class="id"> n</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> !seriesEord/=</span><span class="id"> big_ord_recr</span><span class="id"> ltrDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> series_convergence</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> arithmetic</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> zmodType</span>)<span class="id"> a</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> a</span><span class="id"> +</span><span class="id"> z</span><span class="id"> *+</span><span class="id"> n]_n</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> arithmetic</span><span class="id"> {R}</span><span class="id"> a</span><span class="id"> z</span><span class="id"> n</span><span class="id"> /</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mulrn_arithmetic</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> zmodType</span>)<span class="id"> :</span><span class="id"> @GRing</span>.<span class="id">natmul</span><span class="id"> R</span><span class="id"> =</span><span class="id"> arithmetic</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeq2E</span><span class="id"> =&gt;</span><span class="id"> z</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> add0r</span>. Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> geometric</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> fieldType</span>)<span class="id"> a</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> a</span><span class="id"> *</span><span class="id"> z</span><span class="id"> ^+</span><span class="id"> n]_n</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> geometric</span><span class="id"> {R}</span><span class="id"> a</span><span class="id"> z</span><span class="id"> n</span><span class="id"> /</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> exprn_geometric</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> fieldType</span>)<span class="id"> :</span> (<span class="id">@GRing</span>.<span class="id">exp</span><span class="id"> R</span>)<span class="id"> =</span><span class="id"> geometric</span><span class="id"> 1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeq2E</span><span class="id"> =&gt;</span><span class="id"> z</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> mul1r</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_arithmetic</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>)<span class="id"> a</span> (<span class="id">z</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">z</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> arithmetic</span><span class="id"> a</span><span class="id"> z</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> z_gt0;</span><span class="id"> apply/cvgryPge</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">rewrite</span><span class="id"> -lerBlDl</span><span class="id"> -mulr_natl</span><span class="id"> -ler_pdivrMr//</span>.<br/>
<span class="id">rewrite</span><span class="id"> ler_normlW//</span><span class="id"> ltW//</span> (<span class="id">lt_le_trans</span> (<span class="id">archi_boundP</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> ler_nat</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> nbhs_infty_ge</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_expr</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>) (<span class="id">z</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">`|z|</span><span class="id"> &lt;</span><span class="id"> 1</span><span class="id"> -&gt;</span> (<span class="id">GRing</span>.<span class="id">exp</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Nz_lt1;</span><span class="id"> apply/norm_cvg0P;</span><span class="id"> pose</span><span class="id"> t</span><span class="id"> :=</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> `|z|</span>).<br/>
<span class="id">apply:</span> (<span class="id">@squeeze_cvgr</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">cst</span><span class="id"> 0</span>) (<span class="id">t^-1</span><span class="id"> *:</span><span class="id"> @harmonic</span><span class="id"> R</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> 2</span><span class="id"> first</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">scaler0</span><span class="id"> _</span><span class="id"> t^-1</span>)<span class="id">;</span><span class="id"> exact:</span> (<span class="id">cvgZr</span><span class="id"> cvg_harmonic</span>).<br/>
<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> normr_ge0</span><span class="id"> normrX/=</span><span class="id"> ler_pdivlMl</span><span class="id"> ?subr_gt0//</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@ler_pM2l</span><span class="id"> _</span><span class="id"> n</span>.<span class="id">+1%:R</span>)<span class="id">//</span><span class="id"> mulfV//</span><span class="id"> [t</span><span class="id"> *</span><span class="id"> _]mulrC</span><span class="id"> mulr_natl</span>.<br/>
<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> 1</span><span class="id"> =</span> (<span class="id">`|z|</span><span class="id"> +</span><span class="id"> t</span>)<span class="id"> ^+</span><span class="id"> n</span>.<span class="id">+1</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> addrC</span><span class="id"> addrNK</span><span class="id"> expr1n</span>.<br/>
<span class="id">rewrite</span><span class="id"> exprDn</span> (<span class="id">bigD1</span> (<span class="id">inord</span><span class="id"> 1</span>))<span class="id"> ?inordK//</span><span class="id"> subn1</span><span class="id"> expr1</span><span class="id"> bin1</span><span class="id"> lerDl</span><span class="id"> sumr_ge0//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> ?</span>(<span class="id">mulrn_wge0,</span><span class="id"> mulr_ge0,</span><span class="id"> exprn_ge0,</span><span class="id"> subr_ge0</span>)<span class="id">//</span><span class="id"> ltW</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> geometric_seriesE</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">a</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> z</span><span class="id"> !=</span><span class="id"> 1</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="id">geometric</span><span class="id"> a</span><span class="id"> z</span>)<span class="id"> =</span><span class="id"> [sequence</span><span class="id"> a</span><span class="id"> *</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> z</span><span class="id"> ^+</span><span class="id"> n</span>)<span class="id"> /</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> z</span>)<span class="id">]_n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> z_neq1</span><span class="id"> n</span>.<br/>
<span class="id">apply:</span> (<span class="id">@mulIf</span><span class="id"> _</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> z</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?mulfVK</span><span class="id"> ?subr_eq0</span><span class="id"> 1?eq_sym//</span>.<br/>
<span class="id">rewrite</span><span class="id"> seriesEnat</span><span class="id"> !mulrBr</span><span class="id"> [in</span><span class="id"> LHS]mulr1</span><span class="id"> mulr_suml</span><span class="id"> -opprB</span><span class="id"> -sumrB</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_bigr</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -mulrA</span><span class="id"> -exprSr;</span><span class="id"> rewrite</span><span class="id"> telescope_sumr//</span><span class="id"> opprB</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_geometric_series</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>) (<span class="id">a</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> `|z|</span><span class="id"> &lt;</span><span class="id"> 1</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="id">geometric</span><span class="id"> a</span><span class="id"> z</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span> (<span class="id">a</span><span class="id"> *</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> z</span>)<span class="id">^-1</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Nz_lt1;</span><span class="id"> rewrite</span><span class="id"> geometric_seriesE</span><span class="id"> ?lt_eqF</span><span class="id"> 1?ltr_normlW//</span>.<br/>
<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> a</span><span class="id"> /</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> z</span>)<span class="id"> =</span> (<span class="id">a</span><span class="id"> *</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> 0</span>))<span class="id"> /</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> z</span>)<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr0</span><span class="id"> mulr1</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvgMl;</span><span class="id"> apply:</span><span class="id"> cvgMr;</span><span class="id"> apply:</span><span class="id"> cvgB;</span><span class="id"> [apply:</span><span class="id"> cvg_cst|apply:</span><span class="id"> cvg_expr]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_geometric_series_half</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="gallina-kwd">fun</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> r</span><span class="id"> /</span> (<span class="id">2</span><span class="id"> ^</span> (<span class="id">k</span><span class="id"> +</span><span class="id"> n</span>.<span class="id">+1</span>))<span class="id">%:R</span><span class="id"> :</span><span class="id"> R^o</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span> (<span class="id">r</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> ^+</span><span class="id"> n</span><span class="id"> :</span><span class="id"> R^o</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> series</span><span class="id"> _</span><span class="id"> =</span><span class="id"> series</span> (<span class="id">geometric</span> (<span class="id">r</span><span class="id"> /</span> (<span class="id">2</span><span class="id"> ^</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%:R</span>)<span class="id"> 2^-1%R</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> m;</span><span class="id"> rewrite</span><span class="id"> /series</span><span class="id"> /=;</span><span class="id"> apply:</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> expnD</span><span class="id"> natrM</span> (<span class="id">mulrC</span> (<span class="id">2</span><span class="id"> ^</span><span class="id"> k</span>)<span class="id">%:R</span>)<span class="id"> invfM</span><span class="id"> exprVn</span> (<span class="id">natrX</span><span class="id"> _</span><span class="id"> 2</span><span class="id"> k</span>)<span class="id"> mulrA</span>.<br/>
<span class="id">apply:</span><span class="id"> cvg_trans</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> cvg_geometric_series</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ger0_norm</span><span class="id"> //</span><span class="id"> invr_lt1</span><span class="id"> //</span><span class="id"> ?ltr1n</span><span class="id"> //</span><span class="id"> unitfE</span>.<br/>
<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span> (<span class="id">X</span><span class="id"> -</span><span class="id"> _</span>)<span class="id">%R]</span>(<span class="id">splitr</span><span class="id"> 1</span>)<span class="id"> div1r</span><span class="id"> addrK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -mulrA</span><span class="id"> -invfM</span><span class="id"> expnSr</span><span class="id"> natrM</span><span class="id"> -mulrA</span><span class="id"> divff//</span><span class="id"> mulr1</span><span class="id"> natrX</span>.<br/>
Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> cvg_geometric_series_half</span><span class="id"> {R}</span><span class="id"> _</span><span class="id"> _</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> geometric_partial_tail</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> fieldType}</span> (<span class="id">n</span><span class="id"> m</span><span class="id"> :</span><span class="id"> nat</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> m</span><span class="id"> +</span><span class="id"> n</span>)<span class="id"> x</span><span class="id"> ^+</span><span class="id"> i</span><span class="id"> =</span><span class="id"> series</span> (<span class="id">geometric</span> (<span class="id">x</span><span class="id"> ^+</span><span class="id"> m</span>)<span class="id"> x</span>)<span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">big_addn</span><span class="id"> 0</span><span class="id"> _</span><span class="id"> m</span>)<span class="id"> addnC</span><span class="id"> addnK;</span><span class="id"> under</span><span class="id"> eq_bigr</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> exprD</span><span class="id"> mulrC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_geometric</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>) (<span class="id">a</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> `|z|</span><span class="id"> &lt;</span><span class="id"> 1</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">geometric</span><span class="id"> a</span><span class="id"> z</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvg_geometric_series/cvgP/cvg_series_cvg_0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_geometric_series</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>) (<span class="id">a</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> `|z|</span><span class="id"> &lt;</span><span class="id"> 1</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="id">series</span> (<span class="id">geometric</span><span class="id"> a</span><span class="id"> z</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvg_geometric_series/cvgP;</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> normed_series_of</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">u_</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> of</span><span class="id"> phantom</span><span class="id"> V^nat</span> (<span class="id">series</span><span class="id"> u_</span>)<span class="id"> :</span><span class="id"> K</span><span class="id"> ^nat</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">[series</span><span class="id"> `|u_</span><span class="id"> n|]_n</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;[ 'normed' s_ ]&quot;</span><span class="id"> :=</span> (<span class="id">@normed_series_of</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">Phantom</span><span class="id"> _</span><span class="id"> s_</span>))<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> normed_series_of</span><span class="id"> {K</span><span class="id"> V}</span><span class="id"> u_</span><span class="id"> _</span><span class="id"> n</span><span class="id"> /</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ger0_normed</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> K</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><span class="id"> [normed</span><span class="id"> series</span><span class="id"> u_]</span><span class="id"> =</span><span class="id"> series</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> u_gt0;</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> apply:</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> k;</span><span class="id"> rewrite</span><span class="id"> ger0_norm</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cauchy_seriesP</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cauchy</span> (<span class="id">series</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> e</span><span class="id"> :</span><span class="id"> R,</span><span class="id"> e</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span> (<span class="id">\oo,</span><span class="id"> \oo</span>)<span class="id">,</span><span class="id"> `|\sum_</span>(<span class="id">n</span>.<span class="id">1</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">2</span>)<span class="id"> u_</span><span class="id"> k|</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -cauchy_ballP;</span><span class="id"> split=&gt;</span><span class="id"> su_cv</span><span class="id"> _/posnumP[e];</span><br/>
<span class="id">have</span><span class="id"> {}su_cv</span><span class="id"> :=</span><span class="id"> !!</span><span class="id"> su_cv</span><span class="id"> _</span> (<span class="id">gt0</span><span class="id"> e</span>)<span class="id">;</span><br/>
<span class="id">rewrite</span><span class="id"> -near2_pair</span><span class="id"> -ball_normE</span><span class="id"> !near_simpl/=</span><span class="gallina-kwd"> in</span><span class="id"> su_cv</span><span class="id"> *</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> filterS</span><span class="id"> su_cv</span><span class="id"> =&gt;</span><span class="id"> -[/=</span><span class="id"> m</span><span class="id"> n];</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> sub_series</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [|/ltnW]:=</span><span class="id"> leqP</span><span class="id"> m</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> mn//;</span><span class="id"> rewrite</span> (<span class="id">big_geq</span><span class="id"> mn</span>)<span class="id"> ?normr0</span>.<br/>
<span class="id">have</span><span class="id"> :=</span><span class="id"> su_cv;</span><span class="id"> rewrite</span><span class="id"> near_swap</span><span class="id"> =&gt;</span><span class="id"> su_cvC;</span><span class="id"> near=&gt;</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> sub_series</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [|/ltnW]:=</span><span class="id"> leqP</span><span class="id"> m</span>.<span class="id">2</span><span class="id"> m</span>.<span class="id">1</span><span class="id"> =&gt;</span><span class="id"> m12;</span><span class="id"> rewrite</span><span class="id"> ?normrN;</span><span class="id"> near:</span><span class="id"> m</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> series_le_cvg</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> v_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> v_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> v_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="id">series</span><span class="id"> v_</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> u_</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_ge0</span><span class="id"> v_ge0</span><span class="id"> le_uv</span><span class="id"> /cvg_seq_bounded/bounded_fun_has_ubound[M</span><span class="id"> v_M]</span>.<br/>
<span class="id">apply:</span><span class="id"> nondecreasing_is_cvgn;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> nondecreasing_series</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> le_trans</span> (<span class="id">v_M</span> (<span class="id">series</span><span class="id"> v_</span><span class="id"> n</span>)<span class="id"> _</span>)<span class="id">;</span><span class="id"> [apply:</span><span class="id"> ler_sum</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> n]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normed_cvg</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> completeNormedModType</span><span class="id"> R</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> [normed</span><span class="id"> series</span><span class="id"> u_]</span><span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> u_</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cauchy_cvgP/cauchy_seriesP</span><span class="id"> u_ncvg</span>.<br/>
<span class="id">apply/cauchy_cvgP/cauchy_seriesP</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> /u_ncvg</span>.<br/>
<span class="id">apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> ger0_norm</span><span class="id"> ?sumr_ge0//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> le_lt_trans;</span><span class="id"> apply:</span><span class="id"> ler_norm_sum</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_series_norm</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">V</span><span class="id"> :</span><span class="id"> completeNormedModType</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> [normed</span><span class="id"> series</span><span class="id"> f]</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">`|limn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id">|</span><span class="id"> &lt;=</span><span class="id"> limn</span><span class="id"> [normed</span><span class="id"> series</span><span class="id"> f]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cnf;</span><span class="id"> have</span><span class="id"> cf</span><span class="id"> :=</span><span class="id"> normed_cvg</span><span class="id"> cnf</span>.<br/>
<span class="id">rewrite</span><span class="id"> -lim_norm</span><span class="id"> //</span> (<span class="id">ler_lim</span> (<span class="id">is_cvg_norm</span><span class="id"> cf</span>)<span class="id"> cnf</span>)<span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> ler_norm_sum</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> series_linear</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_series_bounded</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -&gt;</span><span class="id"> bounded_fun</span><span class="id"> f</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move/cvg_series_cvg_0</span><span class="id"> =&gt;</span><span class="id"> f0;</span><span class="id"> apply/cvg_seq_bounded/cvg_ex;</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_to_0_linear</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> K</span> (<span class="id">k</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">0</span><span class="id"> &lt;</span><span class="id"> k</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> r,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> `|</span><span class="id"> r</span><span class="id"> |</span><span class="id"> &lt;</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> `|f</span><span class="id"> r|</span><span class="id"> &lt;=</span><span class="id"> K</span><span class="id"> *</span><span class="id"> `|</span><span class="id"> r</span><span class="id"> |</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> 0^']</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> k0</span><span class="id"> kfK;</span><span class="id"> have</span><span class="id"> [K0|K0]</span><span class="id"> :=</span><span class="id"> lerP</span><span class="id"> K</span><span class="id"> 0</span>.<br/>
<span class="id">-</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near=&gt;</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> distrC</span><span class="id"> subr0</span> (<span class="id">le_lt_trans</span> (<span class="id">kfK</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> //;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 0</span>)<span class="id">//</span><span class="id"> mulr_le0_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">near:</span><span class="id"> x;</span><span class="gallina-kwd"> exists</span> (<span class="id">k</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> divr_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> t</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> subr0</span><span class="id"> =&gt;</span><span class="id"> tk2</span><span class="id"> t0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> normr_gt0</span><span class="id"> t0</span> (<span class="id">lt_trans</span><span class="id"> tk2</span>)<span class="id"> //</span><span class="id"> -[in</span><span class="id"> ltLHS]</span>(<span class="id">add0r</span><span class="id"> k</span>)<span class="id"> midf_lt</span>.<br/>
<span class="id">-</span><span class="id"> apply/</span>(<span class="id">@eqolim0</span><span class="id"> _</span><span class="id"> _</span><span class="id"> R</span><span class="id"> 0^'</span>)<span class="id">/eqoP</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near=&gt;</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">kfK</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> near:</span><span class="id"> x;</span><span class="gallina-kwd"> exists</span> (<span class="id">k</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> divr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> t</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> subr0</span><span class="id"> =&gt;</span><span class="id"> tk2</span><span class="id"> t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> normr_gt0</span><span class="id"> t0</span> (<span class="id">lt_trans</span><span class="id"> tk2</span>)<span class="id"> //</span><span class="id"> -[in</span><span class="id"> ltLHS]</span>(<span class="id">add0r</span><span class="id"> k</span>)<span class="id"> midf_lt</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> normr1</span><span class="id"> mulr1</span><span class="id"> mulrC</span><span class="id"> -ler_pdivlMr</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">near:</span><span class="id"> x;</span><span class="gallina-kwd"> exists</span> (<span class="id">e%:num</span><span class="id"> /</span><span class="id"> K</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> divr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> t</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> subr0</span><span class="id"> =&gt;</span><span class="id"> /ltW</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_cvg_to_0_linear</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">g</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> k</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">0</span><span class="id"> &lt;</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">series</span><span class="id"> f</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> r,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> `|r|</span><span class="id"> &lt;</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span><span class="id"> `|g</span><span class="id"> r</span><span class="id"> n|</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> n</span><span class="id"> *</span><span class="id"> `|</span><span class="id"> r</span><span class="id"> |</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="id">series</span> (<span class="id">g</span><span class="id"> x</span>))<span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> 0^']</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> k_gt0</span><span class="id"> Cf</span><span class="id"> Hg</span>.<br/>
<span class="id">apply:</span> (<span class="id">@cvg_to_0_linear</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">limn</span> (<span class="id">series</span><span class="id"> f</span>))<span class="id"> k</span>)<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> h</span><span class="id"> hLk;</span><span class="id"> rewrite</span><span class="id"> mulrC</span>.<br/>
<span class="id">have</span><span class="id"> Ckf</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">series</span> (<span class="id">`|h|</span><span class="id"> *:</span><span class="id"> f</span>))<span class="id"> :=</span><span class="id"> @is_cvg_seriesZ</span><span class="id"> _</span><span class="id"> _</span><span class="id"> `|h|</span><span class="id"> Cf</span>.<br/>
<span class="id">have</span><span class="id"> Cng</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> [normed</span><span class="id"> series</span> (<span class="id">g</span><span class="id"> h</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> series_le_cvg</span> (<span class="id">Hg</span><span class="id"> _</span><span class="id"> hLk</span>)<span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> [//|?|]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> le_trans</span> (<span class="id">Hg</span><span class="id"> _</span><span class="id"> hLk</span><span class="id"> _</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> mulrC</span>.<br/>
<span class="id">apply:</span> (<span class="id">le_trans</span> (<span class="id">lim_series_norm</span><span class="id"> Cng</span>)).<br/>
<span class="id">rewrite</span><span class="id"> -[_</span><span class="id"> *</span><span class="id"> _]</span>(<span class="id">lim_seriesZ</span><span class="id"> _</span><span class="id"> Cf</span>) (<span class="id">lim_series_le</span><span class="id"> Cng</span><span class="id"> Ckf</span>)<span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> n</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> [leRHS]mulrC;</span><span class="id"> apply:</span><span class="id"> Hg</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> series_linear</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> exponential_series</span>.<br/>
<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> exp_coeff</span><span class="id"> x</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> x</span><span class="id"> ^+</span><span class="id"> n</span><span class="id"> /</span><span class="id"> n`!%:R]_n</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> exp</span><span class="id"> :=</span><span class="id"> exp_coeff</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> exp_coeff_ge0</span><span class="id"> x</span><span class="id"> n</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> exp</span><span class="id"> x</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x0;</span><span class="id"> rewrite</span><span class="id"> /exp</span><span class="id"> divr_ge0</span><span class="id"> //</span><span class="id"> exprn_ge0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> series_exp_coeff0</span><span class="id"> n</span><span class="id"> :</span><span class="id"> series</span> (<span class="id">exp</span><span class="id"> 0</span>)<span class="id"> n</span>.<span class="id">+1</span><span class="id"> =</span><span class="id"> 1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /series</span><span class="id"> /=</span><span class="id"> big_mkord</span><span class="id"> big_ord_recl</span><span class="id"> /=</span><span class="id"> /exp</span><span class="id"> /=</span><span class="id"> expr0n</span><span class="id"> divr1</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> big1</span><span class="id"> ?addr0</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> expr0n</span><span class="id"> mul0r</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> exponential_series_cvg</span>.<br/>
<br/>
<span class="vernacular">Variable</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<span class="vernacular">Hypothesis</span><span class="id"> x0</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> x</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> S0</span><span class="id"> N</span><span class="id"> n</span><span class="id"> :=</span> (<span class="id">N</span><span class="id"> ^</span><span class="id"> N</span>)<span class="id">%:R</span><span class="id"> *</span><span class="id"> \sum_</span>(<span class="id">N</span>.<span class="id">+1</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>) (<span class="id">x</span><span class="id"> /</span><span class="id"> N%:R</span>)<span class="id"> ^+</span><span class="id"> i</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> is_cvg_S0</span><span class="id"> N</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> N%:R</span><span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">S0</span><span class="id"> N</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> xN;</span><span class="id"> apply:</span><span class="id"> is_cvgZr;</span><span class="id"> rewrite</span><span class="id"> is_cvg_series_restrict</span><span class="id"> exprn_geometric</span>.<br/>
<span class="id">apply/is_cvg_geometric_series;</span><span class="id"> rewrite</span><span class="id"> normrM</span><span class="id"> normfV</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltr_pdivrMr</span><span class="id"> ?mul1r</span><span class="id"> !ger0_norm</span><span class="id"> //</span><span class="id"> 1?ltW</span><span class="id"> //</span> (<span class="id">lt_trans</span><span class="id"> x0</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> S0_ge0</span><span class="id"> N</span><span class="id"> n</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> S0</span><span class="id"> N</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> mulr_ge0</span><span class="id"> //</span><span class="id"> ?ler0n</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> sumr_ge0</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> exprn_ge0</span><span class="id"> //</span><span class="id"> divr_ge0</span><span class="id"> //</span><span class="id"> ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> S0_sup</span><span class="id"> N</span><span class="id"> n</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> N%:R</span><span class="id"> -&gt;</span><span class="id"> S0</span><span class="id"> N</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> sup</span> (<span class="id">range</span> (<span class="id">S0</span><span class="id"> N</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> xN;</span><span class="id"> apply/sup_upper_bound;</span><span class="id"> [split;</span><span class="id"> [by</span><span class="gallina-kwd"> exists</span> (<span class="id">S0</span><span class="id"> N</span><span class="id"> n</span>)<span class="id">,</span><span class="id"> n|]|by</span><span class="gallina-kwd"> exists</span><span class="id"> n]</span>.<br/>
<span class="id">rewrite</span> (_<span class="id"> :</span> (<span class="id">range</span><span class="id"> _</span>)<span class="id"> =</span><span class="id"> [set</span><span class="id"> `|S0</span><span class="id"> N</span><span class="id"> n0|</span><span class="id"> |</span><span class="id"> n0</span><span class="gallina-kwd"> in</span><span class="id"> setT]</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvg_has_ub</span> (<span class="id">is_cvg_S0</span><span class="id"> xN</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE=&gt;</span><span class="id"> y;</span><span class="id"> split=&gt;</span><span class="id"> -[z</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="gallina-kwd"> exists</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> ?ger0_norm</span><span class="id"> ?S0_ge0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> S1</span><span class="id"> N</span><span class="id"> n</span><span class="id"> :=</span><span class="id"> \sum_</span>(<span class="id">N</span>.<span class="id">+1</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> exp</span><span class="id"> x</span><span class="id"> i</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> incr_S1</span><span class="id"> N</span><span class="id"> :</span><span class="id"> nondecreasing_seq</span> (<span class="id">S1</span><span class="id"> N</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/nondecreasing_seqP</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /S1</span>.<br/>
<span class="id">have</span><span class="id"> [nN|Nn]</span><span class="id"> :=</span><span class="id"> leqP</span><span class="id"> n</span><span class="id"> N;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> !big_geq</span><span class="id"> //</span> (<span class="id">leq_trans</span><span class="id"> nN</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> big_nat_recr//=</span><span class="id"> lerDl</span><span class="id"> exp_coeff_ge0</span><span class="id"> //</span><span class="id"> ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> S1_sup</span><span class="id"> N</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> N%:R</span><span class="id"> -&gt;</span><span class="id"> ubound</span> (<span class="id">range</span> (<span class="id">S1</span><span class="id"> N</span>)) (<span class="id">sup</span> (<span class="id">range</span> (<span class="id">S0</span><span class="id"> N</span>))).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> xN</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span> (<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">S0_sup</span><span class="id"> n</span><span class="id"> xN</span>))<span class="id"> //</span><span class="id"> /S0</span><span class="id"> big_distrr</span><span class="id"> /=</span>.<br/>
<span class="id">have</span><span class="id"> N_gt0</span><span class="id"> :=</span><span class="id"> lt_trans</span><span class="id"> x0</span><span class="id"> xN;</span><span class="id"> apply:</span><span class="id"> ler_sum</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _</span>.<br/>
<span class="id">have</span><span class="id"> [Ni|iN]</span><span class="id"> :=</span><span class="id"> ltnP</span><span class="id"> N</span><span class="id"> i;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> expr_div_n</span><span class="id"> mulrCA</span><span class="id"> ler_pM2l</span><span class="id"> ?exprn_gt0//</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 1</span>)<span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> invf_le1//</span><span class="id"> ?ler1n</span><span class="id"> ?ltr0n</span><span class="id"> //</span><span class="id"> fact_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> natrX</span><span class="id"> -expfB_cond</span><span class="id"> ?</span>(<span class="id">negPf</span> (<span class="id">lt0r_neq0</span><span class="id"> N_gt0</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> exprn_ege1</span><span class="id"> //</span><span class="id"> ler1n;</span><span class="id"> case:</span> (<span class="id">N</span>)<span class="id"> xN</span><span class="id"> x0;</span><span class="id"> case:</span><span class="id"> ltrgt0P</span>.<br/>
<span class="id">rewrite</span><span class="id"> /exp</span><span class="id"> expr_div_n</span><span class="id"> /=</span> (<span class="id">fact_split</span><span class="id"> Ni</span>)<span class="id"> mulrCA</span><span class="id"> ler_pM2l</span><span class="id"> ?exprn_gt0//</span><span class="id"> natrX</span>.<br/>
<span class="id">rewrite</span><span class="id"> -invf_div</span><span class="id"> -expfB</span><span class="id"> //</span><span class="id"> lef_pV2</span><span class="id"> ?qualifE/=</span><span class="id"> ?exprn_gt0//;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ltr0n</span><span class="id"> muln_gt0</span><span class="id"> fact_gt0/=</span><span class="id"> big_seq</span><span class="id"> big_mkcond/=</span><span class="id"> prodn_gt0//</span><span class="id"> =&gt;</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case:</span><span class="id"> ifPn=&gt;//;</span><span class="id"> rewrite</span><span class="id"> mem_index_iota</span><span class="id"> =&gt;</span><span class="id"> /andP[+</span><span class="id"> _];</span><span class="id"> exact:</span><span class="id"> leq_ltn_trans</span>.<br/>
<span class="id">rewrite</span><span class="id"> big_nat_rev/=</span><span class="id"> -natrX</span><span class="id"> ler_nat</span><span class="id"> -prod_nat_const_nat</span><span class="id"> big_add1</span><span class="id"> /=</span><span class="id"> big_ltn</span><span class="id"> //</span>.<br/>
<span class="id">rewrite</span><span class="id"> leq_mul//;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span> (<span class="id">fact_geq</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> leq_pmull</span>.<br/>
<span class="id">under</span><span class="id"> [in</span><span class="id"> X</span><span class="gallina-kwd"> in</span> (_<span class="id"> &lt;=</span><span class="id"> X</span>)<span class="id">%N]eq_bigr</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> 2!addSn</span><span class="id"> 2!subSS</span>.<br/>
<span class="id">rewrite</span><span class="id"> !big_seq/=;</span><span class="id"> elim/big_ind2</span><span class="id"> :</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> *;</span><span class="id"> exact:</span><span class="id"> leq_mul</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> j;</span><span class="id"> rewrite</span><span class="id"> mem_index_iota</span><span class="id"> =&gt;</span><span class="id"> /andP[_</span><span class="id"> ji]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -addnBA//</span><span class="id"> ?leq_addr//</span><span class="id"> ltnW//</span><span class="id"> ltnW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_series_exp_coeff_pos</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">series</span> (<span class="id">exp</span><span class="id"> x</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /series;</span><span class="id"> near</span><span class="id"> \oo</span><span class="id"> =&gt;</span><span class="id"> N;</span><span class="id"> have</span><span class="id"> xN</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> N%:R;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@is_cvg_series_restrict</span><span class="id"> N</span>.<span class="id">+1</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">nondecreasing_is_cvgn</span> (<span class="id">incr_S1</span><span class="id"> N</span>))<span class="id">;</span><span class="id"> eexists;</span><span class="id"> apply:</span><span class="id"> S1_sup</span>.<br/>
<span class="id">near:</span><span class="id"> N;</span><span class="gallina-kwd"> exists</span><span class="id"> `|floor</span><span class="id"> x|</span>.<span class="id">+1</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> m;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> -</span>(<span class="id">@ler_nat</span><span class="id"> R</span>).<br/>
<span class="id">move/lt_le_trans</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id">mathcomp_extra</span>.<span class="id">lt_succ_floor</span><span class="id"> x</span>))<span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -intrD1</span><span class="id"> -natr1</span><span class="id"> lerD2r</span><span class="id"> -</span>(<span class="id">@gez0_abs</span> (<span class="id">floor</span><span class="id"> x</span>))<span class="id"> ?floor_ge0//</span><span class="id"> ltW</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> exponential_series_cvg</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normed_series_exp_coeff</span><span class="id"> x</span><span class="id"> :</span><span class="id"> [normed</span><span class="id"> series</span> (<span class="id">exp</span><span class="id"> x</span>)<span class="id">]</span><span class="id"> =</span><span class="id"> series</span> (<span class="id">exp</span><span class="id"> `|x|</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> apply:</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> _</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /exp</span><span class="id"> normrM</span><span class="id"> normfV</span><span class="id"> normrX</span><span class="id"> [`|_%:R|]@ger0_norm</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_series_exp_coeff</span><span class="id"> x</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">series</span> (<span class="id">exp</span><span class="id"> x</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [-&gt;|x0]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> x</span><span class="id"> 0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/cvg_ex;</span><span class="gallina-kwd"> exists</span><span class="id"> 1;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> [m</span><span class="id"> -&gt;]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> m,</span><span class="id"> n</span><span class="id"> =</span><span class="id"> m</span>.<span class="id">+1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<span class="id">-1;</span><span class="id"> rewrite</span><span class="id"> prednK</span><span class="id"> //;</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> 1%N</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> series_exp_coeff0</span><span class="id"> subrr</span><span class="id"> normr0</span>.<br/>
<span class="id">apply:</span><span class="id"> normed_cvg;</span><span class="id"> rewrite</span><span class="id"> normed_series_exp_coeff</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> is_cvg_series_exp_coeff_pos;</span><span class="id"> rewrite</span><span class="id"> normr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_exp_coeff</span><span class="id"> x</span><span class="id"> :</span><span class="id"> exp</span><span class="id"> x</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvg_series_cvg_0</span> (<span class="id">@is_cvg_series_exp_coeff</span><span class="id"> x</span>)). Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> exponential_series</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> expR</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> R</span><span class="id"> :=</span><span class="id"> limn</span> (<span class="id">series</span> (<span class="id">exp_coeff</span><span class="id"> x</span>)).<br/>
<br/>
<div class="doc">Sequences of natural numbers </div>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__nat_dvg_real</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> \oo</span><span class="id"> -&gt;</span> (<span class="id">[sequence</span> (<span class="id">u_</span><span class="id"> n</span>)<span class="id">%:R</span><span class="id"> :</span><span class="id"> R^o]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>)<span class="id">%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply/cvgrnyP</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgrnyP` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nat_dvg_real</span><span class="id"> :=</span><span class="id"> __deprecated__nat_dvg_real</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__nat_cvgPpinfty</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> nat^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> \oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span> (<span class="id">A</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>)<span class="id">%N</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgnyPge</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgnyPge` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nat_cvgPpinfty:=</span><span class="id"> __deprecated__nat_cvgPpinfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nat_nondecreasing_is_cvg</span> (<span class="id">u_</span><span class="id"> :</span><span class="id"> nat^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span> (<span class="id">range</span><span class="id"> u_</span>)<span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_nd</span><span class="id"> [l</span><span class="id"> ul]</span>.<br/>
<span class="id">suff</span><span class="id"> [N</span><span class="id"> Nu]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> N,</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span> (<span class="id">n</span><span class="id"> &gt;=</span><span class="id"> N</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> =</span><span class="id"> u_</span><span class="id"> N</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/cvg_ex;</span><span class="gallina-kwd"> exists</span> (<span class="id">u_</span><span class="id"> N</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">cvg_shiftn</span><span class="id"> N</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> _]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> cst</span> (<span class="id">u_</span><span class="id"> N</span>))<span class="id">//;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/funext</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> Nu//</span><span class="id"> leq_addl</span>.<br/>
<span class="id">apply/not_existsP</span><span class="id"> =&gt;</span><span class="id"> hu</span>.<br/>
<span class="id">have</span><span class="id"> {hu}/choice[f</span><span class="id"> Hf]</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span> (<span class="gallina-kwd">exists</span><span class="id"> n,</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> n</span><span class="id"> /\</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &gt;</span><span class="id"> u_</span><span class="id"> x</span>)<span class="id">%N</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> x;</span><span class="id"> have</span><span class="id"> /existsNP[N</span><span class="id"> /not_implyP[xN</span><span class="id"> Nx]]</span><span class="id"> :=</span><span class="id"> hu</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> N;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> move/eqP</span><span class="id"> :</span><span class="id"> Nx;</span><span class="id"> rewrite</span><span class="id"> neq_lt</span><span class="id"> =&gt;</span><span class="id"> /orP[|//]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/u_nd</span><span class="id"> :</span><span class="id"> xN;</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[-&gt;|//]</span>.<br/>
<span class="id">have</span><span class="id"> uf</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span> (<span class="id">x</span><span class="id"> &lt;</span><span class="id"> u_</span> (<span class="id">iter</span><span class="id"> x</span>.<span class="id">+1</span><span class="id"> f</span><span class="id"> O</span>))<span class="id">%N</span>.<br/>
&nbsp;&nbsp;<span class="id">elim=&gt;</span><span class="id"> /=</span><span class="id"> [|i</span><span class="id"> ih];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> Hf</span><span class="id"> O</span><span class="id"> =&gt;</span><span class="id"> -[_];</span><span class="id"> exact:</span><span class="id"> leq_trans</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> Hf</span> (<span class="id">f</span> (<span class="id">iter</span><span class="id"> i</span><span class="id"> f</span><span class="id"> O</span>))<span class="id"> =&gt;</span><span class="id"> -[_];</span><span class="id"> exact:</span><span class="id"> leq_trans</span>.<br/>
<span class="id">have</span><span class="id"> /ul</span><span class="id"> :</span><span class="id"> range</span><span class="id"> u_</span> (<span class="id">u_</span> (<span class="id">iter</span><span class="id"> l</span>.<span class="id">+1</span><span class="id"> f</span><span class="id"> O</span>))<span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">iter</span><span class="id"> l</span>.<span class="id">+1</span><span class="id"> f</span><span class="id"> O</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> leNgt</span><span class="id"> =&gt;</span><span class="id"> /negP;</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> ltEnat</span><span class="id"> //=;</span><span class="id"> exact:</span><span class="id"> uf</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> nseries</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> nat^nat</span>)<span class="id"> :=</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u</span><span class="id"> k</span>)<span class="id">%N</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> le_nseries</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> nat^nat</span>)<span class="id"> :</span><span class="id"> {homo</span><span class="id"> nseries</span><span class="id"> u</span><span class="id"> :</span><span class="id"> a</span><span class="id"> b</span><span class="id"> /</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b}%N</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> a</span><span class="id"> b</span><span class="id"> ab;</span><span class="id"> rewrite</span><span class="id"> /nseries</span><span class="id"> [in</span><span class="id"> X</span><span class="gallina-kwd"> in</span> (_<span class="id"> &lt;=</span><span class="id"> X</span>)<span class="id">%N]/index_iota</span><span class="id"> subn0</span>.<br/>
<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> X</span><span class="gallina-kwd"> in</span> (_<span class="id"> &lt;=</span><span class="id"> X</span>)<span class="id">%N]</span>(<span class="id">subnKC</span><span class="id"> ab</span>)<span class="id"> iotaD</span><span class="id"> big_cat/=</span><span class="id"> add0n</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /index_iota</span><span class="id"> subn0</span><span class="id"> leq_addr</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_nseries_near</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> nat^nat</span>)<span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">nseries</span><span class="id"> u</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> u</span><span class="id"> n</span><span class="id"> =</span><span class="id"> 0%N</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvg_ex[l</span><span class="id"> ul];</span><span class="id"> have</span><span class="id"> /ul[a</span><span class="id"> _</span><span class="id"> aul]</span><span class="id"> :</span><span class="id"> nbhs</span><span class="id"> l</span><span class="id"> [set</span><span class="id"> l]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> l];</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> l]</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> bigcup_set1</span>.<br/>
<span class="id">have</span><span class="id"> /ul[b</span><span class="id"> _</span><span class="id"> bul]</span><span class="id"> :</span><span class="id"> nbhs</span><span class="id"> l</span><span class="id"> [set</span><span class="id"> l</span>.<span class="id">-1;</span><span class="id"> l]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> l];</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> l]</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> bigcup_set1</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">maxn</span><span class="id"> a</span><span class="id"> b</span>)<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> n</span><span class="id"> /=</span><span class="id"> abn</span>.<br/>
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> u</span><span class="id"> =</span><span class="gallina-kwd"> fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> nseries</span><span class="id"> u</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> nseries</span><span class="id"> u</span><span class="id"> n</span>)<span class="id">%N;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> /nseries</span><span class="id"> big_nat_recr//=</span><span class="id"> addnC</span><span class="id"> addnK</span>.<br/>
<span class="id">have</span><span class="id"> /aul</span><span class="id"> -&gt;</span><span class="id"> :</span> (<span class="id">a</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> abn</span>)<span class="id"> //</span><span class="id"> leq_max</span><span class="id"> leqnn</span>.<br/>
<span class="id">have</span><span class="id"> /bul[-&gt;|-&gt;]</span><span class="id"> :</span> (<span class="id">b</span><span class="id"> &lt;=</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> leqW//</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> abn</span>)<span class="id">//</span><span class="id"> leq_maxr</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> subn_eq0//</span><span class="id"> leq_pred</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subnn</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dvg_nseries</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> nat^nat</span>)<span class="id"> :</span><span class="id"> ~</span><span class="id"> cvgn</span> (<span class="id">nseries</span><span class="id"> u</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">nseries</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> \oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> du;</span><span class="id"> apply:</span><span class="id"> contrapT</span><span class="id"> =&gt;</span><span class="id"> /cvgnyPgt/existsNP[l</span><span class="id"> lu];</span><span class="id"> apply:</span><span class="id"> du</span>.<br/>
<span class="id">apply:</span><span class="id"> nat_nondecreasing_is_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> le_nseries</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> l</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span><span class="id"> leNgt;</span><span class="id"> apply/negP</span><span class="id"> =&gt;</span><span class="id"> lun;</span><span class="id"> apply:</span><span class="id"> lu</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> lun</span>)<span class="id"> ?le_nseries//;</span><span class="id"> apply:</span><span class="id"> nbhs_infty_ge</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<div class="doc">Sequences of extended real numbers </div>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;\big [ op / idx ]_ ( m &lt;= i &lt;oo | P ) F&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">limn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span> (<span class="id">\big[</span><span class="id"> op</span><span class="id"> /</span><span class="id"> idx</span><span class="id"> ]_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span>)<span class="id"> F</span>)))<span class="id"> :</span><span class="id"> big_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;\big [ op / idx ]_ ( m &lt;= i &lt;oo ) F&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">limn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span> (<span class="id">\big[</span><span class="id"> op</span><span class="id"> /</span><span class="id"> idx</span><span class="id"> ]_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> F</span>)))<span class="id"> :</span><span class="id"> big_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;\big [ op / idx ]_ ( i &lt;oo | P ) F&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">limn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span> (<span class="id">\big[</span><span class="id"> op</span><span class="id"> /</span><span class="id"> idx</span><span class="id"> ]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span>)<span class="id"> F</span>)))<span class="id"> :</span><span class="id"> big_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;\big [ op / idx ]_ ( i &lt;oo ) F&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">limn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span> (<span class="id">\big[</span><span class="id"> op</span><span class="id"> /</span><span class="id"> idx</span><span class="id"> ]_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> F</span>)))<span class="id"> :</span><span class="id"> big_scope</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;\sum_ ( m &lt;= i &lt;oo | P ) F&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">\big[+%E/0%E]_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P%B</span>)<span class="id"> F%E</span>)<span class="id"> :</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;\sum_ ( m &lt;= i &lt;oo ) F&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">\big[+%E/0%E]_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span>)<span class="id"> F%E</span>)<span class="id"> :</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;\sum_ ( i &lt;oo | P ) F&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">\big[+%E/0%E]_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P%B</span>)<span class="id"> F%E</span>)<span class="id"> :</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;\sum_ ( i &lt;oo ) F&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">\big[+%E/0%E]_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span>)<span class="id"> F%E</span>)<span class="id"> :</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> partial_esum</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> eseries</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k]_n</span>.<br/>
<span class="vernacular">Definition</span><span class="id"> etelescope</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> u_</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> u_</span><span class="id"> n]_n</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseriesEnat</span><span class="id"> :</span><span class="id"> eseries</span><span class="id"> =</span><span class="id"> [sequence</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k]_n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> []</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseriesEord</span><span class="id"> :</span><span class="id"> eseries</span><span class="id"> =</span><span class="id"> [sequence</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k]_n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /eseries/=</span><span class="id"> big_mkord</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseriesSr</span><span class="id"> n</span><span class="id"> :</span><span class="id"> eseries</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> =</span><span class="id"> eseries</span><span class="id"> n</span><span class="id"> +</span><span class="id"> u_</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> !eseriesEord/=</span><span class="id"> big_ord_recr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseriesS</span><span class="id"> n</span><span class="id"> :</span><span class="id"> eseries</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> =</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> +</span><span class="id"> eseries</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> addeC</span><span class="id"> eseriesSr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseriesSB</span> (<span class="id">n</span><span class="id"> :</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">eseries</span><span class="id"> n</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><span class="id"> eseries</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> eseries</span><span class="id"> n</span><span class="id"> =</span><span class="id"> u_</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> enfin;</span><span class="id"> rewrite</span><span class="id"> eseriesS</span><span class="id"> addeK//=</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseries_addn</span><span class="id"> m</span><span class="id"> n</span><span class="id"> :</span><span class="id"> eseries</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> m</span>)<span class="id">%N</span><span class="id"> =</span><span class="id"> eseries</span><span class="id"> m</span><span class="id"> +</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> +</span><span class="id"> m</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> eseriesEnat/=</span><span class="id"> -big_cat_nat//</span><span class="id"> leq_addl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_eseries_geq</span><span class="id"> m</span><span class="id"> n</span><span class="id"> :</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> eseries</span><span class="id"> m</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">eseries</span><span class="id"> n</span><span class="id"> -</span><span class="id"> eseries</span><span class="id"> m</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /subnK&lt;-</span><span class="id"> emfin;</span><span class="id"> rewrite</span><span class="id"> eseries_addn</span><span class="id"> addeAC</span><span class="id"> subee//</span><span class="id"> add0e</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_eseries</span><span class="id"> m</span><span class="id"> n</span><span class="id"> :</span><span class="id"> eseries</span><span class="id"> m</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><span class="id"> eseries</span><span class="id"> n</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">eseries</span><span class="id"> n</span><span class="id"> -</span><span class="id"> eseries</span><span class="id"> m</span><span class="id"> =</span><span class="gallina-kwd"> if</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> then</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span><span class="id"> -</span><span class="id"> \sum_</span>(<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> m</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> have</span><span class="id"> [mn|/ltnW</span><span class="id"> mn]</span><span class="id"> :=</span><span class="id"> leqP</span><span class="id"> m</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> -sub_eseries_geq//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> fin_num_oppeD</span><span class="id"> ?fin_numN//</span><span class="id"> oppeK</span><span class="id"> addeC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_double_eseries</span><span class="id"> n</span><span class="id"> :</span><span class="id"> eseries</span><span class="id"> n</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">eseries</span><span class="id"> n</span>.<span class="id">*2</span><span class="id"> -</span><span class="id"> eseries</span><span class="id"> n</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">*2</span>)<span class="id"> u_</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> enfin;</span><span class="id"> rewrite</span><span class="id"> sub_eseries_geq//</span><span class="id"> -addnn</span><span class="id"> leq_addl</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> partial_esum</span>.<br/>
<br/>
<span class="vernacular">Arguments</span><span class="id"> eseries</span><span class="id"> {R}</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> :</span><span class="id"> simpl</span><span class="id"> never</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> etelescope</span><span class="id"> {R}</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> :</span><span class="id"> simpl</span><span class="id"> never</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;[ 'series' E ]_ n&quot;</span><span class="id"> :=</span> (<span class="id">eseries</span><span class="id"> [sequence</span><span class="id"> E%E]_n</span>)<span class="id"> :</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_geometric_eseries_half</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> archiFieldType}</span> (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">n</span><span class="id"> :</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">eseries</span> (<span class="gallina-kwd">fun</span><span class="id"> k</span><span class="id"> =&gt;</span> (<span class="id">r</span><span class="id"> /</span> (<span class="id">2</span><span class="id"> ^</span> (<span class="id">k</span><span class="id"> +</span><span class="id"> n</span>.<span class="id">+1</span>))<span class="id">%:R</span>)<span class="id">%:E</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span> (<span class="id">r</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> ^+</span><span class="id"> n</span>)<span class="id">%:E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span><span class="id"> cvg_EFin</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /eseries/=</span><span class="id"> sumEFin</span>.<br/>
<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> @</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> _]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> series</span> (<span class="gallina-kwd">fun</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> r</span><span class="id"> /</span> (<span class="id">2</span><span class="id"> ^</span> (<span class="id">k</span><span class="id"> +</span><span class="id"> n</span>.<span class="id">+1</span>))<span class="id">%:R</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/funext</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> /eseries/=</span><span class="id"> sumEFin</span>.<br/>
<span class="id">exact:</span><span class="id"> cvg_geometric_series_half</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> eseries_ops</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseriesD</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><span class="id"> eseries</span> (<span class="id">f</span><span class="id"> \+</span><span class="id"> g</span>)<span class="id"> =</span><span class="id"> eseries</span><span class="id"> f</span><span class="id"> \+</span><span class="id"> eseries</span><span class="id"> g</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /eseries</span><span class="id"> /=</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> big_split</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> eseries_ops</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> sequences_ereal_realDomainType</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> T</span><span class="id"> :</span><span class="id"> realDomainType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> u</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> T</span>)<span class="id">^nat</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_nondecreasing_oppn</span><span class="id"> u_</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (<span class="id">-%E</span><span class="id"> \o</span><span class="id"> u_</span>)<span class="id"> =</span><span class="id"> nonincreasing_seq</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> ni_u</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> leeNr</span><span class="id"> oppeK</span><span class="id"> ni_u</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">oppeK</span> (<span class="id">u_</span><span class="id"> m</span>))<span class="id"> -leeNr</span><span class="id"> ni_u</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> sequences_ereal_realDomainType</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `ereal_nondecreasing_oppn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_nondecreasing_opp</span><span class="id"> :=</span><span class="id"> ereal_nondecreasing_oppn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> sequences_ereal</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvg_abs0</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">abse</span><span class="id"> \o</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move/cvg_abse0P</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvg_ge0</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> n</span>)<span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> f_ge0;</span><span class="id"> apply:</span><span class="id"> cvge_ge;</span><span class="id"> apply:</span><span class="id"> nearW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_lim_ge</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>)<span class="id"> x</span> (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> u_</span><span class="id"> -&gt;</span> (<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> limn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> lime_ge</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_lim_le</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>)<span class="id"> x</span> (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> u_</span><span class="id"> -&gt;</span> (<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> x</span>)<span class="id"> -&gt;</span><span class="id"> limn</span><span class="id"> u_</span><span class="id"> &lt;=</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> lime_le</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__dvg_ereal_cvg</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u_</span><span class="id"> :</span><span class="id"> R</span><span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo%R</span><span class="id"> -&gt;</span><span class="id"> [sequence</span> (<span class="id">u_</span><span class="id"> n</span>)<span class="id">%:E]_n</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeryP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvg_real</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> a</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{near</span><span class="id"> \oo,</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> f</span><span class="id"> x</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num}</span><span class="id"> /\</span><br/>
&nbsp;&nbsp;(<span class="id">fine</span><span class="id"> \o</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a</span>)<span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a%:E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> fine_cvgP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_nondecreasing_cvgn</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> ereal_sup</span> (<span class="id">range</span><span class="id"> u_</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> nd_u_;</span><span class="id"> set</span><span class="id"> S</span><span class="id"> :=</span><span class="id"> u_</span><span class="id"> @`</span><span class="id"> setT;</span><span class="id"> set</span><span class="id"> l</span><span class="id"> :=</span><span class="id"> ereal_sup</span><span class="id"> S</span>.<br/>
<span class="id">have</span><span class="id"> [Spoo|Spoo]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">S</span><span class="id"> +oo</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [N</span><span class="id"> Nu]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> N,</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span> (<span class="id">n</span><span class="id"> &gt;=</span><span class="id"> N</span>)<span class="id">%nat</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> =</span><span class="id"> +oo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case:</span><span class="id"> Spoo</span><span class="id"> =&gt;</span><span class="id"> N</span><span class="id"> _</span><span class="id"> uNoo;</span><span class="gallina-kwd"> exists</span><span class="id"> N</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> Nn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">nd_u_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> Nn</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> uNoo</span><span class="id"> leye_eq</span><span class="id"> =&gt;</span><span class="id"> /eqP</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> l</span><span class="id"> =</span><span class="id"> +oo</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /l</span><span class="id"> /ereal_sup;</span><span class="id"> exact:</span><span class="id"> supremum_pinfty</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">cvg_shiftn</span><span class="id"> N</span>)<span class="id">;</span><span class="id"> set</span><span class="id"> f</span><span class="id"> :=</span> (<span class="id">X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> _</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> f</span><span class="id"> =</span><span class="id"> cst</span><span class="id"> +oo</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /f</span><span class="id"> /=</span><span class="id"> Nu</span><span class="id"> //</span><span class="id"> leq_addl</span>.<br/>
<span class="id">have</span><span class="id"> [/funext</span><span class="id"> Snoo|Snoo]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> =</span><span class="id"> -oo</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /l</span> (_<span class="id"> :</span><span class="id"> S</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> -oo]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ereal_sup1</span><span class="id"> Snoo;</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [_</span><span class="id"> [n</span><span class="id"> _]</span><span class="id"> &lt;-</span><span class="id"> /[!Snoo]//|_</span><span class="id"> -&gt;]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /S</span><span class="id"> Snoo;</span><span class="gallina-kwd"> exists</span><span class="id"> 0%N</span>.<br/>
<span class="id">have</span><span class="id"> [/ereal_sup_ninfty</span><span class="id"> loo|lnoo]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> l</span><span class="id"> -oo</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> exfalso;</span><span class="id"> apply:</span><span class="id"> Snoo</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span> (<span class="id">loo</span> (<span class="id">u_</span><span class="id"> n</span>))<span class="id">//;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">have</span><span class="id"> {Snoo}[N</span><span class="id"> Snoo]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> N,</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span> (<span class="id">n</span><span class="id"> &gt;=</span><span class="id"> N</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> !=</span><span class="id"> -oo</span>.<br/>
&nbsp;&nbsp;<span class="id">move/existsNP</span><span class="id"> :</span><span class="id"> Snoo</span><span class="id"> =&gt;</span><span class="id"> [m</span><span class="id"> /eqP]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> neq_lt</span><span class="id"> =&gt;</span><span class="id"> /orP[|umoo];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltNge</span><span class="id"> leNye</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> mk;</span><span class="id"> rewrite</span><span class="id"> gt_eqF//</span> (<span class="id">lt_le_trans</span><span class="id"> umoo</span>)<span class="id">//</span><span class="id"> nd_u_</span>.<br/>
<span class="id">have</span><span class="id"> u_fin_num</span><span class="id"> n</span><span class="id"> :</span> (<span class="id">n</span><span class="id"> &gt;=</span><span class="id"> N</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> Nn;</span><span class="id"> rewrite</span><span class="id"> fin_numE</span><span class="id"> Snoo//=;</span><span class="id"> apply:</span><span class="id"> contra_notN</span><span class="id"> Spoo</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> unpoo</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">have</span><span class="id"> [{lnoo}loo|lpoo]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> l</span><span class="id"> +oo</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> loo;</span><span class="id"> apply/cvgeyPge</span><span class="id"> =&gt;</span><span class="id"> M</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /ereal_sup_gt[_</span><span class="id"> [n</span><span class="id"> _]</span><span class="id"> &lt;-</span><span class="id"> Mun]</span><span class="id"> :</span><span class="id"> M%:E</span><span class="id"> &lt;</span><span class="id"> l</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> loo//</span><span class="id"> ltry</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> m</span><span class="id"> /=</span><span class="id"> nm;</span><span class="id"> rewrite</span> (<span class="id">le_trans</span> (<span class="id">ltW</span><span class="id"> Mun</span>))<span class="id">//</span><span class="id"> nd_u_</span>.<br/>
<span class="id">have</span><span class="id"> l_fin_num</span><span class="id"> :</span><span class="id"> l</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> fin_numE</span><span class="id"> lpoo</span><span class="id"> lnoo</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@fineK</span><span class="id"> _</span><span class="id"> l</span>)<span class="id">//;</span><span class="id"> apply/fine_cvgP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> fin_numE</span><span class="id"> Snoo/=;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> N</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> contra_notN</span><span class="id"> Spoo</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> unpoo;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">cvg_shiftn</span><span class="id"> N</span>)<span class="id">;</span><span class="id"> set</span><span class="id"> v_</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> _]_</span><span class="id"> _</span>.<br/>
<span class="id">have</span><span class="id"> &lt;-</span><span class="id"> :</span><span class="id"> sup</span> (<span class="id">range</span><span class="id"> v_</span>)<span class="id"> =</span><span class="id"> fine</span><span class="id"> l</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> EFin_inj;</span><span class="id"> rewrite</span><span class="id"> -ereal_sup_EFin//;</span><span class="id"> last</span><span class="id"> 2</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> exists</span> (<span class="id">fine</span><span class="id"> l</span>)<span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> _</span><span class="id"> [m</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span><span class="id"> /v_</span><span class="id"> /=</span><span class="id"> fine_le//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> u_fin_num//</span><span class="id"> leq_addl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ereal_sup_ubound;</span><span class="gallina-kwd"> exists</span> (<span class="id">m</span><span class="id"> +</span><span class="id"> N</span>)<span class="id">%N</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">v_</span><span class="id"> 0%N</span>)<span class="id">,</span><span class="id"> 0%N</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> fineK//;</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> eq_le;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> le_ereal_sup</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> [_</span><span class="id"> [m</span><span class="id"> _]</span><span class="id"> &lt;-]</span><span class="id"> &lt;-</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">m</span><span class="id"> +</span><span class="id"> N</span>)<span class="id">%N</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> /v_/=</span><span class="id"> fineK//</span><span class="id"> u_fin_num//</span><span class="id"> leq_addl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> ub_ereal_sup</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> _</span><span class="id"> [m</span><span class="id"> _]</span><span class="id"> &lt;-</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">u_</span> (<span class="id">m</span><span class="id"> +</span><span class="id"> N</span>)<span class="id">%N</span>))<span class="id">//;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nd_u_//</span><span class="id"> leq_addr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> ereal_sup_ubound</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span> (<span class="id">fine</span> (<span class="id">u_</span> (<span class="id">m</span><span class="id"> +</span><span class="id"> N</span>)))<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> fineK//</span><span class="id"> u_fin_num//</span><span class="id"> leq_addl</span>.<br/>
<span class="id">apply:</span><span class="id"> nondecreasing_cvgn</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> /v_</span><span class="id"> /=</span><span class="id"> fine_le</span><span class="id"> ?u_fin_num</span><span class="id"> ?leq_addl//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> nd_u_//</span><span class="id"> leq_add2r</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span> (<span class="id">fine</span><span class="id"> l</span>)<span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> _</span><span class="id"> [m</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span><span class="id"> /v_</span><span class="id"> /=</span><span class="id"> fine_le//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> u_fin_num//</span><span class="id"> leq_addl</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ereal_sup_ubound;</span><span class="gallina-kwd"> exists</span> (<span class="id">m</span><span class="id"> +</span><span class="id"> N</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_nondecreasing_is_cvgn</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> exact:</span><span class="id"> ereal_nondecreasing_cvgn</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_nonincreasing_cvgn</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> ereal_inf</span> (<span class="id">u_</span><span class="id"> @`</span><span class="id"> setT</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ni_u;</span><span class="id"> rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> _]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> -%E</span><span class="id"> \o</span><span class="id"> -%E</span><span class="id"> \o</span><span class="id"> u_</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> oppeK</span>.<br/>
<span class="id">apply:</span><span class="id"> cvgeN</span>.<br/>
<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> X]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> ereal_sup</span> (<span class="id">range</span> (<span class="id">-%E</span><span class="id"> \o</span><span class="id"> u_</span>)))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">congr</span><span class="id"> ereal_sup;</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> split=&gt;</span><span class="id"> [[_</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]]</span><span class="id"> &lt;-|[n</span><span class="id"> _]</span><span class="id"> &lt;-];</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> [exists</span><span class="id"> n</span><span class="id"> |</span><span class="gallina-kwd"> exists</span> (<span class="id">u_</span><span class="id"> n</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> n]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ereal_nondecreasing_cvgn;</span><span class="id"> rewrite</span><span class="id"> ereal_nondecreasing_oppn</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_nonincreasing_is_cvgn</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id"> ^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span><span class="id"> u_</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u_</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> apply:</span><span class="id"> ereal_nonincreasing_cvgn</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_nondecreasing_series</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realDomainType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<br/>
&nbsp;&nbsp;(<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> u_ge0</span><span class="id"> n</span><span class="id"> m</span><span class="id"> nm;</span><span class="id"> rewrite</span><span class="id"> lee_sum_nneg_natr//</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> _</span><span class="id"> /u_ge0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> congr_lim</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> =</span><span class="id"> g</span><span class="id"> -&gt;</span><span class="id"> limn</span><span class="id"> f</span><span class="id"> =</span><span class="id"> limn</span><span class="id"> g</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> -&gt;</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseries_cond</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span> (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> P</span><span class="id"> N</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span><span class="id"> &amp;&amp;</span> (<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span>)<span class="id">%N</span>)<span class="id"> f</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/congr_lim/eq_fun</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> apply:</span><span class="id"> big_nat_widenl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseries_mkcondl</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span> (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> P</span><span class="id"> Q</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span><span class="id"> &amp;&amp;</span><span class="id"> Q</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> Q</span><span class="id"> i</span>)<span class="gallina-kwd"> if</span><span class="id"> P</span><span class="id"> i</span><span class="gallina-kwd"> then</span><span class="id"> f</span><span class="id"> i</span><span class="gallina-kwd"> else</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/congr_lim/funext</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> big_mkcondl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseries_mkcondr</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span> (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> P</span><span class="id"> Q</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span><span class="id"> &amp;&amp;</span><span class="id"> Q</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="gallina-kwd"> if</span><span class="id"> Q</span><span class="id"> i</span><span class="gallina-kwd"> then</span><span class="id"> f</span><span class="id"> i</span><span class="gallina-kwd"> else</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/congr_lim/funext</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> big_mkcondr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eq_eseriesr</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> {N}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> g</span><span class="id"> i</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> g</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> efg;</span><span class="id"> apply/congr_lim/funext</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> eq_bigr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eq_eseriesl</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">P</span><span class="id"> Q</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">P</span><span class="id"> =1</span><span class="id"> Q</span><span class="id"> -&gt;</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> Q</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> efg;</span><span class="id"> apply/congr_lim/funext</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> eq_bigl</span>. Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> eq_eseriesl</span><span class="id"> {R</span><span class="id"> P}</span><span class="id"> Q</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_mkord</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> {pred</span><span class="id"> nat}</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span>)<span class="id">%E</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -big_mkord</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> ereal_series</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_series_cond</span><span class="id"> k</span><span class="id"> P</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">k</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span> (<span class="id">k</span><span class="id"> &lt;=</span><span class="id"> i</span>)<span class="id">%N</span><span class="id"> &amp;&amp;</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/congr_lim/funext</span><span class="id"> =&gt;</span><span class="id"> n</span>.<br/>
<span class="id">rewrite</span><span class="id"> big_nat_cond</span> (<span class="id">big_nat_widenl</span><span class="id"> k</span><span class="id"> 0%N</span>)<span class="id">//=</span><span class="id"> 2!big_mkord</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> eq_big</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> andbAC</span><span class="id"> ltn_ord</span><span class="id"> andbT</span><span class="id"> andbb</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_series</span><span class="id"> k</span><span class="id"> :</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span> (<span class="id">k</span><span class="id"> &lt;=</span><span class="id"> i</span>)<span class="id">%N</span>)<span class="id"> f</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> ereal_series_cond;</span><span class="id"> congr</span> (<span class="id">limn</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> apply/funext</span><span class="id"> =&gt;</span><span class="id"> n</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> eq_big</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> andbT</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseries0</span><span class="id"> N</span><span class="id"> P</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> i,</span> (<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f0;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">under</span><span class="id"> eq_fun</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> big_nat_cond</span><span class="id"> big1;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> k</span><span class="id"> /andP[/andP[+</span><span class="id"> _]];</span><span class="id"> exact:</span><span class="id"> f0</span>.<br/>
&nbsp;&nbsp;<span class="id">over</span>.<br/>
<span class="id">exact:</span><span class="id"> cvg_cst</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseries_pred0</span><span class="id"> P</span><span class="id"> :</span><span class="id"> P</span><span class="id"> =1</span><span class="id"> xpred0</span><span class="id"> -&gt;</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> P0;</span><span class="id"> rewrite</span> (_<span class="id"> :</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> _</span>)<span class="id"> =</span><span class="id"> fun=&gt;</span><span class="id"> 0</span>)<span class="id"> ?lim_cst//</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> big1</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> P0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ereal_series</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_lim_ge</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> k</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> k</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span><span class="id"> &lt;=</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move/ereal_nondecreasing_series/ereal_nondecreasing_cvgn/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ereal_sup_ubound;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseries_pinfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> k</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> !=</span><span class="id"> -oo</span>)<span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> k</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> k</span><span class="id"> =</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span><span class="id"> =</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> uNy</span><span class="id"> Pk</span><span class="id"> uky;</span><span class="id"> apply:</span><span class="id"> lim_near_cst</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
<span class="id">apply/eqP;</span><span class="id"> rewrite</span><span class="id"> big_mkord</span><span class="id"> esum_eqy;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /=</span><span class="id"> i</span><span class="id"> Pi;</span><span class="id"> rewrite</span><span class="id"> uNy</span>.<br/>
<span class="id">apply/existsP</span>.<br/>
<span class="id">have</span><span class="id"> kn</span><span class="id"> :</span> (<span class="id">k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span>.<span class="id">+1</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">Ordinal</span><span class="id"> kn</span>)<span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> uky</span><span class="id"> eqxx</span><span class="id"> andbT</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_eseries</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>).<br/>
<span class="vernacular">Implicit</span><span class="gallina-kwd"> Type</span><span class="id"> P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_ereal_nneg_natsum_cond</span><span class="id"> m</span><span class="id"> P</span><span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move/lee_sum_nneg_natr/ereal_nondecreasing_cvgn</span><span class="id"> =&gt;</span><span class="id"> cu;</span><span class="id"> apply:</span><span class="id"> cvgP;</span><span class="id"> exact:</span><span class="id"> cu</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_ereal_npos_natsum_cond</span><span class="id"> m</span><span class="id"> P</span><span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move/lee_sum_npos_natr/ereal_nonincreasing_cvgn</span><span class="id"> =&gt;</span><span class="id"> cu;</span><span class="id"> apply:</span><span class="id"> cvgP;</span><span class="id"> exact:</span><span class="id"> cu</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_ereal_nneg_natsum</span><span class="id"> m</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> u_ge0;</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_nneg_natsum_cond</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /u_ge0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_ereal_npos_natsum</span><span class="id"> m</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> u_le0;</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_npos_natsum_cond</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /u_le0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_nneseries_cond</span><span class="id"> P</span><span class="id"> N</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> u_ge0;</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_nneg_natsum_cond</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> _;</span><span class="id"> exact:</span><span class="id"> u_ge0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_npeseries_cond</span><span class="id"> P</span><span class="id"> N</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> u_le0;</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_npos_natsum_cond</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> _</span><span class="id"> /u_le0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_nneseries</span><span class="id"> P</span><span class="id"> N</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> is_cvg_nneseries_cond</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_npeseries</span><span class="id"> P</span><span class="id"> N</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> is_cvg_npeseries_cond</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_ge0</span><span class="id"> P</span><span class="id"> N</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u0;</span><span class="id"> apply:</span> (<span class="id">lime_ge</span> (<span class="id">is_cvg_nneseries</span><span class="id"> u0</span>)).<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> k;</span><span class="id"> rewrite</span><span class="id"> sume_ge0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> npeseries_le0</span><span class="id"> P</span><span class="id"> N</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n</span><span class="id"> :</span><span class="id"> nat,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span><span class="id"> &lt;=</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u0;</span><span class="id"> apply:</span> (<span class="id">lime_le</span> (<span class="id">is_cvg_npeseries</span><span class="id"> u0</span>)).<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> k;</span><span class="id"> rewrite</span><span class="id"> sume_le0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_eseries</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> is_cvg_nneseries</span><span class="id"> {R}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> nneseries_ge0</span><span class="id"> {R</span><span class="id"> u_</span><span class="id"> P}</span><span class="id"> N</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nnseries_is_cvg</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> i</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;oo</span>) (<span class="id">u</span><span class="id"> k</span>)<span class="id">%:E</span><span class="id"> &lt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span> (<span class="id">series</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> nondecreasing_is_cvgn</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn;</span><span class="id"> rewrite</span><span class="id"> /series/=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">subnKC</span><span class="id"> mn</span>)<span class="id"> {2}/index_iota</span><span class="id"> subn0</span><span class="id"> iotaD</span><span class="id"> big_cat/=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> add0n</span><span class="id"> -{2}</span>(<span class="id">subn0</span><span class="id"> m</span>)<span class="id"> -/</span>(<span class="id">index_iota</span><span class="id"> _</span><span class="id"> _</span>)<span class="id"> lerDl</span><span class="id"> sumr_ge0</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">fine</span> (<span class="id">\sum_</span>(<span class="id">k</span><span class="id"> &lt;oo</span>) (<span class="id">u</span><span class="id"> k</span>)<span class="id">%:E</span>)).<br/>
<span class="id">rewrite</span><span class="id"> /ubound/=</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span><span class="id"> -lee_fin</span><span class="id"> fineK//;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> fin_num_abs</span><span class="id"> gee0_abs//;</span><span class="id"> apply:</span><span class="id"> nneseries_ge0</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> i</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> lee_fin</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -sumEFin;</span><span class="id"> apply:</span><span class="id"> nneseries_lim_ge</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> lee_fin</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseriesZl</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> x</span><span class="id"> N</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> i</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>) (<span class="id">x%:E</span><span class="id"> *</span><span class="id"> f</span><span class="id"> i</span>)<span class="id"> =</span><span class="id"> x%:E</span><span class="id"> *</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f0;</span><span class="id"> rewrite</span><span class="id"> -limeMl//;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> is_cvg_nneseries</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/congr_lim/funext</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> ge0_sume_distrr</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> adde_def_nneseries</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span><span class="id"> Q</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> n</span>)<span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> Q</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span>)<span class="id"> +?</span> (<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> Q</span><span class="id"> i</span>)<span class="id"> g</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f0</span><span class="id"> g0;</span><span class="id"> rewrite</span><span class="id"> /adde_def</span><span class="id"> !negb_and;</span><span class="id"> apply/andP;</span><span class="id"> split;</span><span class="id"> apply/orP</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> right;</span><span class="id"> apply/eqP</span><span class="id"> =&gt;</span><span class="id"> Qg;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> nneseries_ge0</span><span class="id"> 0</span><span class="id"> g0;</span><span class="id"> rewrite</span><span class="id"> Qg</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> left;</span><span class="id"> apply/eqP</span><span class="id"> =&gt;</span><span class="id"> Pf;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> nneseries_ge0</span><span class="id"> 0</span><span class="id"> f0;</span><span class="id"> rewrite</span><span class="id"> Pf</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgPpinfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> A,</span> (<span class="id">0</span><span class="id"> &lt;</span><span class="id"> A</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> A%:E</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> split=&gt;</span><span class="id"> [/cvgeyPge//|u_ge];</span><span class="id"> apply/cvgeyPgey;</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> u_ge</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgPninfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> A,</span> (<span class="id">A</span><span class="id"> &lt;</span><span class="id"> 0</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> u_</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> A%:E</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> split=&gt;</span><span class="id"> [/cvgeNyPle//|u_ge];</span><span class="id"> apply/cvgeNyPleNy;</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> u_ge</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_squeeze</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> f</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> h</span><span class="id"> x</span>)<span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> h</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> squeeze_cvge</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_pinfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u_</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<br/>
&nbsp;&nbsp;(<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> k</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u_</span><span class="id"> n</span>)<span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> k</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">u_</span><span class="id"> k</span><span class="id"> =</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u_</span><span class="id"> i</span><span class="id"> =</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_ge0</span><span class="id"> Pk</span><span class="id"> ukoo;</span><span class="id"> apply:</span> (<span class="id">eseries_pinfty</span><span class="id"> _</span><span class="id"> Pk</span><span class="id"> ukoo</span>)<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> n</span><span class="id"> Pn</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gt_eqF//</span> (<span class="id">lt_le_trans</span><span class="id"> _</span> (<span class="id">u_ge0</span><span class="id"> _</span><span class="id"> Pn</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lee_nneseries</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u</span><span class="id"> v</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> N</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> i</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> v</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u</span><span class="id"> i</span><span class="id"> &lt;=</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> v</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u0</span><span class="id"> Puv;</span><span class="id"> apply:</span><span class="id"> lee_lim</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_nneg_natsum_cond</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> ?</span><span class="id"> /u0;</span><span class="id"> exact</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_nneg_natsum_cond</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> _</span><span class="id"> Pn</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">Puv</span><span class="id"> _</span><span class="id"> Pn</span>))<span class="id">//</span><span class="id"> u0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> near=&gt;</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> lee_sum</span><span class="id"> =&gt;</span><span class="id"> k;</span><span class="id"> exact:</span><span class="id"> Puv</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> subset_lee_nneseries</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">P</span><span class="id"> Q</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">N</span><span class="id"> :</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> Q</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> i</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> Q</span><span class="id"> i</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u</span><span class="id"> i</span><span class="id"> &lt;=</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> Q</span><span class="id"> i</span>)<span class="id"> u</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Pu</span><span class="id"> PQ;</span><span class="id"> apply:</span><span class="id"> lee_lim</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> ereal_nondecreasing_is_cvgn</span><span class="id"> =&gt;</span><span class="id"> a</span><span class="id"> b</span><span class="id"> ab</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> lee_sum_nneg_natr</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> n</span><span class="id"> Mn</span><span class="id"> /PQ;</span><span class="id"> exact:</span><span class="id"> Pu</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> ereal_nondecreasing_is_cvgn</span><span class="id"> =&gt;</span><span class="id"> a</span><span class="id"> b</span><span class="id"> ab</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> lee_sum_nneg_natr</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> n</span><span class="id"> Mn;</span><span class="id"> exact:</span><span class="id"> Pu</span>.<br/>
<span class="id">-</span><span class="id"> near=&gt;</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> lee_sum_nneg_subset</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> =&gt;</span><span class="id"> /andP[iP</span><span class="id"> iQ];</span><span class="id"> exact:</span><span class="id"> Pu</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lee_npeseries</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">u</span><span class="id"> v</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> i</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> n</span><span class="id"> -&gt;</span><span class="id"> v</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> v</span><span class="id"> i</span><span class="id"> &lt;=</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> u</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u0</span><span class="id"> Puv;</span><span class="id"> apply:</span><span class="id"> lee_lim</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_npos_natsum_cond</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> _</span><span class="id"> /[dup]</span><span class="id"> Pn</span><span class="id"> /Puv/le_trans;</span><span class="id"> apply</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/u0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_npos_natsum_cond</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> _</span><span class="id"> Pn;</span><span class="id"> exact/u0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> near=&gt;</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> lee_sum</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgD_pinfty_fin</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \+</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgeD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgD_ninfty_fin</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \+</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgeD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgD_pinfty_pinfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \+</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgeD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgD_ninfty_ninfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \+</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgeD</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvgeD` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgD_ninfty_ninfty</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgD_ninfty_ninfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgD</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">a</span><span class="id"> +?</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \+</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> +</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgeD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgB</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">a</span><span class="id"> +?</span><span class="id"> -</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \-</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgeB</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_is_cvgD</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u</span><span class="id"> v</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">limn</span><span class="id"> u</span><span class="id"> +?</span><span class="id"> limn</span><span class="id"> v</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> v</span><span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> is_cvgeD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvg_sub0</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">k</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -</span><span class="id"> k</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvge_sub0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_limD</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> g</span><span class="id"> -&gt;</span><span class="id"> limn</span><span class="id"> f</span><span class="id"> +?</span><span class="id"> limn</span><span class="id"> g</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="id">f</span><span class="id"> \+</span><span class="id"> g</span>)<span class="id"> =</span><span class="id"> limn</span><span class="id"> f</span><span class="id"> +</span><span class="id"> limn</span><span class="id"> g</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> limeD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgM_gt0_pinfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">0</span><span class="id"> &lt;</span><span class="id"> b</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> b_lt0</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> have</span><span class="id"> /=</span><span class="id"> :=</span><span class="id"> cvgeM</span><span class="id"> _</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> rewrite</span><span class="id"> gt0_mulye//;</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mule_def_infty_neq0//</span><span class="id"> gt_eqF</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgM_lt0_pinfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">b</span><span class="id"> &lt;</span><span class="id"> 0</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> b_lt0</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> have</span><span class="id"> /=</span><span class="id"> :=</span><span class="id"> cvgeM</span><span class="id"> _</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> rewrite</span><span class="id"> lt0_mulye//;</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mule_def_infty_neq0//</span><span class="id"> lt_eqF</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgM_gt0_ninfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">0</span><span class="id"> &lt;</span><span class="id"> b</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> b_lt0</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> have</span><span class="id"> /=</span><span class="id"> :=</span><span class="id"> cvgeM</span><span class="id"> _</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> rewrite</span><span class="id"> gt0_mulNye//;</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mule_def_infty_neq0//</span><span class="id"> gt_eqF</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgM_lt0_ninfty</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">b</span><span class="id"> &lt;</span><span class="id"> 0</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> b_lt0</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> have</span><span class="id"> /=</span><span class="id"> :=</span><span class="id"> cvgeM</span><span class="id"> _</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> rewrite</span><span class="id"> lt0_mulNye//;</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mule_def_infty_neq0//</span><span class="id"> lt_eqF</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_cvgM</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id"> ^nat</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;<span class="id">a</span><span class="id"> *?</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> *</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgeM</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__ereal_lim_sum</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">I</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">l</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> I</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> k</span><span class="id"> n,</span><span class="id"> P</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> k</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> P</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> k</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> k</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;-</span><span class="id"> r</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> n</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;-</span><span class="id"> r</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> l</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> f0</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_nnesum</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> f0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> lim_shift_cst</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id"> ^nat</span>) (<span class="id">l</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>)<span class="id"> -&gt;</span><span class="id"> -oo</span><span class="id"> &lt;</span><span class="id"> l</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> l</span><span class="id"> +</span><span class="id"> u</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> l</span><span class="id"> +</span><span class="id"> limn</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cu</span><span class="id"> u0</span><span class="id"> hl;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgeD</span> (<span class="id">cu</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> cvg_cst</span>.<br/>
<span class="id">rewrite</span><span class="id"> ltninfty_adde_def//</span><span class="id"> inE</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 0</span>)<span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> lime_ge</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> nearW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> eseries_mkcond</span><span class="id"> [R</span><span class="id"> :</span><span class="id"> realFieldType]</span><span class="id"> [P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat]</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> N</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span>)<span class="gallina-kwd"> if</span><span class="id"> P</span><span class="id"> i</span><span class="gallina-kwd"> then</span><span class="id"> f</span><span class="id"> i</span><span class="gallina-kwd"> else</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/congr_lim/eq_fun</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> apply:</span><span class="id"> big_mkcond</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> nneseries_split</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> near_eq_lim</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> g</span><span class="id"> -&gt;</span><span class="id"> {near</span><span class="id"> \oo,</span><span class="id"> f</span><span class="id"> =1</span><span class="id"> g}</span><span class="id"> -&gt;</span><span class="id"> limn</span><span class="id"> f</span><span class="id"> =</span><span class="id"> limn</span><span class="id"> g</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cg</span><span class="id"> fg;</span><span class="id"> suff:</span><span class="id"> f</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> limn</span><span class="id"> g</span><span class="gallina-kwd"> by</span><span class="id"> exact/cvg_lim</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvg_trans</span><span class="id"> cg;</span><span class="id"> apply:</span><span class="id"> near_eq_cvg;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply/esym</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_split</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> N</span><span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> k,</span> (<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> k</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;oo</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> N</span><span class="id"> +</span><span class="id"> n</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> +</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> +</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;oo</span>)<span class="id"> f</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">elim:</span><span class="id"> n</span><span class="id"> N</span><span class="id"> =&gt;</span><span class="id"> [N</span><span class="id"> |n</span><span class="id"> ih</span><span class="id"> N]</span><span class="id"> f0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> addn0</span><span class="id"> [in</span><span class="id"> X</span><span class="gallina-kwd"> in</span><span class="id"> _</span><span class="id"> =</span><span class="id"> X</span><span class="id"> +</span><span class="id"> _]/index_iota</span><span class="id"> subnn</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">@size0nil</span><span class="id"> _</span> (<span class="id">iota</span><span class="id"> _</span><span class="id"> 0</span>))<span class="id"> ?size_iota//</span><span class="id"> big_nil</span><span class="id"> add0r</span>.<br/>
<span class="id">rewrite</span><span class="id"> addnS</span><span class="id"> big_nat_recr/=</span><span class="id"> ?leq_addr//</span><span class="id"> -addeA</span>.<br/>
<span class="id">rewrite</span><span class="id"> [f</span> (<span class="id">N</span><span class="id"> +</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> +</span><span class="id"> _]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> +</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;oo</span>)<span class="id"> f</span><span class="id"> k</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> ih</span>.<br/>
<span class="id">have</span><span class="id"> cf</span><span class="id"> m</span><span class="id"> :</span> (<span class="id">m</span><span class="id"> &gt;=</span><span class="id"> N</span>)<span class="id">%N</span><span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> f</span><span class="id"> k</span>).<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> Nm;</span><span class="id"> apply:</span><span class="id"> is_cvg_ereal_nneg_natsum</span><span class="id"> =&gt;</span><span class="id"> p</span><span class="id"> Nmp</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> f0//</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> Nmp</span>).<br/>
<span class="id">rewrite</span><span class="id"> -lim_shift_cst;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 0</span>)<span class="id">//</span><span class="id"> f0//</span><span class="id"> leq_addr</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span> (<span class="id">@near_eq_lim</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> f</span> (<span class="id">N</span><span class="id"> +</span><span class="id"> n</span>)<span class="id">%N</span><span class="id"> +</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cf;</span><span class="id"> rewrite</span><span class="id"> leq_addr</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -big_ltn//;</span><span class="id"> exact:</span><span class="id"> nbhs_infty_gt</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> cf;</span><span class="id"> rewrite</span><span class="id"> -addnS</span><span class="id"> leq_addr</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> m;</span><span class="id"> rewrite</span><span class="id"> big_seq;</span><span class="id"> apply:</span><span class="id"> sume_ge0</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> p</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> mem_index_iota</span><span class="id"> =&gt;</span><span class="id"> /andP[Nnp</span><span class="id"> _]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> f0//</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> Nnp</span>)<span class="id">//</span><span class="id"> -addnS</span><span class="id"> leq_addr</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_split_cond</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> N</span><span class="id"> n</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> P</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> k</span>)<span class="id">%E</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> =</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> N</span><span class="id"> +</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> +</span><span class="id"> \sum_</span>(<span class="id">N</span><span class="id"> +</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> NPf;</span><span class="id"> rewrite</span><span class="id"> eseries_mkcond</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> _</span><span class="id"> =</span> (_<span class="id"> +</span><span class="id"> X</span>)<span class="id">]eseries_mkcond</span>.<br/>
<span class="id">rewrite</span><span class="id"> big_mkcond/=</span> (<span class="id">nneseries_split</span><span class="id"> n</span>)<span class="id">//</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> Nk</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> case:</span><span class="id"> ifPn</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> NPf</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> nneseries_split</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> nneseries_split</span><span class="id"> {R</span><span class="id"> f}</span><span class="id"> _</span><span class="id"> _</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> nneseries_split_cond</span><span class="id"> {R</span><span class="id"> f}</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_recl</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> k</span>)<span class="id"> -&gt;</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;oo</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> =</span><span class="id"> f</span><span class="id"> 0%N</span><span class="id"> +</span><span class="id"> \sum_</span>(<span class="id">1</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;oo</span>)<span class="id"> f</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f0;</span><span class="id"> rewrite</span><span class="id"> [LHS]</span>(<span class="id">nneseries_split</span><span class="id"> _</span><span class="id"> 1</span>)<span class="id">//</span><span class="id"> add0n</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /index_iota</span><span class="id"> subn0/=</span><span class="id"> big_cons</span><span class="id"> big_nil</span><span class="id"> addr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_tail_cvg</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> P</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> P</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> k</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> @[N</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> foo</span><span class="id"> f0</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> ereal_nondecreasing_is_cvgn</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> lee_sum_nneg_natr</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> _;</span><span class="id"> exact:</span><span class="id"> f0</span>.<br/>
<span class="id">move/cvg_ex</span><span class="id"> =&gt;</span><span class="id"> [[l</span><span class="id"> fl||/cvg_lim</span><span class="id"> fnoo]]</span><span class="id"> /=;</span><span class="id"> last</span><span class="id"> 2</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> fpoo;</span><span class="id"> rewrite</span><span class="id"> fpoo//</span><span class="gallina-kwd"> in</span><span class="id"> foo</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> have</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span><span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> nneseries_ge0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> fnoo</span>.<br/>
<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> @</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> _]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="gallina-kwd"> fun</span><span class="id"> N</span><span class="id"> =&gt;</span><span class="id"> l%:E</span><span class="id"> -</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> &lt;</span><span class="id"> N</span><span class="id"> |</span><span class="id"> P</span><span class="id"> k</span>)<span class="id"> f</span><span class="id"> k</span>).<br/>
&nbsp;&nbsp;<span class="id">apply/cvgeNP;</span><span class="id"> rewrite</span><span class="id"> oppe0</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span><span class="id"> eq_fun</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> oppeD//</span><span class="id"> oppeK</span><span class="id"> addeC</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/cvge_sub0</span>.<br/>
<span class="id">apply/funext</span><span class="id"> =&gt;</span><span class="id"> N;</span><span class="id"> apply/esym/eqP;</span><span class="id"> rewrite</span><span class="id"> sube_eq//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> addeC</span><span class="id"> -nneseries_split_cond//;</span><span class="id"> exact/eqP/esym/cvg_lim</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ge0_adde_def//=</span><span class="id"> ?inE;</span><span class="id"> [exact:</span><span class="id"> nneseries_ge0|exact:</span><span class="id"> sume_ge0]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseriesD</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> i</span>)<span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> i</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>) (<span class="id">f</span><span class="id"> i</span><span class="id"> +</span><span class="id"> g</span><span class="id"> i</span>)<span class="id"> =</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> +</span><span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> g</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f_eq0</span><span class="id"> g_eq0</span>.<br/>
<span class="id">transitivity</span> (<span class="id">limn</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> +</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> g</span><span class="id"> i</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/congr_lim/funext</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> big_split</span>.<br/>
<span class="id">rewrite</span><span class="id"> limeD</span><span class="id"> /adde_def</span><span class="id"> //=;</span><span class="id"> do</span><span class="id"> ?</span><span class="id"> exact:</span><span class="id"> is_cvg_nneseries</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ![_</span><span class="id"> ==</span><span class="id"> -oo]gt_eqF</span><span class="id"> ?andbF//</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">?[_</span><span class="id"> &lt;</span><span class="id"> _]real0//</span><span class="id"> nneseries_ge0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_sum_nat</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>)<span class="id"> n</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i</span><span class="id"> j,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> i</span><span class="id"> j</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">j</span><span class="id"> &lt;oo</span>) (<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> j</span>)<span class="id"> =</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>) (<span class="id">\sum_</span>(<span class="id">j</span><span class="id"> &lt;oo</span>) (<span class="id">f</span><span class="id"> i</span><span class="id"> j</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f0;</span><span class="id"> elim:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> [|n</span><span class="id"> IHn]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> big_geq//</span><span class="id"> eseries0//</span><span class="id"> =&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> big_geq</span>.<br/>
<span class="id">rewrite</span><span class="id"> big_nat_recr//</span><span class="id"> -IHn/=</span><span class="id"> -nneseriesD//;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> sume_ge0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/congr_lim/funext</span><span class="id"> =&gt;</span><span class="id"> m;</span><span class="id"> apply:</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> big_nat_recr</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_sum</span><span class="id"> I</span> (<span class="id">r</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> I</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> {pred</span><span class="id"> I}</span>)<span class="id"> [R</span><span class="id"> :</span><span class="id"> realType]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R]</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> i</span><span class="id"> j,</span><span class="id"> P</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> i</span><span class="id"> j</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">j</span><span class="id"> &lt;oo</span>)<span class="id"> \sum_</span>(<span class="id">i</span><span class="id"> &lt;-</span><span class="id"> r</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> j</span><span class="id"> =</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;-</span><span class="id"> r</span><span class="id"> |</span><span class="id"> P</span><span class="id"> i</span>)<span class="id"> \sum_</span>(<span class="id">j</span><span class="id"> &lt;oo</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> j</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f_ge0;</span><span class="id"> case</span><span class="id"> Dr</span><span class="id"> :</span><span class="id"> r</span><span class="id"> =&gt;</span><span class="id"> [|i</span><span class="id"> r'];</span><span class="id"> rewrite</span><span class="id"> -?{}[_</span><span class="id"> ::</span><span class="id"> _]Dr</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> big_nil</span><span class="id"> eseries0//</span><span class="id"> =&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> big_nil</span>.<br/>
<span class="id">rewrite</span><span class="id"> {r'}</span>(<span class="id">big_nth</span><span class="id"> i</span>)<span class="id"> big_mkcond</span>.<br/>
<span class="id">rewrite</span> (<span class="id">eq_eseriesr</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> big_nth</span><span class="id"> i</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
<span class="id">rewrite</span> (<span class="id">eq_eseriesr</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> big_mkcond</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">/=</span>.<br/>
<span class="id">rewrite</span><span class="id"> nneseries_sum_nat;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> case:</span><span class="id"> ifP</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> /f_ge0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> j</span><span class="id"> _;</span><span class="id"> case:</span><span class="id"> ifP</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> eseries0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nneseries_addn</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">f</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> k</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> i</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">i</span><span class="id"> &lt;oo</span>)<span class="id"> f</span> (<span class="id">i</span><span class="id"> +</span><span class="id"> k</span>)<span class="id">%N</span><span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">k</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;oo</span>)<span class="id"> f</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f0;</span><span class="id"> have</span><span class="id"> /cvg_ex[/=</span><span class="id"> l</span><span class="id"> fl]</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">\sum_</span>(<span class="id">k</span><span class="id"> &lt;=</span><span class="id"> i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ereal_nondecreasing_is_cvgn</span><span class="id"> =&gt;</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn;</span><span class="id"> exact:</span><span class="id"> lee_sum_nneg_natr</span>.<br/>
<span class="id">rewrite</span> (<span class="id">cvg_lim</span><span class="id"> _</span><span class="id"> fl</span>)<span class="id">//;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="id">move:</span><span class="id"> fl;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">cvg_shiftn</span><span class="id"> k</span>)<span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -{1}</span>(<span class="id">add0n</span><span class="id"> k</span>)<span class="id">//</span><span class="id"> big_addn</span><span class="id"> addnK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lte_lim</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">u</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">M</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> M%:E</span><span class="id"> &lt;</span><span class="id"> limn</span><span class="id"> u</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> M%:E</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ndu</span><span class="id"> cu</span><span class="id"> Ml;</span><span class="id"> have</span><span class="id"> [[n</span><span class="id"> Mun]|]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="gallina-kwd">exists</span><span class="id"> n,</span><span class="id"> M%:E</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>).<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> m;</span><span class="id"> suff</span><span class="id"> :</span><span class="id"> u</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> m</span><span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> le_trans</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> m;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> p</span><span class="id"> q;</span><span class="id"> apply/ndu/ltnW</span>.<br/>
<span class="id">move/forallNP</span><span class="id"> =&gt;</span><span class="id"> Mu</span>.<br/>
<span class="id">have</span><span class="id"> {}Mu</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> M%:E</span><span class="id"> &gt;</span><span class="id"> u</span><span class="id"> x</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> ltNge;</span><span class="id"> apply/negP</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> limn</span><span class="id"> u</span><span class="id"> &lt;=</span><span class="id"> M%:E</span><span class="gallina-kwd"> by</span><span class="id"> apply</span><span class="id"> lime_le</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> near=&gt;</span><span class="id"> m;</span><span class="id"> apply/ltW/Mu</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/</span>(<span class="id">lt_le_trans</span><span class="id"> Ml</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> sequences_ereal</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;use `cvgeyPge` or a variant instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgPpinfty</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgPpinfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;use `cvgeNyPle` or a variant instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgPninfty</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgPninfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `squeeze_cvge` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_squeeze</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_squeeze</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvgeD` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgD_pinfty_fin</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgD_pinfty_fin</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvgeD` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgD_ninfty_fin</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgD_ninfty_fin</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvgeD` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgD_pinfty_pinfty</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgD_pinfty_pinfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgeD` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgD</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgD</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgeB` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgB</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgB</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `is_cvgeD` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_is_cvgD</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_is_cvgD</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvge_sub0` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvg_sub0</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvg_sub0</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `limeD` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_limD</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_limD</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvgeM` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgM_gt0_pinfty</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgM_gt0_pinfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvgeM` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgM_lt0_pinfty</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgM_lt0_pinfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvgeM` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgM_gt0_ninfty</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgM_gt0_ninfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvgeM` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgM_lt0_ninfty</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgM_lt0_ninfty</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgeM` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvgM</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvgM</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvg_nnesum` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_lim_sum</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_lim_sum</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvg_abse0P` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvg_abs0</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvg_abs0</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `cvge_ge` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvg_ge0</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvg_ge0</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `lime_ge` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_lim_ge</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_lim_ge</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `lime_le` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_lim_le</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_lim_le</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgeryP` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> dvg_ereal_cvg</span><span class="id"> :=</span><span class="id"> __deprecated__dvg_ereal_cvg</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `fine_cvgP` and generalized&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_cvg_real</span><span class="id"> :=</span><span class="id"> __deprecated__ereal_cvg_real</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `ereal_nondecreasing_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_nondecreasing_cvg</span><span class="id"> :=</span><span class="id"> ereal_nondecreasing_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `ereal_nondecreasing_is_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_nondecreasing_is_cvg</span><span class="id"> :=</span><span class="id"> ereal_nondecreasing_is_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `ereal_nonincreasing_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_nonincreasing_cvg</span><span class="id"> :=</span><span class="id"> ereal_nonincreasing_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `ereal_nonincreasing_is_cvgn`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> ereal_nonincreasing_is_cvg</span><span class="id"> :=</span><span class="id"> ereal_nonincreasing_is_cvgn</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;Use eseries0 instead.&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nneseries0</span><span class="id"> :=</span><span class="id"> eseries0</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;Use eq_eseriesr instead.&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> eq_nneseries</span><span class="id"> :=</span><span class="id"> eq_eseriesr</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;analysis 0.6.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;Use eseries_pred0 instead.&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> nneseries_pred0</span><span class="id"> :=</span><span class="id"> eseries_pred0</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Arguments</span><span class="id"> nneseries_split</span><span class="id"> {R</span><span class="id"> f}</span><span class="id"> _</span><span class="id"> _</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> minr_cvg_0</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ring_scope</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> R^nat</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> minr_cvg_0_cvg_0</span><span class="id"> u</span><span class="id"> r</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> k</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">minr</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> r</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> n</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0</span><span class="id"> u0</span><span class="id"> minr_cvg;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> /posnumP[e]</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> minr</span><span class="id"> e%:num</span><span class="id"> r</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> lt_min//</span><span class="id"> r0</span><span class="id"> andbT</span>.<br/>
<span class="id">move/cvgrPdist_lt</span><span class="id"> :</span><span class="id"> minr_cvg</span><span class="id"> =&gt;</span><span class="id"> /[apply]</span><span class="id"> -[M</span><span class="id"> _</span><span class="id"> hM]</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span>.<br/>
<span class="id">have</span><span class="id"> /hM</span><span class="id"> :</span> (<span class="id">M</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> M</span>.<br/>
<span class="id">rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span> (<span class="id">ger0_norm</span> (<span class="id">u0</span><span class="id"> n</span>))<span class="id"> ger0_norm//</span><span class="id"> =&gt;</span><span class="id"> [/lt_min_lt//|]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> le_min</span><span class="id"> u0</span><span class="id"> ltW</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> maxr_cvg_0_cvg_0</span><span class="id"> u</span><span class="id"> r</span><span class="id"> :</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> 0</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> u</span><span class="id"> k</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">maxr</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> r</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> n</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> _]oppr0</span><span class="id"> ltrNr</span><span class="id"> =&gt;</span><span class="id"> r0</span><span class="id"> u0</span>.<br/>
<span class="id">under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">opprK</span> (<span class="id">u</span><span class="id"> _</span>))<span class="id"> -[in</span><span class="id"> maxr</span><span class="id"> _</span><span class="id"> _]</span>(<span class="id">opprK</span><span class="id"> r</span>)<span class="id"> -oppr_min</span>.<br/>
<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> _]oppr0</span><span class="id"> =&gt;</span><span class="id"> /cvgNP/minr_cvg_0_cvg_0-/</span>(_<span class="id"> r0</span>).<br/>
<span class="id">have</span><span class="id"> Nu0</span><span class="id"> k</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> -</span><span class="id"> u</span><span class="id"> k</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> lerNr</span><span class="id"> oppr0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_<span class="id"> Nu0</span>)<span class="id">/</span>(<span class="id">cvgNP</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2;</span><span class="id"> rewrite</span><span class="id"> opprK</span><span class="id"> oppr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> minr_cvg_0</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> mine_cvg_0</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">u</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mine_cvg_0_cvg_fin_num</span><span class="id"> u</span><span class="id"> x</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> k</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">mine</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> x</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> u</span><span class="id"> n</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> [r</span><span class="id"> r0</span><span class="id"> u0</span><span class="id"> /fine_cvgP[_]|_</span><span class="id"> u0|//];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span><span class="id"> eq_cvg</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> miney</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case/fine_cvgP</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /cvgrPdist_lt/</span>(_<span class="id"> _</span><span class="id"> r0</span>)<span class="id">[N</span><span class="id"> _</span><span class="id"> hN]</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> /hN</span><span class="id"> :</span> (<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> N</span>.<br/>
<span class="id">rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> /=</span><span class="id"> ger0_norm</span><span class="id"> ?fine_ge0//;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> le_min</span><span class="id"> u0</span><span class="id"> ltW</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> u0</span><span class="id"> n;</span><span class="id"> case:</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mine_cvg_minr_cvg</span><span class="id"> u</span><span class="id"> r</span><span class="id"> :</span> (<span class="id">0</span><span class="id"> &lt;</span><span class="id"> r</span>)<span class="id">%R</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> k</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">mine</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> r%:E</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">minr</span> (<span class="id">fine</span> (<span class="id">u</span><span class="id"> n</span>))<span class="id"> r</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0</span><span class="id"> u0</span><span class="id"> mine_cvg;</span><span class="id"> apply:</span> (<span class="id">cvg_trans</span><span class="id"> _</span> (<span class="id">fine_cvg</span><span class="id"> mine_cvg</span>)).<br/>
<span class="id">move/fine_cvgP</span><span class="id"> :</span><span class="id"> mine_cvg</span><span class="id"> =&gt;</span><span class="id"> [_</span><span class="id"> /=]</span><span class="id"> /cvgrPdist_lt</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> r0</span>)<span class="id">[N</span><span class="id"> _</span><span class="id"> hN];</span><span class="id"> apply:</span><span class="id"> near_eq_cvg;</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
<span class="id">have</span><span class="id"> xnoo</span><span class="id"> :</span><span class="id"> u</span><span class="id"> n</span><span class="id"> &lt;</span><span class="id"> +oo</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ltNge</span><span class="id"> leye_eq;</span><span class="id"> apply/eqP</span><span class="id"> =&gt;</span><span class="id"> xnoo</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /hN</span><span class="id"> :</span> (<span class="id">N</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> N</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> xnoo</span><span class="id"> //=</span><span class="id"> gtr0_norm</span><span class="id"> //</span><span class="id"> ltxx</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> -</span>(<span class="id">@fineK</span><span class="id"> _</span> (<span class="id">u</span><span class="id"> n</span>))<span class="id"> ?ge0_fin_numE//=</span><span class="id"> -fine_min</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mine_cvg_0_cvg_0</span><span class="id"> u</span><span class="id"> x</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> k</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">mine</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> x</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> n</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x0</span><span class="id"> u0</span><span class="id"> h;</span><span class="id"> apply/fine_cvgP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">mine_cvg_0_cvg_fin_num</span><span class="id"> x0</span>).<br/>
<span class="id">case:</span><span class="id"> x</span><span class="id"> x0</span><span class="id"> h</span><span class="id"> =&gt;</span><span class="id"> [r</span><span class="id"> r0</span><span class="id"> h|_|//];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span><span class="id"> eq_cvg</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> miney</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> fine_cvg</span>.<br/>
<span class="id">apply:</span> (<span class="id">@minr_cvg_0_cvg_0</span><span class="id"> _</span> (<span class="id">fine</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> r</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> k</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> fine_ge0</span>.<br/>
<span class="id">exact:</span><span class="id"> mine_cvg_minr_cvg</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> maxe_cvg_0_cvg_fin_num</span><span class="id"> u</span><span class="id"> x</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> 0</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> u</span><span class="id"> k</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">maxe</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> x</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> u</span><span class="id"> n</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> _]oppe0</span><span class="id"> lteNr</span><span class="id"> =&gt;</span><span class="id"> x0</span><span class="id"> u0</span>.<br/>
<span class="id">under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">oppeK</span> (<span class="id">u</span><span class="id"> _</span>))<span class="id"> -[in</span><span class="id"> maxe</span><span class="id"> _</span><span class="id"> _]</span>(<span class="id">oppeK</span><span class="id"> x</span>)<span class="id"> -oppe_min</span>.<br/>
<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> _]oppe0</span><span class="id"> =&gt;</span><span class="id"> /cvgeNP/mine_cvg_0_cvg_fin_num-/</span>(_<span class="id"> x0</span>).<br/>
<span class="id">have</span><span class="id"> Nu0</span><span class="id"> k</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> -</span><span class="id"> u</span><span class="id"> k</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> leeNr</span><span class="id"> oppe0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_<span class="id"> Nu0</span>)<span class="id">[n</span><span class="id"> _</span><span class="id"> nu];</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> m/=</span><span class="id"> nm;</span><span class="id"> rewrite</span><span class="id"> -fin_numN</span><span class="id"> nu</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> maxe_cvg_maxr_cvg</span><span class="id"> u</span><span class="id"> r</span><span class="id"> :</span> (<span class="id">r</span><span class="id"> &lt;</span><span class="id"> 0</span>)<span class="id">%R</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> u</span><span class="id"> k</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">maxe</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> r%:E</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">maxr</span> (<span class="id">fine</span> (<span class="id">u</span><span class="id"> n</span>))<span class="id"> r</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0%R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -[in</span> (<span class="id">r</span><span class="id"> &lt;</span><span class="id"> _</span>)<span class="id">%R]oppr0</span><span class="id"> ltrNr</span><span class="id"> =&gt;</span><span class="id"> r0</span><span class="id"> u0</span>.<br/>
<span class="id">under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">oppeK</span> (<span class="id">u</span><span class="id"> _</span>))<span class="id"> -[in</span><span class="id"> maxe</span><span class="id"> _</span><span class="id"> _]</span>(<span class="id">oppeK</span><span class="id"> r%:E</span>)<span class="id"> -oppe_min</span>.<br/>
<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> _]oppe0</span><span class="id"> =&gt;</span><span class="id"> /cvgeNP/mine_cvg_minr_cvg-/</span>(_<span class="id"> r0</span>).<br/>
<span class="id">have</span><span class="id"> Nu0</span><span class="id"> k</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> -</span><span class="id"> u</span><span class="id"> k</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> leeNr</span><span class="id"> oppe0</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /</span>(_<span class="id"> Nu0</span>)<span class="id">/</span>(<span class="id">cvgNP</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2;</span><span class="id"> rewrite</span><span class="id"> oppr0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_cvg</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /GRing</span>.<span class="id">opp</span><span class="id"> /=</span><span class="id"> oppr_min</span><span class="id"> fineN</span><span class="id"> !opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> maxe_cvg_0_cvg_0</span><span class="id"> u</span><span class="id"> x</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> 0</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> k,</span><span class="id"> u</span><span class="id"> k</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">maxe</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> x</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> n</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> \oo]</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> _]oppe0</span><span class="id"> lteNr</span><span class="id"> =&gt;</span><span class="id"> x0</span><span class="id"> u0</span>.<br/>
<span class="id">under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">oppeK</span> (<span class="id">u</span><span class="id"> _</span>))<span class="id"> -[in</span><span class="id"> maxe</span><span class="id"> _</span><span class="id"> _]</span>(<span class="id">oppeK</span><span class="id"> x</span>)<span class="id"> -oppe_min</span>.<br/>
<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> _]oppe0</span><span class="id"> =&gt;</span><span class="id"> /cvgeNP/mine_cvg_0_cvg_0-/</span>(_<span class="id"> x0</span>).<br/>
<span class="id">have</span><span class="id"> Nu0</span><span class="id"> k</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> -</span><span class="id"> u</span><span class="id"> k</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> leeNr</span><span class="id"> oppe0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_<span class="id"> Nu0</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> -[in</span><span class="id"> _</span><span class="id"> --&gt;</span><span class="id"> _]oppe0</span><span class="id"> =&gt;</span><span class="id"> /cvgeNP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> mine_cvg_0</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> sdrop</span><span class="id"> T</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> T^nat</span>)<span class="id"> n</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> u</span><span class="id"> k</span><span class="id"> |</span><span class="id"> k</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> k</span><span class="id"> |</span><span class="id"> k</span><span class="id"> &gt;=</span><span class="id"> n]]%N</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> sdrop</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">d</span><span class="id"> :</span><span class="id"> Order</span>.<span class="id">disp_t</span>) (<span class="id">R</span><span class="id"> :</span><span class="id"> porderType</span><span class="id"> d</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> R^o^nat</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> has_lbound_sdrop</span><span class="id"> u</span><span class="id"> :</span><span class="id"> has_lbound</span> (<span class="id">range</span><span class="id"> u</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> m,</span><span class="id"> has_lbound</span> (<span class="id">sdrop</span><span class="id"> u</span><span class="id"> m</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> [M</span><span class="id"> uM]</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> nm]</span><span class="id"> &lt;-;</span><span class="id"> rewrite</span><span class="id"> uM</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> has_ubound_sdrop</span><span class="id"> u</span><span class="id"> :</span><span class="id"> has_ubound</span> (<span class="id">range</span><span class="id"> u</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> m,</span><span class="id"> has_ubound</span> (<span class="id">sdrop</span><span class="id"> u</span><span class="id"> m</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> [M</span><span class="id"> uM]</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> nm]</span><span class="id"> &lt;-;</span><span class="id"> rewrite</span><span class="id"> uM</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> sdrop</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> sups_infs</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">u</span><span class="id"> :</span><span class="id"> R^o^nat</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> sups</span><span class="id"> u</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> sup</span> (<span class="id">sdrop</span><span class="id"> u</span><span class="id"> n</span>)<span class="id">]_n</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> infs</span><span class="id"> u</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> inf</span> (<span class="id">sdrop</span><span class="id"> u</span><span class="id"> n</span>)<span class="id">]_n</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> supsN</span><span class="id"> u</span><span class="id"> :</span><span class="id"> sups</span> (<span class="id">-%R</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> =</span><span class="id"> -</span><span class="id"> infs</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /sups</span><span class="id"> /infs</span><span class="id"> /inf</span><span class="id"> /=</span><span class="id"> opprK;</span><span class="id"> congr</span> (<span class="id">sup</span><span class="id"> _</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [[m</span><span class="id"> /=</span><span class="id"> nm</span><span class="id"> &lt;-]|[_</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> nm]</span><span class="id"> &lt;-]</span><span class="id"> &lt;-];</span><br/>
&nbsp;&nbsp;<span class="id">[exists</span> (<span class="id">u</span><span class="id"> m</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> m]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> infsN</span><span class="id"> u</span><span class="id"> :</span><span class="id"> infs</span> (<span class="id">-%R</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> =</span><span class="id"> -</span><span class="id"> sups</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/eqP;</span><span class="id"> rewrite</span><span class="id"> -eqr_oppLR</span><span class="id"> -supsN;</span><span class="id"> apply/eqP;</span><span class="id"> congr</span> (<span class="id">sups</span><span class="id"> _</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nonincreasing_sups</span><span class="id"> u</span><span class="id"> :</span><span class="id"> has_ubound</span> (<span class="id">range</span><span class="id"> u</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> (<span class="id">sups</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_ub</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn;</span><span class="id"> apply:</span><span class="id"> le_sup</span><span class="id"> =&gt;</span><span class="id"> [_</span><span class="id"> /=</span><span class="id"> [p</span><span class="id"> np]</span><span class="id"> &lt;-|</span><span class="id"> |]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply/downP;</span><span class="gallina-kwd"> exists</span> (<span class="id">u</span><span class="id"> p</span>)<span class="id"> =&gt;</span><span class="id"> //=;</span><span class="gallina-kwd"> exists</span><span class="id"> p</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> leq_trans</span><span class="id"> np</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> =&gt;</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> split;</span><span class="id"> [exists</span> (<span class="id">u</span><span class="id"> m</span>)<span class="id">;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> //=|exact/has_ubound_sdrop]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_infs</span><span class="id"> u</span><span class="id"> :</span><span class="id"> has_lbound</span> (<span class="id">range</span><span class="id"> u</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (<span class="id">infs</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_lb;</span><span class="id"> rewrite</span><span class="id"> -nonincreasing_opp</span><span class="id"> -supsN;</span><span class="id"> apply/nonincreasing_sups</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> u_lb</span><span class="id"> =&gt;</span><span class="id"> /has_lb_ubN;</span><span class="id"> rewrite</span><span class="id"> /comp</span><span class="id"> /=</span><span class="id"> image_comp</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_sups</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">sups</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cf;</span><span class="id"> have</span><span class="id"> [M</span><span class="id"> [Mreal</span><span class="id"> Mu]]</span><span class="id"> :=</span><span class="id"> cvg_seq_bounded</span><span class="id"> cf</span>.<br/>
<span class="id">apply:</span><span class="id"> nonincreasing_is_cvgn</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/nonincreasing_sups/bounded_fun_has_ubound/cvg_seq_bounded</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">-</span> (<span class="id">M</span><span class="id"> +</span><span class="id"> 1</span>))<span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">u</span><span class="id"> n</span>))<span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/lerNnormlW/Mu</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
<span class="id">apply:</span><span class="id"> sup_ubound;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">exact/has_ubound_sdrop/bounded_fun_has_ubound/cvg_seq_bounded</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_infs</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> cvgn</span> (<span class="id">infs</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move/is_cvgN/is_cvg_sups;</span><span class="id"> rewrite</span><span class="id"> supsN;</span><span class="id"> move/is_cvgN;</span><span class="id"> rewrite</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> infs_le_sups</span><span class="id"> u</span><span class="id"> n</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> infs</span><span class="id"> u</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> sups</span><span class="id"> u</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cu;</span><span class="id"> rewrite</span><span class="id"> /infs</span><span class="id"> /sups</span><span class="id"> /=;</span><span class="id"> set</span><span class="id"> A</span><span class="id"> :=</span><span class="id"> sdrop</span><span class="id"> _</span><span class="id"> _</span>.<br/>
<span class="id">have</span><span class="id"> [a</span><span class="id"> Aa]</span><span class="id"> :</span><span class="id"> A</span><span class="id"> !=set0</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /A</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> a</span>)<span class="id"> //;</span><span class="id"> [apply/inf_lbound|apply/sup_ubound]</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">-</span><span class="id"> exact/has_lbound_sdrop/bounded_fun_has_lbound/cvg_seq_bounded</span>.<br/>
<span class="id">-</span><span class="id"> exact/has_ubound_sdrop/bounded_fun_has_ubound/cvg_seq_bounded</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_sups_inf</span><span class="id"> u</span><span class="id"> :</span><span class="id"> has_ubound</span> (<span class="id">range</span><span class="id"> u</span>)<span class="id"> -&gt;</span><span class="id"> has_lbound</span> (<span class="id">range</span><span class="id"> u</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">sups</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> inf</span> (<span class="id">range</span> (<span class="id">sups</span><span class="id"> u</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_ub</span><span class="id"> u_lb;</span><span class="id"> apply:</span><span class="id"> nonincreasing_cvgn;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> nonincreasing_sups</span>.<br/>
<span class="id">case:</span><span class="id"> u_lb</span><span class="id"> =&gt;</span><span class="id"> M</span><span class="id"> uM;</span><span class="gallina-kwd"> exists</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">u</span><span class="id"> n</span>))<span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> uM;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> sup_ubound;</span><span class="id"> [exact/has_ubound_sdrop|exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_infs_sup</span><span class="id"> u</span><span class="id"> :</span><span class="id"> has_ubound</span> (<span class="id">range</span><span class="id"> u</span>)<span class="id"> -&gt;</span><span class="id"> has_lbound</span> (<span class="id">range</span><span class="id"> u</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">infs</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> sup</span> (<span class="id">range</span> (<span class="id">infs</span><span class="id"> u</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> u_ub</span><span class="id"> u_lb;</span><span class="id"> have</span><span class="id"> :</span><span class="id"> sups</span> (<span class="id">-</span><span class="id"> u</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> inf</span> (<span class="id">range</span> (<span class="id">sups</span> (<span class="id">-</span><span class="id"> u</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> cvg_sups_inf</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move:</span><span class="id"> u_lb</span><span class="id"> =&gt;</span><span class="id"> /has_lb_ubN;</span><span class="id"> rewrite</span><span class="id"> image_comp</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move:</span><span class="id"> u_ub</span><span class="id"> =&gt;</span><span class="id"> /has_ub_lbN;</span><span class="id"> rewrite</span><span class="id"> image_comp</span>.<br/>
<span class="id">rewrite</span><span class="id"> /inf</span><span class="id"> =&gt;</span><span class="id"> /</span>(<span class="id">@cvg_comp</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> x</span>)).<br/>
<span class="id">rewrite</span><span class="id"> supsN</span><span class="id"> /comp</span><span class="id"> /=</span><span class="id"> -[in</span><span class="id"> X</span><span class="gallina-kwd"> in</span><span class="id"> _</span><span class="id"> -&gt;</span><span class="id"> X</span><span class="id"> --&gt;</span><span class="id"> _]</span>(<span class="id">opprK</span> (<span class="id">infs</span><span class="id"> u</span>))<span class="id">;</span><span class="id"> apply</span>.<br/>
<span class="id">rewrite</span><span class="id"> image_comp</span><span class="id"> /comp</span><span class="id"> /=</span><span class="id"> -</span>(<span class="id">opprK</span> (<span class="id">sup</span> (<span class="id">range</span> (<span class="id">infs</span><span class="id"> u</span>))))<span class="id">;</span><span class="id"> apply:</span><span class="id"> cvgN</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> [set</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _</span><span class="gallina-kwd"> in</span><span class="id"> setT]</span><span class="id"> =</span> (<span class="id">range</span> (<span class="id">infs</span><span class="id"> u</span>)))<span class="id"> //</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sups_preimage</span><span class="id"> T</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> r</span> (<span class="id">f</span><span class="id"> :</span> (<span class="id">T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> t,</span><span class="id"> D</span><span class="id"> t</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span> (<span class="id">range</span> (<span class="id">f</span><span class="id"> ^~</span><span class="id"> t</span>)))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">D</span><span class="id"> `&amp;`</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> sups</span> (<span class="id">f</span><span class="id"> ^~x</span>)<span class="id"> n</span>)<span class="id"> @^-1`</span><span class="id"> `]r,</span><span class="id"> +oo[%classic</span><span class="id"> =</span><br/>
&nbsp;&nbsp;<span class="id">D</span><span class="id"> `&amp;`</span><span class="id"> \bigcup_</span>(<span class="id">k</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> k</span><span class="id"> |</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> k]%N</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> @^-1`</span><span class="id"> `]r,</span><span class="id"> +oo[</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f_ub;</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> [|/set0P</span><span class="id"> h]</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">sdrop</span> (<span class="id">f</span><span class="id"> ^~</span><span class="id"> t</span>)<span class="id"> n</span>)<span class="id"> set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_ (<span class="id">f</span><span class="id"> n</span><span class="id"> t</span>))<span class="id">[+</span><span class="id"> _]</span><span class="id"> =&gt;</span><span class="id"> /forall2NP/</span>(_<span class="id"> n</span>)<span class="id">/=</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> andbT</span><span class="id"> =&gt;</span><span class="id"> -[Dt]</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /</span>(<span class="id">sup_gt</span><span class="id"> h</span>)<span class="id">[_</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> nm</span><span class="id"> &lt;-]]</span><span class="id"> rfmt</span>.<span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> rfmt</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> [Dt</span><span class="id"> [k</span><span class="id"> /=</span><span class="id"> nk]];</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> andbT</span><span class="id"> =&gt;</span><span class="id"> rfkt</span>.<br/>
&nbsp;&nbsp;<span class="id">split=&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> andbT;</span><span class="id"> apply:</span> (<span class="id">lt_le_trans</span><span class="id"> rfkt</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> sup_ubound;</span><span class="id"> [exact/has_ubound_sdrop/f_ub|by</span><span class="gallina-kwd"> exists</span><span class="id"> k]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> infs_preimage</span><span class="id"> T</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> r</span> (<span class="id">f</span><span class="id"> :</span> (<span class="id">T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> t,</span><span class="id"> D</span><span class="id"> t</span><span class="id"> -&gt;</span><span class="id"> has_lbound</span> (<span class="id">range</span> (<span class="id">f</span><span class="id"> ^~</span><span class="id"> t</span>)))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">D</span><span class="id"> `&amp;`</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> infs</span> (<span class="id">f</span><span class="id"> ^~</span><span class="id"> x</span>)<span class="id"> n</span>)<span class="id"> @^-1`</span><span class="id"> `]-oo,</span><span class="id"> r[</span><span class="id"> =</span><br/>
&nbsp;&nbsp;<span class="id">D</span><span class="id"> `&amp;`</span><span class="id"> \bigcup_</span>(<span class="id">k</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> k</span><span class="id"> |</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> k]%N</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> @^-1`</span><span class="id"> `]-oo,</span><span class="id"> r[</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> lb_f;</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> [|/set0P</span><span class="id"> h]</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">sdrop</span> (<span class="id">f</span><span class="id"> ^~</span><span class="id"> t</span>)<span class="id"> n</span>)<span class="id"> set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_ (<span class="id">f</span><span class="id"> n</span><span class="id"> t</span>))<span class="id">[+</span><span class="id"> _]</span><span class="id"> =&gt;</span><span class="id"> /forall2NP/</span>(_<span class="id"> n</span>)<span class="id">/=</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> -[Dt]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span> <span class="id"> /</span>(<span class="id">inf_lt</span><span class="id"> h</span>)<span class="id">[_</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> nm</span><span class="id"> &lt;-]]</span><span class="id"> fmtr;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> [Dt</span><span class="id"> [k</span><span class="id"> /=</span><span class="id"> nk]];</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> fktr</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> in_itv</span><span class="id"> /=;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span><span class="id"> fktr</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/inf_lbound</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> [exact/has_lbound_sdrop/lb_f|by</span><span class="gallina-kwd"> exists</span><span class="id"> k]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_fun_has_lbound_sups</span><span class="id"> u</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_fun</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> has_lbound</span> (<span class="id">range</span> (<span class="id">sups</span><span class="id"> u</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /[dup]</span><span class="id"> ba</span><span class="id"> /bounded_fun_has_lbound/has_lbound_sdrop</span><span class="id"> h</span>.<br/>
<span class="id">have</span><span class="id"> [M</span><span class="id"> hM]</span><span class="id"> :=</span><span class="id"> h</span><span class="id"> O;</span><span class="gallina-kwd"> exists</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">u</span><span class="id"> n</span>))<span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> hM;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">apply:</span><span class="id"> sup_ubound;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> ba</span><span class="id"> =&gt;</span><span class="id"> /bounded_fun_has_ubound/has_ubound_sdrop;</span><span class="id"> exact</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_fun_has_ubound_infs</span><span class="id"> u</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_fun</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span> (<span class="id">range</span> (<span class="id">infs</span><span class="id"> u</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /[dup]</span><span class="id"> ba</span><span class="id"> /bounded_fun_has_ubound/has_ubound_sdrop</span><span class="id"> h</span>.<br/>
<span class="id">have</span><span class="id"> [M</span><span class="id"> hM]</span><span class="id"> :=</span><span class="id"> h</span><span class="id"> O;</span><span class="gallina-kwd"> exists</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-]</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">u</span><span class="id"> n</span>))<span class="id"> //;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> hM;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
<span class="id">apply:</span><span class="id"> inf_lbound;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> ba</span><span class="id"> =&gt;</span><span class="id"> /bounded_fun_has_lbound/has_lbound_sdrop;</span><span class="id"> exact</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> sups_infs</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> limn_sup_limn_inf</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> R^o^nat</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> limn_sup</span><span class="id"> u</span><span class="id"> :=</span><span class="id"> limn</span> (<span class="id">sups</span><span class="id"> u</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> limn_inf</span><span class="id"> u</span><span class="id"> :=</span><span class="id"> limn</span> (<span class="id">infs</span><span class="id"> u</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_infN</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> limn_inf</span> (<span class="id">-%R</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> =</span><span class="id"> -</span><span class="id"> limn_sup</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> cu_;</span><span class="id"> rewrite</span><span class="id"> /limn_inf</span><span class="id"> infsN</span><span class="id"> limN//;</span><span class="id"> exact:</span><span class="id"> is_cvg_sups</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_supE</span><span class="id"> u</span><span class="id"> :</span><span class="id"> bounded_fun</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> limn_sup</span><span class="id"> u</span><span class="id"> =</span><span class="id"> inf</span> (<span class="id">range</span> (<span class="id">sups</span><span class="id"> u</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ba;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/cvg_sups_inf;</span><span class="id"> [exact/bounded_fun_has_ubound|</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/bounded_fun_has_lbound]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_infE</span><span class="id"> u</span><span class="id"> :</span><span class="id"> bounded_fun</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> limn_inf</span><span class="id"> u</span><span class="id"> =</span><span class="id"> sup</span> (<span class="id">range</span> (<span class="id">infs</span><span class="id"> u</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ba;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/cvg_infs_sup;</span><span class="id"> [exact/bounded_fun_has_ubound|</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/bounded_fun_has_lbound]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_inf_sup</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> limn_inf</span><span class="id"> u</span><span class="id"> &lt;=</span><span class="id"> limn_sup</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cf_;</span><span class="id"> apply:</span><span class="id"> ler_lim;</span><span class="id"> [exact:</span><span class="id"> is_cvg_infs|exact:</span><span class="id"> is_cvg_sups|]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> infs_le_sups</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_limn_inf_sup</span><span class="id"> u</span><span class="id"> l</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span> (<span class="id">limn_inf</span><span class="id"> u</span><span class="id"> =</span><span class="id"> l</span>)<span class="id"> *</span> (<span class="id">limn_sup</span><span class="id"> u</span><span class="id"> =</span><span class="id"> l</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ul</span>.<br/>
<span class="id">have</span><span class="id"> /cvg_seq_bounded</span><span class="id"> [M</span><span class="id"> [Mr</span><span class="id"> Mu]]</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">u</span><span class="id"> @</span><span class="id"> \oo</span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> exact:</span><span class="id"> ul</span>.<br/>
<span class="id">suff:</span><span class="id"> limn_sup</span><span class="id"> u</span><span class="id"> &lt;=</span><span class="id"> l</span><span class="id"> &lt;=</span><span class="id"> limn_inf</span><span class="id"> u</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /andP[sul</span><span class="id"> liu]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /limn_inf_sup</span><span class="id"> iusu</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">u</span><span class="id"> @</span><span class="id"> \oo</span>)<span class="gallina-kwd"> by</span><span class="id"> apply/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> exact:</span><span class="id"> ul</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> eq_le</span><span class="id"> liu</span><span class="id"> andbT</span> (<span class="id">le_trans</span><span class="id"> iusu</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> eq_le</span><span class="id"> sul</span><span class="id"> /=</span> (<span class="id">le_trans</span><span class="id"> _</span><span class="id"> iusu</span>).<br/>
<span class="id">apply/andP;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="id"> apply/ler_addgt0Pr</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> limr_le;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> is_cvg_sups;</span><span class="id"> apply/cvg_ex;</span><span class="gallina-kwd"> exists</span><span class="id"> l</span>.<br/>
&nbsp;&nbsp;<span class="id">move/cvgrPdist_lt</span><span class="id"> :</span> (<span class="id">ul</span>)<span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> e0</span>)<span class="id"> -[k</span><span class="id"> _</span><span class="id"> klu]</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> kn</span><span class="id"> :</span> (<span class="id">k</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> sup_le_ub;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> =&gt;</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> [m</span><span class="id"> nm]</span><span class="id"> &lt;-;</span><span class="id"> apply/ltW/ltr_distlDr;</span><span class="id"> rewrite</span><span class="id"> distrC</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">klu</span><span class="id"> m</span>)<span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> kn</span>).<br/>
<span class="id">-</span><span class="id"> apply/ler_addgt0Pr</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e0;</span><span class="id"> rewrite</span><span class="id"> -lerBlDr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> limr_ge;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> is_cvg_infs;</span><span class="id"> apply/cvg_ex;</span><span class="gallina-kwd"> exists</span><span class="id"> l</span>.<br/>
&nbsp;&nbsp;<span class="id">move/cvgrPdist_lt</span><span class="id"> :</span> (<span class="id">ul</span>)<span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> e0</span>)<span class="id"> -[k</span><span class="id"> _</span><span class="id"> klu]</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> kn</span><span class="id"> :</span> (<span class="id">k</span><span class="id"> &lt;=</span><span class="id"> n</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> lb_le_inf;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id"> =&gt;</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> [m</span><span class="id"> nm]</span><span class="id"> &lt;-;</span><span class="id"> apply/ltW/ltr_distlBl</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">klu</span><span class="id"> m</span>)<span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> kn</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_limn_infE</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> limn_inf</span><span class="id"> u</span><span class="id"> =</span><span class="id"> limn</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvg_ex[l</span><span class="id"> ul];</span><span class="id"> have</span><span class="id"> [-&gt;</span><span class="id"> _]</span><span class="id"> :=</span><span class="id"> cvg_limn_inf_sup</span><span class="id"> ul</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/cvg_lim</span><span class="id"> :</span><span class="id"> ul</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_limn_supE</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> limn_sup</span><span class="id"> u</span><span class="id"> =</span><span class="id"> limn</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvg_ex[l</span><span class="id"> ul];</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> -&gt;]</span><span class="id"> :=</span><span class="id"> cvg_limn_inf_sup</span><span class="id"> ul</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/cvg_lim</span><span class="id"> :</span><span class="id"> ul</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_sups</span><span class="id"> u</span><span class="id"> l</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> sups</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> R^o</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ul;</span><span class="id"> have</span><span class="id"> [iul</span><span class="id"> &lt;-]</span><span class="id"> :=</span><span class="id"> cvg_limn_inf_sup</span><span class="id"> ul</span>.<br/>
<span class="id">apply/cvg_closeP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> is_cvg_sups</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> apply:</span><span class="id"> ul</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_infs</span><span class="id"> u</span><span class="id"> l</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> infs</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> R^o</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ul;</span><span class="id"> have</span><span class="id"> [&lt;-</span><span class="id"> iul]</span><span class="id"> :=</span><span class="id"> cvg_limn_inf_sup</span><span class="id"> ul</span>.<br/>
<span class="id">apply/cvg_closeP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> is_cvg_infs</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> apply:</span><span class="id"> ul</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> le_limn_supD</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> bounded_fun</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> bounded_fun</span><span class="id"> v</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn_sup</span> (<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>)<span class="id"> &lt;=</span><span class="id"> limn_sup</span><span class="id"> u</span><span class="id"> +</span><span class="id"> limn_sup</span><span class="id"> v</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ba</span><span class="id"> bb;</span><span class="id"> have</span><span class="id"> ab</span><span class="id"> k</span><span class="id"> :</span><span class="id"> sups</span> (<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>)<span class="id"> k</span><span class="id"> &lt;=</span><span class="id"> sups</span><span class="id"> u</span><span class="id"> k</span><span class="id"> +</span><span class="id"> sups</span><span class="id"> v</span><span class="id"> k</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> sup_le_ub;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> ((<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>)<span class="id"> k</span>)<span class="id">;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> M</span><span class="id"> [n</span><span class="id"> /=</span><span class="id"> kn</span><span class="id"> &lt;-];</span><span class="id"> apply:</span><span class="id"> lerD;</span><span class="id"> apply:</span><span class="id"> sup_ubound;</span><span class="id"> [</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/has_ubound_sdrop/bounded_fun_has_ubound;</span><span class="id"> exact</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> |</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/has_ubound_sdrop/bounded_fun_has_ubound;</span><span class="id"> exact</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> ]</span>.<br/>
<span class="id">have</span><span class="id"> cu</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">sups</span><span class="id"> u</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> nonincreasing_is_cvgn;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> bounded_fun_has_lbound_sups</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/nonincreasing_sups/bounded_fun_has_ubound</span>.<br/>
<span class="id">have</span><span class="id"> cv</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">sups</span><span class="id"> v</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> nonincreasing_is_cvgn;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> bounded_fun_has_lbound_sups</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/nonincreasing_sups/bounded_fun_has_ubound</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">limD</span><span class="id"> cu</span><span class="id"> cv</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> ler_lim</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> nonincreasing_is_cvgn;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/bounded_fun_has_lbound_sups/bounded_funD</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/nonincreasing_sups/bounded_fun_has_ubound/bounded_funD</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> is_cvgD</span><span class="id"> cu</span><span class="id"> cv</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> nearW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> le_limn_infD</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> bounded_fun</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> bounded_fun</span><span class="id"> v</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn_inf</span><span class="id"> u</span><span class="id"> +</span><span class="id"> limn_inf</span><span class="id"> v</span><span class="id"> &lt;=</span><span class="id"> limn_inf</span> (<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ba</span><span class="id"> bb;</span><span class="id"> have</span><span class="id"> ab</span><span class="id"> k</span><span class="id"> :</span><span class="id"> infs</span><span class="id"> u</span><span class="id"> k</span><span class="id"> +</span><span class="id"> infs</span><span class="id"> v</span><span class="id"> k</span><span class="id"> &lt;=</span><span class="id"> infs</span> (<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>)<span class="id"> k</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> lb_le_inf;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> ((<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>)<span class="id"> k</span>)<span class="id">;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> M</span><span class="id"> [n</span><span class="id"> /=</span><span class="id"> kn</span><span class="id"> &lt;-];</span><span class="id"> apply:</span><span class="id"> lerD;</span><span class="id"> apply:</span><span class="id"> inf_lbound;</span><span class="id"> [</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/has_lbound_sdrop/bounded_fun_has_lbound;</span><span class="id"> exact</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> |</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/has_lbound_sdrop/bounded_fun_has_lbound;</span><span class="id"> exact</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> ]</span>.<br/>
<span class="id">have</span><span class="id"> cu</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">infs</span><span class="id"> u</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> nondecreasing_is_cvgn;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> bounded_fun_has_ubound_infs</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/nondecreasing_infs/bounded_fun_has_lbound</span>.<br/>
<span class="id">have</span><span class="id"> cv</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">infs</span><span class="id"> v</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> nondecreasing_is_cvgn;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> bounded_fun_has_ubound_infs</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/nondecreasing_infs/bounded_fun_has_lbound</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">limD</span><span class="id"> cu</span><span class="id"> cv</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> ler_lim</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> is_cvgD</span><span class="id"> cu</span><span class="id"> cv</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> nondecreasing_is_cvgn;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/bounded_fun_has_ubound_infs/bounded_funD</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/nondecreasing_infs/bounded_fun_has_lbound/bounded_funD</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> nearW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_supD</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> v</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn_sup</span> (<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>)<span class="id"> =</span><span class="id"> limn_sup</span><span class="id"> u</span><span class="id"> +</span><span class="id"> limn_sup</span><span class="id"> v</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cu</span><span class="id"> cv;</span><span class="id"> have</span><span class="id"> [ba</span><span class="id"> bb]</span><span class="id"> :=</span> (<span class="id">cvg_seq_bounded</span><span class="id"> cu,</span><span class="id"> cvg_seq_bounded</span><span class="id"> cv</span>).<br/>
<span class="id">apply/eqP;</span><span class="id"> rewrite</span><span class="id"> eq_le</span><span class="id"> le_limn_supD</span><span class="id"> //=</span>.<br/>
<span class="id">have</span><span class="id"> :=</span><span class="id"> @le_limn_supD</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">bounded_funD</span><span class="id"> ba</span><span class="id"> bb</span>) (<span class="id">bounded_funN</span><span class="id"> bb</span>).<br/>
<span class="id">rewrite</span><span class="id"> -lerBlDr;</span><span class="id"> apply:</span><span class="id"> le_trans</span>.<br/>
<span class="id">rewrite</span><span class="id"> -[_</span><span class="id"> \+</span><span class="id"> _]/</span>(<span class="id">u</span><span class="id"> +</span><span class="id"> v</span><span class="id"> -</span><span class="id"> v</span>)<span class="id"> addrK</span><span class="id"> -limn_infN;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> is_cvgN</span>.<br/>
<span class="id">rewrite</span><span class="id"> /comp</span><span class="id"> /=;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> opprK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> lerD//</span><span class="id"> cvg_limn_infE//</span><span class="id"> cvg_limn_supE</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_infD</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> cvgn</span><span class="id"> v</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn_inf</span> (<span class="id">u</span><span class="id"> \+</span><span class="id"> v</span>)<span class="id"> =</span><span class="id"> limn_inf</span><span class="id"> u</span><span class="id"> +</span><span class="id"> limn_inf</span><span class="id"> v</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cu</span><span class="id"> cv;</span><span class="id"> rewrite</span> (<span class="id">cvg_limn_infE</span><span class="id"> cu</span>)<span class="id"> -</span>(<span class="id">cvg_limn_supE</span><span class="id"> cu</span>).<br/>
<span class="id">rewrite</span> (<span class="id">cvg_limn_infE</span><span class="id"> cv</span>)<span class="id"> -</span>(<span class="id">cvg_limn_supE</span><span class="id"> cv</span>)<span class="id"> -limn_supD//</span>.<br/>
<span class="id">rewrite</span><span class="id"> cvg_limn_supE;</span><span class="id"> last</span><span class="id"> exact:</span> (<span class="id">@is_cvgD</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> cu</span><span class="id"> cv</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvg_limn_infE</span><span class="id"> //;</span><span class="id"> exact:</span> (<span class="id">@is_cvgD</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> cu</span><span class="id"> cv</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> limn_sup_limn_inf</span>.<br/>
<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_sup`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_sup</span><span class="id"> :=</span><span class="id"> limn_sup</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_inf`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_inf</span><span class="id"> :=</span><span class="id"> limn_sup</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_infN`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_infN</span><span class="id"> :=</span><span class="id"> limn_infN</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_supE`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_supE</span><span class="id"> :=</span><span class="id"> limn_supE</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_infE`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_infE</span><span class="id"> :=</span><span class="id"> limn_infE</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_inf_sup`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_inf_le_lim_sup</span><span class="id"> :=</span><span class="id"> limn_inf_sup</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `cvg_limn_infE`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvg_lim_infE</span><span class="id"> :=</span><span class="id"> cvg_limn_infE</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `cvg_limn_supE`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvg_lim_supE</span><span class="id"> :=</span><span class="id"> cvg_limn_supE</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `le_limn_supD`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> le_lim_supD</span><span class="id"> :=</span><span class="id"> le_limn_supD</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `le_limn_infD`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> le_lim_infD</span><span class="id"> :=</span><span class="id"> le_limn_infD</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_supD`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_supD</span><span class="id"> :=</span><span class="id"> limn_supD</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_infD`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_infD</span><span class="id"> :=</span><span class="id"> limn_infD</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> esups_einfs</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">u</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> ereal_sup</span> (<span class="id">sdrop</span><span class="id"> u</span><span class="id"> n</span>)<span class="id">]_n</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> einfs</span><span class="id"> u</span><span class="id"> :=</span><span class="id"> [sequence</span><span class="id"> ereal_inf</span> (<span class="id">sdrop</span><span class="id"> u</span><span class="id"> n</span>)<span class="id">]_n</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> esupsN</span><span class="id"> u</span><span class="id"> :</span><span class="id"> esups</span> (<span class="id">-%E</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> =</span><span class="id"> -%E</span><span class="id"> \o</span><span class="id"> einfs</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> /esups</span><span class="id"> /=</span><span class="id"> oppeK;</span><span class="id"> congr</span> (<span class="id">ereal_sup</span><span class="id"> _</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [[m</span><span class="id"> /=</span><span class="id"> nm</span><span class="id"> &lt;-]|[_</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> nm]</span><span class="id"> &lt;-]</span><span class="id"> &lt;-];</span><br/>
&nbsp;&nbsp;<span class="id">[exists</span> (<span class="id">u</span><span class="id"> m</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> m]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> einfsN</span><span class="id"> u</span><span class="id"> :</span><span class="id"> einfs</span> (<span class="id">-%E</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> =</span><span class="id"> -%E</span><span class="id"> \o</span><span class="id"> esups</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> [in</span><span class="id"> RHS]</span>(_<span class="id"> :</span><span class="id"> u</span><span class="id"> =</span><span class="id"> -%E</span><span class="id"> \o</span><span class="id"> -%E</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ?esupsN</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> oppeK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nonincreasing_esups</span><span class="id"> u</span><span class="id"> :</span><span class="id"> nonincreasing_seq</span> (<span class="id">esups</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn;</span><span class="id"> apply:</span><span class="id"> le_ereal_sup</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> [k</span><span class="id"> nk</span><span class="id"> &lt;-];</span><span class="gallina-kwd"> exists</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> mn</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nondecreasing_einfs</span><span class="id"> u</span><span class="id"> :</span><span class="id"> nondecreasing_seq</span> (<span class="id">einfs</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> m</span><span class="id"> n</span><span class="id"> mn;</span><span class="id"> apply:</span><span class="id"> le_ereal_inf</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> [k</span><span class="id"> nk</span><span class="id"> &lt;-];</span><span class="gallina-kwd"> exists</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> mn</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> einfs_le_esups</span><span class="id"> u</span><span class="id"> n</span><span class="id"> :</span><span class="id"> einfs</span><span class="id"> u</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /einfs</span><span class="id"> /=;</span><span class="id"> set</span><span class="id"> A</span><span class="id"> :=</span><span class="id"> sdrop</span><span class="id"> _</span><span class="id"> _;</span><span class="id"> have</span><span class="id"> [a</span><span class="id"> Aa]</span><span class="id"> :</span><span class="id"> A</span><span class="id"> !=set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">u</span><span class="id"> n</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /A</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> a</span>)<span class="id">//;</span><span class="id"> [exact/ereal_inf_lbound|exact/ereal_sup_ubound]</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_esups_inf</span><span class="id"> u</span><span class="id"> :</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> ereal_inf</span> (<span class="id">range</span> (<span class="id">esups</span><span class="id"> u</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> ereal_nonincreasing_cvgn</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> nonincreasing_esups</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_esups</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">esups</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> exact/cvg_esups_inf</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_einfs_sup</span><span class="id"> u</span><span class="id"> :</span><span class="id"> einfs</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> ereal_sup</span> (<span class="id">range</span> (<span class="id">einfs</span><span class="id"> u</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> ereal_nondecreasing_cvgn</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> nondecreasing_einfs</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_einfs</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span> (<span class="id">einfs</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> exact/cvg_einfs_sup</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> esups_preimage</span><span class="id"> T</span> (<span class="id">a</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">T</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> esups</span> (<span class="id">f^~x</span>)<span class="id"> n</span>)<span class="id"> @^-1`</span><span class="id"> `]a,</span><span class="id"> +oo[</span><span class="id"> =</span><br/>
&nbsp;&nbsp;<span class="id">\bigcup_</span>(<span class="id">k</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> k</span><span class="id"> |</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> k]%N</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> @^-1`</span><span class="id"> `]a,</span><span class="id"> +oo[</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> andbT=&gt;</span><span class="id"> /ereal_sup_gt[_</span><span class="id"> [/=</span><span class="id"> k</span><span class="id"> nk</span><span class="id"> &lt;-]]</span><span class="id"> afnt</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> afnt</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> -[k</span><span class="id"> /=</span><span class="id"> nk]</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> andbT</span><span class="id"> =&gt;</span><span class="id"> /lt_le_trans</span><span class="id"> afkt</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> andbT/=;</span><span class="id"> apply/afkt/ereal_sup_ubound;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> einfs_preimage</span><span class="id"> T</span> (<span class="id">a</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span> (<span class="id">T</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id">^nat</span>)<span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> einfs</span> (<span class="id">f^~x</span>)<span class="id"> n</span>)<span class="id"> @^-1`</span><span class="id"> `[a,</span><span class="id"> +oo[%classic</span><span class="id"> =</span><br/>
&nbsp;&nbsp;<span class="id">\bigcap_</span>(<span class="id">k</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> k</span><span class="id"> |</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> k]%N</span>)<span class="id"> f</span><span class="id"> k</span><span class="id"> @^-1`</span><span class="id"> `[a,</span><span class="id"> +oo[%classic</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> [|h]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> in_itv</span><span class="id"> andbT</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> h</span><span class="id"> k</span><span class="id"> nk</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv/=</span> (<span class="id">le_trans</span><span class="id"> h</span>)<span class="id">//;</span><span class="id"> apply:</span><span class="id"> ereal_inf_lbound;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span>.<br/>
<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> andbT</span><span class="id"> leNgt;</span><span class="id"> apply/negP</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /ereal_inf_lt[_</span><span class="id"> /=</span><span class="id"> [k</span><span class="id"> nk</span><span class="id"> &lt;-]];</span><span class="id"> apply/negP</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> h</span><span class="id"> _</span><span class="id"> nk;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> andbT</span><span class="id"> -leNgt</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> esups_einfs</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> limn_esup_einf</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="gallina-kwd"> Type</span> (<span class="id">u</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> limn_esup</span><span class="id"> u</span><span class="id"> :=</span><span class="id"> limf_esup</span><span class="id"> u</span><span class="id"> \oo</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> limn_einf</span><span class="id"> u</span><span class="id"> :=</span><span class="id"> -</span><span class="id"> limn_esup</span> (<span class="id">\-</span><span class="id"> u</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_esup_lim</span><span class="id"> u</span><span class="id"> :</span><span class="id"> limn_esup</span><span class="id"> u</span><span class="id"> =</span><span class="id"> limn</span> (<span class="id">esups</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/eqP;</span><span class="id"> rewrite</span><span class="id"> eq_le;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> lime_ge;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> is_cvg_esups</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> m;</span><span class="id"> apply:</span><span class="id"> ereal_inf_lbound</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> k</span><span class="id"> |</span> (<span class="id">m</span><span class="id"> &lt;=</span><span class="id"> k</span>)<span class="id">%N]</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
<span class="id">apply:</span><span class="id"> lb_ereal_inf</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> _</span><span class="id"> [A</span><span class="id"> [r</span><span class="id"> /=</span><span class="id"> r0</span><span class="id"> rA]</span><span class="id"> &lt;-]</span>.<br/>
<span class="id">apply:</span><span class="id"> lime_le;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> is_cvg_esups</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> m;</span>  <span class="id"> apply:</span><span class="id"> le_ereal_sup</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> /=</span><span class="id"> mn]</span><span class="id"> &lt;-</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> rA</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> apply:</span><span class="id"> leq_trans</span><span class="id"> mn</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> m;</span><span class="gallina-kwd"> exists</span><span class="id"> r</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_einf_lim</span><span class="id"> u</span><span class="id"> :</span><span class="id"> limn_einf</span><span class="id"> u</span><span class="id"> =</span><span class="id"> limn</span> (<span class="id">einfs</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /limn_einf</span><span class="id"> limn_esup_lim</span><span class="id"> esupsN</span><span class="id"> -limeN//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> oppeK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> is_cvgeN;</span><span class="id"> exact:</span><span class="id"> is_cvg_einfs</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> limn_esup_einf</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> lim_esup_inf</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">u</span><span class="id"> v</span><span class="id"> :</span> (<span class="id">\bar</span><span class="id"> R</span>)<span class="id">^nat</span>) (<span class="id">l</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_einf_shift</span><span class="id"> u</span><span class="id"> l</span><span class="id"> :</span><span class="id"> l</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn_einf</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> l</span><span class="id"> +</span><span class="id"> u</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> l</span><span class="id"> +</span><span class="id"> limn_einf</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> lfin;</span><span class="id"> rewrite</span><span class="id"> !limn_einf_lim;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvg_trans;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@cvgeD</span><span class="id"> _</span><span class="id"> \oo</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">cst</span><span class="id"> l</span>) (<span class="id">einfs</span><span class="id"> u</span>)<span class="id"> _</span> (<span class="id">limn</span> (<span class="id">einfs</span><span class="id"> u</span>))).<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> fin_num_adde_defr</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> exact:</span><span class="id"> is_cvg_einfs</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> einfs</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> l</span><span class="id"> +</span><span class="id"> u</span><span class="id"> n</span>)<span class="id"> =</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> l</span><span class="id"> +</span><span class="id"> einfs</span><span class="id"> u</span><span class="id"> n</span>)<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> -&gt;</span>.<br/>
<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> n</span>.<br/>
<span class="id">apply/eqP;</span><span class="id"> rewrite</span><span class="id"> eq_le;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> addeC</span><span class="id"> -leeBlDr//;</span><span class="id"> apply:</span><span class="id"> lb_ereal_inf</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> _</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> mn]</span><span class="id"> &lt;-</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> leeBlDr//;</span><span class="id"> apply:</span><span class="id"> ereal_inf_lbound</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> addeC</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> lb_ereal_inf</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> _</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> mn]</span><span class="id"> &lt;-</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> leeD2l//;</span><span class="id"> apply:</span><span class="id"> ereal_inf_lbound;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_esup_le_cvg</span><span class="id"> u</span><span class="id"> l</span><span class="id"> :</span><span class="id"> limn_esup</span><span class="id"> u</span><span class="id"> &lt;=</span><span class="id"> l</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> l</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> supul</span><span class="id"> ul;</span><span class="id"> have</span><span class="id"> usupu</span><span class="id"> n</span><span class="id"> :</span><span class="id"> l</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ul</span><span class="id"> /=;</span><span class="id"> apply/ereal_sup_ubound;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">@squeeze_cvge</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">cst</span><span class="id"> l</span>))<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> [exact:</span><span class="id"> nearW|exact:</span><span class="id"> cvg_cst]</span>.<br/>
<span class="id">apply/cvg_closeP;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> is_cvg_esups</span>.<br/>
<span class="id">rewrite</span><span class="id"> closeE//;</span><span class="id"> apply/eqP</span>.<br/>
<span class="id">rewrite</span><span class="id"> eq_le</span><span class="id"> -[X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> &lt;=</span><span class="id"> _</span><span class="id"> &lt;=</span><span class="id"> _]limn_esup_lim</span><span class="id"> supul/=</span>.<br/>
<span class="id">apply:</span> (<span class="id">lime_ge</span> (<span class="id">@is_cvg_esups</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">;</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> m</span>.<br/>
<span class="id">have</span><span class="id"> /le_trans</span><span class="id"> :</span><span class="id"> l</span><span class="id"> &lt;=</span><span class="id"> einfs</span><span class="id"> u</span><span class="id"> m</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> lb_ereal_inf</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [p</span><span class="id"> /=</span><span class="id"> pm]</span><span class="id"> &lt;-</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> einfs_le_esups</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_einfN</span><span class="id"> u</span><span class="id"> :</span><span class="id"> limn_einf</span> (<span class="id">-%E</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> =</span><span class="id"> -</span><span class="id"> limn_esup</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /limn_esup</span><span class="id"> -limf_einfN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_esupN</span><span class="id"> u</span><span class="id"> :</span><span class="id"> limn_esup</span> (<span class="id">-%E</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> =</span><span class="id"> -</span><span class="id"> limn_einf</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /limn_einf</span><span class="id"> oppeK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limn_einf_sup</span><span class="id"> u</span><span class="id"> :</span><span class="id"> limn_einf</span><span class="id"> u</span><span class="id"> &lt;=</span><span class="id"> limn_esup</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> limn_esup_lim</span><span class="id"> limn_einf_lim</span>.<br/>
<span class="id">apply:</span><span class="id"> lee_lim;</span><span class="id"> [exact/is_cvg_einfs|exact/is_cvg_esups|]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nearW;</span><span class="id"> exact:</span><span class="id"> einfs_le_esups</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgNy_limn_einf_sup</span><span class="id"> u</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">limn_einf</span><span class="id"> u</span><span class="id"> =</span><span class="id"> -oo</span>)<span class="id"> *</span> (<span class="id">limn_esup</span><span class="id"> u</span><span class="id"> =</span><span class="id"> -oo</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> uoo;</span><span class="id"> suff:</span><span class="id"> limn_esup</span><span class="id"> u</span><span class="id"> =</span><span class="id"> -oo</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> {}uoo;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> -leeNy_eq</span><span class="id"> -uoo</span><span class="id"> limn_einf_sup</span>.<br/>
<span class="id">rewrite</span><span class="id"> limn_esup_lim;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> apply/cvgeNyPle</span><span class="id"> =&gt;</span><span class="id"> M</span>.<br/>
<span class="id">have</span><span class="id"> /cvgeNyPle/</span>(_<span class="id"> M</span>)<span class="id">[m</span><span class="id"> _</span><span class="id"> uM]</span><span class="id"> :=</span><span class="id"> uoo</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> ub_ereal_sup</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [k</span><span class="id"> /=</span><span class="id"> nk</span><span class="id"> &lt;-]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> uM</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> nk</span>)<span class="id">//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgNy_einfs</span><span class="id"> u</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> einfs</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvgNy_limn_einf_sup[uoo</span><span class="id"> _]</span>.<br/>
<span class="id">apply/cvg_closeP;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> is_cvg_einfs|rewrite</span><span class="id"> closeE//]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -limn_einf_lim</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgNy_esups</span><span class="id"> u</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvgNy_limn_einf_sup[_</span><span class="id"> uoo];</span><span class="id"> apply/cvg_closeP</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> is_cvg_esups|rewrite</span><span class="id"> closeE//</span><span class="id"> -limn_esup_lim]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgy_einfs</span><span class="id"> u</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> einfs</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvgeN/cvgNy_esups/cvgeN;</span><span class="id"> rewrite</span><span class="id"> esupsN</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_cvg</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> oppeK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgy_esups</span><span class="id"> u</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvgeN/cvgNy_einfs/cvgeN;</span><span class="id"> rewrite</span><span class="id"> einfsN</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_cvg</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> oppeK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_esups</span><span class="id"> u</span><span class="id"> l</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> l</span><span class="id"> =&gt;</span><span class="id"> [l</span><span class="id"> /fine_cvgP[u_fin_num]</span><span class="id"> ul|</span><span class="id"> |];</span><span class="id"> last</span><span class="id"> 2</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> exact:</span><span class="id"> cvgy_esups</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> exact:</span><span class="id"> cvgNy_esups</span>.<br/>
<span class="id">have</span><span class="id"> [p</span><span class="id"> _</span><span class="id"> pu]</span><span class="id"> :=</span><span class="id"> u_fin_num;</span><span class="id"> apply/cvg_ballP</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> EFin</span><span class="id"> \o</span><span class="id"> sups</span> (<span class="id">fine</span><span class="id"> \o</span><span class="id"> u</span>)<span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l%:E</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> continuous_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvg_sups</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /cvg_ballP</span><span class="id"> /</span>(_<span class="id"> e%:num</span> (<span class="id">gt0</span><span class="id"> _</span>))<span class="id">[q</span><span class="id"> _</span><span class="id"> qsupsu];</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> esups</span><span class="id"> u</span><span class="id"> n</span><span class="id"> =</span> (<span class="id">EFin</span><span class="id"> \o</span><span class="id"> sups</span> (<span class="id">fine</span><span class="id"> \o</span><span class="id"> u</span>))<span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> -ereal_sup_EFin;</span><span class="id"> last</span><span class="id"> 2</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="id"> apply/has_ubound_sdrop/bounded_fun_has_ubound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/cvg_seq_bounded/cvg_ex;</span><span class="id"> eexists;</span><span class="id"> exact</span><span class="id"> ul</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> eexists;</span><span class="id"> rewrite</span><span class="id"> /sdrop</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> n;</span><span class="id"> [|reflexivity]</span>.<br/>
&nbsp;&nbsp;<span class="id">congr</span> (<span class="id">ereal_sup</span><span class="id"> _</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> y;</span><span class="id"> split=&gt;</span><span class="id"> [[m</span><span class="id"> /=</span><span class="id"> nm</span><span class="id"> &lt;-{y}]|[r</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> nm</span><span class="id"> &lt;-{r}</span><span class="id"> &lt;-{y}]]]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> /pu</span><span class="id"> :</span> (<span class="id">p</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> nm</span>)<span class="id"> //;</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /fineK</span><span class="id"> umE;</span><span class="id"> eexists;</span><span class="id"> [exists</span><span class="id"> m|exact/umE]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /pu</span><span class="id"> :</span> (<span class="id">p</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%N</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">leq_trans</span><span class="id"> _</span><span class="id"> nm</span>)<span class="id"> //;</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> p</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /fineK</span><span class="id"> umE;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact/umE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> qsupsu</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> q</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_einfs</span><span class="id"> u</span><span class="id"> l</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> einfs</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvgeN/cvg_esups/cvgeN;</span><span class="id"> rewrite</span><span class="id"> oppeK</span><span class="id"> esupsN</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_cvg</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> oppeK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_limn_einf_sup</span><span class="id"> u</span><span class="id"> l</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">limn_einf</span><span class="id"> u</span><span class="id"> =</span><span class="id"> l</span>)<span class="id"> *</span> (<span class="id">limn_esup</span><span class="id"> u</span><span class="id"> =</span><span class="id"> l</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ul;</span><span class="id"> rewrite</span><span class="id"> limn_esup_lim</span><span class="id"> limn_einf_lim;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact/cvg_einfs</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact/cvg_esups</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_limn_einfE</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> limn_einf</span><span class="id"> u</span><span class="id"> =</span><span class="id"> limn</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvg_ex[l</span><span class="id"> ul];</span><span class="id"> have</span><span class="id"> [-&gt;</span><span class="id"> _]</span><span class="id"> :=</span><span class="id"> cvg_limn_einf_sup</span><span class="id"> ul</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/cvg_lim</span><span class="id"> :</span><span class="id"> ul</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_limn_esupE</span><span class="id"> u</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> limn_esup</span><span class="id"> u</span><span class="id"> =</span><span class="id"> limn</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvg_ex[l</span><span class="id"> ul];</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> -&gt;]</span><span class="id"> :=</span><span class="id"> cvg_limn_einf_sup</span><span class="id"> ul</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/cvg_lim</span><span class="id"> :</span><span class="id"> ul</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> lim_esup_inf</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_einf_shift`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_einf_shift</span><span class="id"> :=</span><span class="id"> limn_einf_shift</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_esup_le_cvg`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_esup_le_cvg</span><span class="id"> :=</span><span class="id"> limn_esup_le_cvg</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_einfN`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_einfN</span><span class="id"> :=</span><span class="id"> limn_einfN</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_esupN`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_esupN</span><span class="id"> :=</span><span class="id"> limn_esupN</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `limn_einf_sup`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> lim_einf_sup</span><span class="id"> :=</span><span class="id"> limn_einf_sup</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `cvgNy_limn_einf_sup`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvgNy_lim_einf_sup</span><span class="id"> :=</span><span class="id"> cvgNy_limn_einf_sup</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `cvg_limn_einf_sup`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvg_lim_einf_sup</span><span class="id"> :=</span><span class="id"> cvg_limn_einf_sup</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `is_cvg_limn_einfE`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> is_cvg_lim_einfE</span><span class="id"> :=</span><span class="id"> is_cvg_limn_einfE</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.6&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;renamed to `is_cvg_limn_esupE`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> is_cvg_lim_esupE</span><span class="id"> :=</span><span class="id"> is_cvg_limn_esupE</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> geometric_le_lim</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">n</span><span class="id"> :</span><span class="id"> nat</span>) (<span class="id">a</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> `|x|</span><span class="id"> &lt;</span><span class="id"> 1</span><span class="id"> -&gt;</span><span class="id"> series</span> (<span class="id">geometric</span><span class="id"> a</span><span class="id"> x</span>)<span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> a</span><span class="id"> *</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> x</span>)<span class="id">^-1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> a0</span><span class="id"> x0</span><span class="id"> x1</span>.<br/>
<span class="id">have</span><span class="id"> /</span>(<span class="id">@cvg_unique</span><span class="id"> _</span> (<span class="id">@Rhausdorff</span><span class="id"> R</span>))<span class="id"> :=</span><span class="id"> @cvg_geometric_series</span><span class="id"> _</span><span class="id"> a</span><span class="id"> _</span><span class="id"> x1</span>.<br/>
<span class="id">move/</span>(_<span class="id"> _</span> (<span class="id">@is_cvg_geometric_series</span><span class="id"> _</span><span class="id"> a</span><span class="id"> _</span><span class="id"> x1</span>))<span class="id"> =&gt;</span><span class="id"> -&gt;</span>.<br/>
<span class="id">apply:</span><span class="id"> nondecreasing_cvgn_le;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> is_cvg_geometric_series</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nondecreasing_series</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> _</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> pmulr_lge0</span><span class="id"> //</span><span class="id"> exprn_gt0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> banach_contraction</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> completeNormedModType</span><span class="id"> R}</span> (<span class="id">U</span><span class="id"> :</span><span class="id"> set</span><span class="id"> X</span>).<br/>
<span class="vernacular">Variables</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> {fun</span><span class="id"> U</span><span class="id"> &gt;-&gt;</span><span class="id"> U}</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> contractions</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">q</span><span class="id"> :</span><span class="id"> {nonneg</span><span class="id"> R}</span>) (<span class="id">ctrf</span><span class="id"> :</span><span class="id"> contraction</span><span class="id"> q</span><span class="id"> f</span>) (<span class="id">base</span><span class="id"> :</span><span class="id"> X</span>) (<span class="id">Ubase</span><span class="id"> :</span><span class="id"> U</span><span class="id"> base</span>).<br/>
<span class="vernacular">Let</span><span class="id"> C</span><span class="id"> :=</span><span class="id"> `|f</span><span class="id"> base</span><span class="id"> -</span><span class="id"> base|</span><span class="id"> /</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> q%:num</span>).<br/>
<span class="vernacular">Let</span><span class="id"> y</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> iter</span><span class="id"> n</span><span class="id"> f</span><span class="id"> base</span>.<br/>
<span class="vernacular">Let</span><span class="id"> q1</span><span class="id"> :=</span><span class="id"> ctrf</span>.<span class="id">1</span>.<br/>
<span class="vernacular">Let</span><span class="id"> ctrfq</span><span class="id"> :=</span><span class="id"> ctrf</span>.<span class="id">2</span>.<br/>
<span class="vernacular">Let</span><span class="id"> C_ge0</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> C</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ?</span>(<span class="id">invr_ge0,</span><span class="id"> mulr_ge0,</span><span class="id"> subr_ge0,</span><span class="id"> ltW</span><span class="id"> q1</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> contraction_dist</span><span class="id"> n</span><span class="id"> m</span><span class="id"> :</span><span class="id"> `|y</span><span class="id"> n</span><span class="id"> -</span><span class="id"> y</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> m</span>)<span class="id">|</span><span class="id"> &lt;=</span><span class="id"> C</span><span class="id"> *</span><span class="id"> q%:num</span><span class="id"> ^+</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> f1</span><span class="id"> k</span><span class="id"> :</span><span class="id"> `|y</span><span class="id"> k</span>.<span class="id">+1</span><span class="id"> -</span><span class="id"> y</span><span class="id"> k|</span><span class="id"> &lt;=</span><span class="id"> q%:num</span><span class="id"> ^+</span><span class="id"> k</span><span class="id"> *</span><span class="id"> `|f</span><span class="id"> base</span><span class="id"> -</span><span class="id"> base|</span>.<br/>
&nbsp;&nbsp;<span class="id">elim:</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> [|k</span><span class="id"> /</span>(<span class="id">ler_wpM2l</span> (<span class="id">ge0</span><span class="id"> q</span>))<span class="id">];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> expr0</span><span class="id"> mul1r</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> mulrA</span><span class="id"> -exprS;</span><span class="id"> apply:</span><span class="id"> le_trans</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">@ctrfq</span> (<span class="id">y</span><span class="id"> k</span>.<span class="id">+1,</span><span class="id"> y</span><span class="id"> k</span>))<span class="id">;</span><span class="id"> split;</span><span class="id"> exact:</span><span class="id"> funS</span>.<br/>
<span class="id">have</span><span class="id"> /le_trans</span><span class="id"> -&gt;</span><span class="id"> //</span><span class="id"> :</span><span class="id"> `|</span><span class="id"> y</span><span class="id"> n</span><span class="id"> -</span><span class="id"> y</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> m</span>)<span class="id">|</span><span class="id"> &lt;=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">series</span> (<span class="id">geometric</span> (<span class="id">`|f</span><span class="id"> base</span><span class="id"> -</span><span class="id"> base|</span><span class="id"> *</span><span class="id"> q%:num</span><span class="id"> ^+</span><span class="id"> n</span>)<span class="id"> q%:num</span>)<span class="id"> m</span>.<br/>
&nbsp;&nbsp;<span class="id">elim:</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> [|m</span><span class="id"> ih]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> geometric_seriesE</span><span class="id"> ?lt_eqF//=</span><span class="id"> addn0</span><span class="id"> subrr</span><span class="id"> normr0</span><span class="id"> subrr</span><span class="id"> mulr0</span><span class="id"> mul0r</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ler_distD</span> (<span class="id">y</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> m</span>)<span class="id">%N</span>)<span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">le_trans</span> (<span class="id">lerD</span><span class="id"> ih</span><span class="id"> _</span>))<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> addnS;</span><span class="id"> exact:</span><span class="id"> f1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> [_</span><span class="id"> *</span><span class="id"> `|_|]mulrC</span><span class="id"> exprD</span><span class="id"> mulrA</span><span class="id"> geometric_seriesE</span><span class="id"> ?lt_eqF//=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -!/</span>(<span class="id">`1-_</span>) (<span class="id">onem_PosNum</span><span class="id"> ctrf</span>.<span class="id">1</span>) (<span class="id">onemX_NngNum</span> (<span class="id">ltW</span><span class="id"> ctrf</span>.<span class="id">1</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -!mulrA</span><span class="id"> -mulrDr</span><span class="id"> ler_pM//</span><span class="id"> -mulrDr</span><span class="id"> exprSr</span><span class="id"> onemM</span><span class="id"> -addrA</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> leRHS]</span>(<span class="id">mulrC</span><span class="id"> _</span><span class="id"> `1-</span>(_<span class="id"> ^+</span><span class="id"> m</span>))<span class="id"> -onemMr</span><span class="id"> onemK</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> [in</span><span class="id"> leRHS]mulrDl</span><span class="id"> mulrAC</span><span class="id"> mulrV</span><span class="id"> ?mul1r//</span><span class="id"> unitf_gt0//</span><span class="id"> onem_gt0</span>.<br/>
<span class="id">rewrite</span><span class="id"> geometric_seriesE</span><span class="id"> ?lt_eqF//=</span><span class="id"> -[leRHS]mulr1</span> (<span class="id">ACl</span> (<span class="id">1*4*2*3</span>))<span class="id">/=</span><span class="id"> -/C</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_wpM2l//</span><span class="id"> 1?mulr_ge0//</span><span class="id"> lerBlDr</span><span class="id"> lerDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> contraction_cvg</span><span class="id"> :</span><span class="id"> cvgn</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/cauchy_cvgP;</span><span class="id"> apply/cauchy_ballP</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near_simpl</span>.<br/>
<span class="id">have</span><span class="id"> lt_min</span><span class="id"> n</span><span class="id"> m</span><span class="id"> :</span><span class="id"> `|y</span><span class="id"> n</span><span class="id"> -</span><span class="id"> y</span><span class="id"> m|</span><span class="id"> &lt;=</span><span class="id"> C</span><span class="id"> *</span><span class="id"> q%:num</span><span class="id"> ^+</span><span class="id"> minn</span><span class="id"> n</span><span class="id"> m</span>.<br/>
&nbsp;&nbsp;<span class="id">wlog</span><span class="id"> :</span><span class="id"> n</span><span class="id"> m</span><span class="id"> /</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%N</span><span class="id"> =&gt;</span><span class="id"> W</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case/orP:</span> (<span class="id">leq_total</span><span class="id"> n</span><span class="id"> m</span>)<span class="id"> =&gt;</span><span class="id"> /W</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> minnC</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">minn_idPl</span><span class="id"> _</span>)<span class="id">//</span> (<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">contraction_dist</span><span class="id"> _</span> (<span class="id">m</span><span class="id"> -</span><span class="id"> n</span>)))<span class="id">//</span><span class="id"> subnKC</span>.<br/>
<span class="id">case:</span><span class="id"> ltrgt0P</span><span class="id"> C_ge0</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> [Cpos|C0]</span><span class="id"> _;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> n</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">le_lt_trans</span> (<span class="id">lt_min</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> C0</span><span class="id"> mul0r</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span><span class="id"> /=</span> (<span class="id">le_lt_trans</span> (<span class="id">lt_min</span><span class="id"> n</span>.<span class="id">1</span><span class="id"> n</span>.<span class="id">2</span>))<span class="id"> //</span>.<br/>
<span class="id">rewrite</span><span class="id"> //</span><span class="id"> -ltr_pdivlMl</span><span class="id"> //</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> ball</span><span class="id"> 0</span> (<span class="id">C^-1</span><span class="id"> *</span><span class="id"> e%:num</span>) (<span class="id">q%:num</span><span class="id"> ^+</span><span class="id"> minn</span><span class="id"> n</span>.<span class="id">1</span><span class="id"> n</span>.<span class="id">2</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> ger0_norm</span>.<br/>
<span class="id">near:</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> nbhs_simpl</span>.<br/>
<span class="id">pose</span><span class="id"> g</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> w</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> *</span><span class="id"> nat</span><span class="id"> =&gt;</span><span class="id"> q%:num</span><span class="id"> ^+</span><span class="id"> minn</span><span class="id"> w</span>.<span class="id">1</span><span class="id"> w</span>.<span class="id">2</span>.<br/>
<span class="id">have</span><span class="id"> :=</span><span class="id"> @fcvg_ball</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> filter_prod</span><span class="id"> \oo</span><span class="id"> \oo</span>)<span class="id"> _</span><span class="id"> 0</span><span class="id"> _</span> (<span class="id">C^-1</span><span class="id"> *</span><span class="id"> e%:num</span>).<br/>
<span class="id">move:</span> (<span class="id">@cvg_geometric</span><span class="id"> _</span><span class="id"> 1</span><span class="id"> q%:num</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ger0_norm</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> q1</span>)<span class="id"> geo</span>.<br/>
<span class="id">near_simpl;</span><span class="id"> apply;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> mulr_gt0</span><span class="id"> //</span><span class="id"> invr_gt0</span>.<br/>
<span class="id">apply/cvg_ballP</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[delta];</span><span class="id"> near_simpl</span>.<br/>
<span class="id">have</span><span class="id"> [N</span><span class="id"> _</span><span class="id"> Q]</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> N</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> ball</span><span class="id"> 0</span><span class="id"> delta%:num</span> (<span class="id">geometric</span><span class="id"> 1</span><span class="id"> q%:num</span><span class="id"> N</span>).<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">@fcvg_ball</span><span class="id"> R</span><span class="id"> R</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 0</span><span class="id"> geo</span>).<br/>
<span class="gallina-kwd">exists</span> (<span class="id">[set</span><span class="id"> n</span><span class="id"> |</span><span class="id"> N</span><span class="id"> &lt;=</span><span class="id"> n],</span><span class="id"> [set</span><span class="id"> n</span><span class="id"> |</span><span class="id"> N</span><span class="id"> &lt;=</span><span class="id"> n]</span>)<span class="id">%N;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> split;</span><span class="gallina-kwd"> exists</span><span class="id"> N</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> [n</span><span class="id"> m]</span><span class="id"> [Nn</span><span class="id"> Nm];</span><span class="id"> rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> ger0_norm</span><span class="id"> /g</span><span class="id"> //</span>.<br/>
<span class="id">apply:</span><span class="id"> le_lt_trans;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span> (<span class="id">Q</span><span class="id"> N</span>)<span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> ger0_norm</span><span class="id"> /geometric</span><span class="id"> //=</span><span class="id"> mul1r</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_wiXn2l</span><span class="id"> //</span><span class="id"> ?ltW</span><span class="id"> //</span><span class="id"> leq_min</span><span class="id"> Nn</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> contraction_cvg_fixed</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> U</span><span class="id"> -&gt;</span><span class="id"> limn</span><span class="id"> y</span><span class="id"> =</span><span class="id"> f</span> (<span class="id">limn</span><span class="id"> y</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> clU;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near_simpl;</span><span class="id"> apply:</span><span class="id"> near_inftyS</span>.<br/>
<span class="id">have</span><span class="id"> [q_gt0</span><span class="id"> |</span><span class="id"> |</span><span class="id"> q0]</span><span class="id"> :=</span><span class="id"> ltrgt0P</span><span class="id"> q%:num</span>.<br/>
<span class="id">-</span><span class="id"> near=&gt;</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> apply:</span> (<span class="id">le_lt_trans</span> (<span class="id">@ctrfq</span> (<span class="id">_,</span><span class="id"> _</span>)<span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> split;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> funS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> closed_cvg</span><span class="id"> contraction_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> funS</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> -ltr_pdivlMl</span><span class="id"> //;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> move/cvgrPdist_lt:</span><span class="id"> contraction_cvg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> mulr_gt0</span><span class="id"> //</span><span class="id"> invr_gt0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltNge//;</span><span class="id"> exact:</span><span class="id"> contraNP</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> n;</span><span class="id"> apply:</span> (<span class="id">le_lt_trans</span> (<span class="id">@ctrfq</span> (<span class="id">_,</span><span class="id"> _</span>)<span class="id"> _</span>)).<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> split;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> funS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> closed_cvg</span><span class="id"> contraction_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> funS</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> q0</span><span class="id"> mul0r</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> contractions</span>.<br/>
<br/>
<span class="vernacular">Variable</span><span class="id"> ctrf</span><span class="id"> :</span><span class="id"> is_contraction</span><span class="id"> f</span>.<br/>
<br/>
<span class="vernacular">Theorem</span><span class="id"> banach_fixed_point</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> U</span><span class="id"> -&gt;</span><span class="id"> U</span><span class="id"> !=set0</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> p,</span><span class="id"> U</span><span class="id"> p</span><span class="id"> &amp;</span><span class="id"> p</span><span class="id"> =</span><span class="id"> f</span><span class="id"> p</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> ctrf</span><span class="id"> =&gt;</span><span class="id"> [q</span><span class="id"> ctrq]</span><span class="id"> ?</span><span class="id"> [base</span><span class="id"> Ubase];</span><span class="gallina-kwd"> exists</span> (<span class="id">lim</span> (<span class="id">iter</span><span class="id"> n</span><span class="id"> f</span><span class="id"> base</span><span class="id"> @[n</span><span class="id"> --&gt;\oo]</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> closed_cvg</span> (<span class="id">contraction_cvg</span><span class="id"> ctrq</span><span class="id"> Ubase</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> funS</span>.<br/>
<span class="id">exact:</span> (<span class="id">contraction_cvg_fixed</span><span class="id"> ctrq</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> banach_contraction</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> Baire</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> K</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<br/>
<span class="vernacular">Theorem</span><span class="id"> Baire</span> (<span class="id">U</span><span class="id"> :</span><span class="id"> completeNormedModType</span><span class="id"> K</span>) (<span class="id">F</span><span class="id"> :</span> (<span class="id">set</span><span class="id"> U</span>)<span class="id">^nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> open</span> (<span class="id">F</span><span class="id"> i</span>)<span class="id"> /\</span><span class="id"> dense</span> (<span class="id">F</span><span class="id"> i</span>))<span class="id"> -&gt;</span><span class="id"> dense</span> (<span class="id">\bigcap_i</span> (<span class="id">F</span><span class="id"> i</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> odF</span><span class="id"> D</span><span class="id"> Dy</span><span class="vernacular"> OpenD</span>.<br/>
<span class="id">have</span><span class="id"> /</span>(_<span class="id"> D</span><span class="id"> Dy</span><span class="vernacular"> OpenD</span>)<span class="id">[a0</span><span class="id"> DF0a0]</span><span class="id"> :</span><span class="id"> dense</span> (<span class="id">F</span><span class="id"> 0%N</span>)<span class="id"> :=</span><span class="id"> proj2</span> (<span class="id">odF</span><span class="id"> 0%N</span>).<br/>
<span class="id">have</span><span class="id"> {OpenD</span><span class="id"> Dy}</span><span class="id"> openIDF0</span><span class="id"> :</span><span class="id"> open</span> (<span class="id">D</span><span class="id"> `&amp;`</span><span class="id"> F</span><span class="id"> 0%N</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> openI</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span> (<span class="id">proj1</span> (<span class="id">odF</span><span class="id"> 0%N</span>)).<br/>
<span class="id">have</span><span class="id"> /open_nbhs_nbhs/nbhs_closedballP[r0</span><span class="id"> Ball_a0]</span><span class="id"> :</span><span class="id"> open_nbhs</span><span class="id"> a0</span> (<span class="id">D</span><span class="id"> `&amp;`</span><span class="id"> F</span><span class="id"> 0%N</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> []</span>.<br/>
<span class="id">pose</span><span class="id"> P</span> (<span class="id">m</span><span class="id"> :</span><span class="id"> nat</span>) (<span class="id">arn</span><span class="id"> :</span><span class="id"> U</span><span class="id"> *</span><span class="id"> {posnum</span><span class="id"> K}</span>) (<span class="id">arm</span><span class="id"> :</span><span class="id"> U</span><span class="id"> *</span><span class="id"> {posnum</span><span class="id"> K}</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">closed_ball</span><span class="id"> arm</span>.<span class="id">1</span> (<span class="id">arm</span>.<span class="id">2%:num</span>)<span class="id"> `&lt;=`</span> (<span class="id">closed_ball</span><span class="id"> arn</span>.<span class="id">1</span><span class="id"> arn</span>.<span class="id">2%:num</span>)<span class="id">^</span><span class="id"> `&amp;`</span><span class="id"> F</span><span class="id"> m</span><br/>
&nbsp;&nbsp;<span class="id">/\</span><span class="id"> arm</span>.<span class="id">2%:num</span><span class="id"> &lt;</span><span class="id"> m</span>.<span class="id">+1%:R^-1</span>.<br/>
<span class="id">have</span><span class="id"> Ar</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> na</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> *</span> (<span class="id">U</span><span class="id"> *</span><span class="id"> {posnum</span><span class="id"> K}</span>)<span class="id">,</span><span class="gallina-kwd"> exists</span><span class="id"> b</span><span class="id"> :</span><span class="id"> U</span><span class="id"> *</span><span class="id"> {posnum</span><span class="id"> K},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span><span class="id"> na</span>.<span class="id">1</span>.<span class="id">+1</span><span class="id"> na</span>.<span class="id">2</span><span class="id"> b</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> [n</span><span class="id"> [an</span><span class="id"> rn]]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [</span><span class="id"> openFn</span><span class="id"> denseFn]</span><span class="id"> :=</span><span class="id"> odF</span><span class="id"> n</span>.<span class="id">+1</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [an1</span><span class="id"> B0Fn2an1]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> x,</span> ((<span class="id">closed_ball</span><span class="id"> an</span><span class="id"> rn%:num</span>)<span class="id">^</span><span class="id"> `&amp;`</span><span class="id"> F</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> [//|?</span><span class="id"> ?]</span><span class="id"> :=</span><span class="id"> @open_nbhs_closed_ball</span><span class="id"> _</span><span class="id"> _</span><span class="id"> an</span><span class="id"> rn%:num</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> denseFn</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> an</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> openIB0Fn1</span><span class="id"> :</span><span class="id"> open</span> ((<span class="id">closed_ball</span><span class="id"> an</span><span class="id"> rn%:num</span>)<span class="id">^</span><span class="id"> `&amp;`</span><span class="id"> F</span><span class="id"> n</span>.<span class="id">+1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/openI</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact/open_interior</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /open_nbhs_nbhs/nbhs_closedballP[rn01</span><span class="id"> Ball_an1]</span><span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">open_nbhs</span><span class="id"> an1</span> ((<span class="id">closed_ball</span><span class="id"> an</span><span class="id"> rn%:num</span>)<span class="id">^</span><span class="id"> `&amp;`</span><span class="id"> F</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> n31_gt0</span><span class="id"> :</span><span class="id"> n</span>.<span class="id">+3%:R^-1</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> :&gt;</span><span class="id"> K</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> majr</span><span class="id"> :</span><span class="id"> minr</span> (<span class="id">PosNum</span><span class="id"> n31_gt0</span>)<span class="id">%:num</span><span class="id"> rn01%:num</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">an1,</span><span class="id"> PosNum</span><span class="id"> majr</span>)<span class="id">;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply/</span>(<span class="id">subset_trans</span><span class="id"> _</span><span class="id"> Ball_an1</span>)<span class="id">/le_closed_ball</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ge_min</span><span class="id"> lexx</span><span class="id"> orbT</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> n</span>.<span class="id">+3%:R^-1</span>)<span class="id"> //=</span><span class="id"> ?ge_min</span><span class="id"> ?lexx//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltf_pV2</span><span class="id"> //</span><span class="id"> ?ltr_nat//</span><span class="id"> posrE</span>.<br/>
<span class="id">have</span><span class="id"> [f</span><span class="id"> Pf]</span><span class="id"> :=</span><span class="id"> choice</span><span class="id"> Ar</span>.<br/>
<span class="id">pose</span><span class="gallina-kwd"> fix</span><span class="id"> ar</span><span class="id"> n</span><span class="id"> :=</span><span class="gallina-kwd"> if</span><span class="id"> n</span><span class="id"> is</span><span class="id"> p</span>.<span class="id">+1</span><span class="gallina-kwd"> then</span> (<span class="id">f</span> (<span class="id">p,</span><span class="id"> ar</span><span class="id"> p</span>))<span class="gallina-kwd"> else</span> (<span class="id">a0,</span><span class="id"> r0</span>).<br/>
<span class="id">pose</span><span class="id"> a</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> n</span><span class="id"> =&gt;</span> (<span class="id">ar</span><span class="id"> n</span>).<span class="id">1</span>.<br/>
<span class="id">pose</span><span class="id"> r</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> n</span><span class="id"> =&gt;</span> (<span class="id">ar</span><span class="id"> n</span>).<span class="id">2</span>.<br/>
<span class="id">have</span><span class="id"> Suite_ball</span><span class="id"> n</span><span class="id"> m</span><span class="id"> :</span> (<span class="id">n</span><span class="id"> &lt;=</span><span class="id"> m</span>)<span class="id">%N</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closed_ball</span> (<span class="id">a</span><span class="id"> m</span>) (<span class="id">r</span><span class="id"> m</span>)<span class="id">%:num</span><span class="id"> `&lt;=`</span><span class="id"> closed_ball</span> (<span class="id">a</span><span class="id"> n</span>) (<span class="id">r</span><span class="id"> n</span>)<span class="id">%:num</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span><span class="id"> m=&gt;</span><span class="id"> [|k</span><span class="id"> iHk];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> leqn0</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> -&gt;</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> leq_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> -&gt;</span><span class="id"> //|/iHk];</span><span class="id"> apply:</span><span class="id"> subset_trans</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [+</span><span class="id"> _]</span><span class="id"> :</span><span class="id"> P</span><span class="id"> k</span>.<span class="id">+1</span> (<span class="id">a</span><span class="id"> k,</span><span class="id"> r</span><span class="id"> k</span>) (<span class="id">a</span><span class="id"> k</span>.<span class="id">+1,</span><span class="id"> r</span><span class="id"> k</span>.<span class="id">+1</span>)<span class="gallina-kwd"> by</span><span class="id"> apply:</span> (<span class="id">Pf</span> (<span class="id">k,</span><span class="id"> ar</span><span class="id"> k</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> subsetI</span><span class="id"> =&gt;</span><span class="id"> -[+</span><span class="id"> _]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/subset_trans;</span><span class="id"> apply</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> interior_subset</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">a</span><span class="id"> @</span><span class="id"> \oo</span>).<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> :</span><span class="id"> cauchy</span> (<span class="id">a</span><span class="id"> @</span><span class="id"> \oo</span>)<span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> cauchy_cvg</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> :</span><span class="id"> cauchy_ex</span> (<span class="id">a</span><span class="id"> @</span><span class="id"> \oo</span>)<span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> cauchy_exP</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> e</span><span class="id"> e0;</span><span class="id"> rewrite</span><span class="id"> /fmapE</span><span class="id"> -ball_normE</span><span class="id"> /ball_</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [n</span><span class="id"> rne]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> n,</span><span class="id"> 2</span><span class="id"> *</span> (<span class="id">r</span><span class="id"> n</span>)<span class="id">%:num</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span><span class="id"> eps</span><span class="id"> :=</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> [n</span><span class="id"> n1e]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> n,</span><span class="id"> n</span>.<span class="id">+1%:R^-1</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> `|ceil</span><span class="id"> eps^-1|%N</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -ltf_pV2</span><span class="id"> ?</span>(<span class="id">posrE,divr_gt0</span>)<span class="id">//</span><span class="id"> invrK</span><span class="id"> -addn1</span><span class="id"> natrD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> natr_absz</span><span class="id"> gtr0_norm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">ceil_ge</span><span class="id"> _</span>))<span class="id"> //</span><span class="id"> ltrDl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -ceil_gt0</span><span class="id"> invr_gt0</span><span class="id"> divr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> n</span>.<span class="id">+1;</span><span class="id"> rewrite</span><span class="id"> -ltr_pdivlMl</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> /lt_trans</span><span class="id"> :</span> (<span class="id">r</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%:num</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1%:R^-1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> [_</span><span class="id"> ]</span><span class="id"> :</span><span class="id"> P</span><span class="id"> n</span>.<span class="id">+1</span> (<span class="id">a</span><span class="id"> n,</span><span class="id"> r</span><span class="id"> n</span>) (<span class="id">a</span><span class="id"> n</span>.<span class="id">+1,</span><span class="id"> r</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="gallina-kwd"> by</span><span class="id"> apply:</span> (<span class="id">Pf</span> (<span class="id">n,</span><span class="id"> ar</span><span class="id"> n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/lt_le_trans</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> lef_pV2//</span><span class="id"> //</span><span class="id"> ?posrE//</span><span class="id"> ler_nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> mulrC</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">a</span><span class="id"> n</span>)<span class="id">,</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> m</span><span class="id"> nsupm</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@lt_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">2</span><span class="id"> *</span> (<span class="id">r</span><span class="id"> n</span>)<span class="id">%:num</span>) (<span class="id">`|a</span><span class="id"> n</span><span class="id"> -</span><span class="id"> a</span><span class="id"> m|</span>)<span class="id"> e</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span> (<span class="id">closed_ball</span> (<span class="id">a</span><span class="id"> n</span>) (<span class="id">r</span><span class="id"> n</span>)<span class="id">%:num</span>) (<span class="id">a</span><span class="id"> m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> /</span>(_ (<span class="id">a</span><span class="id"> m</span>))<span class="id"> :=</span><span class="id"> Suite_ball</span><span class="id"> n</span><span class="id"> m</span><span class="id"> nsupm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> closed_ballxx</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> closed_ballE</span><span class="id"> /closed_ball_</span><span class="id"> //=</span><span class="id"> =&gt;</span><span class="id"> /le_lt_trans;</span><span class="id"> apply</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> <span class="id"> -?ltr_pdivrMr</span><span class="id"> ?mulfV</span><span class="id"> ?ltr1n</span>.<br/>
<span class="id">rewrite</span><span class="id"> cvg_ex</span><span class="id"> //=</span><span class="id"> =&gt;</span><span class="id"> -[l</span><span class="id"> Hl];</span><span class="gallina-kwd"> exists</span><span class="id"> l;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="vernacular"> Hinter</span><span class="id"> :</span> (<span class="id">closed_ball</span><span class="id"> a0</span><span class="id"> r0%:num</span>)<span class="id"> l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@closed_cvg</span><span class="id"> _</span><span class="id"> _</span><span class="id"> \oo</span><span class="id"> eventually_filter</span><span class="id"> a</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> exact:</span><span class="id"> closed_ball_closed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> apply:</span><span class="id"> nearW;</span><span class="id"> move=&gt;</span><span class="id"> m;</span><span class="id"> have</span><span class="id"> /</span>(_ (<span class="id">a</span><span class="id"> m</span>))<span class="id"> :=</span><span class="id"> @Suite_ball</span><span class="id"> 0%N</span><span class="id"> _</span> (<span class="id">leq0n</span><span class="id"> m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> closed_ballxx</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> :</span><span class="id"> closed_ball</span><span class="id"> a0</span><span class="id"> r0%:num</span><span class="id"> `&lt;=`</span><span class="id"> D</span><span class="gallina-kwd"> by</span><span class="id"> move/</span>(_<span class="id"> _</span><span class="vernacular"> Hinter</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> Ball_a0;</span><span class="id"> rewrite</span><span class="id"> closed_ballE</span><span class="id"> //=</span><span class="id"> subsetI;</span><span class="id"> apply:</span><span class="id"> proj1</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> i</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> closed_ball</span> (<span class="id">a</span><span class="id"> i</span>) (<span class="id">r</span><span class="id"> i</span>)<span class="id">%:num</span><span class="id"> l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@cvg_shiftn</span><span class="id"> i</span><span class="id"> _</span><span class="id"> a</span><span class="id"> l</span>)<span class="id"> /=</span><span class="gallina-kwd"> in</span><span class="id"> Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@closed_cvg</span><span class="id"> _</span><span class="id"> _</span><span class="id"> \oo</span><span class="id"> eventually_filter</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> a</span> (<span class="id">n</span><span class="id"> +</span><span class="id"> i</span>)<span class="id">%N</span>))<span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> exact:</span><span class="id"> closed_ball_closed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> nearW;</span><span class="id"> move=&gt;</span><span class="id"> n;</span><span class="id"> exact/</span>(<span class="id">Suite_ball</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">leq_addl</span><span class="id"> n</span><span class="id"> i</span>))<span class="id">/closed_ballxx</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> [|n]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> Ball_a0;</span><span class="id"> rewrite</span><span class="id"> subsetI</span><span class="id"> =&gt;</span><span class="id"> -[_</span><span class="id"> p]</span><span class="id"> la0;</span><span class="id"> move:</span> (<span class="id">p</span><span class="id"> _</span><span class="id"> la0</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [+</span><span class="id"> _]</span><span class="id"> :</span><span class="id"> P</span><span class="id"> n</span>.<span class="id">+1</span> (<span class="id">a</span><span class="id"> n,</span><span class="id"> r</span><span class="id"> n</span>) (<span class="id">a</span><span class="id"> n</span>.<span class="id">+1,</span><span class="id"> r</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="gallina-kwd"> by</span><span class="id"> apply</span><span class="id"> :</span> (<span class="id">Pf</span> (<span class="id">n</span><span class="id"> ,</span><span class="id"> ar</span><span class="id"> n</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> subsetI</span><span class="id"> =&gt;</span><span class="id"> -[_</span><span class="id"> p]</span><span class="id"> lan1;</span><span class="id"> move:</span> (<span class="id">p</span><span class="id"> l</span><span class="id"> lan1</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> Baire</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> bounded_fun_norm</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> r,</span><span class="gallina-kwd"> exists</span><span class="id"> M,</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> `|x|</span><span class="id"> &lt;=</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> M</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_landau</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_fun_norm</span><span class="id"> f</span><span class="id"> &lt;-&gt;</span> ((<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>)<span class="id"> =O_</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> cst</span> (<span class="id">1:K</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> eqOP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [|Bf]</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_<span class="id"> 1</span>)<span class="id">[M</span><span class="id"> bm]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> !nearE</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> M;</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span><span class="id"> Mx</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/nbhs_normP;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> y</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> sub0r</span><span class="id"> normrN/=</span><span class="id"> normr1</span><span class="id"> mulr1</span><span class="id"> =&gt;</span><span class="id"> y1</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/ltW;</span><span class="id"> rewrite</span> (<span class="id">le_lt_trans</span><span class="id"> _</span><span class="id"> Mx</span>)<span class="id">//</span><span class="id"> bm//</span><span class="id"> ltW</span>.<br/>
<span class="id">-</span><span class="id"> apply/bounded_funP;</span><span class="id"> rewrite</span><span class="id"> /bounded_near</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> M</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> mkset</span><span class="id"> _</span><span class="id"> =</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> M</span><span class="id"> *</span><span class="id"> `|cst</span><span class="id"> 1</span><span class="id"> x|</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> normr1</span><span class="id"> mulr1</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> M</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> pointwise_bounded</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>) (<span class="id">W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">V</span><span class="id"> -&gt;</span><span class="id"> W</span>))<span class="id"> :=</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="gallina-kwd"> exists</span><span class="id"> M,</span><span class="gallina-kwd"> forall</span><span class="id"> f,</span><span class="id"> F</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> M</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> uniform_bounded</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>) (<span class="id">W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">V</span><span class="id"> -&gt;</span><span class="id"> W</span>))<span class="id"> :=</span><span class="gallina-kwd"> forall</span><span class="id"> r,</span><span class="gallina-kwd"> exists</span><span class="id"> M,</span><span class="gallina-kwd"> forall</span><span class="id"> f,</span><span class="id"> F</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> `|x|</span><span class="id"> &lt;=</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> M</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> banach_steinhaus</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> completeNormedModType</span><span class="id"> K</span>) (<span class="id">W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> pack_linear</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">lf</span><span class="id"> :</span><span class="id"> linear</span><span class="id"> f</span>)<span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span><br/>
&nbsp;<span class="id">:=</span><span class="id"> HB</span>.<span class="id">pack</span><span class="id"> f</span> (<span class="id">GRing</span>.<span class="id">isLinear</span>.<span class="id">Build</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> lf</span>).<br/>
<br/>
<span class="vernacular">Theorem</span><span class="id"> Banach_Steinhauss</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">V</span><span class="id"> -&gt;</span><span class="id"> W</span>))<span class="id">:</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> f,</span><span class="id"> F</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> bounded_fun_norm</span><span class="id"> f</span><span class="id"> /\</span><span class="id"> linear</span><span class="id"> f</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">pointwise_bounded</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> uniform_bounded</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Propf</span><span class="id"> BoundedF</span>.<br/>
<span class="id">set</span><span class="id"> O</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> \bigcup_</span>(<span class="id">f</span><span class="gallina-kwd"> in</span><span class="id"> F</span>) (<span class="id">normr</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id">@^-1`</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &gt;</span><span class="id"> n%:R]</span>.<br/>
<span class="id">have</span><span class="id"> O_open</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span><span class="id"> open</span> (<span class="id"> O</span><span class="id"> n</span> ).<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> bigcup_open</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> Fi</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@open_comp</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">normr</span><span class="id"> \o</span><span class="id"> i</span>)<span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &gt;</span><span class="id"> n%:R]</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> open_gt</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> Hx;</span><span class="id"> apply:</span><span class="id"> continuous_comp;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> norm_continuous</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> Li</span><span class="id"> :</span><span class="id"> linear</span><span class="id"> i</span><span class="id"> :=</span><span class="id"> proj2</span> (<span class="id">Propf</span><span class="id"> _</span><span class="id"> Fi</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@linear_continuous</span><span class="id"> K</span><span class="id"> V</span><span class="id"> W</span> (<span class="id">pack_linear</span><span class="id"> Li</span>))<span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/</span>(<span class="id">proj1</span> (<span class="id">bounded_landau</span> (<span class="id">pack_linear</span><span class="id"> Li</span>)))<span class="id">/</span>(<span class="id">proj1</span> (<span class="id">Propf</span><span class="id"> _</span><span class="id"> Fi</span>)).<br/>
<span class="id">set</span><span class="id"> O_inf</span><span class="id"> :=</span><span class="id"> \bigcap_i</span> (<span class="id">O</span><span class="id"> i</span>).<br/>
<span class="id">have</span><span class="id"> O_infempty</span><span class="id"> :</span><span class="id"> O_inf</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -subset0</span><span class="id"> =&gt;</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [M</span><span class="id"> FxM]</span><span class="id"> :=</span><span class="id"> BoundedF</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /O_inf</span><span class="id"> /O</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /</span>(_<span class="id"> `|ceil</span><span class="id"> M|%N</span><span class="id"> Logic</span>.<span class="id">I</span>)<span class="id">[f</span><span class="id"> Ff];</span><span class="id"> apply/negP;</span><span class="id"> rewrite</span><span class="id"> -leNgt</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">FxM</span><span class="id"> _</span><span class="id"> Ff</span>))<span class="id">//</span> (<span class="id">le_trans</span> (<span class="id">ceil_ge</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> lez_abs</span> (<span class="id">ceil</span><span class="id"> M</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">@ler_int</span><span class="id"> K</span>).<br/>
<span class="id">have</span><span class="id"> ContraBaire</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> i,</span><span class="id"> not</span> (<span class="id">dense</span> (<span class="id">O</span><span class="id"> i</span>)).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> dOinf</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> dense</span><span class="id"> O_inf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /dense</span><span class="id"> O_infempty</span><span class="id"> ;</span><span class="id"> apply</span><span class="id"> /existsNP;</span><span class="gallina-kwd"> exists</span><span class="id"> setT;</span><span class="id"> elim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> setI0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> point</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="id"> exact:</span><span class="id"> openT</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /contra_not/</span>(_<span class="id"> dOinf</span>)<span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> open</span> (<span class="id">O</span><span class="id"> i</span>)<span class="id"> /\</span><span class="id"> dense</span> (<span class="id">O</span><span class="id"> i</span>))<span class="id"> -&gt;</span><span class="id"> dense</span> (<span class="id">O_inf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> Baire</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /asboolPn</span><span class="id"> /existsp_asboolPn[n</span><span class="id"> /and_asboolP</span><span class="id"> /nandP</span><span class="id"> Hn]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> n;</span><span class="id"> case:</span><span class="id"> Hn</span><span class="id"> =&gt;</span><span class="id"> /asboolPn</span>.<br/>
<span class="id">have</span><span class="id"> [n</span><span class="id"> [x0</span><span class="id"> [r</span><span class="id"> H]]</span><span class="id"> k]</span><span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> n</span><span class="id"> x</span> (<span class="id">r</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> K}</span>)<span class="id">,</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r%:num</span>)<span class="id"> `&lt;=`</span> (<span class="id">~`</span> (<span class="id">O</span><span class="id"> n</span>)).<br/>
&nbsp;&nbsp;<span class="id">move:</span><span class="id"> ContraBaire</span><span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;<span class="id">[i</span><span class="id"> /</span>(<span class="id">denseNE</span>)<span class="id"> [</span><span class="id"> O0</span><span class="id"> [</span><span class="id"> [</span><span class="id"> x</span><span class="id"> /open_nbhs_nbhs</span><span class="id"> /nbhs_ballP</span><span class="id"> [r</span><span class="id"> r0</span><span class="id"> bxr]</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">/</span>((<span class="id">@subsetI_eq0</span><span class="id"> _</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span>)<span class="id"> O0</span> (<span class="id">O</span><span class="id"> i</span>) (<span class="id">O</span><span class="id"> i</span>)))<span class="id">]]]]</span><span class="id"> /</span>(_<span class="id"> bxr</span>)<span class="id"> bxrOi</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> i,</span><span class="id"> x,</span> (<span class="id">PosNum</span><span class="id"> r0</span>)<span class="id">;</span><span class="id"> apply/disjoints_subset/bxrOi</span>.<br/>
<span class="gallina-kwd">exists</span> ((<span class="id">n</span><span class="id"> +</span><span class="id"> n</span>)<span class="id">%:R</span><span class="id"> *</span><span class="id"> k</span><span class="id"> *</span><span class="id"> 2</span><span class="id"> /</span><span class="id"> r%:num</span>)<span class="id">=&gt;</span><span class="id"> f</span><span class="id"> Ff</span><span class="id"> y</span><span class="id"> Hx;</span><span class="id"> move:</span> (<span class="id">Propf</span><span class="id"> f</span><span class="id"> Ff</span>)<span class="id"> =&gt;</span><span class="id"> [</span><span class="id"> _</span><span class="id"> linf]</span>.<br/>
<span class="id">case:</span> (<span class="id">eqVneq</span><span class="id"> y</span><span class="id"> 0</span>)<span class="id"> =&gt;</span><span class="id"> [-&gt;</span><span class="id"> |</span><span class="id"> Zeroy]</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> (<span class="id">linear0</span> (<span class="id">pack_linear</span><span class="id"> linf</span>))<span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> -&gt;</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> normr0</span><span class="id"> !mulr_ge0</span><span class="id"> //</span> (<span class="id">le_trans</span><span class="id"> _</span><span class="id"> Hx</span>).<br/>
<span class="id">have</span><span class="id"> majballi</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> f</span><span class="id"> x,</span><span class="id"> F</span><span class="id"> f</span><span class="id"> -&gt;</span> (<span class="id">ball</span><span class="id"> x0</span><span class="id"> r%:num</span>)<span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> `|f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> &lt;=</span><span class="id"> n%:R</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> g</span><span class="id"> x</span><span class="id"> Fg</span><span class="id"> /</span>(<span class="id">H</span><span class="id"> x</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> leNgt</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /O</span><span class="id"> setC_bigcup</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> Fg</span>)<span class="id">/negP</span>.<br/>
<span class="id">have</span><span class="id"> majball</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> f</span><span class="id"> x,</span><span class="id"> F</span><span class="id"> f</span><span class="id"> -&gt;</span> (<span class="id">ball</span><span class="id"> x0</span><span class="id"> r%:num</span>)<span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> `|f</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> x0</span>)<span class="id">|</span><span class="id"> &lt;=</span><span class="id"> n%:R</span><span class="id"> +</span><span class="id"> n%:R</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> g</span><span class="id"> x</span><span class="id"> Fg;</span><span class="id"> move:</span> (<span class="id">Propf</span><span class="id"> g</span><span class="id"> Fg</span>)<span class="id"> =&gt;</span><span class="id"> [Bg</span><span class="id"> Lg]</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span> (<span class="id">linearB</span> (<span class="id">pack_linear</span><span class="id"> Lg</span>))<span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> -&gt;</span><span class="id"> Ballx</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/</span>(<span class="id">le_trans</span> (<span class="id">ler_normB</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">/lerD;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> majballi</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> majballi</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact/ball_center</span>.<br/>
<span class="id">have</span><span class="id"> ballprop</span><span class="id"> :</span><span class="id"> ball</span><span class="id"> x0</span><span class="id"> r%:num</span> (<span class="id">2^-1</span><span class="id"> *</span> (<span class="id">r%:num</span><span class="id"> /</span><span class="id"> `|y|</span>)<span class="id"> *:</span><span class="id"> y</span> <span class="id"> +</span><span class="id"> x0</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -ball_normE</span><span class="id"> /ball_</span><span class="id"> /=</span><span class="id"> opprD</span><span class="id"> addrC</span><span class="id"> subrK</span><span class="id"> normrN</span><span class="id"> normrZ</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> 2!normrM</span><span class="id"> -2!mulrA</span> (<span class="id">@normfV</span><span class="id"> _</span><span class="id"> `|y|</span>)<span class="id"> normr_id</span><span class="id"> mulVf</span><span class="id"> ?mulr1</span><span class="id"> ?normr_eq0//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gtr0_norm</span><span class="id"> //</span><span class="id"> gtr0_norm</span><span class="id"> //</span><span class="id"> gtr_pMl</span><span class="id"> //</span><span class="id"> invf_lt1</span><span class="id"> //</span><span class="id"> ltr1n</span>.<br/>
<span class="id">have</span><span class="id"> :=</span><span class="id"> majball</span><span class="id"> f</span> (<span class="id">2^-1</span><span class="id"> *</span> (<span class="id">r%:num</span><span class="id"> /</span><span class="id"> `|y|</span>)<span class="id"> *:</span><span class="id"> y</span><span class="id"> +</span><span class="id"> x0</span>)<span class="id"> Ff</span><span class="id"> ballprop</span>.<br/>
<span class="id">rewrite</span><span class="id"> -addrA</span><span class="id"> addrN</span><span class="id"> linf</span>.<br/>
<span class="id">move:</span> (<span class="id">linear0</span> (<span class="id">pack_linear</span><span class="id"> linf</span>))<span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> -&gt;</span>.<br/>
<span class="id">rewrite</span><span class="id"> addr0</span><span class="id"> normrZ</span><span class="id"> 2!normrM</span><span class="id"> gtr0_norm</span><span class="id"> //</span><span class="id"> gtr0_norm</span><span class="id"> //</span>.<br/>
<span class="id">rewrite</span><span class="id"> normfV</span><span class="id"> normr_id</span><span class="id"> -ler_pdivlMl</span><span class="id"> //=;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mulr_gt0</span><span class="id"> //</span><span class="id"> mulr_gt0</span><span class="id"> //</span><span class="id"> invr_gt0</span><span class="id"> normr_gt0</span>.<br/>
<span class="id">move/le_trans;</span><span class="id"> apply</span>.<br/>
<span class="id">rewrite</span><span class="id"> -natrD</span><span class="id"> -!mulrA</span> (<span class="id">mulrC</span> (<span class="id">_%:R</span>))<span class="id"> ler_pM</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> invfM</span><span class="id"> invrK</span><span class="id"> mulrCA</span><span class="id"> ler_pM2l</span><span class="id"> //</span><span class="id"> invf_div</span><span class="id"> //</span><span class="id"> ler_pM2r</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> banach_steinhaus</span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
