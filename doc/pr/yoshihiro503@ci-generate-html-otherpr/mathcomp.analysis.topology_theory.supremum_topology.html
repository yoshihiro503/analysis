
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.topology_theory.supremum_topology</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.topology_theory.supremum_topology" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init()">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module mathcomp.analysis.topology_theory.supremum_topology</h1>
<span class="vernacular">From</span><span class="id"> HB</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> structures</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> all_ssreflect</span><span class="id"> all_algebra</span><span class="id"> finmap</span><span class="id"> all_classical</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> topology_structure</span><span class="id"> uniform_structure</span>.<br/>
<br/>
<div class="ssrdoc md">
# Supremum topology

```
                 sup_topology Tc == supremum topology of the family of
                                    topologicalType structures Tc on T
                       sup_ent E == the entourages of the supremum
```
`sup_topology` is equipped with the `Uniform` structure
</div>
<br/>
<span class="gallina-kwd">Set</span><span class="vernacular"> Implicit</span><span class="vernacular"> Arguments</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Strict</span><span class="vernacular"> Implicit</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Printing</span><span class="vernacular"> Implicit</span><span class="vernacular"> Defensive</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> classical_set_scope</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ring_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> sup_topology</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {I</span><span class="id"> :</span><span class="id"> Type}</span><br/>
&nbsp;&nbsp;(<span class="id">Tc</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> Topological</span><span class="id"> T</span>)<span class="id"> :</span><span class="gallina-kwd"> Type</span><span class="id"> :=</span><span class="id"> T</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> Sup_Topology</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">I</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">Tc</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> Topological</span><span class="id"> T</span>).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> S</span><span class="id"> :=</span> (<span class="id">sup_topology</span><span class="id"> Tc</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> TS</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> Topological</span>.<span class="id">Pack</span> (<span class="id">Tc</span><span class="id"> i</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> sup_subbase</span><span class="id"> :=</span><span class="id"> \bigcup_i</span> (<span class="id">@open</span> (<span class="id">TS</span><span class="id"> i</span>)<span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>).<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Choice</span>.<span class="id">on</span><span class="id"> S</span>.<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> isSubBaseTopological</span>.<span class="id">Build</span><span class="id"> S</span><span class="id"> sup_subbase</span><span class="id"> id</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_sup</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>) (<span class="id">t</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">Filter</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> F</span><span class="id"> --&gt;</span> (<span class="id">t</span><span class="id"> :</span><span class="id"> S</span>)<span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> F</span><span class="id"> --&gt;</span> (<span class="id">t</span><span class="id"> :</span><span class="id"> TS</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Ffilt;</span><span class="id"> split=&gt;</span><span class="id"> cvFt</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> i</span><span class="id"> A</span><span class="id"> /=;</span><span class="id"> rewrite</span> (<span class="id">@nbhsE</span> (<span class="id">TS</span><span class="id"> i</span>))<span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [B</span><span class="id"> [Bop</span><span class="id"> Bt]</span><span class="id"> sBA]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> cvFt;</span><span class="gallina-kwd"> exists</span><span class="id"> B;</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> B];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> split=&gt;</span><span class="id"> [[_</span><span class="id"> -&gt;]|]</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> _</span><span class="id"> -&gt;;</span><span class="gallina-kwd"> exists</span><span class="id"> [fset</span><span class="id"> B]%fset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> inE</span><span class="id"> =&gt;</span><span class="id"> /eqP-&gt;;</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE=&gt;</span><span class="id"> ?;</span><span class="id"> split=&gt;</span><span class="id"> [|??];</span><span class="id"> [apply|];</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> inE</span><span class="id"> //</span><span class="id"> =&gt;/eqP-&gt;</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> A</span><span class="id"> /=;</span><span class="id"> rewrite</span> (<span class="id">@nbhsE</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> S]</span>).<br/>
<span class="id">move=&gt;</span><span class="id"> [_</span><span class="id"> [[B</span><span class="id"> sB</span><span class="id"> &lt;-]</span><span class="id"> [C</span><span class="id"> BC</span><span class="id"> Ct]</span><span class="id"> sUBA]]</span>.<br/>
<span class="id">rewrite</span><span class="id"> nbhs_filterE;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> sUBA</span><span class="id"> _;</span><span class="id"> apply:</span> (<span class="id">@filterS</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> C</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> C</span>.<br/>
<span class="id">have</span><span class="id"> /sB</span><span class="id"> [D</span><span class="id"> sD</span><span class="id"> IDeC]</span><span class="id"> :=</span><span class="id"> BC;</span><span class="id"> rewrite</span><span class="id"> -IDeC;</span><span class="id"> apply:</span><span class="id"> filter_bigI</span><span class="id"> =&gt;</span><span class="id"> E</span><span class="id"> DE</span>.<br/>
<span class="id">have</span><span class="id"> /sD</span><span class="id"> :=</span><span class="id"> DE;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [i</span><span class="id"> _];</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> Eop</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">cvFt</span><span class="id"> i</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> Eop;</span><span class="id"> move:</span><span class="id"> Ct;</span><span class="id"> rewrite</span><span class="id"> -IDeC</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> DE</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> Sup_Topology</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span> (<span class="id">I</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">T</span><span class="id"> :</span><span class="id"> pointedType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> Topological</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">Pointed</span>.<span class="id">on</span> (<span class="id">sup_topology</span><span class="id"> f</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> sup_uniform</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> relation_scope</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">Ii</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">Tc</span><span class="id"> :</span><span class="id"> Ii</span><span class="id"> -&gt;</span><span class="id"> Uniform</span><span class="id"> T</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> I</span><span class="id"> :</span><span class="id"> choiceType</span><span class="id"> :=</span><span class="id"> {classic</span><span class="id"> Ii}</span>.<br/>
<span class="vernacular">Let</span><span class="id"> TS</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> Uniform</span>.<span class="id">Pack</span> (<span class="id">Tc</span><span class="id"> i</span>).<br/>
<span class="vernacular">Notation</span><span class="id"> Tt</span><span class="id"> :=</span> (<span class="id">sup_topology</span><span class="id"> Tc</span>).<br/>
<span class="vernacular">Let</span><span class="id"> ent_of</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> I</span><span class="id"> *</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>))<span class="id"> :=</span><span class="id"> `[&lt;</span><span class="id"> @entourage</span> (<span class="id">TS</span><span class="id"> p</span>.<span class="id">1</span>)<span class="id"> p</span>.<span class="id">2</span><span class="id"> &gt;]</span>.<br/>
<span class="vernacular">Let</span><span class="id"> IEntType</span><span class="id"> :=</span><span class="id"> {p</span><span class="id"> :</span> (<span class="id">I</span><span class="id"> *</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>))<span class="id"> |</span><span class="id"> ent_of</span><span class="id"> p}</span>.<br/>
<span class="vernacular">Let</span><span class="id"> IEnt</span><span class="id"> :</span><span class="id"> choiceType</span><span class="id"> :=</span><span class="id"> IEntType</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> IEnt_pointT</span> (<span class="id">i</span><span class="id"> :</span><span class="id"> I</span>)<span class="id"> :</span><span class="id"> ent_of</span> (<span class="id">i,</span><span class="id"> setT</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/asboolP;</span><span class="id"> exact:</span><span class="id"> entourageT</span>. Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> sup_ent</span><span class="id"> :</span><span class="id"> set_system</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">filter_from</span> (<span class="id">finI_from</span><span class="id"> [set:</span><span class="id"> IEnt]</span> (<span class="gallina-kwd">fun</span><span class="id"> p</span><span class="id"> =&gt;</span> (<span class="id">projT1</span><span class="id"> p</span>).<span class="id">2</span>))<span class="id"> id</span>.<br/>
<br/>
<span class="vernacular">Ltac</span><span class="id"> IEntP</span><span class="id"> :=</span><span class="id"> move=&gt;</span><span class="id"> [[</span><span class="id"> /=</span><span class="id"> +</span><span class="id"> +</span><span class="id"> /[dup]</span><span class="id"> /asboolP]]</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> sup_ent_filter</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> sup_ent</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span> (<span class="id">pselect</span> (<span class="gallina-kwd">exists</span><span class="id"> t:T,</span><span class="id"> True</span>)).<br/>
&nbsp;&nbsp;<span class="id">case</span><span class="id"> =&gt;</span><span class="id"> p</span><span class="id"> _;</span><span class="id"> apply:</span><span class="id"> finI_filter;</span><span class="id"> move=&gt;</span><span class="id"> J</span><span class="id"> JsubEnt</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span> (<span class="id">p,</span><span class="id"> p</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> IEntP</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> b</span><span class="id"> /=</span><span class="id"> /entourage_refl</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> _</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> empT</span>.<br/>
<span class="id">have</span><span class="id"> TT0</span> (<span class="id">E</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">T*T</span>))<span class="id"> :</span><span class="id"> E</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> case=&gt;</span><span class="id"> t</span><span class="id"> ?</span><span class="id"> _;</span><span class="id"> move:</span><span class="id"> empT</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> Logic</span>.<span class="id">absurd;</span><span class="gallina-kwd"> exists</span><span class="id"> t</span>.<br/>
<span class="id">have</span><span class="id"> ent0</span><span class="id"> :</span><span class="id"> sup_ent</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">TT0</span><span class="id"> setT</span>)<span class="id">;</span><span class="gallina-kwd"> exists</span><span class="id"> set0</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="gallina-kwd"> exists</span><span class="id"> fset0</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="id">split</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span> (<span class="id">TT0</span><span class="id"> setT</span>)<span class="id">;</span><span class="id"> exact:</span><span class="id"> ent0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move</span><span class="id"> =&gt;</span><span class="id"> P</span><span class="id"> Q</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> rewrite</span> (<span class="id">TT0</span> (<span class="id">P</span><span class="id"> `&amp;`</span><span class="id"> Q</span>)).<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> P</span><span class="id"> Q</span><span class="id"> _</span><span class="id"> _;</span><span class="id"> rewrite</span> (<span class="id">TT0</span><span class="id"> Q</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> sup_ent_refl</span><span class="id"> A</span><span class="id"> :</span><span class="id"> sup_ent</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> diagonal</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [B</span><span class="id"> [F</span><span class="id"> ?</span><span class="id"> &lt;-]</span><span class="id"> BA]</span><span class="id"> [?</span><span class="id"> ?]/diagonalP</span><span class="id"> -&gt;;</span><span class="id"> apply/BA</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> IEntP</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> w</span><span class="id"> /=</span><span class="id"> /entourage_refl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> sup_ent_inv</span><span class="id"> A</span><span class="id"> :</span><span class="id"> sup_ent</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> sup_ent</span><span class="id"> A^-1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [B</span><span class="id"> [F</span><span class="id"> ?</span><span class="id"> FB]</span><span class="id"> BA];</span><span class="gallina-kwd"> exists</span><span class="id"> B^-1;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> BA</span>.<br/>
<span class="id">have</span><span class="id"> inv</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> ie</span><span class="id"> :</span><span class="id"> IEnt,</span><span class="id"> ent_of</span> ((<span class="id">projT1</span><span class="id"> ie</span>).<span class="id">1,</span> (<span class="id">projT1</span><span class="id"> ie</span>).<span class="id">2^-1</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> IEntP=&gt;</span><span class="id"> ??</span><span class="id"> /entourage_inv</span><span class="id"> ??;</span><span class="id"> exact/asboolP</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> [fset</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> @exist</span> (<span class="id">I</span><span class="id"> *</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>))<span class="id"> _</span><span class="id"> _</span> (<span class="id">inv</span><span class="id"> x</span>))<span class="id"> w</span><span class="id"> |</span><span class="id"> w</span><span class="gallina-kwd"> in</span><span class="id"> F]%fset</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> /imfsetP;</span><span class="id"> IEntP</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> -&gt;;</span><span class="id"> exact:</span><span class="id"> in_setT</span>.<br/>
<span class="id">rewrite</span><span class="id"> -FB</span><span class="id"> eqEsubset;</span><span class="id"> split;</span><span class="id"> case=&gt;</span><span class="id"> x</span><span class="id"> y</span><span class="id"> +</span><span class="id"> ie</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_ (<span class="id">exist</span><span class="id"> ent_of</span><span class="id"> _</span> (<span class="id">inv</span><span class="id"> ie</span>)))<span class="id"> +</span><span class="id"> ?;</span><span class="id"> apply;</span><span class="id"> apply/imfsetP;</span><span class="gallina-kwd"> exists</span><span class="id"> ie</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> +</span><span class="id"> /imfsetP</span><span class="id"> [v</span><span class="id"> vW</span><span class="id"> -&gt;];</span><span class="id"> exact</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> sup_ent_split</span><span class="id"> A</span><span class="id"> :</span><span class="id"> sup_ent</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> B,</span><span class="id"> sup_ent</span><span class="id"> B</span><span class="id"> &amp;</span><span class="id"> B</span><span class="id"> \;</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> spt</span><span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> ie</span><span class="id"> :</span><span class="id"> IEnt,</span><span class="id"> ent_of</span> ((<span class="id">projT1</span><span class="id"> ie</span>).<span class="id">1,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">@split_ent</span> (<span class="id">TS</span> (<span class="id">projT1</span><span class="id"> ie</span>).<span class="id">1</span>) (<span class="id">projT1</span><span class="id"> ie</span>).<span class="id">2</span>))).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case=&gt;</span><span class="id"> [[/=</span><span class="id"> ?</span><span class="id"> ?]</span><span class="id"> /asboolP/entourage_split_ent</span><span class="id"> ?];</span><span class="id"> exact/asboolP</span>.<br/>
<span class="id">pose</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">IEnt</span><span class="id"> -&gt;</span><span class="id"> IEnt</span>)<span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> exist</span><span class="id"> ent_of</span><span class="id"> _</span> (<span class="id">spt</span><span class="id"> x</span>).<br/>
<span class="id">case</span><span class="id"> =&gt;</span><span class="id"> W</span><span class="id"> [F</span><span class="id"> _</span><span class="id"> &lt;-]</span><span class="id"> sA;</span><span class="gallina-kwd"> exists</span> (<span class="id">\bigcap_</span>(<span class="id">x</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> F]</span>) (<span class="id">projT1</span> (<span class="id">g</span><span class="id"> x</span>)).<span class="id">2</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">\bigcap_</span>(<span class="id">ie</span><span class="gallina-kwd"> in</span><span class="id"> [set`F]</span>) (<span class="id">projT1</span> (<span class="id">g</span><span class="id"> ie</span>)).<span class="id">2</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [fset</span> (<span class="id">g</span><span class="id"> ie</span>)<span class="id"> |</span><span class="id"> ie</span><span class="gallina-kwd"> in</span><span class="id"> F]%fset;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /=</span><span class="id"> ??;</span><span class="id"> exact:</span><span class="id"> in_setT</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split;</span><span class="id"> case=&gt;</span><span class="id"> x</span><span class="id"> y</span><span class="id"> Igxy</span><span class="id"> ie</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply/</span>(<span class="id">Igxy</span> (<span class="id">g</span><span class="id"> ie</span>))<span class="id">/imfsetP;</span><span class="gallina-kwd"> exists</span><span class="id"> ie</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /imfsetP</span><span class="id"> [??</span><span class="id"> -&gt;];</span><span class="id"> exact:</span><span class="id"> Igxy</span>.<br/>
<span class="id">case</span><span class="id"> =&gt;</span><span class="id"> ??</span><span class="id"> [z</span><span class="id"> Fxz</span><span class="id"> Fzy];</span><span class="id"> apply:</span><span class="id"> sA;</span><span class="id"> IEntP=&gt;</span><span class="id"> i</span><span class="id"> e</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> eF</span>.<br/>
<span class="id">apply:</span> ((<span class="id">@entourage_split</span> (<span class="id">TS</span><span class="id"> i</span>))<span class="id"> z</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">Fxz</span><span class="id"> _</span><span class="id"> eF</span>).<br/>
<span class="id">exact:</span> (<span class="id">Fzy</span><span class="id"> _</span><span class="id"> eF</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> sup_ent_nbhs</span><span class="id"> :</span><span class="id"> @nbhs</span><span class="id"> Tt</span><span class="id"> Tt</span><span class="id"> =</span><span class="id"> nbhs_</span><span class="id"> sup_ent</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeq2E</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> V;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> [/=</span><span class="id"> X</span><span class="id"> [[/=</span><span class="id"> B</span><span class="id"> +</span><span class="id"> &lt;-]</span><span class="id"> [W</span><span class="id"> BW</span><span class="id"> Wx</span><span class="id"> BV]]]</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> W</span><span class="id"> BW</span>)<span class="id"> []</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> F</span><span class="id"> Fsup</span><span class="id"> Weq;</span><span class="id"> move:</span><span class="id"> Weq</span><span class="id"> Wx</span><span class="id"> BW</span><span class="id"> =&gt;</span><span class="id"> &lt;-</span><span class="id"> Fx</span><span class="id"> BF</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span> (<span class="id">pselect</span> (<span class="id">[set:</span><span class="id"> I]</span><span class="id"> =</span><span class="id"> set0</span>))<span class="id"> =&gt;</span><span class="id"> [I0</span><span class="id"> |</span><span class="id"> /eqP/set0P</span><span class="id"> [i0</span><span class="id"> _]]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> V</span><span class="id"> =</span><span class="id"> setT</span> <span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> setT;</span><span class="id"> apply:</span><span class="id"> filterT;</span><span class="id"> exact:</span><span class="id"> sup_ent_filter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -subTset</span><span class="id"> =&gt;</span><span class="id"> ??;</span><span class="id"> apply:</span><span class="id"> BV;</span><span class="gallina-kwd"> exists</span> (<span class="id">\bigcap_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> F]</span>)<span class="id"> i</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> w</span><span class="id"> /Fsup/set_mem;</span><span class="id"> rewrite</span><span class="id"> /sup_subbase</span><span class="id"> I0</span><span class="id"> bigcup_set0</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> f</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> w,</span><span class="id"> {p</span><span class="id"> :</span><span class="id"> IEnt</span><span class="id"> |</span> <span class="id"> w</span><span class="id"> \in</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> xsection</span> ((<span class="id">projT1</span><span class="id"> p</span>).<span class="id">2</span>)<span class="id"> x</span><span class="id"> `&lt;=`</span><span class="id"> w}</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /=</span><span class="id"> v;</span><span class="id"> apply:</span><span class="id"> cid;</span><span class="id"> case</span> (<span class="id">pselect</span> (<span class="id">v</span><span class="id"> \in</span><span class="id"> F</span>))<span class="id">;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span> (<span class="id">exist</span><span class="id"> ent_of</span><span class="id"> _</span> (<span class="id">IEnt_pointT</span><span class="id"> i0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /[dup]</span><span class="id"> /Fx</span><span class="id"> vx</span><span class="id"> /Fsup/set_mem</span><span class="id"> [i</span><span class="id"> _];</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> x</span><span class="id"> vx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(<span class="id">@nbhsP</span> (<span class="id">TS</span><span class="id"> i</span>))<span class="id"> [w</span><span class="id"> /asboolP</span><span class="id"> ent</span><span class="id"> ?];</span><span class="gallina-kwd"> exists</span> (<span class="id">exist</span><span class="id"> _</span> (<span class="id">i,</span><span class="id"> w</span>)<span class="id"> ent</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">\bigcap_</span>(<span class="id">w</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> F]</span>) (<span class="id">projT1</span> (<span class="id">projT1</span> (<span class="id">f</span><span class="id"> w</span>))).<span class="id">2</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> v</span><span class="id"> /=</span><span class="id"> /xsectionP</span><span class="id"> Fgw;</span><span class="id"> apply:</span><span class="id"> BV;</span><span class="gallina-kwd"> exists</span> (<span class="id">\bigcap_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> F]</span>)<span class="id"> i</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> w</span><span class="id"> /[dup]</span><span class="id"> ?</span><span class="id"> /Fgw</span><span class="id"> /=</span><span class="id"> /mem_set/</span>(<span class="id">projT2</span> (<span class="id">f</span><span class="id"> w</span>))<span class="id">;</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">\bigcap_</span>(<span class="id">w</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> F]</span>) (<span class="id">projT1</span> (<span class="id">projT1</span> (<span class="id">f</span><span class="id"> w</span>))).<span class="id">2</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [fset</span> (<span class="gallina-kwd">fun</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> projT1</span> (<span class="id">f</span><span class="id"> i</span>))<span class="id"> w</span><span class="id"> |</span><span class="id"> w</span><span class="gallina-kwd"> in</span><span class="id"> F]%fset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> u</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> in_setT</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> +</span><span class="id"> z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;/</span>(_ (<span class="id">projT1</span> (<span class="id">f</span><span class="id"> z</span>)))<span class="id"> =&gt;</span><span class="id"> +</span><span class="id"> ?;</span><span class="id"> apply;</span><span class="id"> apply/imfsetP;</span><span class="gallina-kwd"> exists</span><span class="id"> z</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> Fgy</span><span class="id"> /imfsetP</span><span class="id"> [/=</span><span class="id"> u</span><span class="id"> uF</span><span class="id"> -&gt;];</span><span class="id"> exact:</span><span class="id"> Fgy</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> E</span><span class="id"> [D</span><span class="id"> [/=</span><span class="id"> F</span><span class="id"> FsubEnt</span><span class="id"> &lt;-]</span><span class="id"> FsubE</span><span class="id"> EsubV]</span>.<br/>
<span class="id">have</span><span class="id"> F_nbhs_x</span><span class="id"> :</span><span class="id"> Filter</span> (<span class="id">nbhs</span><span class="id"> x</span>)<span class="gallina-kwd"> by</span><span class="id"> typeclasses</span><span class="id"> eauto</span>.<br/>
<span class="id">apply:</span> (<span class="id">filterS</span><span class="id"> EsubV</span>).<br/>
<span class="id">pose</span><span class="id"> f</span><span class="id"> :</span><span class="id"> IEnt</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> w</span><span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;<span class="id">@interior</span> (<span class="id">TS</span> (<span class="id">projT1</span><span class="id"> w</span>).<span class="id">1</span>) (<span class="id">xsection</span> (<span class="id">projT1</span><span class="id"> w</span>).<span class="id">2</span><span class="id"> x</span>).<br/>
<span class="gallina-kwd">exists</span> (<span class="id">\bigcap_</span>(<span class="id">w</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> F]</span>)<span class="id"> f</span><span class="id"> w</span>)<span class="id">;</span><span class="id"> repeat</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> \bigcap_</span>(<span class="id">w</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> F]</span>)<span class="id"> f</span><span class="id"> w];</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> bigcup_set1</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> ?</span><span class="id"> -&gt;;</span><span class="gallina-kwd"> exists</span><span class="id"> [fset</span><span class="id"> f</span><span class="id"> w</span><span class="id"> |</span><span class="id"> w</span><span class="gallina-kwd"> in</span><span class="id"> F]%fset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /=</span><span class="id"> ?</span><span class="id"> /imfsetP</span><span class="id"> [[[/=</span><span class="id"> i</span><span class="id"> w</span><span class="id"> /[dup]</span><span class="id"> /asboolP</span><span class="id"> entw</span><span class="id"> ?</span><span class="id"> Fiw</span><span class="id"> -&gt;]]]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/mem_set;</span><span class="id"> rewrite</span><span class="id"> /f</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> open_interior</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> set_imfset</span><span class="id"> bigcap_image</span><span class="id"> //=</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> IEntP=&gt;</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> /open_nbhs_entourage</span><span class="id"> entw</span><span class="id"> ??;</span><span class="id"> apply</span><span class="id"> entw</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> t</span><span class="id"> /=</span><span class="id"> Ifwt</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/mem_set/FsubE</span><span class="id"> =&gt;</span><span class="id"> it</span><span class="id"> /Ifwt/interior_subset</span><span class="id"> =&gt;</span><span class="id"> /set_mem</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> @Nbhs_isUniform</span>.<span class="id">Build</span><span class="id"> Tt</span><span class="id"> sup_ent</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">sup_ent_filter</span><span class="id"> sup_ent_refl</span><span class="id"> sup_ent_inv</span><span class="id"> sup_ent_split</span><span class="id"> sup_ent_nbhs</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> countable_sup_ent</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">countable</span><span class="id"> [set:</span><span class="id"> Ii]</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> n,</span><span class="id"> countable_uniformity</span> (<span class="id">TS</span><span class="id"> n</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">countable_uniformity</span><span class="id"> Tt</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Icnt</span><span class="id"> countable_ent;</span><span class="id"> pose</span><span class="id"> f</span><span class="id"> n</span><span class="id"> :=</span><span class="id"> cid</span> (<span class="id">countable_ent</span><span class="id"> n</span>).<br/>
<span class="id">pose</span><span class="id"> g</span> (<span class="id">n</span><span class="id"> :</span><span class="id"> Ii</span>)<span class="id"> :</span><span class="id"> set</span> (<span class="id">set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>))<span class="id"> :=</span><span class="id"> projT1</span> (<span class="id">f</span><span class="id"> n</span>).<br/>
<span class="id">have</span><span class="id"> [I0</span><span class="id"> |</span><span class="id"> /set0P</span><span class="id"> [i0</span><span class="id"> _]]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> [set:</span><span class="id"> I]</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [set</span><span class="id"> setT];</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> countable1|move=&gt;</span><span class="id"> A</span><span class="id"> -&gt;;</span><span class="id"> exact:</span><span class="id"> entourageT|]</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> P</span><span class="id"> [w</span><span class="id"> [A</span><span class="id"> _]]</span><span class="id"> &lt;-</span><span class="id"> subP;</span><span class="gallina-kwd"> exists</span><span class="id"> setT</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> subset_trans</span><span class="id"> subP;</span><span class="id"> apply:</span><span class="id"> sub_bigcap</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> _</span><span class="id"> ?</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> suff</span><span class="id"> :</span><span class="id"> [set:</span><span class="id"> I]</span> (<span class="id">projT1</span><span class="id"> i</span>).<span class="id">1</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> I0</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">finI_from</span> (<span class="id">\bigcup_n</span><span class="id"> g</span><span class="id"> n</span>)<span class="id"> id</span>)<span class="id">;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply/finI_from_countable/bigcup_countable</span><span class="id"> =&gt;</span><span class="id"> //i</span><span class="id"> _;</span><span class="id"> case:</span> (<span class="id">projT2</span> (<span class="id">f</span><span class="id"> i</span>)).<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> E</span><span class="id"> [A</span><span class="id"> AsubGn</span><span class="id"> AE];</span><span class="gallina-kwd"> exists</span><span class="id"> E</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> h</span> (<span class="id">w</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>))<span class="id"> :</span><span class="id"> {</span><span class="id"> p</span><span class="id"> :</span><span class="id"> IEnt</span><span class="id"> |</span><span class="id"> w</span><span class="id"> \in</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> w</span><span class="id"> =</span> (<span class="id">projT1</span><span class="id"> p</span>).<span class="id">2</span><span class="id"> }</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> cid;</span><span class="id"> have</span><span class="id"> [|]</span><span class="id"> :=</span><span class="id"> boolP</span> (<span class="id">w</span><span class="id"> \in</span><span class="id"> A</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">exist</span><span class="id"> ent_of</span><span class="id"> _</span> (<span class="id">IEnt_pointT</span><span class="id"> i0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /[dup]</span><span class="id"> /AsubGn</span><span class="id"> /set_mem</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> gnw]</span><span class="id"> wA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">suff</span><span class="id"> ent</span><span class="id"> :</span><span class="id"> ent_of</span> (<span class="id">n,</span><span class="id"> w</span>)<span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">exist</span><span class="id"> ent_of</span> (<span class="id">n,</span><span class="id"> w</span>)<span class="id"> ent</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/asboolP;</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> +</span><span class="id"> _]</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">f</span><span class="id"> n</span>)<span class="id">;</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [fset</span><span class="id"> sval</span> (<span class="id">h</span><span class="id"> w</span>)<span class="id"> |</span><span class="id"> w</span><span class="gallina-kwd"> in</span><span class="id"> A]%fset;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> in_setT</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -AE;</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> t</span><span class="id"> Ia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> w</span><span class="id"> Aw;</span><span class="id"> rewrite</span> (<span class="id">svalP</span> (<span class="id">h</span><span class="id"> w</span>)<span class="id"> Aw</span>)<span class="id">;</span><span class="id"> apply/Ia/imfsetP;</span><span class="gallina-kwd"> exists</span><span class="id"> w</span>.<br/>
&nbsp;&nbsp;<span class="id">case=&gt;</span><span class="id"> [[n</span><span class="id"> w]]</span><span class="id"> p</span><span class="id"> /imfsetP</span><span class="id"> [x</span><span class="id"> /=</span><span class="id"> xA</span><span class="id"> M];</span><span class="id"> apply:</span><span class="id"> Ia</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> w</span><span class="id"> =</span><span class="id"> x</span>)<span class="id"> //</span> (<span class="id">svalP</span> (<span class="id">h</span><span class="id"> x</span>)<span class="id"> xA</span>)<span class="id"> -M</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> E</span><span class="id"> [w]</span><span class="id"> [</span><span class="id"> A</span><span class="id"> _</span><span class="id"> wIA</span><span class="id"> wsubE]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> ent_Ip</span> (<span class="id">i</span><span class="id"> :</span><span class="id"> IEnt</span>)<span class="id"> :</span><span class="id"> @entourage</span> (<span class="id">TS</span> (<span class="id">projT1</span><span class="id"> i</span>).<span class="id">1</span>) (<span class="id">projT1</span><span class="id"> i</span>).<span class="id">2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/asboolP;</span><span class="id"> exact:</span> (<span class="id">projT2</span><span class="id"> i</span>).<br/>
&nbsp;&nbsp;<span class="id">pose</span><span class="id"> h</span> (<span class="id">i</span><span class="id"> :</span><span class="id"> IEnt</span>)<span class="id"> :</span><span class="id"> {x</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>)<span class="id"> |</span><span class="id"> _}</span><span class="id"> :=</span><span class="id"> cid2</span> (<span class="id">and3_rec</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> _</span><span class="id"> P</span><span class="id"> =&gt;</span><span class="id"> P</span>) (<span class="id">projT2</span> (<span class="id">f</span> (<span class="id">projT1</span><span class="id"> i</span>).<span class="id">1</span>)) (<span class="id">projT1</span><span class="id"> i</span>).<span class="id">2</span> (<span class="id">ent_Ip</span><span class="id"> i</span>)).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> ehi</span> (<span class="id">i</span><span class="id"> :</span><span class="id"> IEnt</span>)<span class="id"> :</span><span class="id"> ent_of</span> ((<span class="id">projT1</span><span class="id"> i</span>).<span class="id">1,</span><span class="id"> projT1</span> (<span class="id">h</span><span class="id"> i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply/asboolP</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">h</span><span class="id"> i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> +</span><span class="id"> _</span><span class="id"> ?</span><span class="id"> ?]</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">f</span> (<span class="id">projT1</span><span class="id"> i</span>).<span class="id">1</span>)<span class="id">;</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span><span class="id"> AH</span><span class="id"> :=</span><span class="id"> [fset</span><span class="id"> projT1</span> (<span class="id">h</span><span class="id"> w</span>)<span class="id"> |</span><span class="id"> w</span><span class="gallina-kwd"> in</span><span class="id"> A]%fset</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">\bigcap_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> AH]</span>)<span class="id"> i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> AH</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> p</span><span class="id"> /imfsetP</span><span class="id"> [i</span><span class="id"> iA</span><span class="id"> -&gt;];</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">projT1</span><span class="id"> i</span>).<span class="id">1</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">h</span><span class="id"> i</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> subset_trans</span><span class="id"> wsubE;</span><span class="id"> rewrite</span><span class="id"> -wIA</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> It</span><span class="id"> i</span><span class="id"> ?</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [?]</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">h</span><span class="id"> i</span>)<span class="id">;</span><span class="id"> apply;</span><span class="id"> apply:</span><span class="id"> It;</span><span class="id"> apply/imfsetP;</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> sup_uniform</span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
