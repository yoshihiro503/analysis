
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.topology_theory.topology_structure</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.topology_theory.topology_structure" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init()">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module mathcomp.analysis.topology_theory.topology_structure</h1>
<span class="vernacular">From</span><span class="id"> HB</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> structures</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> all_ssreflect</span><span class="id"> all_algebra</span><span class="id"> finmap</span><span class="id"> all_classical</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Export</span><span class="id"> filter</span>.<br/>
<br/>
<div class="ssrdoc md">
# Basic topological notions
This file develops tools for the manipulation of basic topological
notions. The development of topological notions builds on "filtered types"
by extending the hierarchy.

## Mathematical structures
### Topology
```
         topologicalType == interface type for topological space
                            structure
                            the HB class is Topological.
        ptopologicalType == a pointed topologicalType
                    open == set of open sets
                  closed == set of closed sets
                clopen U == U is both open and closed
             open_nbhs p == set of open neighbourhoods of p
                 basis B == a family of open sets that converges to
                            each point
      second_countable T == T has a countable basis
             [locally P] := forall a, A a -&gt; G (within A (nbhs x)) if P
                            is convertible to G (globally A)
           finI_from D f == set of \bigcap_(i in E) f i where E is a
                            finite subset of D
              interior U == all of the points which are locally in U,
                            i.e., the largest open set contained in U
               closure U == the smallest closed set containing U
               regopen U == U is regular open,
                            i.e., equal to the interior of its closure
             regclosed U == U is regular closed,
                            i.e., equal to the closure of its interior
          open_of_nbhs B == the open sets induced by neighborhoods
          nbhs_of_open B == the neighborhoods induced by open sets
                     x^' == set of neighbourhoods of x where x is
                            excluded (a "deleted neighborhood")
           limit_point E == the set of limit points of E
        discrete_space T == every nbhs is a principal filter
     discrete_space dscT == the discrete topology on T, provided
                            a (dscT : discrete_space T)
                 dense S == the set (S : set T) is dense in T, with T of
                            type topologicalType
          continuousType == type of continuous functions
                            The HB structures is Continuous.
             mkcts f_cts == object of type continuousType corresponding to
                            the function f (f_cts : continuous f)
```
### Factories
```
          Nbhs_isNbhsTopological == factory for a topology defined by a
                                    filter
                                    It builds the mixin for a topological
                                    space from the properties of nbhs and
                                    hence assumes that the carrier is a
                                    filterType.
               isOpenTopological == factory for a topology defined by open
                                    sets
                                    It builds the mixin for a topological
                                    space from the properties of open
                                    sets, nbhs_of_open must be used to
                                    declare a filterType.
               isBaseTopological == factory for a topology defined by a
                                    base of open sets
                                    It builds the mixin for a topological
                                    space from the properties of a base of
                                    open sets; the type of indices must be
                                    a pointedType
            isSubBaseTopological == factory for a topology defined by a
                                    subbase of open sets
                                    It builds the mixin for a topological
                                    space from a subbase of open sets b
                                    indexed on domain D
```

</div>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;A ^°&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 1,</span><span class="id"> format</span> <span class="id">&quot;A ^°&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;[ 'locally' P ]&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 0,</span><span class="id"> format</span> <span class="id">&quot;[ 'locally'  P ]&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;x ^'&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 2,</span><span class="id"> format</span> <span class="id">&quot;x ^'&quot;</span>).<br/>
<br/>
<span class="gallina-kwd">Set</span><span class="vernacular"> Implicit</span><span class="vernacular"> Arguments</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Strict</span><span class="vernacular"> Implicit</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Printing</span><span class="vernacular"> Implicit</span><span class="vernacular"> Defensive</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> classical_set_scope</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ring_scope</span>.<br/>
<br/>
<div class="doc">Topological spaces </div>
<span class="id">HB</span>.<span class="id">mixin</span><span class="vernacular"> Record</span><span class="id"> Nbhs_isTopological</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>)<span class="id"> of</span><span class="id"> Nbhs</span><span class="id"> T</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">open</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T;</span><br/>
&nbsp;&nbsp;<span class="id">nbhs_pfilter_subproof</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> p</span><span class="id"> :</span><span class="id"> T,</span><span class="id"> ProperFilter</span> (<span class="id">nbhs</span><span class="id"> p</span>)<span class="id"> ;</span><br/>
&nbsp;&nbsp;<span class="id">nbhsE_subproof</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> p</span><span class="id"> :</span><span class="id"> T,</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> =</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T,</span><span class="id"> [/\</span><span class="id"> open</span><span class="id"> B,</span><span class="id"> B</span><span class="id"> p</span><span class="id"> &amp;</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A]</span><span class="id"> ]</span><span class="id"> ;</span><br/>
&nbsp;&nbsp;<span class="id">openE_subproof</span><span class="id"> :</span><span class="id"> open</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> nbhs^~</span><span class="id"> A</span><span class="id"> ]</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">#[short</span>(<span class="id">type=</span><span class="id">&quot;topologicalType&quot;</span>)<span class="id">]</span><br/>
<span class="id">HB</span>.<span class="id">structure</span><span class="vernacular"> Definition</span><span class="id"> Topological</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">{T</span><span class="id"> of</span><span class="id"> Nbhs</span><span class="id"> T</span><span class="id"> &amp;</span><span class="id"> Nbhs_isTopological</span><span class="id"> T}</span>.<br/>
<br/>
<span class="id">#[short</span>(<span class="id">type=</span><span class="id">&quot;ptopologicalType&quot;</span>)<span class="id">]</span><br/>
<span class="id">HB</span>.<span class="id">structure</span><span class="vernacular"> Definition</span><span class="id"> PointedTopological</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">{T</span><span class="id"> of</span><span class="id"> PointedNbhs</span><span class="id"> T</span><span class="id"> &amp;</span><span class="id"> Nbhs_isTopological</span><span class="id"> T}</span>.<br/>
<br/>
<span class="id">#[short</span>(<span class="id">type=</span><span class="id">&quot;bpTopologicalType&quot;</span>)<span class="id">]</span><br/>
<span class="id">HB</span>.<span class="id">structure</span><span class="vernacular"> Definition</span><span class="id"> BiPointedTopological</span><span class="id"> :=</span> <br/>
&nbsp;&nbsp;<span class="id">{</span><span class="id"> X</span><span class="id"> of</span><span class="id"> BiPointed</span><span class="id"> X</span><span class="id"> &amp;</span><span class="id"> Topological</span><span class="id"> X</span><span class="id"> }</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> Topological1</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> open_nbhs</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><span class="id"> open</span><span class="id"> A</span><span class="id"> /\</span><span class="id"> A</span><span class="id"> p</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> basis</span> (<span class="id">B</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">set</span><span class="id"> T</span>))<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">B</span><span class="id"> `&lt;=`</span><span class="id"> open</span><span class="id"> /\</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> filter_from</span><span class="id"> [set</span><span class="id"> U</span><span class="id"> |</span><span class="id"> B</span><span class="id"> U</span><span class="id"> /\</span><span class="id"> U</span><span class="id"> x]</span><span class="id"> id</span><span class="id"> --&gt;</span><span class="id"> x</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> second_countable</span><span class="id"> :=</span><span class="gallina-kwd"> exists2</span><span class="id"> B,</span><span class="id"> countable</span><span class="id"> B</span><span class="id"> &amp;</span><span class="id"> basis</span><span class="id"> B</span>.<br/>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> nbhs_pfilter</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> ProperFilter</span> (<span class="id">nbhs</span><span class="id"> p</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> nbhs_pfilter_subproof;</span><span class="id"> case:</span><span class="id"> T</span><span class="id"> p</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> []</span>. Qed.</div></details>
<span class="id">Typeclasses</span><span class="vernacular"> Opaque</span><span class="id"> nbhs</span>.<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_filter</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> Filter</span> (<span class="id">nbhs</span><span class="id"> p</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">@nbhs_pfilter</span>). Qed.</div></details>
<br/>
<span class="vernacular">Canonical</span><span class="id"> nbhs_filter_on</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :=</span><span class="id"> FilterType</span> (<span class="id">nbhs</span><span class="id"> x</span>) (<span class="id">@nbhs_filter</span><span class="id"> x</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhsE</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> p</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="gallina-kwd"> exists2</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T,</span><span class="id"> open_nbhs</span><span class="id"> p</span><span class="id"> B</span><span class="id"> &amp;</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> B,</span><span class="id"> [/\</span><span class="id"> open</span><span class="id"> B,</span><span class="id"> B</span><span class="id"> p</span><span class="id"> &amp;</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A]</span><span class="id"> ]</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> nbhsE_subproof</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> split=&gt;</span><span class="id"> [[B</span><span class="id"> [?]]|[B[]]];</span><span class="gallina-kwd"> exists</span><span class="id"> B</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_nbhsE</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open_nbhs</span><span class="id"> p</span><span class="id"> A</span><span class="id"> =</span> (<span class="id">open</span><span class="id"> A</span><span class="id"> /\</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> propeqE;</span><span class="id"> split=&gt;</span><span class="id"> [[?</span><span class="id"> ?]|[?</span><span class="id"> [B</span><span class="id"> [?</span><span class="id"> ?]</span><span class="id"> BA]]];</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><br/>
&nbsp;&nbsp;<span class="id">[exists</span><span class="id"> A</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> BA]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> interior</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span> (<span class="id">@nbhs</span><span class="id"> _</span><span class="id"> T</span>)<span class="id">^~</span><span class="id"> A</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span> <span class="id">&quot;A ^°&quot;</span><span class="id"> :=</span> (<span class="id">interior</span><span class="id"> A</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interior_subset</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> A^°</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> p;</span><span class="id"> rewrite</span><span class="id"> /interior</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -[?</span><span class="id"> [?</span><span class="id"> ?]];</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> openE</span><span class="id"> :</span><span class="id"> open</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> A^°]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> openE_subproof</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_singleton</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> p</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [?</span><span class="id"> [_</span><span class="id"> ?]];</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_interior</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> A^°</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nbhsE</span><span class="id"> /open_nbhs</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [B</span><span class="id"> [Bop</span><span class="id"> Bp]</span><span class="id"> sBA]</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> B</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> q</span><span class="id"> Bq;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> sBA</span><span class="id"> _;</span><span class="id"> apply:</span><span class="id"> Bop</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open0</span><span class="id"> :</span><span class="id"> open</span> (<span class="id">set0</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> openE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> openT</span><span class="id"> :</span><span class="id"> open</span> (<span class="id">setT</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> ??;</span><span class="id"> apply:</span><span class="id"> filterT</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> openI</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> open</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> open</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> Aop</span><span class="id"> Bop</span><span class="id"> p</span><span class="id"> [Ap</span><span class="id"> Bp]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterI;</span><span class="id"> [apply:</span><span class="id"> Aop|apply:</span><span class="id"> Bop]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bigcup_open</span> (<span class="id">I</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> D</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> open</span> (<span class="id">f</span><span class="id"> i</span>))<span class="id"> -&gt;</span><span class="id"> open</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> D</span>)<span class="id"> f</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> fop</span><span class="id"> p</span><span class="id"> [i</span><span class="id"> Di]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /fop</span><span class="id"> fiop</span><span class="id"> :=</span><span class="id"> Di;</span><span class="id"> move/fiop;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ??;</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> openU</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> open</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> open</span> (<span class="id">A</span><span class="id"> `|`</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> Aop</span><span class="id"> Bop</span><span class="id"> p</span><span class="id"> [/Aop|/Bop];</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ??;</span><span class="id"> [left|right]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_subsetE</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> A</span><span class="id"> -&gt;</span> (<span class="id">A</span><span class="id"> `&lt;=`</span><span class="id"> B</span>)<span class="id"> =</span> (<span class="id">A</span><span class="id"> `&lt;=`</span><span class="id"> B^°</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> Aop;</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> sAB</span><span class="id"> p</span><span class="id"> Ap;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> sAB</span><span class="id"> _;</span><span class="id"> apply:</span><span class="id"> Aop</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> sAB</span><span class="id"> p</span><span class="id"> /sAB</span><span class="id"> /interior_subset</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_interior</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> A^°</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> p;</span><span class="id"> rewrite</span><span class="id"> /interior</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [B</span><span class="id"> [Bop</span><span class="id"> Bp]]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> open_subsetE</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> B</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interior_bigcup</span><span class="id"> I</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> D</span>) (<span class="id">f</span><span class="id"> i</span>)<span class="id">^°</span><span class="id"> `&lt;=`</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> D</span>)<span class="id"> f</span><span class="id"> i</span>)<span class="id">^°</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> p</span><span class="id"> [i</span><span class="id"> Di];</span><span class="id"> rewrite</span><span class="id"> /interior</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [B</span><span class="id"> [Bop</span><span class="id"> Bp]</span><span class="id"> sBfi]</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> B</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> /sBfi;</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_nbhsT</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open_nbhs</span><span class="id"> p</span><span class="id"> setT</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> openT</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_nbhsI</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">open_nbhs</span><span class="id"> p</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> open_nbhs</span><span class="id"> p</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> open_nbhs</span><span class="id"> p</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> [Aop</span><span class="id"> Ap]</span><span class="id"> [Bop</span><span class="id"> Bp];</span><span class="id"> split;</span><span class="id"> [apply:</span><span class="id"> openI|split]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_nbhs_nbhs</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open_nbhs</span><span class="id"> p</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> p_A;</span><span class="gallina-kwd"> exists</span><span class="id"> A</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interiorI</span> (<span class="id">A</span><span class="id"> B:set</span><span class="id"> T</span>)<span class="id">:</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>)<span class="id">^°</span><span class="id"> =</span><span class="id"> A^°</span><span class="id"> `&amp;`</span><span class="id"> B^°</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /interior</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> nbhsE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [[B0</span><span class="id"> ?]</span><span class="id"> |</span><span class="id"> []]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subsetI</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> -[?</span><span class="id"> ?];</span><span class="id"> split;</span><span class="gallina-kwd"> exists</span><span class="id"> B0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> -[B0</span><span class="id"> ?</span><span class="id"> ?]</span><span class="id"> [B1</span><span class="id"> ?</span><span class="id"> ?];</span><span class="gallina-kwd"> exists</span> (<span class="id">B0</span><span class="id"> `&amp;`</span><span class="id"> B1</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">[exact:</span><span class="id"> open_nbhsI</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> subsetI;</span><span class="id"> split;</span><span class="id"> apply:</span><span class="id"> subIset;</span><span class="id"> [left|right]]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> Topological1</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_in_nearW</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>) (<span class="id">S</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">open</span><span class="id"> S</span><span class="id"> -&gt;</span><span class="id"> {in</span><span class="id"> S,</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x}</span><span class="id"> -&gt;</span><span class="id"> {in</span><span class="id"> S,</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> oS</span><span class="id"> SP</span><span class="id"> z</span><span class="id"> /set_mem</span><span class="id"> Sz;</span><span class="id"> apply:</span><span class="id"> in_nearW</span><span class="id"> SP</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> exact:</span><span class="id"> open_nbhs_nbhs</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">Filter</span> (<span class="id">nbhs</span><span class="id"> _</span>))<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve</span><span class="id"> [apply:</span><span class="id"> nbhs_filter]</span><span class="id"> :</span><span class="id"> typeclass_instances</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">ProperFilter</span> (<span class="id">nbhs</span><span class="id"> _</span>))<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve</span><span class="id"> [apply:</span><span class="id"> nbhs_pfilter]</span><span class="id"> :</span><span class="id"> typeclass_instances</span>.<br/>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> alias_nbhs_filter</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@Filter</span><span class="id"> T^o</span> (<span class="id">@nbhs</span><span class="id"> T^o</span><span class="id"> T</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> apply:</span><span class="id"> @nbhs_filter</span><span class="id"> T</span><span class="id"> x</span>. Qed.</div></details>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> alias_nbhs_pfilter</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@ProperFilter</span><span class="id"> T^o</span> (<span class="id">@nbhs</span><span class="id"> T^o</span><span class="id"> T</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> @nbhs_pfilter</span><span class="id"> T</span><span class="id"> x</span>. Qed.</div></details>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;A ^°&quot;</span><span class="id"> :=</span> (<span class="id">interior</span><span class="id"> A</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousP</span> (<span class="id">S</span><span class="id"> T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> S</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">continuous</span><span class="id"> f</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> open</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> open</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> fcont;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> !openE</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> Aop</span><span class="id"> ?</span><span class="id"> /Aop</span><span class="id"> /fcont</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> s</span><span class="id"> A;</span><span class="id"> rewrite</span><span class="id"> nbhs_simpl</span><span class="id"> /=</span><span class="id"> !nbhsE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [B</span><span class="id"> [Bop</span><span class="id"> Bfs]</span><span class="id"> sBA]</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> B</span>)<span class="id">;</span><span class="id"> [split=&gt;</span><span class="id"> //;</span><span class="id"> apply/fcont|move=&gt;</span><span class="id"> ?</span><span class="id"> /sBA]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_comp</span> (<span class="id">R</span><span class="id"> S</span><span class="id"> T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> S</span>) (<span class="id">g</span><span class="id"> :</span><span class="id"> S</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> {for</span> (<span class="id">f</span><span class="id"> x</span>)<span class="id">,</span><span class="id"> continuous</span><span class="id"> g}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">g</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvg_comp</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_comp</span> <span class="id"> {T</span><span class="id"> U</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> U</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{in</span><span class="id"> f</span><span class="id"> @^-1`</span><span class="id"> D,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> open</span><span class="id"> D</span><span class="id"> -&gt;</span><span class="id"> open</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> D</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> !openE</span><span class="id"> =&gt;</span><span class="id"> fcont</span><span class="id"> Dop</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> Dfx</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> fcont;</span><span class="id"> [rewrite</span><span class="id"> inE|apply:</span><span class="id"> Dop]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_fmap</span><span class="id"> {T:</span><span class="id"> topologicalType}</span><span class="id"> {U</span><span class="id"> :</span><span class="id"> topologicalType}</span><br/>
&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> x</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf</span><span class="id"> fx</span><span class="id"> P</span><span class="id"> /cf</span><span class="id"> /fx</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_join</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> -&gt;</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> nbhs_interior</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_bind</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">P</span><span class="id"> Q</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> x,</span> (<span class="id">\near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> -&gt;</span><span class="id"> Q</span><span class="id"> x</span>)<span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> -&gt;</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> Q</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> PQ</span><span class="id"> xP;</span><span class="id"> near=&gt;</span><span class="id"> y;</span><span class="id"> apply:</span> (<span class="id">near</span><span class="id"> PQ</span><span class="id"> y</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">near</span> (<span class="id">near_join</span><span class="id"> xP</span>)<span class="id"> y</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_cvg</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {V</span><span class="id"> U</span><span class="id"> :</span><span class="id"> topologicalType}</span><br/>
&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>) (<span class="id">FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">h</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> a,</span><span class="id"> continuous</span><span class="id"> h}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span> (<span class="id">h</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> h</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> h_continuous</span><span class="id"> fa</span><span class="id"> fb;</span><span class="id"> apply:</span> (<span class="id">cvg_trans</span><span class="id"> _</span><span class="id"> h_continuous</span>).<br/>
<span class="id">exact:</span> (<span class="id">@cvg_comp</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> h</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> fa</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_is_cvg</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {V</span><span class="id"> U</span><span class="id"> :</span><span class="id"> ptopologicalType}</span><span class="id"> [F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T]</span><br/>
&nbsp;&nbsp;(<span class="id">FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">h</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> U</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> l,</span><span class="id"> f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> l,</span><span class="id"> continuous</span><span class="id"> h}</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> ((<span class="id">h</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ach</span><span class="id"> /cvg_ex[l</span><span class="id"> fxl];</span><span class="id"> apply/cvg_ex;</span><span class="gallina-kwd"> exists</span> (<span class="id">h</span><span class="id"> l</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> continuous_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> ach</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous2_cvg</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {V</span><span class="id"> W</span><span class="id"> U</span><span class="id"> :</span><span class="id"> topologicalType}</span><br/>
&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>) (<span class="id">FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">h</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">b</span><span class="id"> :</span><span class="id"> W</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">h</span><span class="id"> z</span>.<span class="id">1</span><span class="id"> z</span>.<span class="id">2</span><span class="id"> @[z</span><span class="id"> --&gt;</span> (<span class="id">a,</span><span class="id"> b</span>)<span class="id">]</span><span class="id"> --&gt;</span><span class="id"> h</span><span class="id"> a</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> h</span> (<span class="id">f</span><span class="id"> x</span>) (<span class="id">g</span><span class="id"> x</span>))<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> h</span><span class="id"> a</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> h_continuous</span><span class="id"> fa</span><span class="id"> fb;</span><span class="id"> apply:</span> (<span class="id">cvg_trans</span><span class="id"> _</span><span class="id"> h_continuous</span>).<br/>
<span class="id">exact:</span> (<span class="id">@cvg_comp</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> h</span><span class="id"> x</span>.<span class="id">1</span><span class="id"> x</span>.<span class="id">2</span>)<span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">cvg_pair</span><span class="id"> fa</span><span class="id"> fb</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_near_cst</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">U</span><span class="id"> :</span><span class="id"> topologicalType</span>)<br/>
&nbsp;&nbsp;(<span class="id">l</span><span class="id"> :</span><span class="id"> U</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> x</span><span class="id"> =</span><span class="id"> l</span>)<span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> fFl</span><span class="id"> P</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> !near_simpl</span><span class="id"> =&gt;</span><span class="id"> Pl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> fFl</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> -&gt;;</span><span class="id"> apply:</span><span class="id"> nbhs_singleton</span>.<br/>
Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> cvg_near_cst</span><span class="id"> {T</span><span class="id"> U}</span><span class="id"> l</span><span class="id"> {f</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_near_cst</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">U</span><span class="id"> :</span><span class="id"> ptopologicalType</span>)<br/>
&nbsp;&nbsp;(<span class="id">l</span><span class="id"> :</span><span class="id"> U</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> x</span><span class="id"> =</span><span class="id"> l</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvg_near_cst/cvgP</span>. Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> is_cvg_near_cst</span><span class="id"> {T</span><span class="id"> U}</span><span class="id"> l</span><span class="id"> {f</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_cst_continuous</span> (<span class="id">T</span><span class="id"> U</span><span class="id"> :</span><span class="id"> topologicalType</span>)<br/>
&nbsp;&nbsp;(<span class="id">l</span><span class="id"> :</span><span class="id"> U</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> f</span><span class="id"> y</span><span class="id"> =</span><span class="id"> l</span>)<span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> eq_f_l;</span><span class="id"> apply:</span><span class="id"> cvg_near_cst;</span><span class="id"> apply:</span><span class="id"> filterS</span> (<span class="id">eq_f_l</span>)<span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">nbhs_singleton</span><span class="id"> eq_f_l</span>).<br/>
Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> near_cst_continuous</span><span class="id"> {T</span><span class="id"> U}</span><span class="id"> l</span><span class="id"> [f</span><span class="id"> x]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_cst</span> (<span class="id">U</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> U</span>) (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> :</span><span class="id"> T</span><span class="id"> =&gt;</span><span class="id"> x</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> cvg_near_cst;</span><span class="id"> near=&gt;</span><span class="id"> x0</span>.<span class="id"> Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> cvg_cst</span><span class="id"> {U}</span><span class="id"> x</span><span class="id"> {T</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Resolve</span><span class="id"> cvg_cst</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_cst</span> (<span class="id">U</span><span class="id"> :</span><span class="id"> ptopologicalType</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> U</span>) (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>)<br/>
&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> ((<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> :</span><span class="id"> T</span><span class="id"> =&gt;</span><span class="id"> x</span>)<span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> cvgP;</span><span class="id"> apply:</span><span class="id"> cvg_cst</span>. Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> is_cvg_cst</span><span class="id"> {U}</span><span class="id"> x</span><span class="id"> {T</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Resolve</span><span class="id"> is_cvg_cst</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cst_continuous</span><span class="id"> {T</span><span class="id"> U</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> U</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> :</span><span class="id"> T</span><span class="id"> =&gt;</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> t;</span><span class="id"> apply:</span><span class="id"> cvg_cst</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> within_topologicalType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> within_nbhsW</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> within</span><span class="id"> A</span> (<span class="id">nbhs</span><span class="id"> x</span>)<span class="id"> `=&gt;`</span><span class="id"> globally</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Ax</span><span class="id"> P</span><span class="id"> AP;</span><span class="id"> rewrite</span><span class="id"> /within/=;</span><span class="id"> near=&gt;</span><span class="id"> y;</span><span class="id"> apply:</span><span class="id"> AP</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> locally_of</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>)<span class="id"> of</span><span class="id"> phantom</span><span class="gallina-kwd"> Prop</span> (<span class="id">P</span> (<span class="id">globally</span><span class="id"> A</span>))<br/>
&nbsp;&nbsp;<span class="id">:=</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> P</span> (<span class="id">within</span><span class="id"> A</span> (<span class="id">nbhs</span><span class="id"> x</span>)).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span> <span class="id">&quot;[ 'locally' P ]&quot;</span><span class="id"> :=</span> (<span class="id">@locally_of</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">Phantom</span><span class="id"> _</span><span class="id"> P</span>)).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> within_interior</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> A^°</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> within</span><span class="id"> A</span> (<span class="id">nbhs</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> nbhs</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Aox;</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> cvg_within</span>.<br/>
<span class="id">rewrite</span><span class="id"> ?nbhsE</span><span class="id"> =&gt;</span><span class="id"> W</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> [[B</span><span class="id"> +</span><span class="id"> BsubW]]</span>.<br/>
<span class="id">rewrite</span><span class="id"> open_nbhsE</span><span class="id"> =&gt;</span><span class="id"> [[oB</span><span class="id"> nbhsB]]</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">B</span><span class="id"> `&amp;`</span><span class="id"> A^°</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> t</span><span class="id"> /=</span><span class="id"> []</span><span class="id"> /BsubW</span><span class="id"> +</span><span class="id"> /interior_subset;</span><span class="id"> apply</span>.<br/>
<span class="id">rewrite</span><span class="id"> open_nbhsE;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> openI</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> open_interior</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterI</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> move:</span>(<span class="id">open_interior</span><span class="id"> A</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> openE;</span><span class="id"> exact</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> within_subset</span><span class="id"> B</span><span class="id"> F</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> within</span><span class="id"> A</span><span class="id"> F</span><span class="id"> `=&gt;`</span><span class="id"> within</span><span class="id"> B</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> FF</span><span class="id"> AsubB</span><span class="id"> W;</span><span class="id"> rewrite</span><span class="id"> /within/=;</span><span class="id"> apply:</span><span class="id"> filter_app;</span><span class="id"> rewrite</span><span class="id"> nbhs_simpl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterE</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> +</span><span class="id"> ?;</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> AsubB</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> withinE</span><span class="id"> F</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">within</span><span class="id"> A</span><span class="id"> F</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> U</span><span class="id"> |</span><span class="gallina-kwd"> exists2</span><span class="id"> V,</span><span class="id"> F</span><span class="id"> V</span><span class="id"> &amp;</span><span class="id"> U</span><span class="id"> `&amp;`</span><span class="id"> A</span><span class="id"> =</span><span class="id"> V</span><span class="id"> `&amp;`</span><span class="id"> A]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> FF;</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split=&gt;</span><span class="id"> U</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> Wu;</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> U</span><span class="id"> x]</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> t</span><span class="id"> [L</span><span class="id"> R];</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> L</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> [V</span><span class="id"> FV</span><span class="id"> AU];</span><span class="id"> rewrite</span><span class="id"> /within</span><span class="id"> /prop_near1</span><span class="id"> nbhs_simpl/=;</span><span class="id"> near=&gt;</span><span class="id"> w</span><span class="id"> =&gt;</span><span class="id"> Aw</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> []//</span><span class="id"> :</span> (<span class="id">U</span><span class="id"> `&amp;`</span><span class="id"> A</span>)<span class="id"> w;</span><span class="id"> rewrite</span><span class="id"> AU;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span> (<span class="id">near</span><span class="id"> FV</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> fmap_within_eq</span><span class="id"> {S</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> S</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">Filter</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> {in</span><span class="id"> A,</span><span class="id"> f</span><span class="id"> =1</span><span class="id"> g}</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> within</span><span class="id"> A</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> within</span><span class="id"> A</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> FF</span><span class="id"> feq</span><span class="id"> U</span><span class="id"> /=;</span><span class="id"> near_simpl;</span><span class="id"> apply:</span><span class="id"> filter_app</span>.<br/>
<span class="id">rewrite</span><span class="id"> ?nbhs_simpl;</span><span class="id"> near_simpl;</span><span class="id"> near=&gt;</span><span class="id"> w;</span><span class="id"> rewrite</span> (<span class="id">feq</span><span class="id"> w</span>)<span class="id"> //</span><span class="id"> inE</span>.<br/>
<span class="id">exact:</span> (<span class="id">near</span> (<span class="id">withinT</span><span class="id"> A</span><span class="id"> FF</span>)<span class="id"> w</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> within_topologicalType</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;[ 'locally' P ]&quot;</span><span class="id"> :=</span> (<span class="id">@locally_of</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">Phantom</span><span class="id"> _</span><span class="id"> P</span>)).<br/>
<br/>
<div class="doc">Topology defined by a filter </div>
<br/>
<span class="id">HB</span>.<span class="id">factory</span><span class="vernacular"> Record</span><span class="id"> Nbhs_isNbhsTopological</span><span class="id"> T</span><span class="id"> of</span><span class="id"> Nbhs</span><span class="id"> T</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">nbhs_filter</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> p</span><span class="id"> :</span><span class="id"> T,</span><span class="id"> ProperFilter</span> (<span class="id">nbhs</span><span class="id"> p</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">nbhs_singleton</span><span class="id"> :</span><span class="gallina-kwd"> forall</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> p;</span><br/>
&nbsp;&nbsp;<span class="id">nbhs_nbhs</span><span class="id"> :</span><span class="gallina-kwd"> forall</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> nbhs</span><span class="id"> p</span> (<span class="id">nbhs^~</span><span class="id"> A</span>)<span class="id">;</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">builders</span><span class="vernacular"> Context</span><span class="id"> T</span><span class="id"> of</span><span class="id"> Nbhs_isNbhsTopological</span><span class="id"> T</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> open_of_nbhs</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> nbhs^~</span><span class="id"> A]</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> nbhsE_subproof</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> p</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> B,</span><span class="id"> [/\</span><span class="id"> open_of_nbhs</span><span class="id"> B,</span><span class="id"> B</span><span class="id"> p</span><span class="id"> &amp;</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A]</span><span class="id"> ]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> split=&gt;</span><span class="id"> [p_A|];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> [B</span><span class="id"> [Bop</span><span class="id"> Bp</span><span class="id"> sBA]];</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> sBA</span><span class="id"> _;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> Bop</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/nbhs_filter</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">nbhs^~</span><span class="id"> A</span>)<span class="id">;</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> nbhs_nbhs</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> q</span><span class="id"> /nbhs_singleton</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> openE_subproof</span><span class="id"> :</span><span class="id"> open_of_nbhs</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> nbhs^~</span><span class="id"> A]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> []</span>. Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Nbhs_isTopological</span>.<span class="id">Build</span><span class="id"> T</span><br/>
&nbsp;&nbsp;<span class="id">nbhs_filter</span><span class="id"> nbhsE_subproof</span><span class="id"> openE_subproof</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">Topology defined by open sets </div>
<br/>
<span class="vernacular">Definition</span><span class="id"> nbhs_of_open</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">op</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>) (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> B,</span><span class="id"> [/\</span><span class="id"> op</span><span class="id"> B,</span><span class="id"> B</span><span class="id"> p</span><span class="id"> &amp;</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A]</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">factory</span><span class="vernacular"> Record</span><span class="id"> isOpenTopological</span><span class="id"> T</span><span class="id"> of</span><span class="id"> Choice</span><span class="id"> T</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">op</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> Prop;</span><br/>
&nbsp;&nbsp;<span class="id">opT</span><span class="id"> :</span><span class="id"> op</span><span class="id"> setT;</span><br/>
&nbsp;&nbsp;<span class="id">opI</span><span class="id"> :</span><span class="gallina-kwd"> forall</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> op</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> op</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> op</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">op_bigU</span><span class="id"> :</span><span class="gallina-kwd"> forall</span> (<span class="id">I</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span> (<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> op</span> (<span class="id">f</span><span class="id"> i</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">op</span> (<span class="id">\bigcup_i</span><span class="id"> f</span><span class="id"> i</span>)<span class="id">;</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">builders</span><span class="vernacular"> Context</span><span class="id"> T</span><span class="id"> of</span><span class="id"> isOpenTopological</span><span class="id"> T</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> hasNbhs</span>.<span class="id">Build</span><span class="id"> T</span> (<span class="id">nbhs_of_open</span><span class="id"> op</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> nbhs_pfilter_subproof</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> ProperFilter</span> (<span class="id">nbhs</span><span class="id"> p</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span><span class="id"> Build_ProperFilter_ex</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> A</span><span class="id"> [B</span><span class="id"> [_</span><span class="id"> Bp</span><span class="id"> sBA]];</span><span class="gallina-kwd"> exists</span><span class="id"> p;</span><span class="id"> apply:</span><span class="id"> sBA</span>.<br/>
<span class="id">split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> setT;</span><span class="id"> split=&gt;</span><span class="id"> [|//|//];</span><span class="id"> exact:</span><span class="id"> opT</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> A</span><span class="id"> B</span><span class="id"> [C</span><span class="id"> [Cop</span><span class="id"> Cp</span><span class="id"> sCA]]</span><span class="id"> [D</span><span class="id"> [Dop</span><span class="id"> Dp</span><span class="id"> sDB]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">C</span><span class="id"> `&amp;`</span><span class="id"> D</span>)<span class="id">;</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> opI</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> q</span><span class="id"> [/sCA</span><span class="id"> Aq</span><span class="id"> /sDB</span><span class="id"> Bq]</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> A</span><span class="id"> B</span><span class="id"> sAB</span><span class="id"> [C</span><span class="id"> [Cop</span><span class="id"> p_C</span><span class="id"> sCA]]</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> C;</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> subset_trans</span><span class="id"> sAB</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> nbhsE_subproof</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> p</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> B,</span><span class="id"> [/\</span><span class="id"> op</span><span class="id"> B,</span><span class="id"> B</span><span class="id"> p</span><span class="id"> &amp;</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A]</span><span class="id"> ]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> []</span>. Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> openE_subproof</span><span class="id"> :</span><span class="id"> op</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> nbhs^~</span><span class="id"> A]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> split=&gt;</span><span class="id"> [Aop</span><span class="id"> p</span><span class="id"> Ap|Aop]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> A;</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> split</span>.<br/>
<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> A</span><span class="id"> =</span><span class="id"> \bigcup_</span>(<span class="id">B</span><span class="id"> :</span><span class="id"> {B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> &amp;</span><span class="id"> op</span><span class="id"> B</span><span class="id"> /\</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A}</span>)<span class="id"> projT1</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> op_bigU</span><span class="id"> =&gt;</span><span class="id"> B;</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> projT2</span><span class="id"> B</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> p;</span><span class="id"> split=&gt;</span><span class="id"> [|[B</span><span class="id"> _</span><span class="id"> Bp]];</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> [_]</span><span class="id"> :=</span><span class="id"> projT2</span><span class="id"> B;</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /Aop</span><span class="id"> [B</span><span class="id"> [Bop</span><span class="id"> Bp</span><span class="id"> sBA]];</span><span class="gallina-kwd"> exists</span> (<span class="id">existT</span><span class="id"> _</span><span class="id"> B</span> (<span class="id">conj</span><span class="id"> Bop</span><span class="id"> sBA</span>)).<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Nbhs_isTopological</span>.<span class="id">Build</span><span class="id"> T</span><br/>
&nbsp;&nbsp;<span class="id">nbhs_pfilter_subproof</span><span class="id"> nbhsE_subproof</span><span class="id"> openE_subproof</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">Topology defined by a base of open sets </div>
<br/>
<span class="id">HB</span>.<span class="id">factory</span><span class="vernacular"> Record</span><span class="id"> isBaseTopological</span><span class="id"> T</span><span class="id"> of</span><span class="id"> Choice</span><span class="id"> T</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">I</span><span class="id"> :</span><span class="id"> pointedType;</span><br/>
&nbsp;&nbsp;<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I;</span><br/>
&nbsp;&nbsp;<span class="id">b</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span> (<span class="id">set</span><span class="id"> T</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="id">b_cover</span><span class="id"> :</span><span class="id"> \bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> D</span>)<span class="id"> b</span><span class="id"> i</span><span class="id"> =</span><span class="id"> setT;</span><br/>
&nbsp;&nbsp;<span class="id">b_join</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i</span><span class="id"> j</span><span class="id"> t,</span><span class="id"> D</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> D</span><span class="id"> j</span><span class="id"> -&gt;</span><span class="id"> b</span><span class="id"> i</span><span class="id"> t</span><span class="id"> -&gt;</span><span class="id"> b</span><span class="id"> j</span><span class="id"> t</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> k,</span><span class="id"> [/\</span><span class="id"> D</span><span class="id"> k,</span><span class="id"> b</span><span class="id"> k</span><span class="id"> t</span><span class="id"> &amp;</span><span class="id"> b</span><span class="id"> k</span><span class="id"> `&lt;=`</span><span class="id"> b</span><span class="id"> i</span><span class="id"> `&amp;`</span><span class="id"> b</span><span class="id"> j];</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">builders</span><span class="vernacular"> Context</span><span class="id"> T</span><span class="id"> of</span><span class="id"> isBaseTopological</span><span class="id"> T</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> open_from</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> \bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> D'</span>)<span class="id"> b</span><span class="id"> i</span><span class="id"> |</span><span class="id"> D'</span><span class="gallina-kwd"> in</span><span class="id"> subset^~</span><span class="id"> D]</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> open_fromT</span><span class="id"> :</span><span class="id"> open_from</span><span class="id"> setT</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> exists</span><span class="id"> D</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> b_cover</span>. Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> open_fromI</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open_from</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> open_from</span><span class="id"> B</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">open_from</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [DA</span><span class="id"> sDAD</span><span class="id"> AeUbA]</span><span class="id"> [DB</span><span class="id"> sDBD</span><span class="id"> BeUbB]</span>.<br/>
<span class="id">have</span><span class="id"> ABU</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> t,</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>)<span class="id"> t</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> it,</span><span class="id"> D</span><span class="id"> it</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> it</span><span class="id"> t</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> it</span><span class="id"> `&lt;=`</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> t</span><span class="id"> [At</span><span class="id"> Bt]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [iA</span><span class="id"> [DiA</span><span class="id"> [biAt</span><span class="id"> sbiA]]]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> i,</span><span class="id"> D</span><span class="id"> i</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> i</span><span class="id"> t</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> i</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move:</span><span class="id"> At;</span><span class="id"> rewrite</span><span class="id"> -AeUbA</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [i</span><span class="id"> DAi</span><span class="id"> bit];</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [apply:</span><span class="id"> sDAD|split=&gt;</span><span class="id"> //</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> i]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [iB</span><span class="id"> [DiB</span><span class="id"> [biBt</span><span class="id"> sbiB]]]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> i,</span><span class="id"> D</span><span class="id"> i</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> i</span><span class="id"> t</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> i</span><span class="id"> `&lt;=`</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move:</span><span class="id"> Bt;</span><span class="id"> rewrite</span><span class="id"> -BeUbB</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [i</span><span class="id"> DBi</span><span class="id"> bit];</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [apply:</span><span class="id"> sDBD|split=&gt;</span><span class="id"> //</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> i]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [i</span><span class="id"> [Di</span><span class="id"> bit</span><span class="id"> sbiAB]]</span><span class="id"> :=</span><span class="id"> b_join</span><span class="id"> DiA</span><span class="id"> DiB</span><span class="id"> biAt</span><span class="id"> biBt</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> i;</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> split=&gt;</span><span class="id"> //</span><span class="id"> s</span><span class="id"> /sbiAB</span><span class="id"> [/sbiA</span><span class="id"> ?</span><span class="id"> /sbiB]</span>.<br/>
<span class="id">set</span><span class="id"> Dt</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> t</span><span class="id"> =&gt;</span><span class="id"> [set</span><span class="id"> it</span><span class="id"> |</span><span class="id"> D</span><span class="id"> it</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> it</span><span class="id"> t</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> it</span><span class="id"> `&lt;=`</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B]</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> [set</span><span class="id"> get</span> (<span class="id">Dt</span><span class="id"> t</span>)<span class="id"> |</span><span class="id"> t</span><span class="gallina-kwd"> in</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> _</span><span class="id"> [t</span><span class="id"> ABt</span><span class="id"> &lt;-];</span><span class="id"> have</span><span class="id"> /ABU/getPex</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> ABt</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split=&gt;</span><span class="id"> [[_</span><span class="id"> [s</span><span class="id"> ABs</span><span class="id"> &lt;-]</span><span class="id"> bDtst]|ABt]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /ABU/getPex</span><span class="id"> [_</span><span class="id"> [_]]</span><span class="id"> :=</span><span class="id"> ABs;</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">get</span> (<span class="id">Dt</span><span class="id"> t</span>))<span class="id">;</span><span class="id"> [exists</span><span class="id"> t|</span><span class="id"> have</span><span class="id"> /ABU/getPex</span><span class="id"> [?</span><span class="id"> []]:=</span><span class="id"> ABt]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> open_from_bigU</span> (<span class="id">I0</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> I0</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> open_from</span> (<span class="id">f</span><span class="id"> i</span>))<span class="id"> -&gt;</span><span class="id"> open_from</span> (<span class="id">\bigcup_i</span><span class="id"> f</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">set</span><span class="id"> fop</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> j</span><span class="id"> =&gt;</span><span class="id"> [set</span><span class="id"> Dj</span><span class="id"> |</span><span class="id"> Dj</span><span class="id"> `&lt;=`</span><span class="id"> D</span><span class="id"> /\</span><span class="id"> f</span><span class="id"> j</span><span class="id"> =</span><span class="id"> \bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> Dj</span>)<span class="id"> b</span><span class="id"> i]</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">\bigcup_j</span><span class="id"> get</span> (<span class="id">fop</span><span class="id"> j</span>)).<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> i</span><span class="id"> [j</span><span class="id"> _</span><span class="id"> fopji]</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> /getPex</span><span class="id"> [/</span>(_<span class="id"> _</span><span class="id"> fopji</span>)<span class="id">]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> Dj,</span><span class="id"> fop</span><span class="id"> j</span><span class="id"> Dj</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [Dj]</span><span class="id"> :=</span><span class="id"> H</span><span class="id"> j;</span><span class="gallina-kwd"> exists</span><span class="id"> Dj</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split=&gt;</span><span class="id"> [[i</span><span class="id"> [j</span><span class="id"> _</span><span class="id"> fopji</span><span class="id"> bit]]|[j</span><span class="id"> _]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> j</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> suff</span><span class="id"> /getPex</span><span class="id"> [_</span><span class="id"> -&gt;]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> Dj,</span><span class="id"> fop</span><span class="id"> j</span><span class="id"> Dj</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [Dj]</span><span class="id"> :=</span><span class="id"> H</span><span class="id"> j;</span><span class="gallina-kwd"> exists</span><span class="id"> Dj</span>.<br/>
<span class="id">have</span><span class="id"> /getPex</span><span class="id"> [_</span><span class="id"> -&gt;]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> Dj,</span><span class="id"> fop</span><span class="id"> j</span><span class="id"> Dj</span><span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> [Dj]</span><span class="id"> :=</span><span class="id"> H</span><span class="id"> j;</span><span class="gallina-kwd"> exists</span><span class="id"> Dj</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> [i];</span><span class="gallina-kwd"> exists</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> j</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> isOpenTopological</span>.<span class="id">Build</span><span class="id"> T</span><br/>
&nbsp;&nbsp;<span class="id">open_fromT</span><span class="id"> open_fromI</span><span class="id"> open_from_bigU</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">factory</span><span class="vernacular"> Record</span><span class="id"> isSubBaseTopological</span><span class="id"> T</span><span class="id"> of</span><span class="id"> Choice</span><span class="id"> T</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">I</span><span class="id"> :</span><span class="id"> pointedType;</span><br/>
&nbsp;&nbsp;<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I;</span><br/>
&nbsp;&nbsp;<span class="id">b</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span> (<span class="id">set</span><span class="id"> T</span>)<span class="id">;</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">builders</span><span class="vernacular"> Context</span><span class="id"> T</span><span class="id"> of</span><span class="id"> isSubBaseTopological</span><span class="id"> T</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> finI_from</span><span class="id"> :=</span> (<span class="id">finI_from</span><span class="id"> D</span><span class="id"> b</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> finI_from_cover</span><span class="id"> :</span><span class="id"> \bigcup_</span>(<span class="id">A</span><span class="gallina-kwd"> in</span><span class="id"> finI_from</span>)<span class="id"> A</span><span class="id"> =</span><span class="id"> setT</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split=&gt;</span><span class="id"> //</span><span class="id"> _;</span><span class="gallina-kwd"> exists</span><span class="id"> setT</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> fset0</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> predeqE</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> finI_from_join</span><span class="id"> A</span><span class="id"> B</span><span class="id"> t</span><span class="id"> :</span><span class="id"> finI_from</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> finI_from</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> t</span><span class="id"> -&gt;</span><span class="id"> B</span><span class="id"> t</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> k,</span><span class="id"> [/\</span><span class="id"> finI_from</span><span class="id"> k,</span><span class="id"> k</span><span class="id"> t</span><span class="id"> &amp;</span><span class="id"> k</span><span class="id"> `&lt;=`</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [DA</span><span class="id"> sDAD</span><span class="id"> AeIbA]</span><span class="id"> [DB</span><span class="id"> sDBD</span><span class="id"> BeIbB]</span><span class="id"> At</span><span class="id"> Bt</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>)<span class="id">;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">DA</span><span class="id"> `|`</span><span class="id"> DB</span>)<span class="id">%fset;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> i</span><span class="id"> /fsetUP</span><span class="id"> [/sDAD|/sDBD]</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> s;</span><span class="id"> split=&gt;</span><span class="id"> [Ifs|[As</span><span class="id"> Bs]</span><span class="id"> i</span><span class="id"> /fsetUP]</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -AeIbA</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> DAi;</span><span class="id"> apply:</span><span class="id"> Ifs;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> inE</span><span class="id"> DAi</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -BeIbB</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> DBi;</span><span class="id"> apply:</span><span class="id"> Ifs;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> inE</span><span class="id"> DBi</span><span class="id"> orbC</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> [DAi|DBi];</span><br/>
&nbsp;&nbsp;<span class="id">[have</span><span class="id"> :=</span><span class="id"> As;</span><span class="id"> rewrite</span><span class="id"> -AeIbA;</span><span class="id"> apply|have</span><span class="id"> :=</span><span class="id"> Bs;</span><span class="id"> rewrite</span><span class="id"> -BeIbB;</span><span class="id"> apply]</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> isBaseTopological</span>.<span class="id">Build</span><span class="id"> T</span><br/>
&nbsp;&nbsp;<span class="id">finI_from_cover</span><span class="id"> finI_from_join</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="gallina-kwd">end</span>.<br/>
<br/>
<div class="doc">deleted neighborhood </div>
<br/>
<span class="vernacular">Definition</span><span class="id"> dnbhs</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">within</span> (<span class="gallina-kwd">fun</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> !=</span><span class="id"> x</span>) (<span class="id">nbhs</span><span class="id"> x</span>).<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;x ^'&quot;</span><span class="id"> :=</span> (<span class="id">dnbhs</span><span class="id"> x</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_dnbhs_neq</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> nbhs</span><span class="id"> p^',</span><span class="id"> x</span><span class="id"> !=</span><span class="id"> p</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> withinT</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dnbhsE</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> nbhs</span><span class="id"> x</span><span class="id"> =</span><span class="id"> x^'</span><span class="id"> `&amp;`</span><span class="id"> at_point</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> split=&gt;</span><span class="id"> [x_A|[x_A</span><span class="id"> Ax]]</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> nbhs_singleton</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span><span class="id"> x_A;</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -[B</span><span class="id"> [oB</span><span class="id"> x_B</span><span class="id"> sBA]];</span><span class="id"> rewrite</span><span class="id"> /dnbhs</span><span class="id"> nbhsE</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> B</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> /sBA</span>.<br/>
<span class="id">move:</span><span class="id"> x_A;</span><span class="id"> rewrite</span><span class="id"> /dnbhs</span><span class="id"> !nbhsE</span><span class="id"> =&gt;</span><span class="id"> -[B</span><span class="id"> [oB</span><span class="id"> x_B</span><span class="id"> sBA]];</span><span class="gallina-kwd"> exists</span><span class="id"> B</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> y</span><span class="id"> /sBA</span><span class="id"> Ay;</span><span class="id"> case:</span> (<span class="id">eqVneq</span><span class="id"> y</span><span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> [-&gt;|]</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> dnbhs_filter</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> Filter</span><span class="id"> x^'</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> within_filter</span>. Qed.</div></details>
<span class="id">#[global]</span><span class="id"> Typeclasses</span><span class="vernacular"> Opaque</span><span class="id"> dnbhs</span>.<br/>
<br/>
<span class="vernacular">Canonical</span><span class="id"> dnbhs_filter_on</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>)  (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">FilterType</span><span class="id"> x^'</span> (<span class="id">dnbhs_filter</span><span class="id"> _</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_fmap2</span> (<span class="id">T</span><span class="id"> U</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>)<span class="id">:</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span class="id">F</span><span class="id"> G</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> G</span><span class="id"> `=&gt;`</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> G</span><span class="id"> `=&gt;`</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> F</span><span class="id"> G</span><span class="id"> H</span><span class="id"> A</span><span class="id"> fFA</span><span class="id"> ;</span><span class="id"> exact:</span><span class="id"> H</span> (<span class="id">preimage</span><span class="id"> f</span><span class="id"> A</span>)<span class="id"> fFA</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_within_filter</span><span class="id"> {T</span><span class="id"> U}</span><span class="id"> {f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U}</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span> (<span class="id">Filter</span><span class="id"> F</span>)<span class="id"> }</span><br/>
&nbsp;&nbsp;(<span class="id">G</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> U</span>)<span class="id"> :</span><span class="gallina-kwd"> forall</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> --&gt;</span><span class="id"> G</span><span class="id"> -&gt;</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> within</span><span class="id"> D</span><span class="id"> F</span>)<span class="id"> --&gt;</span><span class="id"> G</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> move=&gt;</span><span class="id"> ?;</span> <span class="id"> exact:</span><span class="id"> cvg_trans</span> (<span class="id">cvg_fmap2</span> (<span class="id">cvg_within</span><span class="id"> _</span>)). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_app_within</span><span class="id"> {T}</span><span class="id"> {U</span><span class="id"> :</span><span class="id"> ptopologicalType}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<br/>
&nbsp;&nbsp;(<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">:</span><span class="id"> Filter</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> within</span><span class="id"> D</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move</span><span class="id"> =&gt;</span><span class="id"> FF</span><span class="id"> /cvg_ex</span><span class="id"> [l</span><span class="id"> H];</span><span class="id"> apply/cvg_ex;</span><span class="gallina-kwd"> exists</span><span class="id"> l;</span><span class="id"> exact:</span><span class="id"> cvg_within_filter</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_dnbhs</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> x^'</span><span class="id"> `=&gt;`</span><span class="id"> nbhs</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvg_within</span>. Qed.</div></details>
<br/>
<div class="doc">meets </div>
<br/>
<span class="vernacular">Lemma</span><span class="id"> meets_openr</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> `#`</span><span class="id"> nbhs</span><span class="id"> x</span><span class="id"> =</span><span class="id"> F</span><span class="id"> `#`</span><span class="id"> open_nbhs</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> propeqE;</span><span class="id"> split;</span><span class="id"> [exact/meetsSr/open_nbhs_nbhs|]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> P</span><span class="id"> A</span><span class="id"> B</span><span class="id"> {}/P</span><span class="id"> P;</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -[B'</span><span class="id"> /P</span><span class="id"> +</span><span class="id"> sB];</span><span class="id"> apply:</span><span class="id"> subsetI_neq0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> meets_openl</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> x</span><span class="id"> `#`</span><span class="id"> F</span><span class="id"> =</span><span class="id"> open_nbhs</span><span class="id"> x</span><span class="id"> `#`</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> meetsC</span><span class="id"> meets_openr</span><span class="id"> meetsC</span>. Qed.</div></details>
<div class="doc">Closed sets in topological spaces </div>
<br/>
<span class="vernacular">Section</span><span class="vernacular"> Closed</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">[set</span><span class="id"> p</span><span class="id"> :</span><span class="id"> T</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> B,</span><span class="id"> nbhs</span><span class="id"> p</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> !=set0]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure0</span><span class="id"> :</span><span class="id"> closure</span><span class="id"> set0</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> :&gt;</span><span class="id"> set</span><span class="id"> T</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> /</span>(_<span class="id"> _</span> (<span class="id">filter_nbhsT</span><span class="id"> _</span>))<span class="id">/set0P</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> set0I</span><span class="id"> eqxx</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closureEnbhs</span><span class="id"> A</span><span class="id"> :</span><span class="id"> closure</span><span class="id"> A</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> p</span><span class="id"> |</span><span class="id"> globally</span><span class="id"> A</span><span class="id"> `#`</span><span class="id"> nbhs</span><span class="id"> p]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> meets_globallyl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closureEonbhs</span><span class="id"> A</span><span class="id"> :</span><span class="id"> closure</span><span class="id"> A</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> p</span><span class="id"> |</span><span class="id"> globally</span><span class="id"> A</span><span class="id"> `#`</span><span class="id"> open_nbhs</span><span class="id"> p]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -meets_openr</span><span class="id"> meets_globallyl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> subset_closure</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> closure</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> p</span><span class="id"> ??;</span><span class="gallina-kwd"> exists</span><span class="id"> p;</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> nbhs_singleton</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_eq0</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closure</span><span class="id"> A</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> A0;</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> -A0;</span><span class="id"> exact:</span><span class="id"> subset_closure</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closureI</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>)<span class="id"> `&lt;=`</span><span class="id"> closure</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> closure</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> p</span><span class="id"> clABp;</span><span class="id"> split=&gt;</span><span class="id"> ?</span><span class="id"> /clABp</span><span class="id"> [q</span><span class="id"> [[]]];</span><span class="gallina-kwd"> exists</span><span class="id"> q</span>. Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> limit_point</span><span class="id"> E</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> t</span><span class="id"> :</span><span class="id"> T</span><span class="id"> |</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> U,</span><span class="id"> nbhs</span><span class="id"> t</span><span class="id"> U</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> y,</span><span class="id"> [/\</span><span class="id"> y</span><span class="id"> !=</span><span class="id"> t,</span><span class="id"> E</span><span class="id"> y</span><span class="id"> &amp;</span><span class="id"> U</span><span class="id"> y]]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limit_pointEnbhs</span><span class="id"> E</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">limit_point</span><span class="id"> E</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> p</span><span class="id"> |</span><span class="id"> globally</span> (<span class="id">E</span><span class="id"> `\</span><span class="id"> p</span>)<span class="id"> `#`</span><span class="id"> nbhs</span><span class="id"> p]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> meets_globallyl;</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> p</span><span class="id"> /=</span>.<br/>
<span class="id">apply/eq_forall2</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> px;</span><span class="id"> apply/eq_exists</span><span class="id"> =&gt;</span><span class="id"> y</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [[/eqP</span><span class="id"> ?</span><span class="id"> ?]|[[?</span><span class="id"> /eqP</span><span class="id"> ?]]];</span><span class="id"> do</span><span class="id"> 2?split</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limit_pointEonbhs</span><span class="id"> E</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">limit_point</span><span class="id"> E</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> p</span><span class="id"> |</span><span class="id"> globally</span> (<span class="id">E</span><span class="id"> `\</span><span class="id"> p</span>)<span class="id"> `#`</span><span class="id"> open_nbhs</span><span class="id"> p]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> limit_pointEnbhs;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> meets_openr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> subset_limit_point</span><span class="id"> E</span><span class="id"> :</span><span class="id"> limit_point</span><span class="id"> E</span><span class="id"> `&lt;=`</span><span class="id"> closure</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> t</span><span class="id"> Et</span><span class="id"> U</span><span class="id"> tU;</span><span class="id"> have</span><span class="id"> [p</span><span class="id"> [?</span><span class="id"> ?</span><span class="id"> ?]]</span><span class="id"> :=</span><span class="id"> Et</span><span class="id"> _</span><span class="id"> tU;</span><span class="gallina-kwd"> exists</span><span class="id"> p</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_limit_point</span><span class="id"> E</span><span class="id"> :</span><span class="id"> closure</span><span class="id"> E</span><span class="id"> =</span><span class="id"> E</span><span class="id"> `|`</span><span class="id"> limit_point</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> t;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [cEt|];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case;</span><span class="id"> [exact:</span><span class="id"> subset_closure|exact:</span><span class="id"> subset_limit_point]</span>.<br/>
<span class="id">have</span><span class="id"> [?|Et]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">E</span><span class="id"> t</span>)<span class="id">;</span><span class="id"> [by</span><span class="id"> left|right=&gt;</span><span class="id"> U</span><span class="id"> tU;</span><span class="id"> have</span><span class="id"> [p</span><span class="id"> []]</span><span class="id"> :=</span><span class="id"> cEt</span><span class="id"> _</span><span class="id"> tU]</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> p;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply/eqP</span><span class="id"> =&gt;</span><span class="id"> pt;</span><span class="id"> apply:</span><span class="id"> Et;</span><span class="id"> rewrite</span><span class="id"> -pt</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> closed</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><span class="id"> closure</span><span class="id"> D</span><span class="id"> `&lt;=`</span><span class="id"> D</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_closedC</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> D</span><span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">~`</span><span class="id"> D</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> Dop</span><span class="id"> p</span><span class="id"> clNDp</span><span class="id"> /Dop</span><span class="id"> /clNDp</span><span class="id"> [?</span><span class="id"> []]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_bigI</span><span class="id"> {I}</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> D</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">f</span><span class="id"> i</span>))<span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">\bigcap_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> D</span>)<span class="id"> f</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> fcl</span><span class="id"> t</span><span class="id"> clft</span><span class="id"> i</span><span class="id"> Di;</span><span class="id"> have</span><span class="id"> /fcl</span><span class="id"> :=</span><span class="id"> Di;</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> A</span><span class="id"> /clft</span><span class="id"> [s</span><span class="id"> [/</span>(_<span class="id"> i</span><span class="id"> Di</span>)<span class="id">]];</span><span class="gallina-kwd"> exists</span><span class="id"> s</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closedI</span> (<span class="id">D</span><span class="id"> E</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closed</span><span class="id"> D</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> E</span><span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">D</span><span class="id"> `&amp;`</span><span class="id"> E</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> Dcl</span><span class="id"> Ecl</span><span class="id"> p</span><span class="id"> clDEp;</span><span class="id"> split;</span><span class="id"> [apply:</span><span class="id"> Dcl|apply:</span><span class="id"> Ecl];</span><br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> A</span><span class="id"> /clDEp</span><span class="id"> [q</span><span class="id"> [[]]];</span><span class="gallina-kwd"> exists</span><span class="id"> q</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closedT</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> setT</span><br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> []</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed0</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> /</span>(_<span class="id"> setT</span>)<span class="id"> [|?</span><span class="id"> []]</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> filterT</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closedE</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> p,</span><span class="id"> ~</span> (<span class="id">\near</span><span class="id"> p,</span><span class="id"> ~</span><span class="id"> A</span><span class="id"> p</span>)<span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> p]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> split=&gt;</span><span class="id"> Acl</span><span class="id"> p;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> clAp;</span><span class="id"> apply:</span><span class="id"> Acl;</span><span class="id"> rewrite</span><span class="id"> -nbhs_nearE</span><span class="id"> =&gt;</span><span class="id"> /clAp</span><span class="id"> [?</span><span class="id"> []]</span>.<br/>
<span class="id">rewrite</span><span class="id"> -nbhs_nearE</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> /asboolP</span>.<br/>
<span class="id">rewrite</span><span class="id"> asbool_neg</span><span class="id"> =&gt;</span><span class="id"> /forallp_asboolPn2</span><span class="id"> clAp</span>.<br/>
<span class="id">apply:</span><span class="id"> Acl</span><span class="id"> =&gt;</span><span class="id"> B;</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [C</span><span class="id"> [oC</span><span class="id"> pC]]</span>.<br/>
<span class="id">have</span><span class="id"> /asboolP</span><span class="id"> :=</span><span class="id"> clAp</span><span class="id"> C</span>.<br/>
<span class="id">rewrite</span><span class="id"> asbool_or</span><span class="id"> 2!asbool_neg</span><span class="id"> =&gt;</span><span class="id"> /orP[/asboolP/not_andP[]//|/existsp_asboolPn</span><span class="id"> [q]]</span>.<br/>
<span class="id">move/asboolP;</span><span class="id"> rewrite</span><span class="id"> asbool_neg</span><span class="id"> =&gt;</span><span class="id"> /imply_asboolPn[+</span><span class="id"> /contrapT</span><span class="id"> Aq</span><span class="id"> sCB]</span><span class="id"> =&gt;</span><span class="id"> /sCB</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> q</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_openC</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closed</span><span class="id"> D</span><span class="id"> -&gt;</span><span class="id"> open</span> (<span class="id">~`</span><span class="id"> D</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> closedE</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> Dcl</span><span class="id"> t</span><span class="id"> nDt;</span><span class="id"> apply:</span><span class="id"> contrapT</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /interior</span><span class="id"> nbhs_nearE</span><span class="id"> =&gt;</span><span class="id"> /Dcl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closedC</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closed</span> (<span class="id">~`</span><span class="id"> D</span>)<span class="id"> =</span><span class="id"> open</span><span class="id"> D</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> apply/propext;</span><span class="id"> split=&gt;</span><span class="id"> [/closed_openC|];</span><span class="id"> [rewrite</span><span class="id"> setCK|exact:</span><span class="id"> open_closedC]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> openC</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open</span> (<span class="id">~`D</span>)<span class="id"> =</span><span class="id"> closed</span> (<span class="id">D</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -closedC</span><span class="id"> setCK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_closure</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closed</span> (<span class="id">closure</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> p</span><span class="id"> clclAp</span><span class="id"> B</span><span class="id"> /nbhs_interior</span><span class="id"> /clclAp</span><span class="id"> [q</span><span class="id"> [clAq</span><span class="id"> /clAq]]</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="vernacular"> Closed</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_comp</span><span class="id"> {T</span><span class="id"> U</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> U</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{in</span><span class="id"> ~`</span><span class="id"> f</span><span class="id"> @^-1`</span><span class="id"> D,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> D</span><span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> D</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> !closedE=&gt;</span><span class="id"> f_continuous</span><span class="id"> D_cl</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> xDf</span>.<br/>
<span class="id">apply:</span><span class="id"> D_cl;</span><span class="id"> apply:</span><span class="id"> contra_not</span><span class="id"> xDf</span><span class="id"> =&gt;</span><span class="id"> fxD</span>.<br/>
<span class="id">have</span><span class="id"> NDfx</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> D</span> (<span class="id">f</span><span class="id"> x</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> fxD;</span><span class="id"> rewrite</span><span class="id"> -nbhs_nearE</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [A</span><span class="id"> [?</span><span class="id"> ?]];</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> f_continuous</span><span class="id"> fxD;</span><span class="id"> rewrite</span><span class="id"> inE</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_cvg</span><span class="id"> {T}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {F}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">u_</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closed</span><span class="id"> A</span><span class="id"> -&gt;</span> (<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span> (<span class="id">u_</span><span class="id"> n</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> l,</span><span class="id"> u_</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> +</span><span class="id"> FAu_</span><span class="id"> l</span><span class="id"> u_Fl;</span><span class="id"> apply</span><span class="id"> =&gt;</span><span class="id"> B</span><span class="id"> /u_Fl</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> nbhs_filterE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(<span class="id">filterI</span><span class="id"> FAu_</span>)<span class="id"> =&gt;</span><span class="id"> /filter_ex[t</span><span class="id"> [Au_t</span><span class="id"> u_Bt]];</span><span class="gallina-kwd"> exists</span> (<span class="id">u_</span><span class="id"> t</span>).<br/>
Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> closed_cvg</span><span class="id"> {T</span><span class="id"> V</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> u_}</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_closedP</span> (<span class="id">S</span><span class="id"> T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> S</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">continuous</span><span class="id"> f</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> continuousP;</span><span class="id"> split=&gt;</span><span class="id"> ctsf</span><span class="id"> ?</span><span class="id"> ?</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -openC</span><span class="id"> preimage_setC;</span><span class="id"> apply:</span><span class="id"> ctsf;</span><span class="id"> rewrite</span><span class="id"> openC</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -closedC</span><span class="id"> preimage_setC;</span><span class="id"> apply:</span><span class="id"> ctsf;</span><span class="id"> rewrite</span><span class="id"> closedC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closedU</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">D</span><span class="id"> E</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">closed</span><span class="id"> D</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> E</span><span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">D</span><span class="id"> `|`</span><span class="id"> E</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -?openC</span><span class="id"> setCU;</span><span class="id"> exact:</span><span class="id"> openI</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_bigsetU</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">I</span><span class="id"> :</span><span class="id"> eqType</span>) (<span class="id">s</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span> (<span class="gallina-kwd">forall</span><span class="id"> x,</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> s</span><span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">F</span><span class="id"> x</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">closed</span> (<span class="id">\big[setU/set0]_</span>(<span class="id">x</span><span class="id"> &lt;-</span><span class="id"> s</span>)<span class="id"> F</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> scF;</span><span class="id"> rewrite</span><span class="id"> big_seq</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> elim/big_ind</span><span class="id"> :</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> [exact:</span><span class="id"> closed0|exact:</span><span class="id"> closedU]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_bigcup</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">I</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_set</span><span class="id"> A</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> A</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> closed</span> (<span class="id">F</span><span class="id"> i</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">closed</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> A</span>)<span class="id"> F</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> finA</span><span class="id"> cF;</span><span class="id"> rewrite</span><span class="id"> -bigsetU_fset_set//;</span><span class="id"> apply:</span><span class="id"> closed_bigsetU</span><span class="id"> =&gt;</span><span class="id"> i</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> in_fset_set//</span><span class="id"> inE;</span><span class="id"> exact:</span><span class="id"> cF</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> closure_lemmas</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> T</span><span class="id"> :</span><span class="id"> topologicalType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> E</span><span class="id"> A</span><span class="id"> B</span><span class="id"> U</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_subset</span><span class="id"> A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> closure</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> closure</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> CAx</span><span class="id"> ?;</span><span class="id"> move/CAx;</span><span class="id"> exact/subsetI_neq0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closureE</span><span class="id"> A</span><span class="id"> :</span><span class="id"> closure</span><span class="id"> A</span><span class="id"> =</span><span class="id"> smallest</span><span class="id"> closed</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split=&gt;</span><span class="id"> [x</span><span class="id"> ?</span><span class="id"> B</span><span class="id"> [cB</span><span class="id"> AB]|];</span><span class="id"> first</span><span class="id"> exact/cB/</span>(<span class="id">closure_subset</span><span class="id"> AB</span>).<br/>
<span class="id">exact:</span> (<span class="id">smallest_sub</span> (<span class="id">@closed_closure</span><span class="id"> _</span><span class="id"> _</span>) (<span class="id">@subset_closure</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_id</span><span class="id"> E</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> E</span><span class="id"> &lt;-&gt;</span><span class="id"> E</span><span class="id"> =</span><span class="id"> closure</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [?|-&gt;];</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> closed_closure</span>.<br/>
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> subset_closure</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> closure_lemmas</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> regular_open_closed</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> T</span><span class="id"> :</span><span class="id"> topologicalType</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> regopen</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span> (<span class="id">closure</span><span class="id"> A</span>)<span class="id">^°</span><span class="id"> =</span><span class="id"> A</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> regclosed</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><span class="id"> closure</span> (<span class="id">A^°</span>)<span class="id"> =</span><span class="id"> A</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> regular_open_closed</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> closure_interior_lemmas</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> T</span><span class="id"> :</span><span class="id"> topologicalType</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interiorC</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span> (<span class="id">~`</span><span class="id"> A</span>)<span class="id">^°</span><span class="id"> =</span><span class="id"> ~`</span><span class="id"> closure</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /closure</span><span class="id"> /interior</span><span class="id"> nbhsE</span><span class="id"> /=</span><span class="id"> -existsNE</span>.<br/>
&nbsp;&nbsp;<span class="id">case=&gt;</span><span class="id"> U</span><span class="id"> ?</span><span class="id"> /disjoints_subset</span><span class="id"> UA;</span><span class="gallina-kwd"> exists</span><span class="id"> U;</span><span class="id"> rewrite</span><span class="id"> not_implyE</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span><span class="id"> first</span><span class="id"> exact/open_nbhs_nbhs</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> setIC</span><span class="id"> UA;</span><span class="id"> apply/set0P;</span><span class="id"> rewrite</span><span class="id"> eqxx</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> X;</span><span class="id"> rewrite</span><span class="id"> not_implyE</span><span class="id"> nbhsE=&gt;</span><span class="id"> -[]</span><span class="id"> -[]</span><span class="id"> U</span><span class="id"> xU</span><span class="id"> UX</span><span class="id"> AX0</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> U</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply/</span>(<span class="id">subset_trans</span><span class="id"> UX</span>)<span class="id">/disjoints_subset;</span><span class="id"> rewrite</span><span class="id"> setIC</span>.<br/>
<span class="id">exact/eqP/negbNE/negP/set0P</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_setC</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closure</span> (<span class="id">~`</span><span class="id"> A</span>)<span class="id"> =</span><span class="id"> ~`</span><span class="id"> A^°</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> setC_inj;</span><span class="id"> rewrite</span><span class="id"> -interiorC</span><span class="id"> !setCK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closureU</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> `|`</span><span class="id"> B</span>)<span class="id"> =</span><span class="id"> closure</span><span class="id"> A</span><span class="id"> `|`</span><span class="id"> closure</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> setC_inj;</span><span class="id"> rewrite</span><span class="id"> setCU</span><span class="id"> -!interiorC</span><span class="id"> -interiorI</span><span class="id"> setCU</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interiorU</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> A^°</span><span class="id"> `|`</span><span class="id"> B^°</span><span class="id"> `&lt;=`</span> (<span class="id">A</span><span class="id"> `|`</span><span class="id"> B</span>)<span class="id">^°</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> subsetC2;</span><span class="id"> rewrite</span><span class="id"> setCU</span><span class="id"> -!closure_setC</span><span class="id"> setCU;</span><span class="id"> exact:</span><span class="id"> closureI</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closureEbigcap</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">closure</span><span class="id"> A</span><span class="id"> =</span><span class="id"> \bigcap_</span>(<span class="id">x</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> C</span><span class="id"> |</span><span class="id"> closed</span><span class="id"> C</span><span class="id"> /\</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> C]</span>)<span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> closureE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interiorEbigcup</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">A^°</span><span class="id"> =</span><span class="id"> \bigcup_</span>(<span class="id">x</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> U</span><span class="id"> |</span><span class="id"> open</span><span class="id"> U</span><span class="id"> /\</span><span class="id"> U</span><span class="id"> `&lt;=`</span><span class="id"> A]</span>)<span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span><span class="id"> setC_inj;</span><span class="id"> rewrite</span><span class="id"> -closure_setC</span><span class="id"> closureEbigcap</span><span class="id"> setC_bigcup</span>.<br/>
<span class="id">rewrite</span><span class="id"> -[RHS]</span>(<span class="id">bigcap_image</span><span class="id"> _</span><span class="id"> setC</span><span class="id"> idfun</span>)<span class="id"> /=</span>.<br/>
<span class="id">apply:</span><span class="id"> eq_bigcapl;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> X</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -openC</span><span class="id"> -setCS</span><span class="id"> setCK;</span><span class="gallina-kwd"> exists</span> (<span class="id">~`</span><span class="id"> X</span>)<span class="id">=&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> setCK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> case=&gt;</span><span class="id"> Y</span><span class="id"> +</span><span class="id"> &lt;-;</span><span class="id"> rewrite</span><span class="id"> closedC</span><span class="id"> setCS</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interior_closed_regopen</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> regopen</span><span class="id"> A^°</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cA;</span><span class="id"> rewrite</span><span class="id"> /regopen</span><span class="id"> eqEsubset;</span><span class="id"> split=&gt;</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /closure</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> _]/interior</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -[]</span><span class="id"> U</span><span class="id"> oxU</span><span class="id"> UciA</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /interior</span><span class="id"> nbhsE</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> U</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">subset_trans</span><span class="id"> UciA</span>)<span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /=</span><span class="id"> yA</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> cA</span><span class="id"> =&gt;</span><span class="id"> B</span><span class="id"> /yA;</span><span class="id"> apply/subset_nonempty;</span><span class="id"> apply:</span><span class="id"> setSI</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> interior_subset</span>.<br/>
<span class="id">rewrite</span><span class="id"> {1}/interior</span><span class="id"> nbhsE=&gt;</span><span class="id"> -[]</span><span class="id"> U</span><span class="id"> []</span><span class="id"> oU</span><span class="id"> Ux</span><span class="id"> UA</span>.<br/>
<span class="id">rewrite</span><span class="id"> {1}/interior</span><span class="id"> nbhsE</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> U=&gt;</span><span class="id"> //</span>.<br/>
<span class="id">have:=</span><span class="id"> UA;</span><span class="id"> rewrite</span><span class="id"> open_subsetE//</span><span class="id"> =&gt;</span><span class="id"> /subset_trans;</span><span class="id"> apply</span>.<br/>
<span class="id">exact:</span><span class="id"> subset_closure</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_open_regclosed</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> regclosed</span> (<span class="id">closure</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /regclosed</span><span class="id"> -</span>(<span class="id">setCK</span><span class="id"> A</span>)<span class="id"> openC</span><span class="id"> =&gt;</span><span class="id"> cCA</span>.<br/>
<span class="id">rewrite</span><span class="id"> closure_setC</span><span class="id"> -[in</span><span class="id"> RHS]interior_closed_regopen//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> !</span>(<span class="id">closure_setC,</span><span class="id"> interiorC</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interior_closure_idem</span><span class="id"> :</span><span class="id"> @idempotent_fun</span> (<span class="id">set</span><span class="id"> T</span>) (<span class="id">interior</span><span class="id"> \o</span><span class="id"> closure</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact/interior_closed_regopen/closed_closure</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_interior_idem</span><span class="id"> :</span><span class="id"> @idempotent_fun</span> (<span class="id">set</span><span class="id"> T</span>) (<span class="id">closure</span><span class="id"> \o</span><span class="id"> interior</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact/closure_open_regclosed/open_interior</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> closure_interior_lemmas</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closureC_deprecated</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">E</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">~`</span><span class="id"> closure</span><span class="id"> E</span><span class="id"> =</span><span class="id"> \bigcup_</span>(<span class="id">x</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> U</span><span class="id"> |</span><span class="id"> open</span><span class="id"> U</span><span class="id"> /\</span><span class="id"> U</span><span class="id"> `&lt;=`</span><span class="id"> ~`</span><span class="id"> E]</span>)<span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -interiorC</span><span class="id"> interiorEbigcup</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 1.7.0&quot;</span><span class="id">,</span><span class="id"> note=</span><span class="id">&quot;use `interiorC` and `interiorEbigcup` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> closureC</span><span class="id"> :=</span><span class="id"> closureC_deprecated</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> DiscreteTopology</span>.<br/>
<span class="vernacular">Section</span><span class="id"> DiscreteMixin</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> discrete_sing</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> X</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> X</span>)<span class="id"> :</span><span class="id"> principal_filter</span><span class="id"> p</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> p</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /principal_filterP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> discrete_nbhs</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> X</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> X</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">principal_filter</span><span class="id"> p</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> principal_filter</span><span class="id"> p</span> (<span class="id">principal_filter^~</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact/principal_filterP</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> DiscreteMixin</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> discrete_space</span> (<span class="id">X</span><span class="id"> :</span><span class="id"> nbhsType</span>)<span class="id"> :=</span><span class="id"> @nbhs</span><span class="id"> X</span><span class="id"> _</span><span class="id"> =</span><span class="id"> @principal_filter</span><span class="id"> X</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {dsc</span><span class="id"> :</span><span class="id"> discrete_space</span><span class="id"> X}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> discrete_open</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> X</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> /interior</span><span class="id"> dsc;</span><span class="id"> exact/principal_filterP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> discrete_set1</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> X</span>)<span class="id"> :</span><span class="id"> nbhs</span><span class="id"> x</span><span class="id"> [set</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> open_nbhs_nbhs;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> discrete_open</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> discrete_closed</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> X</span>)<span class="id"> :</span><span class="id"> closed</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -[A]setCK</span><span class="id"> closedC;</span><span class="id"> exact:</span><span class="id"> discrete_open</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> discrete_cvg</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> X</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> X</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">Filter</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x</span><span class="id"> &lt;-&gt;</span><span class="id"> F</span><span class="id"> [set</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> dsc</span><span class="id"> nbhs_simpl;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> Fx</span><span class="id"> U</span><span class="id"> /principal_filterP</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> Fx</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> -&gt;</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> DiscreteTopology</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> dense</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">S</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span class="id">O</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> O</span><span class="id"> !=set0</span><span class="id"> -&gt;</span><span class="id"> open</span><span class="id"> O</span><span class="id"> -&gt;</span><span class="id"> O</span><span class="id"> `&amp;`</span><span class="id"> S</span><span class="id"> !=set0</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> denseNE</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">S</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> ~</span><span class="id"> dense</span><span class="id"> S</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> O,</span> (<span class="gallina-kwd">exists</span><span class="id"> x,</span><span class="id"> open_nbhs</span><span class="id"> x</span><span class="id"> O</span>)<span class="id"> /\</span> (<span class="id">O</span><span class="id"> `&amp;`</span><span class="id"> S</span><span class="id"> =</span><span class="id"> set0</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /dense</span><span class="id"> /open_nbhs</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /existsNP[X</span><span class="id"> /not_implyP[[x</span><span class="id"> Xx]</span><span class="id"> /not_implyP[</span><span class="id"> Ox</span><span class="id"> /forallNP</span><span class="id"> A]]]</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> X;</span><span class="id"> split;</span><span class="id"> [exists</span><span class="id"> x</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> -subset0;</span><span class="id"> apply/A]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> ClopenSets</span>.<br/>
<span class="vernacular">Implicit</span><span class="gallina-kwd"> Type</span><span class="id"> T</span><span class="id"> :</span><span class="id"> topologicalType</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> clopen</span><span class="id"> {T}</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><span class="id"> open</span><span class="id"> A</span><span class="id"> /\</span><span class="id"> closed</span><span class="id"> A</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> clopenI</span><span class="id"> {T}</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> clopen</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> clopen</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> clopen</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> case=&gt;</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> []</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> openI</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> closedI]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> clopenU</span><span class="id"> {T}</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> clopen</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> clopen</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> clopen</span> (<span class="id">A</span><span class="id"> `|`</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> case=&gt;</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> []</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> openU</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> closedU]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> clopenC</span><span class="id"> {T}</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> clopen</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> clopen</span> (<span class="id">~`A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> case=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> split;[exact:</span><span class="id"> closed_openC</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> open_closedC</span><span class="id"> ]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> clopen0</span><span class="id"> {T}</span><span class="id"> :</span><span class="id"> @clopen</span><span class="id"> T</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> open0</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> closed0]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> clopenT</span><span class="id"> {T}</span><span class="id"> :</span><span class="id"> clopen</span><span class="id"> [set:</span><span class="id"> T]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> openT</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> closedT]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> clopen_comp</span><span class="id"> {T</span><span class="id"> U</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> U</span>)<span class="id"> :</span><br/>
&nbsp;<span class="id">clopen</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> continuous</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> clopen</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> case=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> split;</span><span class="id"> [</span><span class="id"> exact:</span><span class="id"> open_comp</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> closed_comp]</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ClopenSets</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">mixin</span><span class="vernacular"> Record</span><span class="id"> isContinuous</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> nbhsType}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> Y</span>)<span class="id">:=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">cts_fun</span><span class="id"> :</span><span class="id"> continuous</span><span class="id"> f</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">#[short</span>(<span class="id">type</span><span class="id"> =</span> <span class="id">&quot;continuousType&quot;</span>)<span class="id">]</span><br/>
<span class="id">HB</span>.<span class="id">structure</span><span class="vernacular"> Definition</span><span class="id"> Continuous</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> nbhsType}</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> of</span><span class="id"> @isContinuous</span><span class="id"> X</span><span class="id"> Y</span><span class="id"> f</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">gen_eqMixin</span> (<span class="id">continuousType</span><span class="id"> X</span><span class="id"> Y</span>).<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">gen_choiceMixin</span> (<span class="id">continuousType</span><span class="id"> X</span><span class="id"> Y</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousEP</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> nbhsType}</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> continuousType</span><span class="id"> X</span><span class="id"> Y</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> =</span><span class="id"> g</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> =1</span><span class="id"> g</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> f</span><span class="id"> g</span><span class="id"> =&gt;</span><span class="id"> [f</span><span class="id"> [[ffun]]]</span><span class="id"> [g</span><span class="id"> [[gfun]]]/=;</span><span class="id"> split=&gt;</span><span class="id"> [[-&gt;//]|/funext</span><span class="id"> eqfg]</span>.<br/>
<span class="id">rewrite</span><span class="id"> eqfg</span><span class="gallina-kwd"> in</span><span class="id"> ffun</span><span class="id"> *;</span><span class="id"> congr</span><span class="id"> {|</span><span class="id"> Continuous</span>.<span class="id">sort</span><span class="id"> :=</span><span class="id"> _;</span><span class="id"> Continuous</span>.<span class="id">class</span><span class="id"> :=</span><span class="id"> {|</span><br/>
&nbsp;&nbsp;<span class="id">Continuous</span>.<span class="id">topology_structure_isContinuous_mixin</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{|isContinuous</span>.<span class="id">cts_fun</span><span class="id"> :=</span><span class="id"> _|}|}|}</span>.<br/>
<span class="id">exact:</span><span class="id"> Prop_irrelevance</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> mkcts</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> nbhsType}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> Y</span>) (<span class="id">f_cts</span><span class="id"> :</span><span class="id"> continuous</span><span class="id"> f</span>)<span class="id"> :=</span><span class="id"> f</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> nbhsType}</span> (<span class="id">f:</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> Y</span>) (<span class="id">f_cts</span><span class="id"> :</span><span class="id"> continuous</span><span class="id"> f</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">@isContinuous</span>.<span class="id">Build</span><span class="id"> X</span><span class="id"> Y</span> (<span class="id">mkcts</span><span class="id"> f_cts</span>)<span class="id"> f_cts</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> continuous_comp</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> Z</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> continuousType</span><span class="id"> X</span><span class="id"> Y</span>) (<span class="id">g</span><span class="id"> :</span><span class="id"> continuousType</span><span class="id"> Y</span><span class="id"> Z</span>).<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> cts_fun_comp</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="id">g</span><span class="id"> \o</span><span class="id"> f</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> continuous_comp;</span><span class="id"> exact:</span><span class="id"> cts_fun</span>. Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> @isContinuous</span>.<span class="id">Build</span><span class="id"> X</span><span class="id"> Z</span> (<span class="id">g</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> cts_fun_comp</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> continuous_comp</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> continuous_id</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> cts_id</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="id">@idfun</span><span class="id"> X</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span>. Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> @isContinuous</span>.<span class="id">Build</span><span class="id"> X</span><span class="id"> X</span> (<span class="id">@idfun</span><span class="id"> X</span>)<span class="id"> cts_id</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> continuous_id</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> continuous_const</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> Y</span>).<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> cts_const</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="id">@cst</span><span class="id"> X</span><span class="id"> Y</span><span class="id"> y</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>. Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> @isContinuous</span>.<span class="id">Build</span><span class="id"> X</span><span class="id"> Y</span> (<span class="id">cst</span><span class="id"> y</span>)<span class="id"> cts_const</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> continuous_const</span>.<br/>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
