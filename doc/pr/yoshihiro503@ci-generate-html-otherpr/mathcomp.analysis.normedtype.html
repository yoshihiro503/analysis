
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.normedtype</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.normedtype" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init()">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module mathcomp.analysis.normedtype</h1>
<span class="vernacular">From</span><span class="id"> HB</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> structures</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> all_ssreflect</span><span class="id"> ssralg</span><span class="id"> ssrint</span><span class="id"> ssrnum</span><span class="id"> finmap</span><span class="id"> matrix</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> rat</span><span class="id"> interval</span><span class="id"> zmodp</span><span class="id"> vector</span><span class="id"> fieldext</span><span class="id"> falgebra</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> boolp</span><span class="id"> classical_sets</span><span class="id"> functions</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> archimedean</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> cardinality</span><span class="id"> set_interval</span><span class="id"> ereal</span><span class="id"> reals</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> signed</span><span class="id"> topology</span><span class="id"> prodnormedzmodule</span><span class="id"> function_spaces</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Export</span><span class="id"> real_interval</span><span class="id"> separation_axioms</span><span class="id"> tvs</span>.<br/>
<br/>
<br/>
<div class="ssrdoc md">
# Norm-related Notions

This file extends the topological hierarchy with norm-related notions.
Note that balls in topology.v are not necessarily open, here they are.
We used these definitions to prove the intermediate value theorem and
the Heine-Borel theorem, which states that the compact sets of
$\mathbb{R}^n$ are the closed and bounded sets, Urysohn's lemma, Vitali's
covering lemmas (finite case and infinite case), etc.

* Limit superior and inferior:
  limf_esup f F, limf_einf f F == limit sup/inferior of f at "filter" F
                                  f has type X -&gt; \bar R.
                                  F has type set (set X).

## Normed topological abelian groups
```
 pseudoMetricNormedZmodType R  == interface type for a normed topological
                                  Abelian group equipped with a norm
                                  The HB class is PseudoMetricNormedZmod.
```

        lower_semicontinuous f == the extented real-valued function f is
                                  lower-semicontinuous. The type of f is
                                  X -&gt; \bar R with X : topologicalType and
                                  R : realType

## Normed modules
```
               normedModType K == interface type for a normed module
                                  structure over the numDomainType K
                                  The HB class is NormedModule.
                          `|x| == the norm of x (notation from ssrnum)
                     ball_norm == balls defined by the norm.
                         edist == the extended distance function for a
                                  pseudometric X, from X * X -&gt; \bar R
                   edist_inf A == the infimum of distances to the set A
                   Urysohn A B == a continuous function T -&gt; [0,1] which
                                  separates A and B when
                                  `uniform_separator A B`
      completely_regular_space == a space where points and closed sets can
                                  be separated by a function into R
 completely_regular_uniformity == equips a completely_regular_space with
                                  the uniformity induced by continuous
                                  functions into the reals
                                  note this uniformity is always the only
                                  choice, so its placed in a module
         uniform_separator A B == there is a suitable uniform space and
                                  entourage separating A and B
                     nbhs_norm == neighborhoods defined by the norm
                   closed_ball == closure of a ball
  f @`[ a , b ], f @`] a , b [ == notations for images of intervals,
                                  intended for continuous, monotonous
                                  functions, defined in ring_scope and
                                  classical_set_scope respectively as:
                 f @`[ a , b ] := `[minr (f a) (f b), maxr (f a) (f b)]%O
                 f @`] a , b [ := `]minr (f a) (f b), maxr (f a) (f b)[%O
                 f @`[ a , b ] := `[minr (f a) (f b),
                                    maxr (f a) (f b)]%classic
                 f @`] a , b [ := `]minr (f a) (f b),
                                    maxr (f a) (f b)[%classic
```

## Domination notations
```
             dominated_by h k f F == `|f| &lt;= k * `|h|, near F
                 bounded_near f F == f is bounded near F
           [bounded f x | x in A] == f is bounded on A, ie F := globally A
  [locally [bounded f x | x in A] == f is locally bounded on A
                      bounded_set == set of bounded sets
                                  := [set A | [bounded x | x in A]]
                      bounded_fun == set of functions bounded on their
                                     whole domain
                                  := [set f | [bounded f x | x in setT]]
                 lipschitz_on f F == f is lipschitz near F
         [lipschitz f x | x in A] == f is lipschitz on A
[locally [lipschitz f x | x in A] == f is locally lipschitz on A
              k.-lipschitz_on f F == f is k.-lipschitz near F
                 k.-lipschitz_A f == f is k.-lipschitz on A
       [locally k.-lipschitz_A f] == f is locally k.-lipschitz on A
                  contraction q f == f is q.-lipschitz and q &lt; 1
                 is_contraction f == exists q, f is q.-lipschitz and q &lt; 1

                    is_interval E == the set E is an interval
               bigcup_ointsub U q == union of open real interval included
                                     in U and that contain the rational
                                     number q
                          Rhull A == the real interval hull of a set A
                        shift x y == y + x
                         center c := shift (- c)
```

## Complete normed modules
```
       completeNormedModType K == interface type for a complete normed
                                  module structure over a realFieldType
                                  K
                                  The HB class is CompleteNormedModule.
```

## Filters
```
                    x^'-, x^'+ == filters on real numbers for predicates
                                  s.t. nbhs holds on the left/right of x
```

```
       cpoint A == the center of the set A if it is an open ball
       radius A == the radius of the set A if it is an open ball
                   Radius A has type {nonneg R} with R a numDomainType.
      is_ball A == boolean predicate that holds when A is an open ball
         k *` A == open ball with center cpoint A and radius k * radius A
                   if A is an open ball and set0 o.w.
  vitali_collection_partition B V r n == subset of indices of V such the
                   the ball B i has a radius between r/2^n+1 and r/2^n
```

</div>
<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;f @`[ a , b ]&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 20,</span><span class="id"> b</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 9,</span><br/>
&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;f  @`[ a ,  b ]&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;f @`] a , b [&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 20,</span><span class="id"> b</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 9,</span><br/>
&nbsp;&nbsp;<span class="id">format</span> <span class="id">&quot;f  @`] a ,  b [&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;x ^'+&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 3,</span><span class="id"> format</span> <span class="id">&quot;x ^'+&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;x ^'-&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 3,</span><span class="id"> format</span> <span class="id">&quot;x ^'-&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;+oo_ R&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 3,</span><span class="id"> format</span> <span class="id">&quot;+oo_ R&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;-oo_ R&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 3,</span><span class="id"> format</span> <span class="id">&quot;-oo_ R&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;[ 'bounded' E | x 'in' A ]&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 0,</span><span class="id"> x</span><span class="id"> name,</span><span class="id"> format</span> <span class="id">&quot;[ 'bounded'  E  |  x  'in'  A ]&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;k .-lipschitz_on f&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 2,</span><span class="id"> format</span> <span class="id">&quot;k .-lipschitz_on  f&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;k .-lipschitz_ A f&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 2,</span><span class="id"> A</span><span class="gallina-kwd"> at</span><span class="id"> level</span><span class="id"> 0,</span><span class="id"> format</span> <span class="id">&quot;k .-lipschitz_ A  f&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;k .-lipschitz f&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 2,</span><span class="id"> format</span> <span class="id">&quot;k .-lipschitz  f&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;[ 'lipschitz' E | x 'in' A ]&quot;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 0,</span><span class="id"> x</span><span class="id"> name,</span><span class="id"> format</span> <span class="id">&quot;[ 'lipschitz'  E  |  x  'in'  A ]&quot;</span>).<br/>
<span class="vernacular">Reserved</span><span class="vernacular"> Notation</span> <span class="id">&quot;k *` A&quot;</span> (<span class="gallina-kwd">at</span><span class="id"> level</span><span class="id"> 40,</span><span class="id"> left</span><span class="id"> associativity,</span><span class="id"> format</span> <span class="id">&quot;k  *`  A&quot;</span>).<br/>
<br/>
<span class="gallina-kwd">Set</span><span class="vernacular"> Implicit</span><span class="vernacular"> Arguments</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Strict</span><span class="vernacular"> Implicit</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Printing</span><span class="vernacular"> Implicit</span><span class="vernacular"> Defensive</span>.<br/>
<br/>
<span class="vernacular">Import</span><span class="id"> Order</span>.<span class="id">TTheory</span><span class="id"> GRing</span>.<span class="id">Theory</span><span class="id"> Num</span>.<span class="id">Def</span><span class="id"> Num</span>.<span class="id">Theory</span>.<br/>
<span class="vernacular">Import</span><span class="id"> numFieldTopology</span>.<span class="vernacular">Exports</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> mathcomp_extra</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> classical_set_scope</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ring_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> limf_esup_einf</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">X</span><span class="id"> :</span><span class="id"> filteredType</span><span class="id"> T</span>) (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">set</span><span class="id"> X</span>)).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> limf_esup</span><span class="id"> f</span><span class="id"> F</span><span class="id"> :=</span><span class="id"> ereal_inf</span><span class="id"> [set</span><span class="id"> ereal_sup</span> (<span class="id">f</span><span class="id"> @`</span><span class="id"> V</span>)<span class="id"> |</span><span class="id"> V</span><span class="gallina-kwd"> in</span><span class="id"> F]</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> limf_einf</span><span class="id"> f</span><span class="id"> F</span><span class="id"> :=</span><span class="id"> -</span><span class="id"> limf_esup</span> (<span class="id">\-</span><span class="id"> f</span>)<span class="id"> F</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limf_esupE</span><span class="id"> f</span><span class="id"> F</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">limf_esup</span><span class="id"> f</span><span class="id"> F</span><span class="id"> =</span><span class="id"> ereal_inf</span><span class="id"> [set</span><span class="id"> ereal_sup</span> (<span class="id">f</span><span class="id"> @`</span><span class="id"> V</span>)<span class="id"> |</span><span class="id"> V</span><span class="gallina-kwd"> in</span><span class="id"> F]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> []</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limf_einfE</span><span class="id"> f</span><span class="id"> F</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">limf_einf</span><span class="id"> f</span><span class="id"> F</span><span class="id"> =</span><span class="id"> ereal_sup</span><span class="id"> [set</span><span class="id"> ereal_inf</span> (<span class="id">f</span><span class="id"> @`</span><span class="id"> V</span>)<span class="id"> |</span><span class="id"> V</span><span class="gallina-kwd"> in</span><span class="id"> F]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /limf_einf</span><span class="id"> limf_esupE</span><span class="id"> /ereal_inf</span><span class="id"> oppeK</span><span class="id"> -[in</span><span class="id"> RHS]image_comp</span><span class="id"> /=</span>.<br/>
<span class="id">congr</span> (<span class="id">ereal_sup</span><span class="id"> [set</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> ereal_sup</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _</span><span class="gallina-kwd"> in</span><span class="id"> _]]</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -image_comp</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limf_esupN</span><span class="id"> f</span><span class="id"> F</span><span class="id"> :</span><span class="id"> limf_esup</span> (<span class="id">\-</span><span class="id"> f</span>)<span class="id"> F</span><span class="id"> =</span><span class="id"> -</span><span class="id"> limf_einf</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /limf_einf</span><span class="id"> oppeK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limf_einfN</span><span class="id"> f</span><span class="id"> F</span><span class="id"> :</span><span class="id"> limf_einf</span> (<span class="id">\-</span><span class="id"> f</span>)<span class="id"> F</span><span class="id"> =</span><span class="id"> -</span><span class="id"> limf_esup</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /limf_einf;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> oppeK</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> limf_esup_einf</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> limf_esup_einf_realType</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">X</span><span class="id"> :</span><span class="id"> filteredType</span><span class="id"> T</span>) (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">set</span><span class="id"> X</span>)).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limf_esup_ge0</span><span class="id"> f</span><span class="id"> F</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> F</span><span class="id"> set0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> x,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>)<span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> limf_esup</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> F0</span><span class="id"> f0;</span><span class="id"> rewrite</span><span class="id"> limf_esupE;</span><span class="id"> apply:</span><span class="id"> lb_ereal_inf</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> x</span><span class="id"> [A]</span>.<br/>
<span class="id">have</span><span class="id"> [-&gt;</span><span class="id"> /F0//|/set0P[y</span><span class="id"> Ay</span><span class="id"> FA]</span><span class="id"> &lt;-{x}]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> A</span><span class="id"> set0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ereal_sup_le;</span><span class="gallina-kwd"> exists</span> (<span class="id">f</span><span class="id"> y</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> limf_esup_einf_realType</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhsN</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> nbhs</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> -%R</span><span class="id"> @</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> split=&gt;</span><span class="id"> //=</span><span class="id"> -[]</span><span class="id"> e</span><span class="id"> e_gt0</span><span class="id"> xeA;</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> y</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> xeA</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> -opprD</span><span class="id"> normrN</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -opprD</span><span class="id"> normrN</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> -[y]opprK;</span><span class="id"> apply:</span><span class="id"> xeA;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhsNimage</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> [set</span><span class="id"> -%R</span><span class="id"> @`</span><span class="id"> A</span><span class="id"> |</span><span class="id"> A</span><span class="gallina-kwd"> in</span><span class="id"> nbhs</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nbhsN</span><span class="id"> /fmap/=;</span><span class="id"> under</span><span class="id"> eq_set</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> preimageEinv//=</span><span class="id"> inv_oppr</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">eq_imageK</span><span class="id"> opprK</span><span class="id"> opprK</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nearN</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> -</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> y</span>)<span class="id"> &lt;-&gt;</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> P</span> (<span class="id">-</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -near_simpl</span><span class="id"> nbhsN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> openN</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">open</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> -</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> A]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Aop;</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [x</span><span class="id"> /Aop</span><span class="id"> x_A</span><span class="id"> &lt;-]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /interior</span><span class="id"> nbhsNimage;</span><span class="gallina-kwd"> exists</span><span class="id"> A</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closedN</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> [set</span><span class="id"> -</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> A]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Acl</span><span class="id"> x</span><span class="id"> clNAx</span>.<br/>
<span class="id">suff</span><span class="id"> /Acl</span><span class="id"> :</span><span class="id"> closure</span><span class="id"> A</span> (<span class="id">-</span><span class="id"> x</span>)<span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id">=&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> opprK</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> B</span><span class="id"> oppx_B;</span><span class="id"> have</span><span class="id"> :</span><span class="id"> [set</span><span class="id"> -</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> A]</span><span class="id"> `&amp;`</span><span class="id"> [set</span><span class="id"> -</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> B]</span><span class="id"> !=set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> clNAx;</span><span class="id"> rewrite</span><span class="id"> -[x]opprK</span><span class="id"> nbhsNimage;</span><span class="gallina-kwd"> exists</span><span class="id"> B</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> [y</span><span class="id"> [[z</span><span class="id"> Az</span><span class="id"> oppzey]</span><span class="id"> [t</span><span class="id"> Bt</span><span class="id"> opptey]]];</span><span class="gallina-kwd"> exists</span> (<span class="id">-</span><span class="id"> y</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [rewrite</span><span class="id"> -oppzey</span><span class="id"> opprK|rewrite</span><span class="id"> -opptey</span><span class="id"> opprK]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dnbhsN</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span> (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">-</span><span class="id"> r</span>)<span class="id">%R^'</span><span class="id"> =</span> (<span class="gallina-kwd">fun</span><span class="id"> A</span><span class="id"> =&gt;</span><span class="id"> -%R</span><span class="id"> @`</span><span class="id"> A</span>)<span class="id"> @`</span><span class="id"> r^'</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/seteqP;</span><span class="id"> split=&gt;</span><span class="id"> [A</span><span class="id"> [e/=</span><span class="id"> e0</span><span class="id"> reA]|_/=</span><span class="id"> [A</span><span class="id"> [e/=</span><span class="id"> e0</span><span class="id"> reA</span><span class="id"> &lt;-]]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">-%R</span><span class="id"> @`</span><span class="id"> A</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x/=</span><span class="id"> rxe</span><span class="id"> xr;</span><span class="gallina-kwd"> exists</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id">%R;</span><span class="id"> rewrite</span><span class="id"> ?opprK//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> reA;</span><span class="id"> rewrite</span><span class="id"> ?eqr_opp//=</span><span class="id"> opprK</span><span class="id"> addrC</span><span class="id"> distrC</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> image_comp</span> (_<span class="id"> :</span><span class="id"> _</span><span class="id"> \o</span><span class="id"> _</span><span class="id"> =</span><span class="id"> idfun</span>)<span class="id"> ?image_id//</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x/=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprK</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> x/=;</span><span class="id"> rewrite</span><span class="id"> -opprD</span><span class="id"> normrN</span><span class="id"> =&gt;</span><span class="id"> axe</span><span class="id"> xa</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id">%R;</span><span class="id"> rewrite</span><span class="id"> ?opprK//;</span><span class="id"> apply:</span><span class="id"> reA;</span><span class="id"> rewrite</span><span class="id"> ?eqr_oppLR//=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">mixin</span><span class="vernacular"> Record</span><span class="id"> NormedZmod_PseudoMetric_eq</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>)<span class="id"> T</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">of</span><span class="id"> Num</span>.<span class="id">NormedZmodule</span><span class="id"> R</span><span class="id"> T</span><span class="id"> &amp;</span><span class="id"> PseudoPointedMetric</span><span class="id"> R</span><span class="id"> T</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">pseudo_metric_ball_norm</span><span class="id"> :</span><span class="id"> ball</span><span class="id"> =</span><span class="id"> ball_</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> :</span><span class="id"> T</span><span class="id"> =&gt;</span><span class="id"> `|</span><span class="id"> x</span><span class="id"> |</span>)<br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">#[short</span>(<span class="id">type=</span><span class="id">&quot;pseudoMetricNormedZmodType&quot;</span>)<span class="id">]</span><br/>
<span class="id">HB</span>.<span class="id">structure</span><span class="vernacular"> Definition</span><span class="id"> PseudoMetricNormedZmod</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">{T</span><span class="id"> of</span><span class="id"> Num</span>.<span class="id">NormedZmodule</span><span class="id"> R</span><span class="id"> T</span><span class="id"> &amp;</span><span class="id"> PseudoMetric</span><span class="id"> R</span><span class="id"> T</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">&amp;</span><span class="id"> NormedZmod_PseudoMetric_eq</span><span class="id"> R</span><span class="id"> T</span><span class="id"> &amp;</span><span class="id"> isPointed</span><span class="id"> T}</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> pseudoMetricnormedzmodule_lemmas</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> ball_norm</span><span class="id"> :=</span> (<span class="id">ball_</span> (<span class="id">@normr</span><span class="id"> K</span><span class="id"> V</span>)).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_normE</span><span class="id"> :</span><span class="id"> ball_norm</span><span class="id"> =</span><span class="id"> ball</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> pseudo_metric_ball_norm</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> pseudoMetricnormedzmodule_lemmas</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bigcup_ballT</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> :</span><span class="id"> \bigcup_n</span><span class="id"> ball</span> (<span class="id">0%R</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> n%:R</span><span class="id"> =</span><span class="id"> setT</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span><span class="id"> _;</span><span class="id"> have</span><span class="id"> [x0|x0]</span><span class="id"> :=</span><span class="id"> ltP</span><span class="id"> 0%R</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> `|ceil</span><span class="id"> x|</span>.<span class="id">+1</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> gtr0_norm//</span> (<span class="id">le_lt_trans</span> (<span class="id">ceil_ge</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -natr1</span><span class="id"> natr_absz</span><span class="id"> -abszE</span><span class="id"> gtz0_abs//</span><span class="id"> -?ceil_gt0//</span><span class="id"> ltr_pwDr</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> `|ceil</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id">|</span>.<span class="id">+1</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> ler0_norm//</span> (<span class="id">le_lt_trans</span> (<span class="id">ceil_ge</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
<span class="id">rewrite</span><span class="id"> -natr1</span><span class="id"> natr_absz</span><span class="id"> -abszE</span><span class="id"> gez0_abs</span><span class="id"> ?ltr_pwDr//</span><span class="id"> -ceil_ge0</span><span class="id"> ltrNl</span><span class="id"> opprK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_lt_trans</span><span class="id"> x0</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> lower_semicontinuous</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> :</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> lower_semicontinuous</span><span class="id"> f</span><span class="id"> :=</span><span class="gallina-kwd"> forall</span><span class="id"> x</span><span class="id"> a,</span><span class="id"> a%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists2</span><span class="id"> V,</span><span class="id"> nbhs</span><span class="id"> x</span><span class="id"> V</span><span class="id"> &amp;</span><span class="gallina-kwd"> forall</span><span class="id"> y,</span><span class="id"> V</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> a%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> y</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lower_semicontinuousP</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">lower_semicontinuous</span><span class="id"> f</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> a,</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> f</span><span class="id"> x</span><span class="id"> &gt;</span><span class="id"> a%:E]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [sci</span><span class="id"> a|openf</span><span class="id"> x</span><span class="id"> a</span><span class="id"> afx]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> /sci[A</span><span class="id"> +</span><span class="id"> Aaf];</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> -[B</span><span class="id"> xB</span><span class="id"> BA]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> nbhs_singleton;</span><span class="id"> apply:</span><span class="id"> nbhs_interior</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> B</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> y</span><span class="id"> /BA</span><span class="id"> /=;</span><span class="id"> exact:</span><span class="id"> Aaf</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> a%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x]</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> nbhsE/=;</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> a%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> lower_semicontinuous</span>.<br/>
<br/>
<div class="doc">neighborhoods </div>
<br/>
<span class="vernacular">Section</span><span class="id"> Nbhs'</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ex_ball_sig</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">~</span> (<span class="gallina-kwd">forall</span><span class="id"> eps</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="id"> ~</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> eps%:num</span><span class="id"> `&lt;=`</span><span class="id"> ~`</span><span class="id"> P</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{d</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span><span class="id"> |</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> d%:num</span><span class="id"> `&lt;=`</span><span class="id"> ~`</span><span class="id"> P}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> forallNE</span><span class="id"> notK</span><span class="id"> =&gt;</span><span class="id"> exNP</span>.<br/>
<span class="id">pose</span><span class="id"> D</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> d</span><span class="id"> :</span><span class="id"> R^o</span><span class="id"> |</span><span class="id"> d</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> /\</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> d</span><span class="id"> `&lt;=`</span><span class="id"> ~`</span><span class="id"> P]</span>.<br/>
<span class="id">have</span><span class="id"> [|d_gt0]</span><span class="id"> :=</span><span class="id"> @getPex</span><span class="id"> _</span><span class="id"> D;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">PosNum</span><span class="id"> d_gt0</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> exNP</span><span class="id"> =&gt;</span><span class="id"> [e</span><span class="id"> eP];</span><span class="gallina-kwd"> exists</span><span class="id"> e%:num</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhsC</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">~</span> (<span class="gallina-kwd">forall</span><span class="id"> eps</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="id"> ~</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> eps%:num</span><span class="id"> `&lt;=`</span><span class="id"> ~`</span><span class="id"> P</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> x</span> (<span class="id">~`</span><span class="id"> P</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /ex_ball_sig</span><span class="id"> [e]</span><span class="id"> ?;</span><span class="id"> apply/nbhs_ballP;</span><span class="gallina-kwd"> exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> /=</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhsC_ball</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> x</span> (<span class="id">~`</span><span class="id"> P</span>)<span class="id"> -&gt;</span><span class="id"> {d</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span><span class="id"> |</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> d%:num</span><span class="id"> `&lt;=`</span><span class="id"> ~`</span><span class="id"> P}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /nbhs_ballP</span><span class="id"> xNP;</span><span class="id"> apply:</span><span class="id"> ex_ball_sig</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> /posnumP[e]</span><span class="id"> eP</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> eP</span>)<span class="id">]</span><span class="id"> :=</span><span class="id"> xNP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_ex</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>)<span class="id"> :</span><span class="id"> nbhs</span><span class="id"> x</span><span class="id"> P</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{d</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> y,</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> d%:num</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> y}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /nbhs_ballP</span><span class="id"> xP</span>.<br/>
<span class="id">pose</span><span class="id"> D</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> d</span><span class="id"> :</span><span class="id"> R^o</span><span class="id"> |</span><span class="id"> d</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> /\</span><span class="gallina-kwd"> forall</span><span class="id"> y,</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> d</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> y]</span>.<br/>
<span class="id">have</span><span class="id"> [|d_gt0</span><span class="id"> dP]</span><span class="id"> :=</span><span class="id"> @getPex</span><span class="id"> _</span><span class="id"> D;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">PosNum</span><span class="id"> d_gt0</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> xP</span><span class="id"> =&gt;</span><span class="id"> [e</span><span class="id"> bP];</span><span class="gallina-kwd"> exists</span> (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> Nbhs'</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> coord_continuous</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> m</span><span class="id"> n</span><span class="id"> i</span><span class="id"> j</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> M</span><span class="id"> :</span><span class="id"> 'M[K]_</span>(<span class="id">m,</span><span class="id"> n</span>)<span class="id"> =&gt;</span><span class="id"> M</span><span class="id"> i</span><span class="id"> j</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /=</span><span class="id"> M</span><span class="id"> s</span><span class="id"> /=</span><span class="id"> /</span>(<span class="id">nbhs_ballP</span> (<span class="id">M</span><span class="id"> i</span><span class="id"> j</span>))<span class="id"> [e</span><span class="id"> e0</span><span class="id"> es]</span>.<br/>
<span class="id">apply/nbhs_ballP;</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> N</span><span class="id"> MN;</span><span class="id"> exact/es/MN</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> Proper_dnbhs_numFieldType</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">ProperFilter</span><span class="id"> x^'</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span><span class="id"> Build_ProperFilter_ex</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> /nbhs_ballP[_/posnumP[e]</span><span class="id"> Ae]</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> e%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> Ae;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> eq_sym</span><span class="id"> addrC</span><span class="id"> -subr_eq</span><span class="id"> subrr</span><span class="id"> eq_sym</span>.<br/>
<span class="id">rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> opprD</span><span class="id"> addrCA</span><span class="id"> addKr</span><span class="id"> normrN</span><span class="id"> ger0_norm</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> {2}</span>(<span class="id">splitr</span><span class="id"> e%:num</span>)<span class="id"> ltr_pwDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">ProperFilter</span><span class="id"> _^'</span>)<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">apply:</span><span class="id"> Proper_dnbhs_numFieldType</span>)<span class="id"> :</span><span class="id"> typeclass_instances</span>.<br/>
<br/>
<div class="doc">Some Topology on extended real numbers </div>
<br/>
<span class="vernacular">Definition</span><span class="id"> pinfty_nbhs</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>)<span class="id"> :</span><span class="id"> set_system</span><span class="id"> R</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span><span class="id"> P</span><span class="id"> =&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> M,</span><span class="id"> M</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> /\</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> M</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> pinfty_nbhs</span><span class="id"> R</span><span class="id"> :</span><span class="id"> clear</span><span class="id"> implicits</span>.<br/>
<span class="vernacular">Definition</span><span class="id"> ninfty_nbhs</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>)<span class="id"> :</span><span class="id"> set_system</span><span class="id"> R</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">fun</span><span class="id"> P</span><span class="id"> =&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> M,</span><span class="id"> M</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> /\</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> M</span><span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> ninfty_nbhs</span><span class="id"> R</span><span class="id"> :</span><span class="id"> clear</span><span class="id"> implicits</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;+oo_ R&quot;</span><span class="id"> :=</span> (<span class="id">pinfty_nbhs</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;(<span class="id">only</span><span class="id"> parsing</span>)<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;-oo_ R&quot;</span><span class="id"> :=</span> (<span class="id">ninfty_nbhs</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;(<span class="id">only</span><span class="id"> parsing</span>)<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;+oo&quot;</span><span class="id"> :=</span> (<span class="id">pinfty_nbhs</span><span class="id"> _</span>)<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;-oo&quot;</span><span class="id"> :=</span> (<span class="id">ninfty_nbhs</span><span class="id"> _</span>)<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ninftyN</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> :</span> (<span class="id">-</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">%R</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> -oo]</span><span class="id"> =</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [A</span><span class="id"> [M</span><span class="id"> [Mreal</span><span class="id"> MA]]|A</span><span class="id"> [M</span><span class="id"> [Mreal</span><span class="id"> MA]]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">-</span><span class="id"> M</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> realN;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltrNl</span><span class="id"> =&gt;</span><span class="id"> /MA/=;</span><span class="id"> rewrite</span><span class="id"> opprK</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">-</span><span class="id"> M</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?realN;</span><span class="id"> split=&gt;</span><span class="id"> //</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> ltrNr</span><span class="id"> =&gt;</span><span class="id"> /MA</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> infty_nbhs_instances</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> proper_pinfty_nbhs</span><span class="id"> :</span><span class="id"> ProperFilter</span> (<span class="id">pinfty_nbhs</span><span class="id"> R</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply</span><span class="id"> Build_ProperFilter_ex</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> P</span><span class="id"> [M</span><span class="id"> [Mreal</span><span class="id"> MP]];</span><span class="gallina-kwd"> exists</span> (<span class="id">M</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">;</span><span class="id"> apply</span><span class="id"> MP;</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
<span class="id">split=&gt;</span><span class="id"> /=</span><span class="id"> [|P</span><span class="id"> Q</span><span class="id"> [MP</span><span class="id"> [MPr</span><span class="id"> gtMP]]</span><span class="id"> [MQ</span><span class="id"> [MQr</span><span class="id"> gtMQ]]</span><span class="id"> |P</span><span class="id"> Q</span><span class="id"> sPQ</span><span class="id"> [M</span><span class="id"> [Mr</span><span class="id"> gtM]]]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span> (<span class="id">maxr</span><span class="id"> MP</span><span class="id"> MQ</span>)<span class="id">;</span><span class="id"> split=&gt;</span><span class="id"> [|x];</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> max_real</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> comparable_gt_max</span><span class="id"> ?real_comparable</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> /andP[/gtMP</span><span class="id"> ?</span><span class="id"> /gtMQ]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> M;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> /gtM</span><span class="id"> /sPQ</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> proper_ninfty_nbhs</span><span class="id"> :</span><span class="id"> ProperFilter</span> (<span class="id">ninfty_nbhs</span><span class="id"> R</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply</span><span class="id"> Build_ProperFilter_ex</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> P</span><span class="id"> [M</span><span class="id"> [Mr</span><span class="id"> ltMP]];</span><span class="gallina-kwd"> exists</span> (<span class="id">M</span><span class="id"> -</span><span class="id"> 1</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ltMP;</span><span class="id"> rewrite</span><span class="id"> gtrDl</span><span class="id"> oppr_lt0</span>.<br/>
<span class="id">split=&gt;</span><span class="id"> /=</span><span class="id"> [|P</span><span class="id"> Q</span><span class="id"> [MP</span><span class="id"> [MPr</span><span class="id"> ltMP]]</span><span class="id"> [MQ</span><span class="id"> [MQr</span><span class="id"> ltMQ]]</span><span class="id"> |P</span><span class="id"> Q</span><span class="id"> sPQ</span><span class="id"> [M</span><span class="id"> [Mr</span><span class="id"> ltM]]]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span> (<span class="id">Num</span>.<span class="id">min</span><span class="id"> MP</span><span class="id"> MQ</span>)<span class="id">;</span><span class="id"> split=&gt;</span><span class="id"> [|x];</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> min_real</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> comparable_lt_min</span><span class="id"> ?real_comparable</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> /andP[/ltMP</span><span class="id"> ?</span><span class="id"> /ltMQ]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> M;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span><span class="id"> /ltM</span><span class="id"> /sPQ</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_pinfty_gt</span><span class="id"> r</span><span class="id"> :</span><span class="id"> r</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_pinfty_ge</span><span class="id"> r</span><span class="id"> :</span><span class="id"> r</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> r</span><span class="id"> &lt;=</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> ltW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_ninfty_lt</span><span class="id"> r</span><span class="id"> :</span><span class="id"> r</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> r</span><span class="id"> &gt;</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_ninfty_le</span><span class="id"> r</span><span class="id"> :</span><span class="id"> r</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> r</span><span class="id"> &gt;=</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> ltW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_pinfty_real</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> x</span><span class="id"> \is</span><span class="id"> @Num</span>.<span class="id">real</span><span class="id"> R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span> (<span class="id">nbhs_pinfty_gt</span> (<span class="id">@real0</span><span class="id"> _</span>))<span class="id">;</span><span class="id"> apply:</span><span class="id"> gtr0_real</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_ninfty_real</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> x</span><span class="id"> \is</span><span class="id"> @Num</span>.<span class="id">real</span><span class="id"> R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span> (<span class="id">nbhs_ninfty_lt</span> (<span class="id">@real0</span><span class="id"> _</span>))<span class="id">;</span><span class="id"> apply:</span><span class="id"> ltr0_real</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> pinfty_ex_gt</span> (<span class="id">m</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> m</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> k</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> A</span><span class="id"> k</span>)<span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> M,</span><span class="id"> m</span><span class="id"> &lt;</span><span class="id"> M</span><span class="id"> &amp;</span><span class="id"> A</span><span class="id"> M</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> m_real</span><span class="id"> Agt;</span><span class="id"> near</span> (<span class="id">pinfty_nbhs</span><span class="id"> R</span>)<span class="id"> =&gt;</span><span class="id"> M</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> M;</span><span class="id"> near:</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> nbhs_pinfty_gt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> pinfty_ex_ge</span> (<span class="id">m</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> m</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> k</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> A</span><span class="id"> k</span>)<span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> M,</span><span class="id"> m</span><span class="id"> &lt;=</span><span class="id"> M</span><span class="id"> &amp;</span><span class="id"> A</span><span class="id"> M</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> m_real</span><span class="id"> Agt;</span><span class="id"> near</span> (<span class="id">pinfty_nbhs</span><span class="id"> R</span>)<span class="id"> =&gt;</span><span class="id"> M</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> M;</span><span class="id"> near:</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> nbhs_pinfty_ge</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> pinfty_ex_gt0</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> k</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> A</span><span class="id"> k</span>)<span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> M,</span><span class="id"> M</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> &amp;</span><span class="id"> A</span><span class="id"> M</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> pinfty_ex_gt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_pinfty_div2</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> k</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> A</span><span class="id"> k</span>)<span class="id"> -&gt;</span> (<span class="id">\forall</span><span class="id"> k</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> A</span> (<span class="id">k</span><span class="id"> /</span><span class="id"> 2</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [M</span><span class="id"> [Mreal</span><span class="id"> AM]];</span><span class="gallina-kwd"> exists</span> (<span class="id">M</span><span class="id"> *</span><span class="id"> 2</span>)<span class="id">;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> realM</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> -ltr_pdivlMr</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> AM</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> not_near_inftyP</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">~</span> (<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> M</span><span class="id"> :</span><span class="id"> R,</span><span class="id"> M</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> x,</span><span class="id"> M</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> &amp;</span><span class="id"> ~</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nearE</span><span class="id"> -forallNP</span><span class="id"> -propeqE;</span><span class="id"> apply:</span><span class="id"> eq_forall</span><span class="id"> =&gt;</span><span class="id"> M</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> propeqE</span><span class="id"> -implypN</span><span class="id"> existsPNP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> not_near_ninftyP</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> R</span>)<span class="id">:</span><br/>
&nbsp;&nbsp;<span class="id">~</span> (<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> M</span><span class="id"> :</span><span class="id"> R,</span><span class="id"> M</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> x,</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> M</span><span class="id"> &amp;</span><span class="id"> ~</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -filterN</span><span class="id"> ninftyN</span><span class="id"> not_near_inftyP/=;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> PN</span><span class="id"> M;</span><span class="id"> rewrite</span><span class="id"> -realN;</span><br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /PN[x</span><span class="id"> Mx</span><span class="id"> PNx];</span><span class="gallina-kwd"> exists</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> 1?</span>(<span class="id">ltrNl,ltrNr,opprK</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> infty_nbhs_instances</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &lt;</span><span class="id"> ?x</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_pinfty_gt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &lt;=</span><span class="id"> ?x</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_pinfty_ge</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &gt;</span><span class="id"> ?x</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_ninfty_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &gt;=</span><span class="id"> ?x</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_ninfty_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">?x</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_pinfty_real</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">?x</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_ninfty_real</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &lt;</span><span class="id"> ?x</span>)<span class="id">%E</span>)<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> ereal_nbhs_pinfty_gt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &lt;=</span><span class="id"> ?x</span>)<span class="id">%E</span>)<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> ereal_nbhs_pinfty_ge</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &gt;</span><span class="id"> ?x</span>)<span class="id">%E</span>)<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> ereal_nbhs_ninfty_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &gt;=</span><span class="id"> ?x</span>)<span class="id">%E</span>)<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> ereal_nbhs_ninfty_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">fine</span><span class="id"> ?x</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> ereal_nbhs_pinfty_real</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">fine</span><span class="id"> ?x</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> ereal_nbhs_ninfty_real</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_infty_numField</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgryPnum</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> R}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> :</span><span class="id"> [&lt;-&gt;</span><br/>
<span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo;</span><br/>
<span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;=</span><span class="id"> x;</span><br/>
<span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;</span><span class="id"> x;</span><br/>
<span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;</span><span class="id"> x;</span><br/>
<span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;=</span><span class="id"> x</span><span class="id"> ]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">tfae;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Foo</span><span class="id"> A</span><span class="id"> Areal;</span><span class="id"> apply:</span><span class="id"> Foo;</span><span class="id"> apply:</span><span class="id"> nbhs_pinfty_ge</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> AF</span><span class="id"> A</span><span class="id"> Areal;</span><span class="id"> near</span><span class="id"> +oo_R</span><span class="id"> =&gt;</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply:</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> B</span>)<span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> apply:</span><span class="id"> AF</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Foo;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply:</span><span class="id"> Foo</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> ltW</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> [A</span><span class="id"> [AR</span><span class="id"> AF]]</span><span class="id"> P</span><span class="id"> [x</span><span class="id"> [xR</span><span class="id"> Px]];</span><span class="id"> near</span><span class="id"> +oo_R</span><span class="id"> =&gt;</span><span class="id"> B</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> [apply:</span><span class="id"> Px;</span><span class="id"> apply:</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> B</span>)<span class="id"> =&gt;</span><span class="id"> //];</span><span class="id"> apply:</span><span class="id"> AF</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgrNyPnum</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> R}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> :</span><span class="id"> [&lt;-&gt;</span><br/>
<span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo;</span><br/>
<span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;=</span><span class="id"> x;</span><br/>
<span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;</span><span class="id"> x;</span><br/>
<span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;</span><span class="id"> x;</span><br/>
<span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;=</span><span class="id"> x</span><span class="id"> ]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">tfae;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Foo</span><span class="id"> A</span><span class="id"> Areal;</span><span class="id"> apply:</span><span class="id"> Foo;</span><span class="id"> apply:</span><span class="id"> nbhs_ninfty_le</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> AF</span><span class="id"> A</span><span class="id"> Areal;</span><span class="id"> near</span><span class="id"> -oo_R</span><span class="id"> =&gt;</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply:</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> B</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> AF</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Foo;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply:</span><span class="id"> Foo</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> ltW</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> [A</span><span class="id"> [AR</span><span class="id"> AF]]</span><span class="id"> P</span><span class="id"> [x</span><span class="id"> [xR</span><span class="id"> Px]];</span><span class="id"> near</span><span class="id"> -oo_R</span><span class="id"> =&gt;</span><span class="id"> B</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> [apply:</span><span class="id"> Px;</span><span class="id"> apply:</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> B</span>)<span class="id"> =&gt;</span><span class="id"> //];</span><span class="id"> apply:</span><span class="id"> AF</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Context</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgryPger</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgryPnum</span><span class="id"> 0%N</span><span class="id"> 1%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgryPgtr</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgryPnum</span><span class="id"> 0%N</span><span class="id"> 2%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgryPgty</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgryPnum</span><span class="id"> 0%N</span><span class="id"> 3%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgryPgey</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgryPnum</span><span class="id"> 0%N</span><span class="id"> 4%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNyPler</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgrNyPnum</span><span class="id"> 0%N</span><span class="id"> 1%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNyPltr</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgrNyPnum</span><span class="id"> 0%N</span><span class="id"> 2%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNyPltNy</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgrNyPnum</span><span class="id"> 0%N</span><span class="id"> 3%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNyPleNy</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgrNyPnum</span><span class="id"> 0%N</span><span class="id"> 4%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgry_ger</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgryPger</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgry_gtr</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgryPgtr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNy_ler</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgrNyPler</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNy_ltr</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgrNyPltr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgNry</span><span class="id"> f</span><span class="id"> :</span> (<span class="id">-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> cvgrNyPler</span><span class="id"> cvgryPger;</span><span class="id"> split=&gt;</span><span class="id"> Foo</span><span class="id"> A</span><span class="id"> Areal;</span><br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -lerN2</span><span class="id"> ?opprK;</span><span class="id"> apply:</span><span class="id"> Foo;</span><span class="id"> rewrite</span><span class="id"> rpredN</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgNrNy</span><span class="id"> f</span><span class="id"> :</span> (<span class="id">-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -cvgNry</span><span class="id"> opprK</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_infty_numField</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_infty_realField</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgryPge</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgryPger;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> *;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgryPgt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgryPgtr;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> *;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNyPle</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgrNyPler;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> *;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNyPlt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgrNyPltr;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> *;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgry_ge</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgryPge</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgry_gt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgryPgt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNy_le</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgrNyPle</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrNy_lt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgrNyPlt</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_infty_realField</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrnyP</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;(((<span class="id">f</span><span class="id"> n</span>)<span class="id">%:R</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> +oo</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> \oo</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [/cvgryPge|/cvgnyPge]</span><span class="id"> Foo</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/cvgnyPge</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">@ler_nat</span><span class="id"> R</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> Foo</span>.<br/>
<span class="id">apply/cvgryPgey;</span><span class="id"> near=&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">@ceil_ge</span><span class="id"> R</span><span class="id"> A</span>))<span class="id">//</span> (<span class="id">ler_int</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">f</span><span class="id"> n</span>))<span class="id"> [ceil</span><span class="id"> _]intEsign</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> le_gtF</span><span class="id"> ?expr0</span><span class="id"> ?mul1r</span><span class="id"> ?lez_nat</span><span class="id"> -?ceil_ge0//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> Foo</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> ecvg_infty_numField</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgeyPnum</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> \bar</span><span class="id"> R}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> :</span><span class="id"> [&lt;-&gt;</span><br/>
<span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo;</span><br/>
<span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;=</span><span class="id"> x;</span><br/>
<span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;</span><span class="id"> x;</span><br/>
<span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo%R,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;</span><span class="id"> x;</span><br/>
<span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo%R,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;=</span><span class="id"> x</span><span class="id"> ]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">tfae;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Foo</span><span class="id"> A</span><span class="id"> Areal;</span><span class="id"> apply:</span><span class="id"> Foo;</span><span class="id"> apply:</span><span class="id"> ereal_nbhs_pinfty_ge</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> AF</span><span class="id"> A</span><span class="id"> Areal;</span><span class="id"> near</span><span class="id"> +oo_R</span><span class="id"> =&gt;</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> B%:E</span>)<span class="id"> ?lte_fin//;</span><span class="id"> apply:</span><span class="id"> AF</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Foo;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply:</span><span class="id"> Foo</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> ltW</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> [A</span><span class="id"> [AR</span><span class="id"> AF]]</span><span class="id"> P</span><span class="id"> [x</span><span class="id"> [xR</span><span class="id"> Px]];</span><span class="id"> near</span><span class="id"> +oo_R</span><span class="id"> =&gt;</span><span class="id"> B</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> [apply:</span><span class="id"> Px;</span><span class="id"> rewrite</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> B%:E</span>)<span class="id"> ?lte_fin//];</span><span class="id"> apply:</span><span class="id"> AF</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgeNyPnum</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> \bar</span><span class="id"> R}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> :</span><span class="id"> [&lt;-&gt;</span><br/>
<span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo;</span><br/>
<span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;=</span><span class="id"> x;</span><br/>
<span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;</span><span class="id"> x;</span><br/>
<span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo%R,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;</span><span class="id"> x;</span><br/>
<span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo%R,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;=</span><span class="id"> x</span><span class="id"> ]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">tfae;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Foo</span><span class="id"> A</span><span class="id"> Areal;</span><span class="id"> apply:</span><span class="id"> Foo;</span><span class="id"> apply:</span><span class="id"> ereal_nbhs_ninfty_le</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> AF</span><span class="id"> A</span><span class="id"> Areal;</span><span class="id"> near</span><span class="id"> -oo_R</span><span class="id"> =&gt;</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> B%:E</span>)<span class="id"> ?lte_fin//;</span><span class="id"> apply:</span><span class="id"> AF</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Foo;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply:</span><span class="id"> Foo</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> ltW</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> [A</span><span class="id"> [AR</span><span class="id"> AF]]</span><span class="id"> P</span><span class="id"> [x</span><span class="id"> [xR</span><span class="id"> Px]];</span><span class="id"> near</span><span class="id"> -oo_R</span><span class="id"> =&gt;</span><span class="id"> B</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> [apply:</span><span class="id"> Px;</span><span class="id"> rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> B%:E</span>)<span class="id"> ?lte_fin//];</span><span class="id"> apply:</span><span class="id"> AF</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Context</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">u</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeyPger</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgeyPnum</span><span class="id"> 0%N</span><span class="id"> 1%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeyPgtr</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgeyPnum</span><span class="id"> 0%N</span><span class="id"> 2%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeyPgty</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo%R,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgeyPnum</span><span class="id"> 0%N</span><span class="id"> 3%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeyPgey</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> +oo%R,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgeyPnum</span><span class="id"> 0%N</span><span class="id"> 4%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNyPler</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgeNyPnum</span><span class="id"> 0%N</span><span class="id"> 1%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNyPltr</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgeNyPnum</span><span class="id"> 0%N</span><span class="id"> 2%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNyPltNy</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo%R,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgeNyPnum</span><span class="id"> 0%N</span><span class="id"> 3%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNyPleNy</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> A</span><span class="id"> \near</span><span class="id"> -oo%R,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgeNyPnum</span><span class="id"> 0%N</span><span class="id"> 4%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgey_ger</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeyPger</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgey_gtr</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeyPgtr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNy_ler</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeNyPler</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNy_ltr</span><span class="id"> f</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> A</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeNyPltr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgNey</span><span class="id"> f</span><span class="id"> :</span> (<span class="id">\-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> cvgeNyPler</span><span class="id"> cvgeyPger;</span><span class="id"> split=&gt;</span><span class="id"> Foo</span><span class="id"> A</span><span class="id"> Areal;</span><br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -leeN2</span><span class="id"> ?oppeK;</span><span class="id"> apply:</span><span class="id"> Foo;</span><span class="id"> rewrite</span><span class="id"> rpredN</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgNeNy</span><span class="id"> f</span><span class="id"> :</span> (<span class="id">\-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -cvgNey</span> (_<span class="id"> :</span><span class="id"> \-</span><span class="id"> \-</span><span class="id"> f</span><span class="id"> =</span><span class="id"> f</span>)<span class="id">//;</span><span class="id"> apply/funeqP</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> oppeK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeryP</span><span class="id"> u</span><span class="id"> :</span> ((<span class="id">u</span><span class="id"> x</span>)<span class="id">%:E</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> +oo</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">u</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo%R</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [/cvgeyPger|/cvgryPger]</span><span class="id"> Foo</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/cvgryPger</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> Ar;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -lee_fin;</span><span class="id"> apply:</span><span class="id"> Foo</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/cvgeyPger</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> Ar;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> lee_fin;</span><span class="id"> apply:</span><span class="id"> Foo</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgerNyP</span><span class="id"> u</span><span class="id"> :</span> ((<span class="id">u</span><span class="id"> x</span>)<span class="id">%:E</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> -oo</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">u</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo%R</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [/cvgeNyPler|/cvgrNyPler]</span><span class="id"> Foo</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/cvgrNyPler</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> Ar;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -lee_fin;</span><span class="id"> apply:</span><span class="id"> Foo</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/cvgeNyPler</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> Ar;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> lee_fin;</span><span class="id"> apply:</span><span class="id"> Foo</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ecvg_infty_numField</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> ecvg_infty_realField</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeyPge</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgeyPger;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> *;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeyPgt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgeyPgtr;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> *;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNyPle</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgeNyPler;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> *;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNyPlt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgeNyPltr;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> *;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgey_ge</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeyPge</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgey_gt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeyPgt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNy_le</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeNyPle</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNy_lt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> A%:E</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeNyPlt</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ecvg_infty_realField</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgenyP</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> nat</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;(((<span class="id">f</span><span class="id"> n</span>)<span class="id">%:R</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">%:E</span><span class="id"> @[n</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> +oo%E</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> \oo</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgeryP</span><span class="id"> cvgrnyP</span>. Qed.</div></details>
<br/>
<div class="doc">Modules with a norm depending on a numDomain</div>
<br/>
<span class="id">HB</span>.<span class="id">mixin</span><span class="vernacular"> Record</span><span class="id"> PseudoMetricNormedZmod_Tvs_isNormedModule</span><span class="id"> K</span><span class="id"> V</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">of</span><span class="id"> PseudoMetricNormedZmod</span><span class="id"> K</span><span class="id"> V</span><span class="id"> &amp;</span><span class="id"> Tvs</span><span class="id"> K</span><span class="id"> V</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;&nbsp;<span class="id">normrZ</span><span class="id"> :</span><span class="gallina-kwd"> forall</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<span class="id">,</span><span class="id"> `|</span><span class="id"> l</span><span class="id"> *:</span><span class="id"> x</span><span class="id"> |</span><span class="id"> =</span><span class="id"> `|</span><span class="id"> l</span><span class="id"> |</span><span class="id"> *</span><span class="id"> `|</span><span class="id"> x</span><span class="id"> |;</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">#[short</span>(<span class="id">type=</span><span class="id">&quot;normedModType&quot;</span>)<span class="id">]</span><br/>
<span class="id">HB</span>.<span class="id">structure</span><span class="vernacular"> Definition</span><span class="id"> NormedModule</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numDomainType</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">{T</span><span class="id"> of</span><span class="id"> PseudoMetricNormedZmod</span><span class="id"> K</span><span class="id"> T</span><span class="id"> &amp;</span><span class="id"> Tvs</span><span class="id"> K</span><span class="id"> T</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">&amp;</span><span class="id"> PseudoMetricNormedZmod_Tvs_isNormedModule</span><span class="id"> K</span><span class="id"> T}</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">factory</span><span class="vernacular"> Record</span><span class="id"> PseudoMetricNormedZmod_Lmodule_isNormedModule</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>)<span class="id"> V</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">of</span><span class="id"> PseudoMetricNormedZmod</span><span class="id"> K</span><span class="id"> V</span><span class="id"> &amp;</span><span class="id"> GRing</span>.<span class="id">Lmodule</span><span class="id"> K</span><span class="id"> V</span><span class="id"> :=</span><span class="id"> {</span><br/>
&nbsp;<span class="id">normrZ</span><span class="id"> :</span><span class="gallina-kwd"> forall</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<span class="id">,</span><span class="id"> `|</span><span class="id"> l</span><span class="id"> *:</span><span class="id"> x</span><span class="id"> |</span><span class="id"> =</span><span class="id"> `|</span><span class="id"> l</span><span class="id"> |</span><span class="id"> *</span><span class="id"> `|</span><span class="id"> x</span><span class="id"> |;</span><br/>
<span class="id">}</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">builders</span><span class="vernacular"> Context</span><span class="id"> K</span><span class="id"> V</span><span class="id"> of</span><span class="id"> PseudoMetricNormedZmod_Lmodule_isNormedModule</span><span class="id"> K</span><span class="id"> V</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> add_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> :</span><span class="id"> V</span><span class="id"> *</span><span class="id"> V</span><span class="id"> =&gt;</span><span class="id"> x</span>.<span class="id">1</span><span class="id"> +</span><span class="id"> x</span>.<span class="id">2</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [/=</span><span class="id"> x</span><span class="id"> y];</span><span class="id"> apply/cvg_ballP</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e0</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">ball</span><span class="id"> x</span> (<span class="id">e</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">,</span><span class="id"> ball</span><span class="id"> y</span> (<span class="id">e</span><span class="id"> /</span><span class="id"> 2</span>))<span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> apply:</span><span class="id"> nbhsx_ballx;</span><span class="id"> rewrite</span><span class="id"> divr_gt0</span>.<br/>
<span class="id">rewrite</span><span class="id"> -ball_normE</span><span class="id"> /ball_/=</span><span class="id"> =&gt;</span><span class="id"> xy</span><span class="id"> /=</span><span class="id"> [nx</span><span class="id"> ny]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprD</span><span class="id"> addrACA</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_normD</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> //</span> (<span class="id">splitr</span><span class="id"> e</span>)<span class="id"> ltrD</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> scale_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> z</span><span class="id"> :</span><span class="id"> K^o</span><span class="id"> *</span><span class="id"> V</span><span class="id"> =&gt;</span><span class="id"> z</span>.<span class="id">1</span><span class="id"> *:</span><span class="id"> z</span>.<span class="id">2</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [/=</span><span class="id"> k</span><span class="id"> x];</span><span class="id"> apply/cvg_ballP</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e0</span><span class="id"> /=</span>.<br/>
<span class="id">near</span><span class="id"> +oo_K</span><span class="id"> =&gt;</span><span class="id"> M</span>.<br/>
<span class="id">pose</span><span class="id"> r</span><span class="id"> :=</span><span class="id"> `|e|</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> /</span><span class="id"> M</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">ball</span><span class="id"> k</span><span class="id"> r,</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> apply:</span><span class="id"> nbhsx_ballx;</span><span class="id"> rewrite</span><span class="id"> !divr_gt0//</span><span class="id"> normr_gt0//</span><span class="id"> gt_eqF</span>.<br/>
<span class="id">rewrite</span><span class="id"> -ball_normE</span><span class="id"> /ball/=</span><span class="id"> =&gt;</span><span class="id"> lz</span><span class="id"> /=</span><span class="id"> [nk</span><span class="id"> nx]</span>.<br/>
<span class="id">have</span><span class="id"> :=</span><span class="id"> @ball_split</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">k</span><span class="id"> *:</span><span class="id"> lz</span>.<span class="id">2</span>)  (<span class="id">k</span><span class="id"> *:</span><span class="id"> x</span>)  (<span class="id">lz</span>.<span class="id">1</span><span class="id"> *:</span><span class="id"> lz</span>.<span class="id">2</span>)<span class="id"> `|e|</span>.<br/>
<span class="id">rewrite</span><span class="id"> -ball_normE</span><span class="id"> /=</span><span class="id"> real_lter_normr</span><span class="id"> ?gtr0_real//</span>.<br/>
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> _</span><span class="id"> &lt;</span><span class="id"> -</span><span class="id"> e</span><span class="id"> =</span><span class="id"> false</span>)<span class="id"> ?orbF;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltr_nnorml//</span><span class="id"> oppr_le0</span><span class="id"> ltW</span>.<br/>
<span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -scalerBr</span><span class="id"> normrZ</span><span class="id"> -</span>(<span class="id">@ltr_pM2r</span><span class="id"> _</span><span class="id"> M^-1</span>)<span class="id"> ?invr_gt0//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_lt_trans</span><span class="id"> _</span><span class="id"> nx</span>)<span class="id">//</span><span class="id"> mulrC</span><span class="id"> ler_pdivrMl//</span><span class="id"> ler_wpM2r//</span><span class="id"> invr_gt0</span>.<br/>
<span class="id">rewrite</span><span class="id"> -scalerBl</span><span class="id"> normrZ</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">`|k</span><span class="id"> -</span><span class="id"> lz</span>.<span class="id">1|</span><span class="id"> *</span><span class="id"> M</span>))<span class="id"> ?ler_wpM2l</span><span class="id"> -?ltr_pdivlMr//</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">`|lz</span>.<span class="id">2|</span><span class="id"> +</span><span class="id"> `|x|</span>))<span class="id"> ?lerDl//</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">`|x|</span><span class="id"> +</span> (<span class="id">`|x|</span><span class="id"> +</span><span class="id"> r</span>)))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> addrC</span><span class="id"> lerD//</span><span class="id"> -lerBlDl</span><span class="id"> -</span>(<span class="id">normrN</span><span class="id"> x</span>) (<span class="id">le_trans</span> (<span class="id">lerB_normD</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> ltW</span>.<br/>
<span class="id">rewrite</span><span class="id"> [leRHS]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> M^-1</span><span class="id"> *</span> (<span class="id">M</span><span class="id"> *</span> <span class="id"> M</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mulrA</span><span class="id"> mulVf</span><span class="id"> ?mul1r//</span><span class="id"> gt_eqF</span>.<br/>
<span class="id">rewrite</span><span class="id"> [leLHS]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> M^-1</span><span class="id"> *</span> (<span class="id">M</span><span class="id"> *</span> (<span class="id">`|x|</span><span class="id"> +</span><span class="id"> `|x|</span>)<span class="id"> +</span><span class="id"> `|e|</span><span class="id"> /</span><span class="id"> 2</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mulrDr</span><span class="id"> mulrA</span><span class="id"> mulVf</span><span class="id"> ?mul1r</span><span class="id"> ?gt_eqF//</span><span class="id"> mulrC</span><span class="id"> addrA</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_wpM2l</span><span class="id"> ?invr_ge0//</span><span class="id"> ?ltW//</span><span class="id"> -ltrBrDl</span><span class="id"> -mulrBr</span><span class="id"> ltr_pM//</span><span class="id"> ltrBrDl</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> locally_convex</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists2</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">set</span><span class="id"> V</span>)<span class="id">,</span> (<span class="gallina-kwd">forall</span><span class="id"> b,</span><span class="id"> b</span><span class="id"> \in</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> convex</span><span class="id"> b</span>)<span class="id"> &amp;</span><span class="id"> basis</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">exists</span><span class="id"> [set</span><span class="id"> B</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> x</span><span class="id"> r,</span><span class="id"> B</span><span class="id"> =</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r]</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> b;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> [[x]]</span><span class="id"> [r]</span><span class="id"> -&gt;</span><span class="id"> z</span><span class="id"> y</span><span class="id"> l</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> !inE</span><span class="id"> -!ball_normE</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> zx</span><span class="id"> yx</span><span class="id"> l0;</span><span class="id"> rewrite</span><span class="id"> -subr_gt0</span><span class="id"> =&gt;</span><span class="id"> l1</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> x</span><span class="id"> =</span><span class="id"> l</span><span class="id"> *:</span><span class="id"> x</span><span class="id"> +</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> l</span>)<span class="id"> *:</span><span class="id"> x</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> addrC</span><span class="id"> scalerBl</span><span class="id"> subrK</span><span class="id"> scale1r</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> `|X|]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> l</span><span class="id"> *:</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> z</span>)<span class="id"> +</span> (<span class="id">1</span><span class="id"> -</span><span class="id"> l</span>)<span class="id"> *:</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> y</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprD</span><span class="id"> addrACA</span><span class="id"> -scalerBr</span><span class="id"> -scalerBr</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">`|l|</span><span class="id"> *</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> z|</span><span class="id"> +</span><span class="id"> `|1</span><span class="id"> -</span><span class="id"> l|</span><span class="id"> *</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -!normrZ</span><span class="id"> ler_normD</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">`|l|</span><span class="id"> *</span><span class="id"> r</span><span class="id"> +</span><span class="id"> `|1</span><span class="id"> -</span><span class="id"> l|</span><span class="id"> *</span><span class="id"> r</span> ))<span class="id">//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ltr_leD//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -ltr_pdivlMl</span><span class="id"> ?mulrA</span><span class="id"> ?mulVf</span><span class="id"> ?mul1r</span><span class="id"> //</span><span class="id"> ?normrE</span><span class="id"> ?gt_eqF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -ler_pdivlMl</span><span class="id"> ?mulrA</span><span class="id"> ?mulVf</span><span class="id"> ?mul1r</span><span class="id"> ?ltW</span><span class="id"> //</span><span class="id"> ?normrE</span><span class="id"> ?gt_eqF</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> !gtr0_norm//</span><span class="id"> -mulrDl</span><span class="id"> addrC</span><span class="id"> subrK</span><span class="id"> mul1r</span>.<br/>
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> B</span><span class="id"> [x]</span><span class="id"> [r]</span><span class="id"> -&gt;</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> openE/=</span><span class="id"> -ball_normE/=</span><span class="id"> /interior</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /=</span><span class="id"> bxy;</span><span class="id"> rewrite</span><span class="id"> -nbhs_ballE</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">r</span><span class="id"> -</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span>)<span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> -ball_normE/=</span><span class="id"> ltrBrDr</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> le_lt_trans;</span><span class="id"> rewrite</span><span class="id"> [in</span><span class="id"> leRHS]addrC</span><span class="id"> ler_distD</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> B;</span><span class="id"> rewrite</span><span class="id"> -nbhs_ballE/=</span><span class="id"> =&gt;</span><span class="id"> -[r]</span><span class="id"> r0</span><span class="id"> Bxr</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> split;</span><span class="id"> [exists</span><span class="id"> x,</span><span class="id"> r|exact:</span><span class="id"> ballxx]</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><br/>
&nbsp;<span class="id">Uniform_isTvs</span>.<span class="id">Build</span><span class="id"> K</span><span class="id"> V</span><span class="id"> add_continuous</span><span class="id"> scale_continuous</span><span class="id"> locally_convex</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">PseudoMetricNormedZmod_Tvs_isNormedModule</span>.<span class="id">Build</span><span class="id"> K</span><span class="id"> V</span><span class="id"> normrZ</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="gallina-kwd">end</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> standard_topology</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> numFieldType</span>.<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Num</span>.<span class="id">NormedZmodule</span>.<span class="id">on</span><span class="id"> R^o</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> NormedZmod_PseudoMetric_eq</span>.<span class="id">Build</span><span class="id"> R</span><span class="id"> R^o</span><span class="id"> erefl</span>.<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">PseudoMetricNormedZmod_Tvs_isNormedModule</span>.<span class="id">Build</span><span class="id"> R</span><span class="id"> R^o</span> (<span class="id">@normrM</span><span class="id"> _</span>).<br/>
<br/>
<span class="vernacular">End</span><span class="id"> standard_topology</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_itv</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span> (<span class="id">x</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> `]x</span><span class="id"> -</span><span class="id"> r,</span><span class="id"> x</span><span class="id"> +</span><span class="id"> r[%classic</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@ball_normE</span><span class="id"> _</span><span class="id"> R^o</span>)<span class="id"> /ball_</span><span class="id"> set_itvE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> t/=;</span><span class="id"> rewrite</span><span class="id"> ltr_distlC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Module</span><span class="id"> numFieldNormedType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>).<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> GRing</span>.<span class="id">ComAlgebra</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Vector</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> NormedModule</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="vernacular">End</span><span class="id"> realType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> rcfType</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> rcfType</span>).<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> GRing</span>.<span class="id">ComAlgebra</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Vector</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> NormedModule</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="vernacular">End</span><span class="id"> rcfType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> archiFieldType</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>).<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> GRing</span>.<span class="id">ComAlgebra</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Vector</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> NormedModule</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="vernacular">End</span><span class="id"> archiFieldType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> realFieldType</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>).<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> GRing</span>.<span class="id">ComAlgebra</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Vector</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> NormedModule</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Num</span>.<span class="id">RealField</span>.<span class="id">on</span><span class="id"> R</span>.<br/>
<span class="vernacular">End</span><span class="id"> realFieldType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> numClosedFieldType</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numClosedFieldType</span>).<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> GRing</span>.<span class="id">ComAlgebra</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Vector</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> NormedModule</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Num</span>.<span class="vernacular">ClosedField</span>.<span class="id">on</span><span class="id"> R</span>.<br/>
<span class="vernacular">End</span><span class="id"> numClosedFieldType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> numFieldType</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>).<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> GRing</span>.<span class="id">ComAlgebra</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Vector</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> NormedModule</span>.<span class="id">copy</span><span class="id"> R</span><span class="id"> R^o</span>.<br/>
<span class="id">#[export,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Num</span>.<span class="id">NumField</span>.<span class="id">on</span><span class="id"> R</span>.<br/>
<span class="vernacular">End</span><span class="id"> numFieldType</span>.<br/>
<br/>
<span class="vernacular">Module</span><span class="vernacular"> Exports</span>.<span class="vernacular"> Export</span><span class="id"> numFieldTopology</span>.<span class="vernacular">Exports</span>.<span class="id"> HB</span>.<span class="id">reexport</span>.<span class="vernacular"> End</span><span class="vernacular"> Exports</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> numFieldNormedType</span>.<br/>
<span class="vernacular">Import</span><span class="id"> numFieldNormedType</span>.<span class="vernacular">Exports</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limf_esup_dnbhsN</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">limf_esup</span><span class="id"> f</span><span class="id"> a^'</span><span class="id"> =</span><span class="id"> limf_esup</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> f</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id">%R</span>) (<span class="id">-</span><span class="id"> a</span>)<span class="id">%R^'</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /limf_esup</span><span class="id"> dnbhsN</span><span class="id"> image_comp/=</span>.<br/>
<span class="id">congr</span> (<span class="id">ereal_inf</span><span class="id"> [set</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _</span><span class="gallina-kwd"> in</span><span class="id"> _]</span>)<span class="id">;</span><span class="id"> apply/funext</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> /=</span>.<br/>
<span class="id">rewrite</span><span class="id"> image_comp/=</span><span class="id"> -compA</span> (_<span class="id"> :</span><span class="id"> _</span><span class="id"> \o</span><span class="id"> _</span><span class="id"> =</span><span class="id"> idfun</span>)<span class="id">//</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x/=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> NormedModule_numDomainType</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normrZV</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> `|x|</span><span class="id"> \in</span><span class="id"> GRing</span>.<span class="id">unit</span><span class="id"> -&gt;</span><span class="id"> `|</span><span class="id"> `|</span><span class="id"> x</span><span class="id"> |^-1</span><span class="id"> *:</span><span class="id"> x</span><span class="id"> |</span><span class="id"> =</span><span class="id"> 1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> nxu;</span><span class="id"> rewrite</span><span class="id"> normrZ</span><span class="id"> normrV//</span><span class="id"> normr_id</span><span class="id"> mulVr</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> NormedModule_numDomainType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> NormedModule_numFieldType</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normfZV</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> x</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> `|</span><span class="id"> `|x|^-1</span><span class="id"> *:</span><span class="id"> x</span><span class="id"> |</span><span class="id"> =</span><span class="id"> 1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -normr_eq0</span><span class="id"> -unitfE</span><span class="id"> =&gt;</span><span class="id"> /normrZV-&gt;</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> NormedModule_numFieldType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> PseudoNormedZmod_numDomainType</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> ball_norm</span><span class="id"> :=</span> (<span class="id">ball_</span> (<span class="id">@normr</span><span class="id"> R</span><span class="id"> V</span>)).<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> nbhs_ball</span><span class="id"> :=</span> (<span class="id">@nbhs_ball</span><span class="id"> _</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> nbhs_norm</span><span class="id"> :=</span> (<span class="id">nbhs_ball_</span><span class="id"> ball_norm</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_nbhs_norm</span><span class="id"> :</span><span class="id"> nbhs_norm</span><span class="id"> =</span><span class="id"> nbhs</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ball_normE</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> -filter_from_ballE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_normP</span><span class="id"> x</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>)<span class="id"> :</span> (<span class="id">\near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> &lt;-&gt;</span><span class="id"> nbhs_norm</span><span class="id"> x</span><span class="id"> P</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhs_nbhs_norm</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_le_nbhs_norm</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> @nbhs</span><span class="id"> V</span><span class="id"> _</span><span class="id"> x</span><span class="id"> `=&gt;`</span><span class="id"> nbhs_norm</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> P</span><span class="id"> [e</span><span class="id"> e0</span><span class="id"> subP];</span><span class="id"> apply/nbhs_normP;</span><span class="gallina-kwd"> exists</span><span class="id"> e</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_norm_le_nbhs</span><span class="id"> x</span><span class="id"> :</span><span class="id"> nbhs_norm</span><span class="id"> x</span><span class="id"> `=&gt;`</span><span class="id"> nbhs</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> P</span><span class="id"> /nbhs_normP</span><span class="id"> [e</span><span class="id"> e0</span><span class="id"> Pxe];</span><span class="gallina-kwd"> exists</span><span class="id"> e</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> filter_from_norm_nbhs</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@filter_from</span><span class="id"> R</span><span class="id"> _</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> x]</span> (<span class="id">ball_norm</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> nbhs</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -nbhs_nbhs_norm</span><span class="id"> ball_normE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_normE</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs_norm</span><span class="id"> x</span><span class="id"> P</span><span class="id"> =</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhs_nbhs_norm</span><span class="id"> near_simpl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> filter_from_normE</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@filter_from</span><span class="id"> R</span><span class="id"> _</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> x]</span> (<span class="id">ball_norm</span><span class="id"> x</span>)<span class="id"> P</span><span class="id"> =</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> filter_from_norm_nbhs</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_nbhs_norm</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> nbhs_norm</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> nbhs_normE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_norm_ball_norm</span><span class="id"> x</span> (<span class="id">e</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs_norm</span><span class="id"> x</span> (<span class="id">ball_norm</span><span class="id"> x</span><span class="id"> e%:num</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ball_normE;</span><span class="gallina-kwd"> exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> /=</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_ball_norm</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">eps</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span>)<span class="id"> :</span><span class="id"> nbhs</span><span class="id"> x</span> (<span class="id">ball_norm</span><span class="id"> x</span><span class="id"> eps%:num</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> rewrite</span><span class="id"> -nbhs_nbhs_norm;</span><span class="id"> apply:</span><span class="id"> nbhs_norm_ball_norm</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_norm_dec</span><span class="id"> x</span><span class="id"> y</span> (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> {ball_norm</span><span class="id"> x</span><span class="id"> e</span><span class="id"> y}</span><span class="id"> +</span><span class="id"> {~</span><span class="id"> ball_norm</span><span class="id"> x</span><span class="id"> e</span><span class="id"> y}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> pselect</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_norm_sym</span><span class="id"> x</span><span class="id"> y</span> (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> ball_norm</span><span class="id"> x</span><span class="id"> e</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> ball_norm</span><span class="id"> y</span><span class="id"> e</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /ball_norm/=</span><span class="id"> -opprB</span><span class="id"> normrN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_norm_le</span><span class="id"> x</span> (<span class="id">e1</span><span class="id"> e2</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">e1</span><span class="id"> &lt;=</span><span class="id"> e2</span><span class="id"> -&gt;</span><span class="id"> ball_norm</span><span class="id"> x</span><span class="id"> e1</span><span class="id"> `&lt;=`</span><span class="id"> ball_norm</span><span class="id"> x</span><span class="id"> e2</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> e1e2</span><span class="id"> y</span><span class="id"> /lt_le_trans;</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> nbhs_simpl</span><span class="id"> :=</span> (<span class="id">nbhs_simpl,@nbhs_nbhs_norm,@filter_from_norm_nbhs</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> fcvgrPdist_lt</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> V}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y'</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> y'|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -filter_fromP</span><span class="id"> /=</span><span class="id"> !nbhs_simpl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrPdist_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> f</span><span class="id"> t|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> fcvgrPdist_lt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrPdistC_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgrPdist_lt;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> distrC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_dist_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> eps</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> f</span><span class="id"> t|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvgrPdist_lt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_distC_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> eps</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvgrPdistC_lt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_dist_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> eps</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> f</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> ltW//;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_distC_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> eps</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> ltW//;</span><span class="id"> apply:</span><span class="id"> cvgr_distC_lt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_norm0P</span><span class="id"> {P</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> Prop}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> 0,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="id">filter_from</span><span class="id"> [set</span><span class="id"> e</span><span class="id"> |</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e]</span> (<span class="gallina-kwd">fun</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> `|y|</span><span class="id"> &lt;</span><span class="id"> e]</span>)<span class="id"> P</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nbhs_normP;</span><span class="id"> split=&gt;</span><span class="id"> -[/=</span><span class="id"> e</span><span class="id"> e0</span><span class="id"> Pe];</span><br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> y</span><span class="id"> /=;</span><span class="id"> have</span><span class="id"> /=</span><span class="id"> :=</span><span class="id"> Pe</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> subr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr0Pnorm_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgrPdistC_lt;</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> do</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> subr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr0_norm_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> eps</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvgr0Pnorm_lt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr0_norm_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> eps</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> ltW//;</span><span class="id"> apply:</span><span class="id"> cvgr0_norm_lt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs0_lt</span><span class="id"> e</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>)<span class="id">,</span><span class="id"> `|x|</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgr0_norm_lt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dnbhs0_lt</span><span class="id"> e</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>)<span class="id">^',</span><span class="id"> `|x|</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> e_gt0;</span><span class="id"> apply:</span><span class="id"> cvg_within;</span><span class="id"> apply:</span><span class="id"> nbhs0_lt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs0_le</span><span class="id"> e</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>)<span class="id">,</span><span class="id"> `|x|</span><span class="id"> &lt;=</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgr0_norm_le</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dnbhs0_le</span><span class="id"> e</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>)<span class="id">^',</span><span class="id"> `|x|</span><span class="id"> &lt;=</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> e_gt0;</span><span class="id"> apply:</span><span class="id"> cvg_within;</span><span class="id"> apply:</span><span class="id"> nbhs0_le</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_norm_ball</span><span class="id"> x</span> (<span class="id">eps</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span>)<span class="id"> :</span><span class="id"> nbhs_norm</span><span class="id"> x</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> eps%:num</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhs_nbhs_norm;</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhsDl</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> V</span>) (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> z</span><span class="id"> \near</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> y</span>)<span class="id">,</span><span class="id"> P</span><span class="id"> z</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">\near</span><span class="id"> x,</span><span class="id"> P</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> y</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> /nbhs_normP[_/posnumP[e]/=</span><span class="id"> Px];</span><span class="id"> apply/nbhs_normP;</span><span class="gallina-kwd"> exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> z</span><span class="id"> /=</span><span class="id"> xze;</span><span class="id"> apply:</span><span class="id"> Px;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> [z</span><span class="id"> +</span><span class="id"> y]addrC</span><span class="id"> addrKA</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> z</span><span class="id"> /=</span><span class="id"> xyz;</span><span class="id"> rewrite</span><span class="id"> -[z]</span>(<span class="id">addrNK</span><span class="id"> y</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> Px;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprB</span><span class="id"> addrA</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhsDr</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> V</span>)<span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> z</span><span class="id"> \near</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> y</span>)<span class="id">,</span><span class="id"> P</span><span class="id"> z</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">\near</span><span class="id"> y,</span><span class="id"> P</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> y</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> addrC</span><span class="id"> nbhsDl</span><span class="id"> -propeqE;</span><span class="id"> apply:</span><span class="id"> eq_near</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> addrC</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs0P</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> V</span>)<span class="id"> x</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">\forall</span><span class="id"> e</span><span class="id"> \near</span><span class="id"> 0,</span><span class="id"> P</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> e</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -nbhsDr</span><span class="id"> addr0</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> PseudoNormedZmod_numDomainType</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Resolve</span><span class="id"> normr_ge0</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_dist_lt</span><span class="id"> {_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_distC_lt</span><span class="id"> {_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_dist_le</span><span class="id"> {_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_distC_le</span><span class="id"> {_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr0_norm_lt</span><span class="id"> {_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr0_norm_le</span><span class="id"> {_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|_</span><span class="id"> -</span><span class="id"> ?x|</span><span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr_dist_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|?x</span><span class="id"> -</span><span class="id"> _|</span><span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr_distC_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|?x|</span><span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr0_norm_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|_</span><span class="id"> -</span><span class="id"> ?x|</span><span class="id"> &lt;=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr_dist_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|?x</span><span class="id"> -</span><span class="id"> _|</span><span class="id"> &lt;=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr_distC_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|?x|</span><span class="id"> &lt;=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr0_norm_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;use `cvgrPdist_lt` or a variation instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvg_distP</span><span class="id"> :=</span><span class="id"> fcvgrPdist_lt</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> nbhs_lt_le</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> x</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_lt</span><span class="id"> x</span><span class="id"> z</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> z</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> xz;</span><span class="id"> near=&gt;</span><span class="id"> y</span>.<br/>
<span class="id">rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[&lt;-//|]</span>.<br/>
<span class="id">near:</span><span class="id"> y;</span><span class="gallina-kwd"> exists</span> (<span class="id">z</span><span class="id"> -</span><span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> y/=</span><span class="id"> /[swap]</span><span class="id"> xy;</span><span class="id"> rewrite</span><span class="id"> ltr0_norm</span><span class="id"> ?subr_lt0//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprD</span><span class="id"> addrC</span><span class="id"> ltrBlDr</span><span class="id"> subrK</span><span class="id"> opprK</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_le</span><span class="id"> x</span><span class="id"> z</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> z</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> y</span><span class="id"> &lt;=</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> xz;</span><span class="id"> apply:</span><span class="id"> filterS</span> (<span class="id">nbhs_lt</span><span class="id"> xz</span>)<span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /[apply]</span><span class="id"> /ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> nbhs_lt_le</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> open_closed_sets</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realFieldType</span>.<br/>
<br/>
<div class="doc">Some open sets of R </div>
<span class="vernacular">Lemma</span><span class="id"> open_lt</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R|</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> y]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> -subr_gt0</span><span class="id"> =&gt;</span><span class="id"> yDx_gt0</span>.<span class="gallina-kwd"> exists</span> (<span class="id">y</span><span class="id"> -</span><span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> z</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ltr_distlC</span><span class="id"> addrCA</span><span class="id"> subrr</span><span class="id"> addr0</span><span class="id"> =&gt;</span><span class="id"> /andP[]</span>.<br/>
Qed.</div></details>
<span class="vernacular">Hint</span><span class="id"> Resolve</span><span class="id"> open_lt</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_gt</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &gt;</span><span class="id"> y]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> -subr_gt0</span><span class="id"> =&gt;</span><span class="id"> xDy_gt0;</span><span class="gallina-kwd"> exists</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> y</span>)<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> z</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ltr_distlC</span><span class="id"> subKr</span><span class="id"> =&gt;</span><span class="id"> /andP[]</span>.<br/>
Qed.</div></details>
<span class="vernacular">Hint</span><span class="id"> Resolve</span><span class="id"> open_gt</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_neq</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> x</span><span class="id"> !=</span><span class="id"> y]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> mkset</span><span class="id"> _</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> y]</span><span class="id"> `|`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &gt;</span><span class="id"> y]</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> openU</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> eq_le</span><span class="id"> negb_and</span><span class="id"> -!ltNge</span><span class="id"> orbC;</span><span class="id"> symmetry;</span><span class="id"> apply</span> (<span class="id">rwP</span><span class="id"> orP</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interval_open</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> ~~</span><span class="id"> bound_side</span><span class="id"> true</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> ~~</span><span class="id"> bound_side</span><span class="id"> false</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">open</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R^o</span><span class="id"> |</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> Interval</span><span class="id"> a</span><span class="id"> b]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move:</span><span class="id"> a</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="id"> [[]a|[]]</span><span class="id"> [[]b|[]]//</span><span class="id"> _</span><span class="id"> _</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> a</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> b]</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> a</span><span class="id"> &lt;</span><span class="id"> x]</span><span class="id"> `&amp;`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> b]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> r;</span><span class="id"> rewrite</span><span class="id"> /mkset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [/andP[?</span><span class="id"> ?]</span><span class="id"> //|[-&gt;</span><span class="id"> -&gt;]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply</span><span class="id"> openI;</span><span class="id"> [exact:</span><span class="id"> open_gt</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> open_lt]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> under</span><span class="id"> eq_set</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> itv_ge//</span><span class="id"> inE</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> under</span><span class="id"> eq_set</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> andbT/=;</span><span class="id"> exact:</span><span class="id"> open_gt</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> open_lt</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> mkset</span><span class="id"> _</span><span class="id"> =</span><span class="id"> setT</span>)<span class="id">;</span><span class="id"> [exact:</span><span class="id"> openT</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> predeqE]</span>.<br/>
Qed.</div></details>
<br/>
<div class="doc">Some closed sets of R </div>
<span class="vernacular">Lemma</span><span class="id"> closed_le</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> closed</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> y]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> mkset</span><span class="id"> _</span><span class="id"> =</span><span class="id"> ~`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &gt;</span><span class="id"> y]</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open_closedC</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> leNgt;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> /negP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ge</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> closed</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;=</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> mkset</span><span class="id"> _</span><span class="id"> =</span><span class="id"> ~`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> y]</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open_closedC</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> leNgt;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> /negP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_eq</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> closed</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> closed</span><span class="id"> X]</span>(_<span class="id"> :</span> (<span class="id">eq^~</span><span class="id"> _</span>)<span class="id"> =</span><span class="id"> ~`</span> (<span class="id">xpredC</span> (<span class="id">eq_op^~</span><span class="id"> y</span>))).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> open_closedC;</span><span class="id"> exact:</span><span class="id"> open_neq</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> /setC</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span> (<span class="id">rwP</span><span class="id"> eqP</span>)<span class="id">;</span><span class="id"> case:</span><span class="id"> eqP;</span><span class="id"> split</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interval_closed</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> ~~</span><span class="id"> bound_side</span><span class="id"> false</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> ~~</span><span class="id"> bound_side</span><span class="id"> true</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">closed</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R^o</span><span class="id"> |</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> Interval</span><span class="id"> a</span><span class="id"> b]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move:</span><span class="id"> a</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="id"> [[]a|[]]</span><span class="id"> [[]b|[]]//</span><span class="id"> _</span><span class="id"> _;</span><br/>
&nbsp;&nbsp;<span class="id">do</span><span class="id"> ?by</span><span class="id"> under</span><span class="id"> eq_set</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> itv_ge//</span><span class="id"> inE</span><span class="id"> falseE;</span><span class="id"> apply:</span><span class="id"> closed0</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> `[a,</span><span class="id"> b]%classic</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &gt;=</span><span class="id"> a]</span><span class="id"> `&amp;`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> b]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv/=;</span><span class="id"> split=&gt;</span><span class="id"> [/andP[]|[-&gt;]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply</span><span class="id"> closedI;</span><span class="id"> [exact:</span><span class="id"> closed_ge</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> closed_le]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> under</span><span class="id"> eq_set</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> andbT/=;</span><span class="id"> exact:</span><span class="id"> closed_ge</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> closed_le</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> open_closed_sets</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">open</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> now</span><span class="id"> apply:</span><span class="id"> open_gt</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">open</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> now</span><span class="id"> apply:</span><span class="id"> open_lt</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">open</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> now</span><span class="id"> apply:</span><span class="id"> open_neq</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">closed</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> now</span><span class="id"> apply:</span><span class="id"> closed_ge</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">closed</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> now</span><span class="id"> apply:</span><span class="id"> closed_le</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">closed</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> now</span><span class="id"> apply:</span><span class="id"> closed_eq</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> at_left_right</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> numFieldType</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> at_left</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :=</span><span class="id"> within</span> (<span class="gallina-kwd">fun</span><span class="id"> u</span><span class="id"> =&gt;</span><span class="id"> u</span><span class="id"> &lt;</span><span class="id"> x</span>) (<span class="id">nbhs</span><span class="id"> x</span>).<br/>
<span class="vernacular">Definition</span><span class="id"> at_right</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :=</span><span class="id"> within</span> (<span class="gallina-kwd">fun</span><span class="id"> u</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> u</span>) (<span class="id">nbhs</span><span class="id"> x</span>).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span> <span class="id">&quot;x ^'-&quot;</span><span class="id"> :=</span> (<span class="id">at_left</span><span class="id"> x</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span> <span class="id">&quot;x ^'+&quot;</span><span class="id"> :=</span> (<span class="id">at_right</span><span class="id"> x</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> at_right_proper_filter</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> x^'+</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span><span class="id"> Build_ProperFilter</span><span class="id"> =&gt;</span><span class="id"> -[_/posnumP[d]</span><span class="id"> /</span>(_ (<span class="id">x</span><span class="id"> +</span><span class="id"> d%:num</span><span class="id"> /</span><span class="id"> 2</span>))<span class="id">]</span>.<br/>
<span class="id">apply;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprD</span><span class="id"> addNKr</span><span class="id"> normrN</span><span class="id"> ger0_norm//</span><span class="id"> gtr_pMr//</span><span class="id"> invf_lt1//</span><span class="id"> ltr1n</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">Global</span><span class="vernacular"> Instance</span><span class="id"> at_left_proper_filter</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> x^'-</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span><span class="id"> Build_ProperFilter</span><span class="id"> =&gt;</span><span class="id"> -[_</span><span class="id"> /posnumP[d]</span><span class="id"> /</span>(_ (<span class="id">x</span><span class="id"> -</span><span class="id"> d%:num</span><span class="id"> /</span><span class="id"> 2</span>))<span class="id">]</span>.<br/>
<span class="id">apply;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> gtrBl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprB</span><span class="id"> addrC</span><span class="id"> subrK</span><span class="id"> ger0_norm//</span><span class="id"> gtr_pMr//</span><span class="id"> invf_lt1//</span><span class="id"> ltr1n</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_right0P</span><span class="id"> x</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'+,</span><span class="id"> P</span><span class="id"> y</span>)<span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> e</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> P</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> e</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> !near_withinE</span><span class="id"> !near_simpl</span><span class="id"> nbhs0P</span><span class="id"> -propeqE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">@eq_near</span><span class="id"> _</span> (<span class="id">nbhs</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> R</span>)))<span class="id"> =&gt;</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_left0P</span><span class="id"> x</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'-,</span><span class="id"> P</span><span class="id"> y</span>)<span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> e</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> P</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> e</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> !near_withinE</span><span class="id"> !near_simpl</span><span class="id"> nbhs0P;</span><span class="id"> split=&gt;</span><span class="id"> Px</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -oppr0</span><span class="id"> nearN;</span><span class="id"> near=&gt;</span><span class="id"> e;</span><span class="id"> rewrite</span><span class="id"> ltrN2</span><span class="id"> opprK</span><span class="id"> =&gt;</span><span class="id"> e_lt0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">near</span><span class="id"> Px</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> gtrDl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -oppr0</span><span class="id"> nearN;</span><span class="id"> near=&gt;</span><span class="id"> e;</span><span class="id"> rewrite</span><span class="id"> gtrDl</span><span class="id"> oppr_lt0;</span><span class="id"> apply:</span> (<span class="id">near</span><span class="id"> Px</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_right_gt</span><span class="id"> x</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'+,</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> near_withinE;</span><span class="id"> apply:</span><span class="id"> nearW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_left_lt</span><span class="id"> x</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'-,</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> near_withinE;</span><span class="id"> apply:</span><span class="id"> nearW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_right_neq</span><span class="id"> x</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'+,</span><span class="id"> y</span><span class="id"> !=</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> near_withinE;</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /gt_eqF-&gt;</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_left_neq</span><span class="id"> x</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'-,</span><span class="id"> y</span><span class="id"> !=</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> near_withinE;</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /lt_eqF-&gt;</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_right_ge</span><span class="id"> x</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'+,</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> near_withinE;</span><span class="id"> apply:</span><span class="id"> nearW;</span><span class="id"> apply/ltW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_left_le</span><span class="id"> x</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'-,</span><span class="id"> y</span><span class="id"> &lt;=</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> near_withinE;</span><span class="id"> apply:</span><span class="id"> nearW</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply/ltW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_right_lt</span><span class="id"> x</span><span class="id"> z</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> z</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'+,</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> xz;</span><span class="gallina-kwd"> exists</span> (<span class="id">z</span><span class="id"> -</span><span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> y</span><span class="id"> /=</span><span class="id"> +</span><span class="id"> xy;</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> ?ger0_norm</span><span class="id"> ?subr_ge0</span><span class="id"> 1?ltW//</span><span class="id"> ltrD2r</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_right_ltW</span><span class="id"> x</span><span class="id"> z</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> z</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> nbhs</span><span class="id"> x^'+,</span><span class="id"> y</span><span class="id"> &lt;=</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> xz;</span><span class="id"> near=&gt;</span><span class="id"> y;</span><span class="id"> apply/ltW;</span><span class="id"> near:</span><span class="id"> y;</span><span class="id"> exact:</span><span class="id"> nbhs_right_lt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_right_ltDr</span><span class="id"> x</span><span class="id"> e</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x</span><span class="id"> ^'+,</span><span class="id"> y</span><span class="id"> -</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> e0;</span><span class="id"> near=&gt;</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> ltrBlDr;</span><span class="id"> near:</span><span class="id"> y</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nbhs_right_lt;</span><span class="id"> rewrite</span><span class="id"> ltrDr</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_right_le</span><span class="id"> x</span><span class="id"> z</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> z</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'+,</span><span class="id"> y</span><span class="id"> &lt;=</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> xz;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply/ltW;</span><span class="id"> apply:</span><span class="id"> nbhs_right_lt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_left_gt</span><span class="id"> x</span><span class="id"> z</span><span class="id"> :</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'-,</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> xz;</span><span class="id"> rewrite</span><span class="id"> nbhs_left0P;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -ltrN2</span><span class="id"> opprB</span><span class="id"> ltrBlDl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nbhs_right_lt;</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_left_ge</span><span class="id"> x</span><span class="id"> z</span><span class="id"> :</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'-,</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> xz;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply/ltW;</span><span class="id"> apply:</span><span class="id"> nbhs_left_gt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_left_ltBl</span><span class="id"> x</span><span class="id"> e</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x^'-,</span><span class="id"> x</span><span class="id"> -</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> e0;</span><span class="id"> near=&gt;</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> -ltrBrDl</span><span class="id"> ltrNl</span><span class="id"> opprB;</span><span class="id"> near:</span><span class="id"> y</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> nbhs_left_gt;</span><span class="id"> rewrite</span><span class="id"> ltrBlDr</span><span class="id"> ltrDl</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> withinN</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> a</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">within</span><span class="id"> A</span> (<span class="id">nbhs</span> (<span class="id">-</span><span class="id"> a</span>))<span class="id"> =</span><span class="id"> -</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> within</span> (<span class="id">-%R</span><span class="id"> @`</span><span class="id"> A</span>) (<span class="id">nbhs</span><span class="id"> a</span>)<span class="id">]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> eqEsubset</span><span class="id"> /=;</span><span class="id"> split;</span><span class="id"> move=&gt;</span><span class="id"> E</span><span class="id"> /=</span><span class="id"> [e</span><span class="id"> e0</span><span class="id"> aeE];</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> r</span><span class="id"> are</span><span class="id"> ra;</span><span class="id"> apply:</span><span class="id"> aeE;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> memNE</span><span class="id"> opprK</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprK</span><span class="id"> addrC</span><span class="id"> distrC</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> r</span><span class="id"> aer</span><span class="id"> ar;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">opprK</span><span class="id"> r</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> aeE;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -memNE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprK</span><span class="id"> -normrN</span><span class="id"> opprD</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> fun_predC</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> T</span>) (<span class="id">p</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> involutive</span><span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">[set</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> p]</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> p</span><span class="id"> \o</span><span class="id"> f]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> fi;</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> _/=</span><span class="id"> [y</span><span class="id"> hy</span><span class="id"> &lt;-];</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">f</span><span class="id"> y</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> fi</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> at_rightN</span><span class="id"> a</span><span class="id"> :</span> (<span class="id">-</span><span class="id"> a</span>)<span class="id">^'+</span><span class="id"> =</span><span class="id"> -%R</span><span class="id"> @</span><span class="id"> a^'-</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /at_right</span><span class="id"> withinN</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> within</span><span class="id"> X</span><span class="id"> _]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> u</span><span class="id"> |</span><span class="id"> u</span><span class="id"> &lt;</span><span class="id"> a]</span>)<span class="id">//</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@fun_predC</span><span class="id"> _</span><span class="id"> -%R</span>)<span class="id">/=;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> opprK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> image_id;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> ltrNl</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> at_leftN</span><span class="id"> a</span><span class="id"> :</span> (<span class="id">-</span><span class="id"> a</span>)<span class="id">^'-</span><span class="id"> =</span><span class="id"> -%R</span><span class="id"> @</span><span class="id"> a^'+</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /at_left</span><span class="id"> withinN</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> within</span><span class="id"> X</span><span class="id"> _]</span>(_<span class="id"> :</span><span class="id"> _</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> u</span><span class="id"> |</span><span class="id"> a</span><span class="id"> &lt;</span><span class="id"> u]</span>)<span class="id">//</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@fun_predC</span><span class="id"> _</span><span class="id"> -%R</span>)<span class="id">/=;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> opprK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> image_id;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> ltrNl</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> not_near_at_rightP</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">~</span> (<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> p^'+,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> e</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="gallina-kwd"> exists2</span><span class="id"> x,</span><span class="id"> p</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> p</span><span class="id"> +</span><span class="id"> e%:num</span><span class="id"> &amp;</span><span class="id"> ~</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> pPf</span><span class="id"> e;</span><span class="id"> apply:</span><span class="id"> contrapT</span><span class="id"> =&gt;</span><span class="id"> /forallPNP</span><span class="id"> peP;</span><span class="id"> apply:</span><span class="id"> pPf;</span><span class="id"> near=&gt;</span><span class="id"> t</span>.<br/>
<span class="id">apply:</span><span class="id"> contrapT;</span><span class="id"> apply:</span><span class="id"> peP;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> t;</span><span class="id"> exact:</span><span class="id"> nbhs_right_gt</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> t;</span><span class="id"> apply:</span><span class="id"> nbhs_right_lt;</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> not_near_at_leftP</span> (<span class="id">p</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">~</span> (<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> p^'-,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> e</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="gallina-kwd"> exists2</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R,</span><span class="id"> p</span><span class="id"> -</span><span class="id"> e%:num</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> p</span><span class="id"> &amp;</span><span class="id"> ~</span><span class="id"> P</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> pPf</span><span class="id"> e;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> @not_near_at_rightP</span> (<span class="id">-</span><span class="id"> p</span>) (<span class="id">P</span><span class="id"> \o</span><span class="id"> -%R</span>).<br/>
<span class="id">rewrite</span><span class="id"> at_rightN</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> e</span>)<span class="id">[|x</span><span class="id"> pxe</span><span class="id"> Pfx];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> filterN</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ltrNl</span><span class="id"> ltrNr</span><span class="id"> opprB</span><span class="id"> addrC</span><span class="id"> andbC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> at_left_right</span>.<br/>
<span class="id">#[global]</span><span class="id"> Typeclasses</span><span class="vernacular"> Opaque</span><span class="id"> at_left</span><span class="id"> at_right</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;x ^'-&quot;</span><span class="id"> :=</span> (<span class="id">at_left</span><span class="id"> x</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;x ^'+&quot;</span><span class="id"> :=</span> (<span class="id">at_right</span><span class="id"> x</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">Filter</span> (<span class="id">nbhs</span><span class="id"> _^'+</span>))<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">apply:</span><span class="id"> at_right_proper_filter</span>)<span class="id"> :</span><span class="id"> typeclass_instances</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">Filter</span> (<span class="id">nbhs</span><span class="id"> _^'-</span>))<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">apply:</span><span class="id"> at_left_proper_filter</span>)<span class="id"> :</span><span class="id"> typeclass_instances</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_at_leftNP</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> a</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> a^'-</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> \o</span><span class="id"> -%R</span><span class="id"> @</span> (<span class="id">-</span><span class="id"> a</span>)<span class="id">^'+</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> at_rightN</span><span class="id"> -?fmap_comp;</span><span class="id"> under</span><span class="id"> [_</span><span class="id"> \o</span><span class="id"> _]eq_fun</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_at_rightNP</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> a</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> a^'+</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> \o</span><span class="id"> -%R</span><span class="id"> @</span> (<span class="id">-</span><span class="id"> a</span>)<span class="id">^'-</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> at_leftN</span><span class="id"> -?fmap_comp;</span><span class="id"> under</span><span class="id"> [_</span><span class="id"> \o</span><span class="id"> _]eq_fun</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgyNP</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> T</span>) (<span class="id">l</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> -oo]</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> &lt;-&gt;</span> (<span class="id">f</span><span class="id"> \o</span><span class="id"> -%R</span>)<span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> +oo]</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> f_opp</span><span class="id"> :</span><span class="id"> f</span><span class="id"> =1</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span> (<span class="id">f</span><span class="id"> \o</span><span class="id"> -%R</span>) (<span class="id">-</span><span class="id"> x</span>))<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /comp</span><span class="id"> opprK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">eq_cvg</span><span class="id"> -oo</span><span class="id"> _</span><span class="id"> f_opp</span>)<span class="id"> fmap_comp</span><span class="id"> ninftyN</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> open_itv_subset</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_itvoo_subset</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">open</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> r</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> `]x</span><span class="id"> -</span><span class="id"> r,</span><span class="id"> x</span><span class="id"> +</span><span class="id"> r[</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /[apply]</span><span class="id"> -[]</span><span class="id"> _/posnumP[r]</span><span class="id"> /subset_ball_prop_in_itv</span><span class="id"> xrA</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> r%:num</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> k;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> distrC</span><span class="id"> subr0</span><span class="id"> set_itvoo</span><span class="id"> =&gt;</span><span class="id"> /ltr_normlW</span><span class="id"> kr</span><span class="id"> k0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/</span>(<span class="id">subset_trans</span><span class="id"> _</span><span class="id"> xrA</span>)<span class="id">/subset_itvW;</span><br/>
&nbsp;&nbsp;<span class="id">[rewrite</span><span class="id"> lerB//;</span><span class="id"> exact:</span><span class="id"> ltW</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> lerD//;</span><span class="id"> exact:</span><span class="id"> ltW]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_itvcc_subset</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">open</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> r</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> `[x</span><span class="id"> -</span><span class="id"> r,</span><span class="id"> x</span><span class="id"> +</span><span class="id"> r]</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /[apply]</span><span class="id"> -[]</span><span class="id"> _/posnumP[r]</span>.<br/>
<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> r%:num</span><span class="id"> =</span><span class="id"> 2</span><span class="id"> *</span> (<span class="id">r%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> mulrCA</span><span class="id"> divff//</span><span class="id"> mulr1</span>.<br/>
<span class="id">move/subset_ball_prop_in_itvcc</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> xrA;</span><span class="gallina-kwd"> exists</span> (<span class="id">r%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> k</span>.<br/>
<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> distrC</span><span class="id"> subr0</span><span class="id"> set_itvcc</span><span class="id"> =&gt;</span><span class="id"> /ltr_normlW</span><span class="id"> kr</span><span class="id"> k0</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> z</span><span class="id"> /andP</span><span class="id"> [xkz</span><span class="id"> zxk];</span><span class="id"> apply:</span><span class="id"> xrA</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> in_itv/=;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_trans</span><span class="id"> _</span><span class="id"> xkz</span>)<span class="id">//</span><span class="id"> lerB//</span><span class="id"> ltW</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_trans</span><span class="id"> zxk</span>)<span class="id">//</span><span class="id"> lerD//</span><span class="id"> ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> open_itv_subset</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> at_left_right_topologicalType</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_at_right_filter</span><span class="id"> :</span><span class="id"> f</span><span class="id"> z</span><span class="id"> @[z</span><span class="id"> --&gt;</span><span class="id"> x]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> z</span><span class="id"> @[z</span><span class="id"> --&gt;</span><span class="id"> x^'+]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">@cvg_within_filter</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs</span><span class="id"> x</span>)). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_at_left_filter</span><span class="id"> :</span><span class="id"> f</span><span class="id"> z</span><span class="id"> @[z</span><span class="id"> --&gt;</span><span class="id"> x]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> z</span><span class="id"> @[z</span><span class="id"> --&gt;</span><span class="id"> x^'-]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">@cvg_within_filter</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs</span><span class="id"> x</span>)). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_at_right_within</span><span class="id"> :</span><span class="id"> f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> x^'+]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> within</span> (<span class="gallina-kwd">fun</span><span class="id"> u</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> u</span>) (<span class="id">nbhs</span><span class="id"> x</span>)<span class="id">]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> fxr</span><span class="id"> U</span><span class="id"> Ux;</span><span class="id"> rewrite</span><span class="id"> ?near_simpl</span><span class="id"> ?near_withinE;</span><span class="id"> near=&gt;</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/predU1P</span><span class="id"> =&gt;</span><span class="id"> [&lt;-|];</span><span class="id"> [exact:</span><span class="id"> nbhs_singleton</span><span class="id"> |</span><span class="id"> near:</span><span class="id"> z;</span><span class="id"> exact:</span><span class="id"> fxr]</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_at_left_within</span><span class="id"> :</span><span class="id"> f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> x^'-]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> within</span> (<span class="gallina-kwd">fun</span><span class="id"> u</span><span class="id"> =&gt;</span><span class="id"> u</span><span class="id"> &lt;=</span><span class="id"> x</span>) (<span class="id">nbhs</span><span class="id"> x</span>)<span class="id">]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> fxr</span><span class="id"> U</span><span class="id"> Ux;</span><span class="id"> rewrite</span><span class="id"> ?near_simpl</span><span class="id"> ?near_withinE;</span><span class="id"> near=&gt;</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/predU1P</span><span class="id"> =&gt;</span><span class="id"> [-&gt;|];</span><span class="id"> [exact:</span><span class="id"> nbhs_singleton</span><span class="id"> |</span><span class="id"> near:</span><span class="id"> z;</span><span class="id"> exact:</span><span class="id"> fxr]</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> at_left_right_topologicalType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> at_left_right_pmNormedZmod</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhsr0P</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> V</span>)<span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> y</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> e</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="gallina-kwd"> forall</span><span class="id"> y,</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;=</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> P</span><span class="id"> y</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nbhs0P/=</span><span class="id"> near_withinE/=</span><span class="id"> !near_simpl</span>.<br/>
<span class="id">split=&gt;</span><span class="id"> /nbhs_norm0P[/=</span><span class="id"> _/posnumP[e]</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id"> Px];</span><span class="id"> apply/nbhs_norm0P</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> r</span><span class="id"> /=</span><span class="id"> re</span><span class="id"> yr</span><span class="id"> y</span><span class="id"> xyr;</span><span class="id"> rewrite</span><span class="id"> -[y]</span>(<span class="id">addrNK</span><span class="id"> x</span>)<span class="id"> addrC</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> Px;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> distrC</span> (<span class="id">le_lt_trans</span><span class="id"> _</span><span class="id"> re</span>)<span class="id">//</span><span class="id"> gtr0_norm</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">e%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> r</span><span class="id"> /=</span><span class="id"> re;</span><span class="id"> apply:</span> (<span class="id">Px</span> (<span class="id">e%:num</span><span class="id"> /</span><span class="id"> 2</span>))<span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gtr0_norm//</span><span class="id"> ltr_pdivrMr//</span><span class="id"> ltr_pMr//</span><span class="id"> ltr1n</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprD</span><span class="id"> addNKr</span><span class="id"> normrN</span><span class="id"> ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgrP</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> V}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> [&lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> --&gt;</span><span class="id"> y;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> eps;</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> eps</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> eps;</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> eps</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> t|</span><span class="id"> &lt;</span><span class="id"> eps]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">tfae;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> *;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_le</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Fy;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply:</span><span class="id"> Fy;</span><span class="id"> apply:</span><span class="id"> nbhs_right_gt</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> Fy;</span><span class="id"> near=&gt;</span><span class="id"> e;</span><span class="id"> near</span> (<span class="id">0:R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> d;</span><span class="id"> near=&gt;</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> d</span>)<span class="id">//;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> near:</span><span class="id"> d</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> d;</span><span class="id"> apply:</span><span class="id"> nbhs_right_lt;</span><span class="id"> near:</span><span class="id"> e;</span><span class="id"> apply:</span><span class="id"> nbhs_right_gt</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> Fy;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e_gt0;</span><span class="id"> near</span> (<span class="id">0:R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> d</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> d</span>)<span class="id">//;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> near:</span><span class="id"> d</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> d;</span><span class="id"> apply:</span><span class="id"> nbhs_right_le</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrPdist_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> f</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgrP</span><span class="id"> _</span><span class="id"> 0</span><span class="id"> 1</span>)<span class="id">%N</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrPdist_ltp</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> eps</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> f</span><span class="id"> t|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgrP</span><span class="id"> _</span><span class="id"> 0</span><span class="id"> 3</span>)<span class="id">%N</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrPdist_lep</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> eps</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> f</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">cvgrP</span><span class="id"> _</span><span class="id"> 0</span><span class="id"> 2</span>)<span class="id">%N</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrPdistC_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> cvgrPdist_le</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> &lt;-&gt;</span><span class="id"> _]eq_forall</span><span class="id"> do</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> distrC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrPdistC_ltp</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> eps</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgrPdist_ltp;</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> distrC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrPdistC_lep</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> eps</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgrPdist_lep;</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> distrC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr0Pnorm_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> cvgrPdistC_le</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> [X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> &lt;-&gt;</span><span class="id"> _]eq_forall</span><span class="id"> do</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> subr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr0Pnorm_ltp</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> eps</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgrPdistC_ltp;</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> subr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr0Pnorm_lep</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="id"> \forall</span><span class="id"> eps</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> cvgrPdistC_lep;</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> subr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_norm_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> u,</span><span class="id"> `|y|</span><span class="id"> &lt;</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &lt;</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Fy</span><span class="id"> z</span><span class="id"> zy;</span><span class="id"> near</span> (<span class="id">0:R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> k;</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> have</span><span class="id"> :</span><span class="id"> `|f</span><span class="id"> x</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> k</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> cvgr_distC_lt</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> near:</span><span class="id"> k;</span><span class="id"> apply:</span><span class="id"> nbhs_right_gt</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /</span>(<span class="id">le_lt_trans</span> (<span class="id">ler_dist_dist</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> /real_ltr_normlW</span>.<br/>
<span class="id">rewrite</span><span class="id"> realB//</span><span class="id"> ltrBlDl</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/lt_le_trans;</span><span class="id"> apply</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -lerBrDl;</span><span class="id"> near:</span><span class="id"> k;</span><span class="id"> apply:</span><span class="id"> nbhs_right_le;</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_norm_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> u,</span><span class="id"> `|y|</span><span class="id"> &lt;</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &lt;=</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> fy</span><span class="id"> u</span><span class="id"> yu;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply/ltW;</span><span class="id"> apply:</span><span class="id"> cvgr_norm_lt</span><span class="id"> yu</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_norm_gt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> u,</span><span class="id"> `|y|</span><span class="id"> &gt;</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &gt;</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Fy</span><span class="id"> z</span><span class="id"> zy;</span><span class="id"> near</span> (<span class="id">0:R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> k;</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> have:</span><span class="id"> `|f</span><span class="id"> x</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> k</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> cvgr_distC_lt</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> near:</span><span class="id"> k;</span><span class="id"> apply:</span><span class="id"> nbhs_right_gt</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /</span>(<span class="id">le_lt_trans</span> (<span class="id">ler_dist_dist</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> distrC</span><span class="id"> =&gt;</span><span class="id"> /real_ltr_normlW</span>.<br/>
<span class="id">rewrite</span><span class="id"> realB//</span><span class="id"> ltrBlDl</span> <span class="id"> -ltrBlDr</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> isT</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span>.<br/>
<span class="id">rewrite</span><span class="id"> lerBrDl</span><span class="id"> -lerBrDr;</span><span class="id"> near:</span><span class="id"> k;</span><span class="id"> apply:</span><span class="id"> nbhs_right_le</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_norm_ge</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> u,</span><span class="id"> `|y|</span><span class="id"> &gt;</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> t|</span><span class="id"> &gt;=</span><span class="id"> u</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> fy</span><span class="id"> u</span><span class="id"> yu;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply/ltW;</span><span class="id"> apply:</span><span class="id"> cvgr_norm_gt</span><span class="id"> yu</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_neq0</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> y</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> !=</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Fy</span><span class="id"> z;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -normr_gt0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">@cvgr_norm_gt</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> y</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> //</span><span class="id"> normr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> at_left_right_pmNormedZmod</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_norm_lt</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_norm_le</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_norm_gt</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_norm_ge</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_neq0</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|_</span><span class="id"> -</span><span class="id"> ?x|</span><span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr_dist_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|?x</span><span class="id"> -</span><span class="id"> _|</span><span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr_distC_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|?x|</span><span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr0_norm_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|_</span><span class="id"> -</span><span class="id"> ?x|</span><span class="id"> &lt;=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr_dist_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|?x</span><span class="id"> -</span><span class="id"> _|</span><span class="id"> &lt;=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr_distC_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">`|?x|</span><span class="id"> &lt;=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> cvgr0_norm_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &lt;</span><span class="id"> ?x</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_right_gt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">?x</span><span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_left_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">?x</span><span class="id"> !=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_right_neq</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">?x</span><span class="id"> !=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_left_neq</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &lt;</span><span class="id"> ?x</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_left_gt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">?x</span><span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_right_lt</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &lt;=</span><span class="id"> ?x</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_right_ge</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">?x</span><span class="id"> &lt;=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_left_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (_<span class="id"> &lt;=</span><span class="id"> ?x</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_right_ge</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">?x</span><span class="id"> &lt;=</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="gallina-kwd"> match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><br/>
&nbsp;&nbsp;<span class="id">H</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \is_near</span><span class="id"> _</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> exact:</span><span class="id"> nbhs_left_le</span><span class="gallina-kwd"> end</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">ProperFilter</span><span class="id"> _^'-</span>)<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">apply:</span><span class="id"> at_left_proper_filter</span>)<span class="id"> :</span><span class="id"> typeclass_instances</span>.<br/>
<span class="id">#[global]</span><span class="vernacular"> Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">ProperFilter</span><span class="id"> _^'+</span>)<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">apply:</span><span class="id"> at_right_proper_filter</span>)<span class="id"> :</span><span class="id"> typeclass_instances</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> at_left_rightR</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> real_cvgr_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">y</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> z,</span><span class="id"> z</span><span class="id"> &gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> t</span><span class="id"> &lt;</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> yr</span><span class="id"> Fy</span><span class="id"> z</span><span class="id"> zy;</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> fxr</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">ltrD2r</span> (<span class="id">-</span><span class="id"> y</span>))<span class="id"> real_ltr_normlW//</span><span class="id"> ?rpredB//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> cvgr_distC_lt</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> real_cvgr_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">y</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span> <span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> z,</span><span class="id"> z</span><span class="id"> &gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> t</span><span class="id"> &lt;=</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /real_cvgr_lt/[apply]</span><span class="id"> +</span><span class="id"> ?</span><span class="id"> z0</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> z0</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /[apply]/ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> real_cvgr_gt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">y</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> z,</span><span class="id"> y</span><span class="id"> &gt;</span><span class="id"> z</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> t</span><span class="id"> &gt;</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> yr</span><span class="id"> Fy</span><span class="id"> z</span><span class="id"> zy;</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> fxr</span>.<br/>
<span class="id">rewrite</span><span class="id"> -ltrN2</span><span class="id"> -</span>(<span class="id">ltrD2l</span><span class="id"> y</span>)<span class="id"> real_ltr_normlW//</span><span class="id"> ?rpredB//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> real_cvgr_ge</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">y</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> z,</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> t</span><span class="id"> &gt;=</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /real_cvgr_gt/[apply]</span><span class="id"> +</span><span class="id"> ?</span><span class="id"> z0</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> z0</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /[apply]/ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> at_left_rightR</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> real_cvgr_le</span><span class="id"> {R</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> real_cvgr_lt</span><span class="id"> {R</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> real_cvgr_ge</span><span class="id"> {R</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> real_cvgr_gt</span><span class="id"> {R</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> realFieldType</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> at_right_in_segment</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> e</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> {in</span><span class="id"> `[x</span><span class="id"> -</span><span class="id"> e,</span><span class="id"> x</span><span class="id"> +</span><span class="id"> e],</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x}</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">\near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nbhsr0P</span><span class="id"> -propeqE;</span><span class="id"> apply:</span><span class="id"> eq_near</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -propeqE;</span><span class="id"> apply:</span><span class="id"> eq_forall</span><span class="id"> =&gt;</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> ler_distlC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_lt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> z,</span><span class="id"> z</span><span class="id"> &gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> &lt;</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Fy</span><span class="id"> z</span><span class="id"> zy;</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">ltrD2r</span> (<span class="id">-</span><span class="id"> y</span>))<span class="id"> ltr_normlW//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> cvgr_distC_lt</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_le</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> z,</span><span class="id"> z</span><span class="id"> &gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> &lt;=</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /cvgr_lt</span><span class="id"> +</span><span class="id"> ?</span><span class="id"> z0</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> z0</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply/ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_gt</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> z,</span><span class="id"> y</span><span class="id"> &gt;</span><span class="id"> z</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> &gt;</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Fy</span><span class="id"> z</span><span class="id"> zy;</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> -ltrN2</span><span class="id"> -</span>(<span class="id">ltrD2l</span><span class="id"> y</span>)<span class="id"> ltr_normlW//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_ge</span><span class="id"> {T}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> z,</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> t</span><span class="id"> &gt;=</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /cvgr_gt</span><span class="id"> +</span><span class="id"> ?</span><span class="id"> z0</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> z0</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply/ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> realFieldType</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_le</span><span class="id"> {R</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_lt</span><span class="id"> {R</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_ge</span><span class="id"> {R</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_gt</span><span class="id"> {R</span><span class="id"> T</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> f}</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> self_sub</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span><span class="id"> *</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> W</span><span class="id"> :=</span><span class="id"> f</span><span class="id"> x</span>.<span class="id">1</span><span class="id"> -</span><span class="id"> f</span><span class="id"> x</span>.<span class="id">2</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> self_sub</span><span class="id"> {K</span><span class="id"> V</span><span class="id"> W}</span><span class="id"> f</span><span class="id"> x</span><span class="id"> /</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> fun1</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span><span class="id"> :=</span><span class="id"> fun=&gt;</span><span class="id"> 1</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> fun1</span><span class="id"> {T</span><span class="id"> K}</span><span class="id"> x</span><span class="id"> /</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> dominated_by</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;(<span class="id">h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> *</span><span class="id"> `|h</span><span class="id"> x|]</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> strictly_dominated_by</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;(<span class="id">h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;</span><span class="id"> k</span><span class="id"> *</span><span class="id"> `|h</span><span class="id"> x|]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_dominatedl</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">K</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">F</span><span class="id"> G</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> F</span><span class="id"> `=&gt;`</span><span class="id"> G</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">@dominated_by</span><span class="id"> T</span><span class="id"> K</span><span class="id"> V</span><span class="id"> W</span><span class="id"> h</span><span class="id"> k</span>)<span class="id">^~</span><span class="id"> G</span><span class="id"> `&lt;=`</span> (<span class="id">dominated_by</span><span class="id"> h</span><span class="id"> k</span>)<span class="id">^~</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> FG</span><span class="id"> f;</span><span class="id"> exact:</span><span class="id"> FG</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_dominatedr</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">K</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>) (<span class="id">FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> `|g</span><span class="id"> x|</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">dominated_by</span><span class="id"> h</span><span class="id"> k</span><span class="id"> g</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> dominated_by</span><span class="id"> h</span><span class="id"> k</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> le_fg;</span><span class="id"> apply:</span><span class="id"> filterS2</span><span class="id"> le_fg</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> le_trans</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dominated_by1</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@dominated_by</span><span class="id"> T</span><span class="id"> K</span><span class="id"> _</span><span class="id"> V</span><span class="id"> fun1</span><span class="id"> =</span><span class="gallina-kwd"> fun</span><span class="id"> k</span><span class="id"> f</span><span class="id"> F</span><span class="id"> =&gt;</span><span class="id"> F</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> k]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> funeq3E</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> congr</span><span class="id"> F;</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x/=;</span><span class="id"> rewrite</span><span class="id"> normr1</span><span class="id"> mulr1</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> strictly_dominated_by1</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@strictly_dominated_by</span><span class="id"> T</span><span class="id"> K</span><span class="id"> _</span><span class="id"> V</span><span class="id"> fun1</span><span class="id"> =</span><span class="gallina-kwd"> fun</span><span class="id"> k</span><span class="id"> f</span><span class="id"> F</span><span class="id"> =&gt;</span><span class="id"> F</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;</span><span class="id"> k]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> funeq3E</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> congr</span><span class="id"> F;</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x/=;</span><span class="id"> rewrite</span><span class="id"> normr1</span><span class="id"> mulr1</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ex_dom_bound</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {PF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}:</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> dominated_by</span><span class="id"> h</span><span class="id"> M</span><span class="id"> f</span><span class="id"> F</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> M,</span><span class="id"> dominated_by</span><span class="id"> h</span><span class="id"> M</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /dominated_by;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [/pinfty_ex_gt0[M</span><span class="id"> M_gt0]|[M]]</span><span class="id"> FM</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> M</span>.<br/>
<span class="id">have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="gallina-kwd">exists</span><span class="id"> x,</span> (<span class="id">h</span><span class="id"> x</span><span class="id"> !=</span><span class="id"> 0</span>)<span class="id"> &amp;&amp;</span> (<span class="id">`|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> M</span><span class="id"> *</span><span class="id"> `|h</span><span class="id"> x|</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -forallNE</span><span class="id"> =&gt;</span><span class="id"> Nex;</span><span class="gallina-kwd"> exists</span><span class="id"> 0;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> k</span><span class="id"> k_gt0;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> FM</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> f_le_Mh</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /negP</span><span class="id"> :=</span><span class="id"> Nex</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> negb_and</span><span class="id"> negbK</span><span class="id"> f_le_Mh</span><span class="id"> orbF</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> h_eq0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> h_eq0</span><span class="id"> normr0</span><span class="id"> !mulr0</span><span class="gallina-kwd"> in</span><span class="id"> f_le_Mh</span><span class="id"> *</span>.<br/>
<span class="id">case</span><span class="id"> =&gt;</span><span class="id"> x0</span><span class="id"> /andP[hx0_neq0]</span><span class="id"> /</span>(<span class="id">le_trans</span> (<span class="id">normr_ge0</span><span class="id"> _</span>))<span class="id"> /ger0_real</span>.<br/>
<span class="id">rewrite</span><span class="id"> realrM</span><span class="id"> //</span><span class="id"> ?normr_eq0//</span><span class="id"> =&gt;</span><span class="id"> M_real</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> M;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> k</span><span class="id"> Mk;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> FM</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /le_trans/=</span><span class="id"> -&gt;//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_wpM2r//</span><span class="id"> ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ex_strict_dom_bound</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {PF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> h</span><span class="id"> x</span><span class="id"> !=</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> dominated_by</span><span class="id"> h</span><span class="id"> M</span><span class="id"> f</span><span class="id"> F</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> M,</span><span class="id"> strictly_dominated_by</span><span class="id"> h</span><span class="id"> M</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> hN0;</span><span class="id"> rewrite</span><span class="id"> ex_dom_bound</span><span class="id"> /dominated_by</span><span class="id"> /strictly_dominated_by</span>.<br/>
<span class="id">split</span><span class="id"> =&gt;</span><span class="id"> -[]</span><span class="id"> M</span><span class="id"> FM;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> M;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> FM</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /ltW</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">M</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> filterS2</span><span class="id"> hN0</span><span class="id"> FM</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> hN0</span><span class="id"> /le_lt_trans/=</span><span class="id"> -&gt;//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltr_pM2r</span><span class="id"> ?normr_gt0//</span><span class="id"> ltrDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> bounded_near</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> F</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> M]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> boundedE</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@bounded_near</span><span class="id"> T</span><span class="id"> K</span><span class="id"> V</span><span class="id"> =</span><span class="gallina-kwd"> fun</span><span class="id"> f</span><span class="id"> F</span><span class="id"> =&gt;</span><span class="id"> \forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> dominated_by</span><span class="id"> fun1</span><span class="id"> M</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> dominated_by1</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_boundedr</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span><span class="id"> G</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> F</span><span class="id"> `=&gt;`</span><span class="id"> G</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">@bounded_near</span><span class="id"> T</span><span class="id"> K</span><span class="id"> V</span>)<span class="id">^~</span><span class="id"> G</span><span class="id"> `&lt;=`</span><span class="id"> bounded_near^~</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> FG</span><span class="id"> f;</span><span class="id"> rewrite</span><span class="id"> /bounded_near;</span><span class="id"> apply:</span><span class="id"> filterS=&gt;</span><span class="id"> M;</span><span class="id"> apply:</span><span class="id"> FG</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_boundedl</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>) (<span class="id">FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F</span>)<span class="id"> :</span><br/>
&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> `|g</span><span class="id"> x|</span>)<span class="id"> -&gt;</span> <span class="id"> bounded_near</span><span class="id"> g</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> bounded_near</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> le_fg;</span><span class="id"> rewrite</span><span class="id"> /bounded_near;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> M</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterS2</span><span class="id"> le_fg</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> le_trans</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ex_bound</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {PF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}:</span><br/>
&nbsp;&nbsp;<span class="id">bounded_near</span><span class="id"> f</span><span class="id"> F</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> M,</span><span class="id"> F</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> M]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> boundedE</span><span class="id"> ex_dom_bound</span><span class="id"> dominated_by1</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ex_strict_bound</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {PF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}:</span><br/>
&nbsp;&nbsp;<span class="id">bounded_near</span><span class="id"> f</span><span class="id"> F</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> M,</span><span class="id"> F</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;</span><span class="id"> M]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> boundedE</span><span class="id"> ex_strict_dom_bound</span><span class="id"> ?strictly_dominated_by1//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> oner_eq0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ex_strict_bound_gt0</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {PF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}:</span><br/>
&nbsp;&nbsp;<span class="id">bounded_near</span><span class="id"> f</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> M,</span><span class="id"> M</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> &amp;</span><span class="id"> F</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;</span><span class="id"> M]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /pinfty_ex_gt0[M</span><span class="id"> M_gt0</span><span class="id"> FM];</span><span class="gallina-kwd"> exists</span> (<span class="id">M</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?addr_gt0//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> FM</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /le_lt_trans/=</span><span class="id"> -&gt;//;</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;[ 'bounded' E | x 'in' A ]&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">bounded_near</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> E</span>) (<span class="id">globally</span><span class="id"> A</span>)).<br/>
<span class="vernacular">Notation</span><span class="id"> bounded_set</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> |</span><span class="id"> [bounded</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> A]]</span>.<br/>
<span class="vernacular">Notation</span><span class="id"> bounded_fun</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> f</span><span class="id"> |</span><span class="id"> [bounded</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> setT]]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_fun_has_ubound</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_fun</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span> (<span class="id">range</span><span class="id"> a</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [M</span><span class="id"> [Mreal]]/</span>(_ (<span class="id">`|M|</span><span class="id"> +</span><span class="id"> 1</span>)).<br/>
<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_norm</span><span class="id"> _</span>))<span class="id"> ?ltrDl//</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> erefl</span>)<span class="id"> aM</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">`|M|</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span> (<span class="id">le_trans</span> (<span class="id">ler_norm</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> aM</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_funN</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_fun</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> bounded_fun</span> (<span class="id">-</span><span class="id"> a</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [M</span><span class="id"> [Mreal</span><span class="id"> aM]];</span><span class="id"> rewrite</span><span class="id"> /bounded_fun</span><span class="id"> /bounded_near;</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /=</span><span class="id"> _</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> normrN;</span><span class="id"> apply:</span><span class="id"> aM</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_fun_has_lbound</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_fun</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> has_lbound</span> (<span class="id">range</span><span class="id"> a</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /bounded_funN/bounded_fun_has_ubound</span><span class="id"> ba;</span><span class="id"> apply/has_lb_ubN</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> subset_has_ubound</span><span class="id"> ba</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> [_</span><span class="id"> [n</span><span class="id"> _]</span><span class="id"> &lt;-</span><span class="id"> &lt;-];</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_funD</span> (<span class="id">T</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_fun</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> bounded_fun</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> bounded_fun</span> (<span class="id">a</span><span class="id"> \+</span><span class="id"> b</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [M</span><span class="id"> [Mreal</span><span class="id"> Ma]]</span><span class="id"> [N</span><span class="id"> [Nreal</span><span class="id"> Nb]]</span>.<br/>
<span class="id">rewrite</span><span class="id"> /bounded_fun/bounded_near;</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /=</span><span class="id"> _</span>.<br/>
<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ler_normD</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> [x]splitr</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> lerD//</span> (<span class="id">Ma,</span><span class="id"> Nb</span>)<span class="id">//</span><span class="id"> ltr_pdivlMr//;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> nbhs_pinfty_gt;</span><span class="id"> rewrite</span><span class="id"> ?rpredM</span><span class="id"> ?rpred_nat</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_locally</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">[bounded</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> A]</span><span class="id"> -&gt;</span><span class="id"> [locally</span><span class="id"> [bounded</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> A]]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /sub_boundedr</span><span class="id"> AB</span><span class="id"> x</span><span class="id"> Ax;</span><span class="id"> apply:</span><span class="id"> AB;</span><span class="id"> apply:</span><span class="id"> within_nbhsW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;k .-lipschitz_on f&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">dominated_by</span> (<span class="id">self_sub</span><span class="id"> id</span>)<span class="id"> k</span> (<span class="id">self_sub</span><span class="id"> f</span>))<span class="id"> :</span><span class="id"> type_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> sub_klipschitz</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">F</span><span class="id"> G</span><span class="id"> :</span><span class="id"> set_system</span> (<span class="id">V</span><span class="id"> *</span><span class="id"> V</span>))<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> `=&gt;`</span><span class="id"> G</span><span class="id"> -&gt;</span><span class="id"> k</span>.<span class="id">-lipschitz_on</span><span class="id"> f</span><span class="id"> G</span><span class="id"> -&gt;</span><span class="id"> k</span>.<span class="id">-lipschitz_on</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact</span>. Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> lipschitz_on</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span> (<span class="id">V</span><span class="id"> *</span><span class="id"> V</span>))<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> M</span>.<span class="id">-lipschitz_on</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> sub_lipschitz</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">F</span><span class="id"> G</span><span class="id"> :</span><span class="id"> set_system</span> (<span class="id">V</span><span class="id"> *</span><span class="id"> V</span>))<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> `=&gt;`</span><span class="id"> G</span><span class="id"> -&gt;</span><span class="id"> lipschitz_on</span><span class="id"> f</span><span class="id"> G</span><span class="id"> -&gt;</span><span class="id"> lipschitz_on</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> FG;</span><span class="id"> rewrite</span><span class="id"> /lipschitz_on;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> M;</span><span class="id"> apply:</span><span class="id"> FG</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> klipschitzW</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span> (<span class="id">V</span><span class="id"> *</span><span class="id"> V</span>))<span class="id"> {PF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">k</span>.<span class="id">-lipschitz_on</span><span class="id"> f</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> lipschitz_on</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> f_lip;</span><span class="id"> apply/ex_dom_bound;</span><span class="gallina-kwd"> exists</span><span class="id"> k</span>. Qed.</div></details>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;k .-lipschitz_ A f&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">k</span>.<span class="id">-lipschitz_on</span><span class="id"> f</span> (<span class="id">globally</span> (<span class="id">A</span><span class="id"> `*`</span><span class="id"> A</span>)))<span class="id"> :</span><span class="id"> type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;k .-lipschitz f&quot;</span><span class="id"> :=</span> (<span class="id">k</span>.<span class="id">-lipschitz_setT</span><span class="id"> f</span>)<span class="id"> :</span><span class="id"> type_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;[ 'lipschitz' E | x 'in' A ]&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">lipschitz_on</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> E</span>) (<span class="id">globally</span> (<span class="id">A</span><span class="id"> `*`</span><span class="id"> A</span>)))<span class="id"> :</span><span class="id"> type_scope</span>.<br/>
<span class="vernacular">Notation</span><span class="id"> lipschitz</span><span class="id"> f</span><span class="id"> :=</span><span class="id"> [lipschitz</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> setT]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lipschitz_set0</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>)<span class="id"> :</span><span class="id"> [lipschitz</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> set0]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> nearW;</span><span class="id"> rewrite</span><span class="id"> setX0</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> globally0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lipschitz_set1</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> [lipschitz</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> a]]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span> (<span class="id">@klipschitzW</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> `|f</span><span class="id"> a|</span>).<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">@globally_properfilter</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">a,</span><span class="id"> a</span>)).<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> [x</span><span class="id"> y]</span><span class="id"> /=</span><span class="id"> []</span><span class="id"> -&gt;</span><span class="id"> -&gt;;</span><span class="id"> rewrite</span><span class="id"> !subrr</span><span class="id"> !normr0</span><span class="id"> mulr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> klipschitz_locally</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">k</span>.<span class="id">-lipschitz_A</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> [locally</span><span class="id"> k</span>.<span class="id">-lipschitz_A</span><span class="id"> f]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> +</span><span class="id"> x</span><span class="id"> Ax;</span><span class="id"> apply:</span><span class="id"> sub_klipschitz;</span><span class="id"> apply:</span><span class="id"> within_nbhsW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lipschitz_locally</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> V</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">[lipschitz</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> A]</span><span class="id"> -&gt;</span><span class="id"> [locally</span><span class="id"> [lipschitz</span><span class="id"> f</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> A]]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> +</span><span class="id"> x</span><span class="id"> Ax;</span><span class="id"> apply:</span><span class="id"> sub_lipschitz;</span><span class="id"> apply:</span><span class="id"> within_nbhsW</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lipschitz_id</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">1</span>.<span class="id">-lipschitz</span> (<span class="id">@id</span><span class="id"> V</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> [/=</span><span class="id"> x</span><span class="id"> y]</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> mul1r</span>. Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> lipschitz_id</span><span class="id"> {R</span><span class="id"> V}</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> contractions</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {X</span><span class="id"> Y</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R}</span><span class="id"> {U</span><span class="id"> :</span><span class="id"> set</span><span class="id"> X}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> set</span><span class="id"> Y}</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> contraction</span> (<span class="id">q</span><span class="id"> :</span><span class="id"> {nonneg</span><span class="id"> R}</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> {fun</span><span class="id"> U</span><span class="id"> &gt;-&gt;</span><span class="id"> V}</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">q%:num</span><span class="id"> &lt;</span><span class="id"> 1</span><span class="id"> /\</span><span class="id"> q%:num</span>.<span class="id">-lipschitz_U</span><span class="id"> f</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> is_contraction</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> {fun</span><span class="id"> U</span><span class="id"> &gt;-&gt;</span><span class="id"> V}</span>)<span class="id"> :=</span><span class="gallina-kwd"> exists</span><span class="id"> q,</span><span class="id"> contraction</span><span class="id"> q</span><span class="id"> f</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> contractions</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> contraction_fixpoint_unique</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realDomainType}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{X</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R}</span> (<span class="id">U</span><span class="id"> :</span><span class="id"> set</span><span class="id"> X</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> {fun</span><span class="id"> U</span><span class="id"> &gt;-&gt;</span><span class="id"> U}</span>) (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> X</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">is_contraction</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> U</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> U</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> =</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> y</span><span class="id"> =</span><span class="id"> f</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case</span><span class="id"> =&gt;</span><span class="id"> q</span><span class="id"> [q1</span><span class="id"> ctrfq]</span><span class="id"> Ux</span><span class="id"> Uy</span><span class="id"> fixx</span><span class="id"> fixy;</span><span class="id"> apply/subr0_eq/normr0_eq0/eqP</span>.<br/>
<span class="id">have</span><span class="id"> [-&gt;|xyneq]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> x</span><span class="id"> y;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subrr</span><span class="id"> normr0</span>.<br/>
<span class="id">have</span><span class="id"> xypos</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> normr_gt0</span><span class="id"> subr_eq0</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;=</span><span class="id"> q%:num</span><span class="id"> *</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ler_pMl</span><span class="id"> //</span><span class="id"> leNgt</span><span class="id"> q1</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> [in</span><span class="id"> leLHS]fixx</span><span class="id"> [in</span><span class="id"> leLHS]fixy;</span><span class="id"> exact:</span> (<span class="id">ctrfq</span> (<span class="id">_,</span><span class="id"> _</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> PseudoNormedZMod_numFieldType</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> ball_norm</span><span class="id"> :=</span> (<span class="id">ball_</span> (<span class="id">@normr</span><span class="id"> R</span><span class="id"> V</span>)).<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> nbhs_norm</span><span class="id"> :=</span> (<span class="id">@nbhs_ball</span><span class="id"> _</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_hausdorff</span><span class="id"> :</span><span class="id"> hausdorff_space</span><span class="id"> V</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> ball_hausdorff</span><span class="id"> =&gt;</span><span class="id"> a</span><span class="id"> b</span><span class="id"> ab</span>.<br/>
<span class="id">have</span><span class="id"> ab2</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> `|a</span><span class="id"> -</span><span class="id"> b|</span><span class="id"> /</span><span class="id"> 2</span><span class="gallina-kwd"> by</span><span class="id"> apply</span><span class="id"> divr_gt0</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> normr_gt0</span><span class="id"> subr_eq0</span>.<br/>
<span class="id">set</span><span class="id"> r</span><span class="id"> :=</span><span class="id"> PosNum</span><span class="id"> ab2;</span><span class="gallina-kwd"> exists</span> (<span class="id">r,</span><span class="id"> r</span>)<span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">apply/negPn/negP</span><span class="id"> =&gt;</span><span class="id"> /set0P[c]</span><span class="id"> [];</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span><span class="id"> /ball_</span><span class="id"> =&gt;</span><span class="id"> acr</span><span class="id"> bcr</span>.<br/>
<span class="id">have</span><span class="id"> r22</span><span class="id"> :</span><span class="id"> r%:num</span><span class="id"> *</span><span class="id"> 2</span><span class="id"> =</span><span class="id"> r%:num</span><span class="id"> +</span><span class="id"> r%:num</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> 2</span><span class="id"> =</span><span class="id"> 1</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id"> //</span><span class="id"> mulrDr</span><span class="id"> mulr1</span>.<br/>
<span class="id">move:</span> (<span class="id">ltrD</span><span class="id"> acr</span><span class="id"> bcr</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> -r22</span> (<span class="id">distrC</span><span class="id"> b</span><span class="id"> c</span>).<br/>
<span class="id">move/</span>(<span class="id">le_lt_trans</span> (<span class="id">ler_distD</span><span class="id"> c</span><span class="id"> a</span><span class="id"> b</span>)).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -mulrA</span><span class="id"> mulVr</span><span class="id"> ?mulr1</span><span class="id"> ?ltxx</span><span class="id"> //</span><span class="id"> unitfE</span>.<br/>
Qed.</div></details>
<span class="vernacular">Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">hausdorff_space</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> solve[apply:</span><span class="id"> norm_hausdorff]</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_closeE</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id">:</span><span class="id"> close</span><span class="id"> x</span><span class="id"> y</span><span class="id"> =</span> (<span class="id">x</span><span class="id"> =</span><span class="id"> y</span>)<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> closeE</span>. Qed.</div></details>
<span class="vernacular">Lemma</span><span class="id"> norm_close_eq</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> close</span><span class="id"> x</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y</span><br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> close_eq</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_cvg_unique</span><span class="id"> {F}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span><span class="id"> :</span><span class="id"> is_subset1</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> V</span><span class="id"> |</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvg_unique</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_cvg_eq</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> x</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y</span><br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">@cvg_eq</span><span class="id"> V</span>). Qed.</div></details>
<span class="vernacular">Lemma</span><span class="id"> norm_lim_id</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> lim</span> (<span class="id">nbhs</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> x</span><br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> lim_id</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_cvg_lim</span><span class="id"> {F}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> lim</span><span class="id"> F</span><span class="id"> =</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">@cvg_lim</span><span class="id"> V</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_lim_near_cst</span><span class="id"> U</span><span class="id"> {F}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> U</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> x</span><span class="id"> =</span><span class="id"> l</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> lim_near_cst</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_lim_cst</span><span class="id"> U</span><span class="id"> {F}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span> (<span class="id">k</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">lim</span> ((<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> :</span><span class="id"> U</span><span class="id"> =&gt;</span><span class="id"> k</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> lim_cst</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_cvgi_unique</span><span class="id"> {U</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {F}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> U</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{near</span><span class="id"> F,</span><span class="id"> is_fun</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> is_subset1</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> V</span><span class="id"> |</span><span class="id"> f</span><span class="id"> `@</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgi_unique</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_cvgi_lim</span><span class="id"> {U}</span><span class="id"> {F}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> U</span><span class="id"> -&gt;</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>) (<span class="id">l</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">F</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> :</span><span class="id"> U</span><span class="id"> =&gt;</span><span class="id"> is_subset1</span> (<span class="id">f</span><span class="id"> x</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> `@</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> `@</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgi_lim</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> distm_lt_split</span> (<span class="id">z</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">`|x</span><span class="id"> -</span><span class="id"> z|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|z</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> @ball_split</span><span class="id"> _</span><span class="id"> _</span><span class="id"> z</span><span class="id"> x</span><span class="id"> y</span><span class="id"> e;</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> distm_lt_splitr</span> (<span class="id">z</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">`|z</span><span class="id"> -</span><span class="id"> x|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|z</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> @ball_splitr</span><span class="id"> _</span><span class="id"> _</span><span class="id"> z</span><span class="id"> x</span><span class="id"> y</span><span class="id"> e;</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> distm_lt_splitl</span> (<span class="id">z</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">`|x</span><span class="id"> -</span><span class="id"> z|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> z|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> @ball_splitl</span><span class="id"> _</span><span class="id"> _</span><span class="id"> z</span><span class="id"> x</span><span class="id"> y</span><span class="id"> e;</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normm_leW</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> e</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> `|x|</span><span class="id"> &lt;=</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|x|</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /posnumP[{}e]</span><span class="id"> /le_lt_trans</span><span class="id"> -&gt;//;</span><span class="id"> rewrite</span><span class="id"> [ltRHS]splitr</span><span class="id"> ltr_pwDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normm_lt_split</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">`|x|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|y|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> -&gt;</span><span class="id"> `|x</span><span class="id"> +</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> xlt</span><span class="id"> ylt;</span><span class="id"> rewrite</span><span class="id"> -[y]opprK</span> (<span class="id">@distm_lt_split</span><span class="id"> 0</span>)<span class="id"> ?subr0</span><span class="id"> ?opprK</span><span class="id"> ?add0r</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvg_distW</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> V}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> y'</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|y</span><span class="id"> -</span><span class="id"> y'|</span><span class="id"> &lt;=</span><span class="id"> eps</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> --&gt;</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvgrPdist_le</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> PseudoNormedZMod_numFieldType</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;use `cvgrPdist_le` or a variation instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvg_distW</span><span class="id"> :=</span><span class="id"> __deprecated__cvg_distW</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> NormedModule_numFieldType</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvgr_norm_infty</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">I</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> I</span>) (<span class="id">FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_norm_lty</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> \forall</span><span class="id"> y'</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> y'|</span><span class="id"> &lt;</span><span class="id"> M</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Fy;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> exact:</span> (<span class="id">cvgr_norm_lt</span><span class="id"> y</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_norm_ley</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> \forall</span><span class="id"> y'</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> y'|</span><span class="id"> &lt;=</span><span class="id"> M</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> Fy;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> exact:</span> (<span class="id">cvgr_norm_le</span><span class="id"> y</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_norm_gtNy</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> \forall</span><span class="id"> y'</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> y'|</span><span class="id"> &gt;</span><span class="id"> M</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> Fy;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> exact:</span> (<span class="id">cvgr_norm_gt</span><span class="id"> y</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_norm_geNy</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> M</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> \forall</span><span class="id"> y'</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> `|f</span><span class="id"> y'|</span><span class="id"> &gt;=</span><span class="id"> M</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> Fy;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> exact:</span> (<span class="id">cvgr_norm_ge</span><span class="id"> y</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvgr_norm_infty</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_bounded</span><span class="id"> {I}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> I}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> bounded_near</span><span class="id"> f</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgr_norm_ley</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> NormedModule_numFieldType</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_norm_lty</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> I</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_norm_ley</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> I</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_norm_gtNy</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> I</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr_norm_geNy</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> I</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvg_bounded</span><span class="id"> {R</span><span class="id"> V</span><span class="id"> I</span><span class="id"> F</span><span class="id"> FF}</span>.<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">hausdorff_space</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> solve[apply:</span><span class="id"> norm_hausdorff]</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Module</span><span class="vernacular"> Export</span><span class="id"> NbhsNorm</span>.<br/>
<span class="vernacular">Definition</span><span class="id"> nbhs_simpl</span><span class="id"> :=</span> (<span class="id">nbhs_simpl,@nbhs_nbhs_norm,@filter_from_norm_nbhs</span>).<br/>
<span class="vernacular">End</span><span class="id"> NbhsNorm</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_at_rightE</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> x^'</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> x^'</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> x^'+</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cvfx;</span><span class="id"> apply/Logic</span>.<span class="id">eq_sym</span>.<br/>
<span class="id">apply:</span> (<span class="id">@cvg_lim</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">at_right</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> A</span><span class="id"> /cvfx</span><span class="id"> /nbhs_ballP</span><span class="id"> [_</span><span class="id"> /posnumP[e]</span><span class="id"> xe_A]</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> y</span><span class="id"> xe_y;</span><span class="id"> rewrite</span><span class="id"> lt_def</span><span class="id"> =&gt;</span><span class="id"> /andP</span><span class="id"> [xney</span><span class="id"> _];</span><span class="id"> apply:</span><span class="id"> xe_A</span>.<br/>
Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> cvg_at_rightE</span><span class="id"> {R</span><span class="id"> V}</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_at_leftE</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> x^'</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> x^'</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> x^'-</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cvfx;</span><span class="id"> apply/Logic</span>.<span class="id">eq_sym</span>.<br/>
<span class="id">apply:</span> (<span class="id">@cvg_lim</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">at_left</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> A</span><span class="id"> /cvfx</span><span class="id"> /nbhs_ballP</span><span class="id"> [_</span><span class="id"> /posnumP[e]</span><span class="id"> xe_A]</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> y</span><span class="id"> xe_y;</span><span class="id"> rewrite</span><span class="id"> lt_def</span><span class="id"> =&gt;</span><span class="id"> /andP</span><span class="id"> [xney</span><span class="id"> _]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> xe_A</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> eq_sym</span>.<br/>
Qed.</div></details>
<span class="vernacular">Arguments</span><span class="id"> cvg_at_leftE</span><span class="id"> {R</span><span class="id"> V}</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_within_itvP</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType</span><span class="id"> }</span><span class="id"> a</span><span class="id"> b</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">a</span><span class="id"> &lt;</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{within</span><span class="id"> `[a,</span><span class="id"> b],</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="id">[/\</span><span class="id"> {in</span><span class="id"> `]a,</span><span class="id"> b[,</span><span class="id"> continuous</span><span class="id"> f},</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a^'+</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &amp;</span><span class="id"> f</span><span class="id"> @b^'-</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> b]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ab;</span><span class="id"> split=&gt;</span><span class="id"> [abf|]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [aab</span><span class="id"> bab]</span><span class="id"> :</span><span class="id"> a</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> /\</span><span class="id"> b</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> !in_itv/=</span><span class="id"> !lexx</span> (<span class="id">ltW</span><span class="id"> ab</span>).<br/>
&nbsp;&nbsp;<span class="id">split;</span><span class="id"> [|apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> eps</span><span class="id"> eps_gt0</span><span class="id"> /=</span>..<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> suff</span><span class="id"> :</span><span class="id"> {in</span><span class="id"> `]a,</span><span class="id"> b[%classic,</span><span class="id"> continuous</span><span class="id"> f}</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> P</span><span class="id"> c</span><span class="id"> W;</span><span class="id"> apply:</span><span class="id"> P;</span><span class="id"> rewrite</span><span class="id"> inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -continuous_open_subspace;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> interval_open</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> abf;</span><span class="id"> exact/continuous_subspaceW/subset_itvW</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> move/continuous_withinNx/cvgrPdist_lt/</span>(_<span class="id"> _</span><span class="id"> eps_gt0</span>)<span class="id"> :</span> (<span class="id">abf</span><span class="id"> a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /dnbhs/=</span><span class="id"> near_withinE</span><span class="id"> !near_simpl//</span><span class="id"> /prop_near1</span><span class="id"> /nbhs/=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -nbhs_subspace_in//</span><span class="id"> /within/=</span><span class="id"> near_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> filter_app;</span><span class="gallina-kwd"> exists</span> (<span class="id">b</span><span class="id"> -</span><span class="id"> a</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ?subr_gt0//</span><span class="id"> =&gt;</span><span class="id"> c</span><span class="id"> cba</span><span class="id"> +</span><span class="id"> ac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply=&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ?gt_eqF//</span><span class="id"> !in_itv/=</span> (<span class="id">ltW</span><span class="id"> ac</span>)<span class="id">/=;</span><span class="id"> move:</span><span class="id"> cba</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltr0_norm</span><span class="id"> ?subr_lt0//</span><span class="id"> opprB</span><span class="id"> ltrD2r</span><span class="id"> =&gt;</span><span class="id"> /ltW</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> move/continuous_withinNx/cvgrPdist_lt/</span>(_<span class="id"> _</span><span class="id"> eps_gt0</span>)<span class="id"> :</span> (<span class="id">abf</span><span class="id"> b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /dnbhs/=</span><span class="id"> near_withinE</span><span class="id"> !near_simpl</span><span class="id"> /prop_near1</span><span class="id"> /nbhs/=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -nbhs_subspace_in//</span><span class="id"> /within/=</span><span class="id"> near_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> filter_app;</span><span class="gallina-kwd"> exists</span> (<span class="id">b</span><span class="id"> -</span><span class="id"> a</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ?subr_gt0//</span><span class="id"> =&gt;</span><span class="id"> c</span><span class="id"> cba</span><span class="id"> +</span><span class="id"> ac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply=&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ?lt_eqF//</span><span class="id"> !in_itv/=</span> (<span class="id">ltW</span><span class="id"> ac</span>)<span class="id">/=</span><span class="id"> andbT;</span><span class="id"> move:</span><span class="id"> cba</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gtr0_norm</span><span class="id"> ?subr_gt0//</span><span class="id"> ltrD2l</span><span class="id"> ltrNr</span><span class="id"> opprK</span><span class="id"> =&gt;</span><span class="id"> /ltW</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> ctsoo</span><span class="id"> ctsL</span><span class="id"> ctsR;</span><span class="id"> apply/subspace_continuousP</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /andP[]</span>.<br/>
<span class="id">rewrite</span><span class="id"> !bnd_simp/=</span><span class="id"> !le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[&lt;-{x}|ax]</span><span class="id"> /predU1P[|]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move/eqP;</span><span class="id"> rewrite</span><span class="id"> lt_eqF</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> _;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> eps</span><span class="id"> eps_gt0</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">move/cvgrPdist_lt/</span>(_<span class="id"> _</span><span class="id"> eps_gt0</span>)<span class="id">:</span><span class="id"> ctsL;</span><span class="id"> rewrite</span><span class="id"> /at_right</span><span class="id"> !near_withinE</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> filter_app;</span><span class="gallina-kwd"> exists</span> (<span class="id">b</span><span class="id"> -</span><span class="id"> a</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ?subr_gt0//</span><span class="id"> =&gt;</span><span class="id"> c</span><span class="id"> cba</span><span class="id"> +</span><span class="id"> ac</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> c</span><span class="gallina-kwd"> by</span><span class="id"> move:</span><span class="id"> ac</span><span class="id"> =&gt;</span><span class="id"> /andP[]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[-&gt;|/[swap]</span><span class="id"> /[apply]//];</span><span class="id"> rewrite</span><span class="id"> subrr</span><span class="id"> normr0</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> -&gt;;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> eps</span><span class="id"> eps_gt0</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">move/cvgrPdist_lt/</span>(_<span class="id"> _</span><span class="id"> eps_gt0</span>)<span class="id">:</span><span class="id"> ctsR;</span><span class="id"> rewrite</span><span class="id"> /at_left</span><span class="id"> !near_withinE</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> filter_app;</span><span class="gallina-kwd"> exists</span> (<span class="id">b</span><span class="id"> -</span><span class="id"> a</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ?subr_gt0</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> c</span><span class="id"> cba</span><span class="id"> +</span><span class="id"> ac</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> c</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="id"> move:</span><span class="id"> ac</span><span class="id"> =&gt;</span><span class="id"> /andP[]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[-&gt;|/[swap]</span><span class="id"> /[apply]//];</span><span class="id"> rewrite</span><span class="id"> subrr</span><span class="id"> normr0</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> xb;</span><span class="id"> have</span><span class="id"> aboox</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> `]a,</span><span class="id"> b[</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> !in_itv/=</span><span class="id"> ax</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> within_interior;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> ctsoo</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> :</span><span class="id"> `]a,</span><span class="id"> b[</span><span class="id"> `&lt;=`</span><span class="id"> interior</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="gallina-kwd"> by</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -open_subsetE;</span><span class="id"> [exact:</span><span class="id"> subset_itvW|</span><span class="id"> exact:</span><span class="id"> interval_open]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> within_continuous_continuous</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> a</span><span class="id"> b</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> x</span><span class="id"> :</span> (<span class="id">a</span><span class="id"> &lt;</span><span class="id"> b</span>)<span class="id">%R</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{within</span><span class="id"> `[a,</span><span class="id"> b],</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> `]a,</span><span class="id"> b[</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ab</span><span class="id"> /continuous_within_itvP-/</span>(_<span class="id"> ab</span>)<span class="id">[+</span><span class="id"> _]</span><span class="id"> /[swap]</span><span class="id"> xab</span><span class="id"> cf;</span><span class="id"> exact</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> hausdorff</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> pseudoMetricNormedZModType_hausdorff</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">hausdorff_space</span><span class="id"> V</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> p</span><span class="id"> q</span><span class="id"> clp_q;</span><span class="id"> apply/subr0_eq/normr0_eq0/Rhausdorff</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> B</span><span class="id"> pq_A</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@normr0</span><span class="id"> _</span><span class="id"> V</span>)<span class="id"> -</span>(<span class="id">subrr</span><span class="id"> p</span>)<span class="id"> =&gt;</span><span class="id"> pp_B</span>.<br/>
<span class="id">suff</span><span class="id"> loc_preim</span><span class="id"> r</span><span class="id"> C</span><span class="id"> :</span><span class="id"> nbhs`|p</span><span class="id"> -</span><span class="id"> r|</span><span class="id"> C</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> r</span> ((<span class="gallina-kwd">fun</span><span class="id"> r</span><span class="id"> =&gt;</span><span class="id"> `|p</span><span class="id"> -</span><span class="id"> r|</span>)<span class="id"> @^-1`</span><span class="id"> C</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [r</span><span class="id"> []]</span><span class="id"> :=</span><span class="id"> clp_q</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">loc_preim</span><span class="id"> _</span><span class="id"> _</span><span class="id"> pp_B</span>) (<span class="id">loc_preim</span><span class="id"> _</span><span class="id"> _</span><span class="id"> pq_A</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> `|p</span><span class="id"> -</span><span class="id"> r|</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> [e</span><span class="id"> egt0</span><span class="id"> pre_C];</span><span class="id"> apply:</span><span class="id"> nbhs_le_nbhs_norm;</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> s</span><span class="id"> /=</span><span class="id"> rse</span>.<br/>
<span class="id">apply:</span><span class="id"> pre_C;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span> (<span class="id">ler_dist_dist</span><span class="id"> _</span><span class="id"> _</span>)<span class="id"> _</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprB</span><span class="id"> addrC</span><span class="id"> subrKA</span><span class="id"> distrC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> hausdorff</span>.<br/>
<br/>
<span class="vernacular">Module</span><span class="vernacular"> Export</span><span class="id"> NearNorm</span>.<br/>
<span class="vernacular">Definition</span><span class="id"> near_simpl</span><span class="id"> :=</span> (<span class="id">@near_simpl,</span><span class="id"> @nbhs_normE,</span><span class="id"> @filter_from_normE,</span><br/>
&nbsp;&nbsp;<span class="id">@near_nbhs_norm</span>).<br/>
<span class="vernacular">Ltac</span><span class="id"> near_simpl</span><span class="id"> :=</span><span class="id"> rewrite</span><span class="id"> ?near_simpl</span>.<br/>
<span class="vernacular">End</span><span class="id"> NearNorm</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__continuous_cvg_dist</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span><br/>
&nbsp;&nbsp;(<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W</span>)<span class="id"> x</span><span class="id"> l</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">continuous</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> e</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="id"> `|f</span><span class="id"> l</span><span class="id"> -</span><span class="id"> f</span><span class="id"> x|</span><span class="id"> &lt;</span><span class="id"> e%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf</span><span class="id"> /cvg_eq-&gt;//</span><span class="id"> e;</span><span class="id"> rewrite</span><span class="id"> subrr</span><span class="id"> normr0</span>. Qed.</div></details>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;simply use the fact that `(x --&gt; l) -&gt; (x = l)`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> continuous_cvg_dist</span><span class="id"> :=</span><span class="id"> __deprecated__continuous_cvg_dist</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<div class="doc">Matrices </div>
<span class="vernacular">Section</span><span class="id"> mx_norm</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">m</span><span class="id"> n</span><span class="id"> :</span><span class="id"> nat</span>).<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> 'M[K]_</span>(<span class="id">m,</span><span class="id"> n</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> mx_norm</span><span class="id"> x</span><span class="id"> :</span><span class="id"> K</span><span class="id"> :=</span> (<span class="id">\big[maxr/0%:nng]_i</span><span class="id"> `|x</span><span class="id"> i</span>.<span class="id">1</span><span class="id"> i</span>.<span class="id">2|%:nng</span>)<span class="id">%:num</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_normE</span><span class="id"> x</span><span class="id"> :</span><span class="id"> mx_norm</span><span class="id"> x</span><span class="id"> =</span> (<span class="id">\big[maxr/0%:nng]_i</span><span class="id"> `|x</span><span class="id"> i</span>.<span class="id">1</span><span class="id"> i</span>.<span class="id">2|%:nng</span>)<span class="id">%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> []</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ler_mx_norm_add</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> mx_norm</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> y</span>)<span class="id"> &lt;=</span><span class="id"> mx_norm</span><span class="id"> x</span><span class="id"> +</span><span class="id"> mx_norm</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> !mx_normE</span><span class="id"> [_</span><span class="id"> &lt;=</span><span class="id"> _%:num]num_le;</span><span class="id"> apply/bigmax_leP</span>.<br/>
<span class="id">split=&gt;</span><span class="id"> [|ij</span><span class="id"> _];</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> addr_ge0</span>.<br/>
<span class="id">rewrite</span><span class="id"> mxE;</span><span class="id"> apply:</span><span class="id"> le_trans</span> (<span class="id">ler_normD</span><span class="id"> _</span><span class="id"> _</span>)<span class="id"> _</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> lerD//</span><span class="id"> -[leLHS]nngE</span><span class="id"> num_le;</span><span class="id"> exact:</span><span class="id"> le_bigmax</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_norm_eq0</span><span class="id"> x</span><span class="id"> :</span><span class="id"> mx_norm</span><span class="id"> x</span><span class="id"> =</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> =</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move/eqP;</span><span class="id"> rewrite</span><span class="id"> eq_le</span><span class="id"> -[0]nngE</span><span class="id"> mx_normE</span><span class="id"> num_le</span><span class="id"> =&gt;</span><span class="id"> /andP[/bigmax_leP[_</span><span class="id"> x0]</span><span class="id"> _]</span>.<br/>
<span class="id">apply/matrixP</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> j;</span><span class="id"> rewrite</span><span class="id"> mxE;</span><span class="id"> apply/eqP</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -num_abs_eq0</span><span class="id"> eq_le</span> (<span class="id">x0</span> (<span class="id">i,</span><span class="id"> j</span>))<span class="id">//=</span><span class="id"> -num_le/=</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_norm0</span><span class="id"> :</span><span class="id"> mx_norm</span><span class="id"> 0</span><span class="id"> =</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /mx_norm</span> (<span class="id">eq_bigr</span> (<span class="id">fun=&gt;</span><span class="id"> 0%R%:nng</span>))<span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> elim/big_ind</span><span class="id"> :</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> a</span><span class="id"> b;</span><span class="id"> rewrite</span><span class="id"> num_max</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span><span class="id"> -&gt;;</span><span class="id"> rewrite</span><span class="id"> maxxx</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> i</span><span class="id"> _;</span><span class="id"> apply</span><span class="id"> val_inj</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> mxE</span><span class="id"> normr0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_norm_neq0</span><span class="id"> x</span><span class="id"> :</span><span class="id"> mx_norm</span><span class="id"> x</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> i,</span><span class="id"> mx_norm</span><span class="id"> x</span><span class="id"> =</span><span class="id"> `|x</span><span class="id"> i</span>.<span class="id">1</span><span class="id"> i</span>.<span class="id">2|</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /mx_norm</span>.<br/>
<span class="id">elim/big_ind</span><span class="id"> :</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> [|a</span><span class="id"> b</span><span class="id"> Ha</span><span class="id"> Hb</span><span class="id"> H|/=</span><span class="id"> i</span><span class="id"> _</span><span class="id"> _];</span><span class="id"> [by</span><span class="id"> rewrite</span><span class="id"> eqxx|</span><span class="id"> |by</span><span class="gallina-kwd"> exists</span><span class="id"> i]</span>.<br/>
<span class="id">case:</span> (<span class="id">leP</span><span class="id"> a</span><span class="id"> b</span>)<span class="id"> =&gt;</span><span class="id"> ab</span>.<br/>
<span class="id">+</span><span class="id"> suff</span><span class="id"> /Hb[i</span><span class="id"> xi]</span><span class="id"> :</span><span class="id"> b%:num</span><span class="id"> !=</span><span class="id"> 0</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> contra</span><span class="id"> H</span><span class="id"> =&gt;</span><span class="id"> b0;</span><span class="id"> rewrite</span><span class="id"> max_r</span>.<br/>
<span class="id">+</span><span class="id"> suff</span><span class="id"> /Ha[i</span><span class="id"> xi]</span><span class="id"> :</span><span class="id"> a%:num</span><span class="id"> !=</span><span class="id"> 0</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> contra</span><span class="id"> H</span><span class="id"> =&gt;</span><span class="id"> a0;</span><span class="id"> rewrite</span><span class="id"> max_l</span><span class="id"> //</span><span class="id"> ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_norm_natmul</span><span class="id"> x</span><span class="id"> k</span><span class="id"> :</span><span class="id"> mx_norm</span> (<span class="id">x</span><span class="id"> *+</span><span class="id"> k</span>)<span class="id"> =</span> (<span class="id">mx_norm</span><span class="id"> x</span>)<span class="id"> *+</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> [in</span><span class="id"> RHS]/mx_norm;</span><span class="id"> elim:</span><span class="id"> k</span><span class="id"> =&gt;</span><span class="id"> [|k</span><span class="id"> ih];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> !mulr0n</span><span class="id"> mx_norm0</span>.<br/>
<span class="id">rewrite</span><span class="id"> !mulrS;</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> eq_le;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -ih;</span><span class="id"> exact/ler_mx_norm_add</span>.<br/>
<span class="id">have</span><span class="id"> [/mx_norm_eq0-&gt;|x0]</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">mx_norm</span><span class="id"> x</span>)<span class="id"> 0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -/</span>(<span class="id">mx_norm</span><span class="id"> 0</span>)<span class="id"> -/</span>(<span class="id">mx_norm</span><span class="id"> 0</span>)<span class="id"> !</span>(<span class="id">mul0rn,addr0,mx_norm0</span>).<br/>
<span class="id">rewrite</span><span class="id"> -/</span>(<span class="id">mx_norm</span><span class="id"> x</span>)<span class="id"> -num_abs_le;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> mx_normE</span>.<br/>
<span class="id">apply/bigmax_geP;</span><span class="id"> right</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">have</span><span class="id"> [i</span><span class="id"> Hi]</span><span class="id"> :=</span><span class="id"> mx_norm_neq0</span><span class="id"> x0</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> Hi</span><span class="id"> -!mulrS</span><span class="id"> -normrMn</span><span class="id"> mulmxnE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> le_eqVlt;</span><span class="id"> apply/orP;</span><span class="id"> left;</span><span class="id"> apply/eqP/val_inj</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> normr_id</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_normN</span><span class="id"> x</span><span class="id"> :</span><span class="id"> mx_norm</span> (<span class="id">-</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> mx_norm</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">congr</span> (<span class="id">_%:nngnum</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> apply</span><span class="id"> eq_bigr</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> ?</span><span class="id"> _;</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> mxE</span><span class="id"> -num_eq</span><span class="id"> //=</span><span class="id"> normrN</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> mx_norm</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_normrE</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> realDomainType</span>) (<span class="id">m</span><span class="id"> n</span><span class="id"> :</span><span class="id"> nat</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> 'M[K]_</span>(<span class="id">m,</span><span class="id"> n</span>))<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">mx_norm</span><span class="id"> x</span><span class="id"> =</span><span class="id"> \big[maxr/0]_ij</span><span class="id"> `|x</span><span class="id"> ij</span>.<span class="id">1</span><span class="id"> ij</span>.<span class="id">2|</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /mx_norm;</span><span class="id"> apply/esym</span>.<br/>
<span class="id">elim/big_ind2</span><span class="id"> :</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> a</span><span class="id"> a'</span><span class="id"> b</span><span class="id"> b'</span><span class="id"> -&gt;{a'}</span><span class="id"> -&gt;{b'}</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [ab|ab]</span><span class="id"> :=</span><span class="id"> leP</span><span class="id"> a</span><span class="id"> b;</span><span class="id"> [rewrite</span><span class="id"> max_r</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> max_l</span><span class="id"> //</span><span class="id"> ltW]</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">m</span><span class="id"> n</span><span class="id"> :</span><span class="id"> nat</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">Num</span>.<span class="id">Zmodule_isNormed</span>.<span class="id">Build</span><span class="id"> K</span><span class="id"> 'M[K]_</span>(<span class="id">m,</span><span class="id"> n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">@ler_mx_norm_add</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>) (<span class="id">@mx_norm_eq0</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">@mx_norm_natmul</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>) (<span class="id">@mx_normN</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> matrix_NormedModule</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">m</span><span class="id"> n</span><span class="id"> :</span><span class="id"> nat</span>).<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ball_gt0</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> 'M[K]_</span>(<span class="id">m</span>.<span class="id">+1,</span><span class="id"> n</span>.<span class="id">+1</span>))<span class="id"> e</span><span class="id"> :</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> e</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move/</span>(_<span class="id"> ord0</span><span class="id"> ord0</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_norm_ball</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@ball</span><span class="id"> _</span><span class="id"> [the</span><span class="id"> pseudoMetricType</span><span class="id"> K</span><span class="id"> of</span><span class="id"> 'M[K]_</span>(<span class="id">m</span>.<span class="id">+1,</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">]</span><span class="id"> =</span><span class="id"> ball_</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> `|</span><span class="id"> x</span><span class="id"> |</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /normr</span><span class="id"> /ball_</span><span class="id"> predeq3E</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> e</span><span class="id"> y</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> mx_normE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> xey</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> e_gt0</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> :=</span><span class="id"> ball_gt0</span><span class="id"> xey</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span><span class="id"> e_gt0</span> (<span class="id">e_gt0</span>)<span class="id"> xey</span><span class="id"> =&gt;</span><span class="id"> /ltW/nonnegP[{}e]</span><span class="id"> e_gt0</span><span class="id"> xey</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> num_lt;</span><span class="id"> apply/bigmax_ltP</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -num_lt</span><span class="id"> /=;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> -[?</span><span class="id"> ?]</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> !mxE;</span><span class="id"> exact:</span><span class="id"> xey</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> e_gt0</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">le_lt_trans</span><span class="id"> _</span><span class="id"> xey</span>).<br/>
&nbsp;&nbsp;<span class="id">move:</span><span class="id"> e_gt0</span> (<span class="id">e_gt0</span>)<span class="id"> xey</span><span class="id"> =&gt;</span><span class="id"> /ltW/nonnegP[{}e]</span><span class="id"> e_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /</span>(<span class="id">bigmax_ltP</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> _%:sgn</span>))<span class="id"> /=</span><span class="id"> [e0</span><span class="id"> xey]</span><span class="id"> i</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">xey</span> (<span class="id">i,</span><span class="id"> j</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> !mxE;</span><span class="id"> exact</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">NormedZmod_PseudoMetric_eq</span>.<span class="id">Build</span><span class="id"> K</span><span class="id"> 'M[K]_</span>(<span class="id">m</span>.<span class="id">+1,</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> mx_norm_ball</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mx_normZ</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> 'M[K]_</span>(<span class="id">m</span>.<span class="id">+1,</span><span class="id"> n</span>.<span class="id">+1</span>))<span class="id"> :</span><span class="id"> `|</span><span class="id"> l</span><span class="id"> *:</span><span class="id"> x</span><span class="id"> |</span><span class="id"> =</span><span class="id"> `|</span><span class="id"> l</span><span class="id"> |</span><span class="id"> *</span><span class="id"> `|</span><span class="id"> x</span><span class="id"> |</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> {1</span><span class="id"> 3}/normr</span><span class="id"> /=</span><span class="id"> !mx_normE</span><br/>
&nbsp;(<span class="id">eq_bigr</span> (<span class="gallina-kwd">fun</span><span class="id"> i</span><span class="id"> =&gt;</span> (<span class="id">`|l|</span><span class="id"> *</span><span class="id"> `|x</span><span class="id"> i</span>.<span class="id">1</span><span class="id"> i</span>.<span class="id">2|</span>)<span class="id">%:nng</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> i</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> mxE</span><span class="id"> //=;</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> -num_eq</span><span class="id"> /=</span><span class="id"> normrM</span>.<br/>
<span class="id">elim/big_ind2</span><span class="id"> :</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> [|a</span><span class="id"> b</span><span class="id"> c</span><span class="id"> d</span><span class="id"> bE</span><span class="id"> dE];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> mulr0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> !num_max</span><span class="id"> bE</span><span class="id"> dE</span><span class="id"> maxr_pMr</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">PseudoMetricNormedZmod_Lmodule_isNormedModule</span>.<span class="id">Build</span><span class="id"> K</span><span class="id"> 'M[K]_</span>(<span class="id">m</span>.<span class="id">+1,</span><span class="id"> n</span>.<span class="id">+1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mx_normZ</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> matrix_NormedModule</span>.<br/>
<br/>
<div class="doc">Pairs </div>
<span class="vernacular">Section</span><span class="id"> prod_PseudoMetricNormedZmodule</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {U</span><span class="id"> V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_prod_normE</span><span class="id"> :</span><span class="id"> ball</span><span class="id"> =</span><span class="id"> ball_</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> `|</span><span class="id"> x</span><span class="id"> :</span><span class="id"> U</span><span class="id"> *</span><span class="id"> V</span><span class="id"> |</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> funeq2E</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [xu</span><span class="id"> xv]</span><span class="id"> e;</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [yu</span><span class="id"> yv]</span>.<br/>
<span class="id">rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> /prod_ball</span><span class="id"> -!ball_normE</span><span class="id"> /ball_</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> comparable_gt_max//</span><span class="id"> ?real_comparable//;</span><span class="id"> split=&gt;</span><span class="id"> /andP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> prod_norm_ball</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@ball</span><span class="id"> _</span><span class="id"> [the</span><span class="id"> pseudoMetricType</span><span class="id"> K</span><span class="id"> of</span> (<span class="id">U</span><span class="id"> *</span><span class="id"> V</span>)<span class="id">%type]</span><span class="id"> =</span><span class="id"> ball_</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> `|x|</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> -</span><span class="id"> ball_prod_normE</span>. Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> NormedZmod_PseudoMetric_eq</span>.<span class="id">Build</span><span class="id"> K</span> (<span class="id">U</span><span class="id"> *</span><span class="id"> V</span>)<span class="id">%type</span><br/>
&nbsp;&nbsp;<span class="id">prod_norm_ball</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> prod_PseudoMetricNormedZmodule</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> prod_NormedModule</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {U</span><span class="id"> V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> prod_norm_scale</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> U</span><span class="id"> *</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> `|</span><span class="id"> l</span><span class="id"> *:</span><span class="id"> x</span><span class="id"> |</span><span class="id"> =</span><span class="id"> `|l|</span><span class="id"> *</span><span class="id"> `|</span><span class="id"> x</span><span class="id"> |</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> prod_normE</span><span class="id"> /=</span><span class="id"> !normrZ</span><span class="id"> maxr_pMr</span>. Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">PseudoMetricNormedZmod_Tvs_isNormedModule</span>.<span class="id">Build</span><span class="id"> K</span> (<span class="id">U</span><span class="id"> *</span><span class="id"> V</span>)<span class="id">%type</span><br/>
&nbsp;&nbsp;<span class="id">prod_norm_scale</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> prod_NormedModule</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> example_of_sharing</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numDomainType</span>).<br/>
<br/>
<span class="vernacular">Example</span><span class="id"> matrix_triangke</span><span class="id"> m</span><span class="id"> n</span> (<span class="id">M</span><span class="id"> N</span><span class="id"> :</span><span class="id"> 'M[K]_</span>(<span class="id">m</span>.<span class="id">+1,</span><span class="id"> n</span>.<span class="id">+1</span>))<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">`|M</span><span class="id"> +</span><span class="id"> N|</span><span class="id"> &lt;=</span><span class="id"> `|M|</span><span class="id"> +</span><span class="id"> `|N|</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> ler_normD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Example</span><span class="id"> pair_triangle</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> K</span><span class="id"> *</span><span class="id"> K</span>)<span class="id"> :</span><span class="id"> `|x</span><span class="id"> +</span><span class="id"> y|</span><span class="id"> &lt;=</span><span class="id"> `|x|</span><span class="id"> +</span><span class="id"> `|y|</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> ler_normD</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> example_of_sharing</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> prod_NormedModule_lemmas</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {U</span><span class="id"> V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> fcvgr2dist_ltP</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> U}</span><span class="id"> {G</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> V}</span><br/>
&nbsp;&nbsp;<span class="id">{FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> {FG</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> G}</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> U</span>) (<span class="id">z</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">F,</span><span class="id"> G</span>)<span class="id"> --&gt;</span> (<span class="id">y,</span><span class="id"> z</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> y'</span><span class="id"> \near</span><span class="id"> F</span><span class="id"> &amp;</span><span class="id"> z'</span><span class="id"> \near</span><span class="id"> G,</span><span class="id"> `|</span> (<span class="id">y,</span><span class="id"> z</span>)<span class="id"> -</span> (<span class="id">y',</span><span class="id"> z'</span>)<span class="id"> |</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> fcvgrPdist_lt</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr2dist_ltP</span><span class="id"> {I</span><span class="id"> J}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> I}</span><span class="id"> {G</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> J}</span><br/>
&nbsp;&nbsp;<span class="id">{FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> {FG</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> G}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">g</span><span class="id"> :</span><span class="id"> J</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> U</span>) (<span class="id">z</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> @</span><span class="id"> F,</span><span class="id"> g</span><span class="id"> @</span><span class="id"> G</span>)<span class="id"> --&gt;</span> (<span class="id">y,</span><span class="id"> z</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> i</span><span class="id"> \near</span><span class="id"> F</span><span class="id"> &amp;</span><span class="id"> j</span><span class="id"> \near</span><span class="id"> G,</span><span class="id"> `|</span> (<span class="id">y,</span><span class="id"> z</span>)<span class="id"> -</span> (<span class="id">f</span><span class="id"> i,</span><span class="id"> g</span><span class="id"> j</span>)<span class="id"> |</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> fcvgr2dist_ltP;</span><span class="id"> split=&gt;</span><span class="id"> +</span><span class="id"> e</span><span class="id"> e0</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> e</span><span class="id"> e0</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> !near_simpl//</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> !near_simpl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr2dist_lt</span><span class="id"> {I</span><span class="id"> J}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> I}</span><span class="id"> {G</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> J}</span><br/>
&nbsp;&nbsp;<span class="id">{FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> {FG</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> G}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> U</span>) (<span class="id">g</span><span class="id"> :</span><span class="id"> J</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> U</span>) (<span class="id">z</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> @</span><span class="id"> F,</span><span class="id"> g</span><span class="id"> @</span><span class="id"> G</span>)<span class="id"> --&gt;</span> (<span class="id">y,</span><span class="id"> z</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> eps,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> eps</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> i</span><span class="id"> \near</span><span class="id"> F</span><span class="id"> &amp;</span><span class="id"> j</span><span class="id"> \near</span><span class="id"> G,</span><span class="id"> `|</span> (<span class="id">y,</span><span class="id"> z</span>)<span class="id"> -</span> (<span class="id">f</span><span class="id"> i,</span><span class="id"> g</span><span class="id"> j</span>)<span class="id"> |</span><span class="id"> &lt;</span><span class="id"> eps</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> cvgr2dist_ltP</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> prod_NormedModule_lemmas</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr2dist_ltP</span><span class="id"> {_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> F</span><span class="id"> G</span><span class="id"> FF</span><span class="id"> FG}</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> cvgr2dist_lt</span><span class="id"> {_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> F</span><span class="id"> G</span><span class="id"> FF</span><span class="id"> FG}</span>.<br/>
<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
<span class="id">note=</span><span class="id">&quot;use `fcvgr2dist_ltP` or a variant instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvg_dist2P</span><span class="id"> :=</span><span class="id"> fcvgr2dist_ltP</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<div class="doc">Normed vector spaces have some continuous functions that are in fact
continuous on pseudoMetricNormedZmodType </div>
<span class="vernacular">Section</span><span class="id"> NVS_continuity_pseudoMetricNormedZmodType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> opp_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="id">@GRing</span>.<span class="id">opp</span><span class="id"> V</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x;</span><span class="id"> apply/cvgrPdist_lt=&gt;</span><span class="id"> e</span><span class="id"> e0;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -opprD</span><span class="id"> normrN</span>.<br/>
<span class="id">exact:</span><span class="id"> cvgr_dist_lt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> add_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> z</span><span class="id"> :</span><span class="id"> V</span><span class="id"> *</span><span class="id"> V</span><span class="id"> =&gt;</span><span class="id"> z</span>.<span class="id">1</span><span class="id"> +</span><span class="id"> z</span>.<span class="id">2</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [/=</span><span class="id"> x</span><span class="id"> y];</span><span class="id"> apply/cvgrPdist_lt=&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near=&gt;</span><span class="id"> a</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprD</span><span class="id"> addrACA</span><span class="id"> normm_lt_split</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> natmul_continuous</span><span class="id"> n</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> :</span><span class="id"> V</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> *+</span><span class="id"> n</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> [|n]</span><span class="id"> x;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
<span class="id">apply/cvgrPdist_lt=&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near=&gt;</span><span class="id"> a</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -mulrnBl</span><span class="id"> normrMn</span><span class="id"> -mulr_natr</span><span class="id"> -ltr_pdivlMr</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="id">normr</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> K</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e0;</span><span class="id"> apply/nbhs_normP;</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> y</span>.<br/>
<span class="id">exact/le_lt_trans/ler_dist_dist</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> NVS_continuity_pseudoMetricNormedZmodType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> NVS_continuity_normedModType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> scale_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> z</span><span class="id"> :</span><span class="id"> K</span><span class="id"> *</span><span class="id"> V</span><span class="id"> =&gt;</span><span class="id"> z</span>.<span class="id">1</span><span class="id"> *:</span><span class="id"> z</span>.<span class="id">2</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [/=</span><span class="id"> k</span><span class="id"> x];</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near</span><span class="id"> +oo_K</span><span class="id"> =&gt;</span><span class="id"> M</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> l</span><span class="id"> z</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> have</span><span class="id"> M0</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> M</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@distm_lt_split</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">k</span><span class="id"> *:</span><span class="id"> z</span>))<span class="id"> //</span><span class="id"> -?</span>(<span class="id">scalerBr,</span><span class="id"> scalerBl</span>)<span class="id"> normrZ</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">M</span><span class="id"> *</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> z|</span>))<span class="id"> ?ler_wpM2r</span><span class="id"> -?ltr_pdivlMl//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> z;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt;</span><span class="id"> rewrite</span><span class="id"> //</span><span class="id"> mulr_gt0</span><span class="id"> ?invr_gt0</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">`|k</span><span class="id"> -</span><span class="id"> l|</span><span class="id"> *</span><span class="id"> M</span>))<span class="id"> ?ler_wpM2l</span><span class="id"> -?ltr_pdivlMr//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> z;</span><span class="id"> near:</span><span class="id"> M;</span><span class="id"> apply:</span><span class="id"> cvg_bounded</span> (<span class="id">@cvg_refl</span><span class="id"> _</span><span class="id"> _</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> l;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt;</span><span class="id"> rewrite</span><span class="id"> //</span><span class="id"> divr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Arguments</span><span class="id"> scale_continuous</span><span class="id"> _</span><span class="id"> _</span><span class="id"> :</span><span class="id"> clear</span><span class="id"> implicits</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> scaler_continuous</span><span class="id"> k</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> :</span><span class="id"> V</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> *:</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> apply:</span> (<span class="id">cvg_comp2</span> (<span class="id">cvg_cst</span><span class="id"> _</span>)<span class="id"> cvg_id</span> (<span class="id">scale_continuous</span> (<span class="id">_,</span><span class="id"> _</span>))).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> scalel_continuous</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> :</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> k</span><span class="id"> :</span><span class="id"> K</span><span class="id"> =&gt;</span><span class="id"> k</span><span class="id"> *:</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> k;</span><span class="id"> apply:</span> (<span class="id">cvg_comp2</span><span class="id"> cvg_id</span> (<span class="id">cvg_cst</span><span class="id"> _</span>) (<span class="id">scale_continuous</span> (<span class="id">_,</span><span class="id"> _</span>))).<br/>
Qed.</div></details>
<br/>
<div class="doc">Continuity of norm </div>
<span class="vernacular">End</span><span class="id"> NVS_continuity_normedModType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> NVS_continuity_mul</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mul_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> z</span><span class="id"> :</span><span class="id"> K</span><span class="id"> *</span><span class="id"> K</span><span class="id"> =&gt;</span><span class="id"> z</span>.<span class="id">1</span><span class="id"> *</span><span class="id"> z</span>.<span class="id">2</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> scale_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mulrl_continuous</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> K</span>)<span class="id"> :</span><span class="id"> continuous</span> (<span class="id"> *%R</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> scaler_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mulrr_continuous</span> (<span class="id">y</span><span class="id"> :</span><span class="id"> K</span>)<span class="id"> :</span><span class="id"> continuous</span> (<span class="id"> *%R^~</span><span class="id"> y</span><span class="id"> :</span><span class="id"> K</span><span class="id"> -&gt;</span><span class="id"> K</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> scalel_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> inv_continuous</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> K</span>)<span class="id"> :</span><span class="id"> x</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">@GRing</span>.<span class="id">inv</span><span class="id"> K</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x_neq0;</span><span class="id"> have</span><span class="id"> nx_gt0</span><span class="id"> :</span><span class="id"> `|x|</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> normr_gt0</span>.<br/>
<span class="id">apply/</span>(<span class="id">@cvgrPdist_ltp</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs</span><span class="id"> x</span>))<span class="id">;</span><span class="id"> near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> K</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> d</span>.<span class="id"> near=&gt;</span><span class="id"> e</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> y;</span><span class="id"> have</span><span class="id"> y_neq0</span><span class="id"> :</span><span class="id"> y</span><span class="id"> !=</span><span class="id"> 0</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> y;</span><span class="id"> apply:</span> (<span class="id">cvgr_neq0</span><span class="id"> x</span>).<br/>
<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> -div1r</span><span class="id"> -[y^-1]div1r</span><span class="id"> -mulNr</span><span class="id"> addf_div//</span><span class="id"> mul1r</span><span class="id"> mulN1r</span><span class="id"> normrM</span><span class="id"> normfV</span>.<br/>
<span class="id">rewrite</span><span class="id"> ltr_pdivrMr</span><span class="id"> ?normr_gt0</span><span class="id"> ?mulf_neq0//</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">e</span><span class="id"> *</span><span class="id"> d</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> y;</span> <span class="id"> apply:</span><span class="id"> cvgr_distC_lt</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> mulr_gt0</span>.<br/>
<span class="id">rewrite</span><span class="id"> ler_pM2l</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> normrM</span><span class="id"> -ler_pdivrMl//</span>.<br/>
<span class="id">near:</span><span class="id"> y;</span><span class="id"> apply:</span> (<span class="id">cvgr_norm_ge</span><span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ltr_pdivrMl//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> d;</span><span class="id"> apply:</span><span class="id"> nbhs_right_lt;</span><span class="id"> rewrite</span><span class="id"> mulr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> NVS_continuity_mul</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_composition_pseudometric</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">s</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgN</span><span class="id"> f</span><span class="id"> a</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> -</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> continuous_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> opp_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgNP</span><span class="id"> f</span><span class="id"> a</span><span class="id"> :</span><span class="id"> -</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -</span><span class="id"> a</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> split=&gt;</span><span class="id"> /cvgN//;</span><span class="id"> rewrite</span><span class="id"> !opprK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgN</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvgN</span><span class="id"> /cvgP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgNE</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> ((<span class="id">-</span><span class="id"> f</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split=&gt;</span><span class="id"> /cvgN;</span><span class="id"> rewrite</span><span class="id"> ?opprK</span><span class="id"> =&gt;</span><span class="id"> /cvgP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgMn</span><span class="id"> f</span><span class="id"> n</span><span class="id"> a</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span> ((<span class="id">@GRing</span>.<span class="id">natmul</span><span class="id"> _</span>)<span class="id">^~n</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> *+</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span> <span class="id"> apply:</span><span class="id"> continuous_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> natmul_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgMn</span><span class="id"> f</span><span class="id"> n</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (((<span class="id">@GRing</span>.<span class="id">natmul</span><span class="id"> _</span>)<span class="id">^~n</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvgMn</span><span class="id"> /cvgP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span> (<span class="id">f</span><span class="id"> +</span><span class="id"> g</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> +</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> continuous2_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply</span><span class="id"> add_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> +</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> cvgP</span><span class="id"> _</span> (<span class="id">cvgD</span><span class="id"> _</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgB</span><span class="id"> f</span><span class="id"> g</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span> (<span class="id">f</span><span class="id"> -</span><span class="id"> g</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgD</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgB</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> -</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> cvgP</span><span class="id"> _</span> (<span class="id">cvgB</span><span class="id"> _</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgDlE</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> ((<span class="id">f</span><span class="id"> +</span><span class="id"> g</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> g_cvg;</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /is_cvgD;</span><span class="id"> apply</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /is_cvgB</span><span class="id"> /</span>(_<span class="id"> g_cvg</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> addrK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgDrE</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> ((<span class="id">f</span><span class="id"> +</span><span class="id"> g</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> addrC;</span><span class="id"> apply:</span><span class="id"> is_cvgDlE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_sub0</span><span class="id"> f</span><span class="id"> g</span><span class="id"> a</span><span class="id"> :</span> (<span class="id">f</span><span class="id"> -</span><span class="id"> g</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> Cfg</span><span class="id"> Cg;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> cvgD</span><span class="id"> Cfg</span><span class="id"> Cg;</span><span class="id"> rewrite</span><span class="id"> subrK</span><span class="id"> add0r;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_zero</span><span class="id"> f</span><span class="id"> a</span><span class="id"> :</span> (<span class="id">f</span><span class="id"> -</span><span class="id"> cst</span><span class="id"> a</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>)<span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Cfa;</span><span class="id"> apply:</span><span class="id"> cvg_sub0</span><span class="id"> Cfa</span> (<span class="id">cvg_cst</span><span class="id"> _</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_norm</span><span class="id"> f</span><span class="id"> a</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span> (<span class="id">`|a|</span><span class="id"> :</span><span class="id"> K</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> continuous_cvg;</span><span class="id"> apply:</span><span class="id"> norm_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_norm</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> ((<span class="id">Num</span>.<span class="id">norm</span><span class="id"> \o</span><span class="id"> f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>)<span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> cvgP</span><span class="id"> _</span> (<span class="id">cvg_norm</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_cvg0P</span><span class="id"> f</span><span class="id"> :</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvg_norm;</span><span class="id"> rewrite</span><span class="id"> normr0</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> f0;</span><span class="id"> apply/cvgr0Pnorm_lt</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e_gt0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -normr_id;</span><span class="id"> apply:</span><span class="id"> cvgr0_norm_lt</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> norm_cvg0</span><span class="id"> f</span><span class="id"> :</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> norm_cvg0P</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_composition_pseudometric</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_composition_normed</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">s</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgZ</span><span class="id"> s</span><span class="id"> f</span><span class="id"> k</span><span class="id"> a</span><span class="id"> :</span><span class="id"> s</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span><span class="id"> x</span><span class="id"> *:</span><span class="id"> f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> k</span><span class="id"> *:</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> continuous2_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply</span><span class="id"> scale_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgZ</span><span class="id"> s</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">s</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> ((<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> s</span><span class="id"> x</span><span class="id"> *:</span><span class="id"> f</span><span class="id"> x</span>)<span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> cvgP</span><span class="id"> _</span> (<span class="id">cvgZ</span><span class="id"> _</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgZl</span><span class="id"> s</span><span class="id"> k</span><span class="id"> a</span><span class="id"> :</span><span class="id"> s</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> s</span><span class="id"> x</span><span class="id"> *:</span><span class="id"> a</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> k</span><span class="id"> *:</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgZ</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgZl</span><span class="id"> s</span><span class="id"> a</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">s</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> ((<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> s</span><span class="id"> x</span><span class="id"> *:</span><span class="id"> a</span>)<span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> cvgP</span><span class="id"> _</span> (<span class="id">cvgZl</span> <span class="id"> _</span>)<span class="id">;</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgZr</span><span class="id"> k</span><span class="id"> f</span><span class="id"> a</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> k</span><span class="id"> \*:</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> k</span><span class="id"> *:</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> apply:</span><span class="id"> cvgZ</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgZr</span><span class="id"> k</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">k</span><span class="id"> *:</span><span class="id"> f</span> <span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> cvgP</span><span class="id"> _</span> (<span class="id">cvgZr</span> <span class="id"> _</span>)<span class="id">;</span><span class="id"> apply</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgZrE</span><span class="id"> k</span><span class="id"> f</span><span class="id"> :</span><span class="id"> k</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">k</span><span class="id"> *:</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> k_neq0;</span><span class="id"> rewrite</span><span class="id"> propeqE;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [/</span>(<span class="id">@cvgZr</span><span class="id"> k^-1</span>)<span class="id">|/</span>(<span class="id">@cvgZr</span><span class="id"> k</span>)<span class="id">/cvgP//]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> [_</span><span class="id"> \*:</span><span class="id"> _]funext</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> scalerK//;</span><span class="id"> apply:</span><span class="id"> cvgP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_composition_normed</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_composition_field</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span> <span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> K</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgV</span><span class="id"> f</span><span class="id"> a</span><span class="id"> :</span><span class="id"> a</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> f\^-1</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a^-1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> k_neq0</span><span class="id"> f_cvg;</span><span class="id"> apply:</span><span class="id"> continuous_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> inv_continuous</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgVP</span><span class="id"> f</span><span class="id"> a</span><span class="id"> :</span><span class="id"> a</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> f\^-1</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a^-1</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> aN0;</span><span class="id"> split=&gt;</span><span class="id"> /</span>(<span class="id">cvgV</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> invrK</span><span class="id"> invr_eq0</span><span class="id"> inv_funK;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgV</span><span class="id"> f</span><span class="id"> :</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f\^-1</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvgV</span><span class="id"> cvf</span><span class="id"> /cvf</span><span class="id"> /cvgP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgM</span><span class="id"> f</span><span class="id"> g</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> *</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgZ</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgMl</span><span class="id"> f</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span> (<span class="id">f</span><span class="id"> x</span><span class="id"> *</span><span class="id"> b</span>)<span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> *</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgZl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgMr</span><span class="id"> g</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span> (<span class="id">a</span><span class="id"> *</span><span class="id"> g</span><span class="id"> x</span>)<span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> *</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgZr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgM</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> is_cvgZ</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgMr</span><span class="id"> g</span><span class="id"> a</span> (<span class="id">f</span><span class="id"> :=</span><span class="id"> fun=&gt;</span><span class="id"> a</span>)<span class="id"> :</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> is_cvgZr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgMrE</span><span class="id"> g</span><span class="id"> a</span> (<span class="id">f</span><span class="id"> :=</span><span class="id"> fun=&gt;</span><span class="id"> a</span>)<span class="id"> :</span><span class="id"> a</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> is_cvgZrE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgMl</span><span class="id"> f</span><span class="id"> a</span> (<span class="id">g</span><span class="id"> :=</span><span class="id"> fun=&gt;</span><span class="id"> a</span>)<span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f_cvg;</span><span class="id"> have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> =</span><span class="id"> g</span><span class="id"> \*</span><span class="id"> f</span><span class="gallina-kwd"> by</span><span class="id"> apply/funeqP=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> mulrC</span>.<br/>
<span class="id">exact:</span><span class="id"> is_cvgMr</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgMlE</span><span class="id"> f</span><span class="id"> a</span> (<span class="id">g</span><span class="id"> :=</span><span class="id"> fun=&gt;</span><span class="id"> a</span>)<span class="id"> :</span><span class="id"> a</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> a_neq0;</span><span class="id"> have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> =</span><span class="id"> g</span><span class="id"> \*</span><span class="id"> f</span><span class="gallina-kwd"> by</span><span class="id"> apply/funeqP=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> mulrC</span>.<br/>
<span class="id">exact:</span><span class="id"> is_cvgMrE</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_composition_field</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> limit_composition_pseudometric</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> K}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">s</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limN</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> -</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">f</span><span class="id"> +</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> +</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limB</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">f</span><span class="id"> -</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgB</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_norm</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> ((<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> :</span><span class="id"> K</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> `|lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id">|</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvg_norm</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> limit_composition_pseudometric</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> limit_composition_normed</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">s</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limZ</span><span class="id"> s</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">s</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">lim</span> ((<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> s</span><span class="id"> x</span><span class="id"> *:</span><span class="id"> f</span><span class="id"> x</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">s</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> *:</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgZ</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limZl</span><span class="id"> s</span><span class="id"> a</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">s</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">lim</span> ((<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> s</span><span class="id"> x</span><span class="id"> *:</span><span class="id"> a</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">s</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> *:</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgZl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limZr</span><span class="id"> k</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">k</span><span class="id"> *:</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> k</span><span class="id"> *:</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgZr</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> limit_composition_normed</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> limit_composition_field</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limM</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> *</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgM</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> limit_composition_field</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_composition_field_proper</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span> <span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T</span>)<span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> K</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limV</span><span class="id"> f</span><span class="id"> :</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f\^-1</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span> (<span class="id">lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>))<span class="id">^-1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgV</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgNpoint</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgVE</span><span class="id"> f</span><span class="id"> :</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f\^-1</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ?;</span><span class="id"> apply/propeqP;</span><span class="id"> split=&gt;</span><span class="id"> /is_cvgV;</span><span class="id"> last</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> inv_funK;</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> limV</span><span class="id"> ?invr_eq0//</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_composition_field_proper</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> ProperFilterRealType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_to_ge</span><span class="id"> f</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> F,</span><span class="id"> b</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> b</span><span class="id"> &lt;=</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /[swap]/</span>(<span class="id">closed_cvg</span><span class="id"> _</span> (<span class="id">@closed_ge</span><span class="id"> _</span><span class="id"> b</span>))<span class="id">/[apply]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgr_to_le</span><span class="id"> f</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> F</span><span class="id"> &lt;=</span><span class="id"> b</span>)<span class="id"> -&gt;</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /[swap]/</span>(<span class="id">closed_cvg</span><span class="id"> _</span> (<span class="id">@closed_le</span><span class="id"> _</span><span class="id"> b</span>))<span class="id">/[apply]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limr_ge</span><span class="id"> x</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> F,</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgr_to_ge</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limr_le</span><span class="id"> x</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> F,</span><span class="id"> x</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> &gt;=</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvgr_to_le</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvg_gt_ge</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> a</span><span class="id"> &lt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> u</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgr_ge</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__cvg_lt_le</span> (<span class="id">u</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> c</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">u</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> b</span><span class="id"> &lt;</span><span class="id"> c</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> u</span><span class="id"> n</span><span class="id"> &lt;=</span><span class="id"> c</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgr_le</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ProperFilterRealType</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgr_ge` and generalized to a `Filter`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvg_gt_ge</span><span class="id"> :=</span><span class="id"> __deprecated__cvg_gt_ge</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;renamed to `cvgr_le` and generalized to a `Filter`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> cvg_lt_le_:=</span><span class="id"> __deprecated__cvg_lt_le</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> local_continuity</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>) (<span class="id">s</span><span class="id"> t</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> K</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> K</span>) (<span class="id">a</span><span class="id"> :</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousN</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> f</span><span class="id"> x</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> g}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">f</span><span class="id"> +</span><span class="id"> g</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> f_cont</span><span class="id"> g_cont;</span><span class="id"> apply:</span><span class="id"> cvgD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousB</span><span class="id"> f</span><span class="id"> g</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> g}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">f</span><span class="id"> -</span><span class="id"> g</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> f_cont</span><span class="id"> g_cont;</span><span class="id"> apply:</span><span class="id"> cvgB</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousZ</span><span class="id"> s</span><span class="id"> f</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> s}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> s</span><span class="id"> x</span><span class="id"> *:</span><span class="id"> f</span><span class="id"> x</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgZ</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousZr</span><span class="id"> f</span><span class="id"> k</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">k</span><span class="id"> \*:</span><span class="id"> f</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgZr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousZl</span><span class="id"> s</span><span class="id"> a</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> s}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> z</span><span class="id"> =&gt;</span><span class="id"> s</span><span class="id"> z</span><span class="id"> *:</span><span class="id"> a</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgZl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousM</span><span class="id"> s</span><span class="id"> t</span><span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> s}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> t}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">s</span><span class="id"> \*</span><span class="id"> t</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> f_cont</span><span class="id"> g_cont;</span><span class="id"> apply:</span><span class="id"> cvgM</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousV</span><span class="id"> s</span><span class="id"> x</span><span class="id"> :</span><span class="id"> s</span><span class="id"> x</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> s}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span> (<span class="id">s</span><span class="id"> x</span>)<span class="id">^-1%R</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> cvgV</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> local_continuity</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> nbhs_ereal</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span> (<span class="id">P</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="gallina-kwd"> Prop</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_EFin</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span> (<span class="id">\forall</span><span class="id"> y</span><span class="id"> \near</span><span class="id"> x%:E,</span><span class="id"> P</span><span class="id"> y</span>)<span class="id"> &lt;-&gt;</span><span class="id"> \near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x%:E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> done</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_ereal_pinfty</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> +oo%E,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> &lt;-&gt;</span><span class="id"> [/\</span><span class="id"> P</span><span class="id"> +oo%E</span><span class="id"> &amp;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="id"> P</span><span class="id"> x%:E]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [|[Py]]</span><span class="id"> [x</span><span class="id"> [xr</span><span class="id"> Px]];</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> x;</span><span class="id"> split=&gt;</span><span class="id"> //</span><span class="id"> -[y||]//;</span><span class="id"> apply:</span><span class="id"> Px</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [|exists</span><span class="id"> x;</span><span class="id"> split=&gt;</span><span class="id"> //</span><span class="id"> y</span><span class="id"> xy];</span><span class="id"> apply:</span><span class="id"> Px</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_ereal_ninfty</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> -oo%E,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> &lt;-&gt;</span><span class="id"> [/\</span><span class="id"> P</span><span class="id"> -oo%E</span><span class="id"> &amp;</span><span class="id"> \forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> -oo,</span><span class="id"> P</span><span class="id"> x%:E]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [|[Py]]</span><span class="id"> [x</span><span class="id"> [xr</span><span class="id"> Px]];</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> x;</span><span class="id"> split=&gt;</span><span class="id"> //</span><span class="id"> -[y||]//;</span><span class="id"> apply:</span><span class="id"> Px</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [|exists</span><span class="id"> x;</span><span class="id"> split=&gt;</span><span class="id"> //</span><span class="id"> y</span><span class="id"> xy];</span><span class="id"> apply:</span><span class="id"> Px</span>.<br/>
Qed.</div></details>
<span class="vernacular">End</span><span class="id"> nbhs_ereal</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_fin</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numFieldType}</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> filter</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> \bar</span><span class="id"> R}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> fine_fcvg</span><span class="id"> a</span><span class="id"> :</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a%:E</span><span class="id"> -&gt;</span><span class="id"> fine</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/=</span><span class="id"> Fa;</span><span class="id"> apply/cvgrPdist_lt=&gt;</span><span class="id"> //</span><span class="id"> _/posnumP[e];</span><span class="id"> rewrite</span><span class="id"> near_simpl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> Fa;</span><span class="id"> apply/nbhs_EFin</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> apply:</span> (<span class="id">@cvgr_dist_lt</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs</span><span class="id"> a</span>)).<br/>
<span class="comment">(*&nbsp;BUG:&nbsp;using&nbsp;cvgr_dist_lt&nbsp;without&nbsp;(nbhs&nbsp;_)&nbsp;expands&nbsp;the&nbsp;definition&nbsp;of&nbsp;nbhs,&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;so&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;recognized&nbsp;as&nbsp;a&nbsp;filter&nbsp;anymore&nbsp;*)</span><br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> fcvg_is_fine</span><span class="id"> a</span><span class="id"> :</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a%:E</span><span class="id"> -&gt;</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> F</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply;</span><span class="id"> apply/nbhs_EFin;</span><span class="id"> near=&gt;</span><span class="id"> x</span>.<span class="id"> Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> filter</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> limit</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {I</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> I}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> fine_cvg</span><span class="id"> a</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a%:E</span><span class="id"> -&gt;</span><span class="id"> fine</span><span class="id"> \o</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> fine_fcvg</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_is_fine</span><span class="id"> a</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a%:E</span><span class="id"> -&gt;</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> F</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> fcvg_is_fine</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_EFin</span><span class="id"> a</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> F</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>)<span class="id"> -&gt;</span><span class="id"> fine</span><span class="id"> \o</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a%:E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Ffin</span><span class="id"> Fa</span><span class="id"> P/=</span><span class="id"> /nbhs_EFin</span><span class="id"> /Fa;</span><span class="id"> rewrite</span><span class="id"> !near_simpl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterS2</span><span class="id"> Ffin</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /fineK-&gt;</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> fine_cvgP</span><span class="id"> a</span><span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a%:E</span><span class="id"> &lt;-&gt;</span> (<span class="id">\near</span><span class="id"> F,</span><span class="id"> f</span><span class="id"> F</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>)<span class="id"> /\</span><span class="id"> fine</span><span class="id"> \o</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> split;[split;[exact:</span> (<span class="id">@cvg_is_fine</span><span class="id"> a</span>)<span class="id">|exact:</span><span class="id"> fine_cvg]|case;</span><span class="id"> apply:</span><span class="id"> cvg_EFin]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> neq0_fine_cvgP</span><span class="id"> a</span><span class="id"> :</span><span class="id"> a</span><span class="id"> !=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a%:E</span><span class="id"> &lt;-&gt;</span><span class="id"> fine</span><span class="id"> \o</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> a_neq0;</span><span class="id"> split=&gt;</span><span class="id"> [|Fa];</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> fine_cvg</span>.<br/>
<span class="id">apply:</span><span class="id"> cvg_EFin=&gt;</span><span class="id"> //;</span><span class="id"> near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> e</span>.<br/>
<span class="id">have</span><span class="id"> lea</span><span class="id"> :</span><span class="id"> e</span><span class="id"> &lt;=</span><span class="id"> `|a|</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> e;</span><span class="id"> apply:</span><span class="id"> nbhs_right_le;</span><span class="id"> rewrite</span><span class="id"> normr_gt0</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> x;</span><span class="id"> have</span><span class="id"> :</span><span class="id"> `|a</span><span class="id"> -</span><span class="id"> fine</span> (<span class="id">f</span><span class="id"> x</span>)<span class="id">|</span><span class="id"> &lt;</span><span class="id"> e</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> case:</span><span class="id"> f=&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> subr0;</span><span class="id"> apply:</span><span class="id"> contra_ltT</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> limit</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_fin</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> ecvg_realFieldType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {I}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> I}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> F}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> g</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">a</span><span class="id"> +?</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \+</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> +</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> yE</span><span class="id"> u</span><span class="id"> v</span><span class="id"> x</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> v</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x%:E</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> \+</span><span class="id"> v</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /cvgeyPge/=</span><span class="id"> foo</span><span class="id"> /fine_cvgP[Fg</span><span class="id"> gb];</span><span class="id"> apply/cvgeyPgey</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/wrap[//|Fgn]</span><span class="id"> :=</span><span class="id"> near</span><span class="id"> Fg</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -leeBlDr//</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">A</span><span class="id"> -</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> 1</span>))<span class="id">%:E</span>)<span class="id">//;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ?EFinB</span><span class="id"> leeB//</span><span class="id"> leeBlDr//</span><span class="id"> -[v</span><span class="id"> n]fineK//</span><span class="id"> -EFinD</span><span class="id"> lee_fin</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_distlDr//</span><span class="id"> ltW//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt</span>.<br/>
<span class="id">have</span><span class="id"> NyE</span><span class="id"> u</span><span class="id"> v</span><span class="id"> x</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> v</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x%:E</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> \+</span><span class="id"> v</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /cvgeNyPle/=</span><span class="id"> foo</span><span class="id"> /fine_cvgP</span><span class="id"> -[Fg</span><span class="id"> gb];</span><span class="id"> apply/cvgeNyPleNy</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/wrap[//|Fgn]</span><span class="id"> :=</span><span class="id"> near</span><span class="id"> Fg</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -leeBrDr//</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">A</span><span class="id"> -</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> 1</span>))<span class="id">%:E</span>)<span class="id">//;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ?EFinB</span><span class="id"> ?EFinD</span><span class="id"> leeB//</span><span class="id"> -[v</span><span class="id"> n]fineK//</span><span class="id"> -EFinD</span><span class="id"> lee_fin</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_distlCDr//</span><span class="id"> ltW//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt</span>.<br/>
<span class="id">have</span><span class="id"> yyE</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> v</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> \+</span><span class="id"> v</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /cvgeyPge</span><span class="id"> foo</span><span class="id"> /cvgeyPge</span><span class="id"> goo;</span><span class="id"> apply/cvgeyPge</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[leLHS]adde0</span><span class="id"> leeD//;</span><span class="id"> near:</span><span class="id"> y;</span><span class="id"> [apply:</span><span class="id"> foo|apply:</span><span class="id"> goo]</span>.<br/>
<span class="id">have</span><span class="id"> NyNyE</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> u</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> v</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> u</span><span class="id"> \+</span><span class="id"> v</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /cvgeNyPle</span><span class="id"> foo</span><span class="id"> /cvgeNyPle</span><span class="id"> goo;</span><span class="id"> apply/cvgeNyPle</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[leRHS]adde0</span><span class="id"> leeD//;</span><span class="id"> near:</span><span class="id"> y;</span><span class="id"> [apply:</span><span class="id"> foo|apply:</span><span class="id"> goo]</span>.<br/>
<span class="id">have</span><span class="id"> addfC</span><span class="id"> u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> u</span><span class="id"> \+</span><span class="id"> v</span><span class="id"> =</span><span class="id"> v</span><span class="id"> \+</span><span class="id"> u</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/funeqP</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> addeC</span>.<br/>
<span class="id">move:</span><span class="id"> a</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="id"> [a|</span><span class="id"> |]</span><span class="id"> [b|</span><span class="id"> |]</span><span class="id"> //=</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> ?</span>(<span class="id">addey,</span><span class="id"> addye,</span><span class="id"> addeNy,</span><span class="id"> addNye</span>)<span class="id">//=;</span><br/>
&nbsp;&nbsp;<span class="id">do</span><span class="id"> ?by</span><span class="id"> [apply:</span><span class="id"> yE|apply:</span><span class="id"> NyE|apply:</span><span class="id"> yyE|apply:</span><span class="id"> NyNyE]</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> /fine_cvgP[Ff</span><span class="id"> fa]</span><span class="id"> /fine_cvgP[Fg</span><span class="id"> ga];</span><span class="id"> rewrite</span><span class="id"> -EFinD</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/fine_cvgP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> [rewrite</span><span class="id"> fin_numD;</span><span class="id"> apply/andP;</span><span class="id"> split]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@cvg_trans</span><span class="id"> _</span> ((<span class="id">fine</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> \+</span> (<span class="id">fine</span><span class="id"> \o</span><span class="id"> g</span>)<span class="id"> @</span><span class="id"> F</span>))<span class="id">%R;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> cvgD</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> near_eq_cvg;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> fineD//</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /[swap];</span><span class="id"> rewrite</span><span class="id"> addfC;</span><span class="id"> apply:</span><span class="id"> yE</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /[swap];</span><span class="id"> rewrite</span><span class="id"> addfC;</span><span class="id"> apply:</span><span class="id"> NyE</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeN</span><span class="id"> f</span><span class="id"> x</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> -</span><span class="id"> f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> -</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> continuous_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> oppe_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeNP</span><span class="id"> f</span><span class="id"> a</span><span class="id"> :</span><span class="id"> -</span><span class="id"> f</span><span class="id"> x</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> -</span><span class="id"> a</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> split=&gt;</span><span class="id"> /cvgeN//;</span><span class="id"> rewrite</span><span class="id"> oppeK//;</span><span class="id"> under</span><span class="id"> eq_cvg</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> oppeK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeB</span><span class="id"> f</span><span class="id"> g</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">a</span><span class="id"> +?</span><span class="id"> -</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \-</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ab</span><span class="id"> fa</span><span class="id"> gb;</span><span class="id"> apply:</span><span class="id"> cvgeD</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> cvgeN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvge_sub0</span><span class="id"> f</span> (<span class="id">k</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">k</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -</span><span class="id"> k</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> k</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> kfin;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /cvgeD-/</span>(_ (<span class="id">cst</span><span class="id"> k</span>)<span class="id"> _</span><span class="id"> isT</span> (<span class="id">cvg_cst</span><span class="id"> _</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> add0e;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> subeK//</span>.<br/>
<span class="id">move:</span><span class="id"> k</span><span class="id"> kfin</span><span class="id"> =&gt;</span><span class="id"> [k</span><span class="id"> _</span><span class="id"> fk|</span><span class="id"> |]//;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">@subee</span><span class="id"> _</span><span class="id"> k%:E</span>)<span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvgeB</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> abse_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="id">@abse</span><span class="id"> R</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case=&gt;</span><span class="id"> [r|A</span><span class="id"> /=</span><span class="id"> [r</span><span class="id"> [rreal</span><span class="id"> rA]]|A</span><span class="id"> /=</span><span class="id"> [r</span><span class="id"> [rreal</span><span class="id"> rA]]]/=</span>.<br/>
<span class="id">-</span><span class="id"> exact/</span>(<span class="id">cvg_comp</span> (<span class="id">@norm_continuous</span><span class="id"> _</span><span class="id"> [the</span><span class="id"> normedModType</span><span class="id"> R</span><span class="id"> of</span><span class="id"> R^o]</span><span class="id"> r</span>)).<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> y</span><span class="id"> ry;</span><span class="id"> apply:</span><span class="id"> rA;</span><span class="id"> rewrite</span> (<span class="id">lt_le_trans</span><span class="id"> ry</span>)<span class="id">//</span><span class="id"> lee_abs</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span> (<span class="id">-</span><span class="id"> r</span>)<span class="id">%R;</span><span class="id"> rewrite</span><span class="id"> realN;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> EFinN</span><span class="id"> -lteNr</span><span class="id"> =&gt;</span><span class="id"> yr</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> rA;</span><span class="id"> rewrite</span> (<span class="id">lt_le_trans</span><span class="id"> yr</span>)<span class="id">//</span><span class="id"> -abseN</span><span class="id"> lee_abs</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_abse</span><span class="id"> f</span> (<span class="id">a</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> `|f</span><span class="id"> x|%E</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> `|a|%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> continuous_cvg</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> abse_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvg_abse</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">`|f</span><span class="id"> x|%E</span><span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> F]</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move/cvg_abse/cvgP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgeN</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">\-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvg_ex[l</span><span class="id"> fl];</span><span class="id"> apply:</span> (<span class="id">cvgP</span> (<span class="id">-</span><span class="id"> l</span>))<span class="id">;</span><span class="id"> exact:</span><span class="id"> cvgeN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgeNE</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">\-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> propeqE;</span><span class="id"> split=&gt;</span><span class="id"> /cvgeNP/cvgP//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_is_cvg</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> oppeK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mule_continuous</span> (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> continuous</span> (<span class="id">mule</span><span class="id"> r%:E</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /continuous_at;</span><span class="id"> wlog</span><span class="id"> r0</span><span class="id"> :</span><span class="id"> r</span><span class="id"> /</span> (<span class="id">r</span><span class="id"> &gt;</span><span class="id"> 0</span>)<span class="id">%R</span><span class="id"> =&gt;</span><span class="id"> [hwlog|]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [r0|r0|-&gt;]</span><span class="id"> :=</span><span class="id"> ltrgtP</span><span class="id"> r</span><span class="id"> 0;</span><span class="id"> do</span><span class="id"> ?exact:</span><span class="id"> hwlog;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> mul0e;</span><span class="id"> apply:</span><span class="id"> cvg_near_cst;</span><span class="id"> near=&gt;</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> mul0e</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> *%E</span><span class="id"> r%:E</span><span class="id"> =</span><span class="id"> \-</span> (<span class="id"> *%E</span> (<span class="id">-</span><span class="id"> r</span>)<span class="id">%:E</span> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/funeqP=&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> EFinN</span><span class="id"> mulNe</span><span class="id"> oppeK</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> x;</span><span class="id"> apply:</span> (<span class="id">continuous_comp</span> (<span class="id">hwlog</span> (<span class="id">-</span><span class="id"> r</span>)<span class="id">%R</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?oppr_gt0//</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> oppe_continuous</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> [s||]/=</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> -EFinM;</span><span class="id"> apply:</span><span class="id"> cvg_EFin</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/nbhs_EFin;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> fin_numM//</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> P</span><span class="id"> /=</span><span class="id"> Prs;</span><span class="id"> apply/nbhs_EFin=&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> near_fun</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> apply:</span><span class="id"> continuousM</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> apply:</span><span class="id"> cvg_cst</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> gt0_muley</span><span class="id"> ?lte_fin//</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> [u</span><span class="id"> [realu</span><span class="id"> uA]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">r^-1</span><span class="id"> *</span><span class="id"> u</span>)<span class="id">%R;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> realM//</span><span class="id"> realV</span><span class="id"> realE</span><span class="id"> ltW</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> rux;</span><span class="id"> apply:</span><span class="id"> uA;</span><span class="id"> move:</span><span class="id"> rux;</span><span class="id"> rewrite</span><span class="id"> EFinM</span><span class="id"> lte_pdivrMl</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> gt0_muleNy</span><span class="id"> ?lte_fin//</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> [u</span><span class="id"> [realu</span><span class="id"> uA]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">r^-1</span><span class="id"> *</span><span class="id"> u</span>)<span class="id">%R;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> realM//</span><span class="id"> realV</span><span class="id"> realE</span><span class="id"> ltW</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> xru;</span><span class="id"> apply:</span><span class="id"> uA;</span><span class="id"> move:</span><span class="id"> xru;</span><span class="id"> rewrite</span><span class="id"> EFinM</span><span class="id"> lte_pdivlMl</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeMl</span><span class="id"> f</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> y</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> *</span><span class="id"> f</span><span class="id"> n</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> y</span><span class="id"> *</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move:</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> [r|</span><span class="id"> |]//</span><span class="id"> _</span><span class="id"> /cvg_comp;</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> mule_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgeMl</span><span class="id"> f</span><span class="id"> y</span><span class="id"> :</span><span class="id"> y</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> ((<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> *</span><span class="id"> f</span><span class="id"> n</span>)<span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> fy</span><span class="id"> /</span>(<span class="id">cvgeMl</span><span class="id"> fy</span>)<span class="id">/cvgP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeMr</span><span class="id"> f</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> y</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x</span><span class="id"> -&gt;</span> (<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> f</span><span class="id"> n</span><span class="id"> *</span><span class="id"> y</span>)<span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> x</span><span class="id"> *</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> exact:</span><span class="id"> cvgeMl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgeMr</span><span class="id"> f</span><span class="id"> y</span><span class="id"> :</span><span class="id"> y</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> ((<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> f</span><span class="id"> n</span><span class="id"> *</span><span class="id"> y</span>)<span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> fy</span><span class="id"> /</span>(<span class="id">cvgeMr</span><span class="id"> fy</span>)<span class="id">/cvgP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_abse0P</span><span class="id"> f</span><span class="id"> :</span><span class="id"> abse</span><span class="id"> \o</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvg_abse;</span><span class="id"> rewrite</span><span class="id"> abse0</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /cvg_ballP</span><span class="id"> f0;</span><span class="id"> apply/cvg_ballP</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span>.<br/>
<span class="id">have</span><span class="id"> :=</span><span class="id"> !!</span><span class="id"> f0</span><span class="id"> _</span> (<span class="id">gt0</span><span class="id"> e</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> !near_simpl</span><span class="id"> =&gt;</span><span class="id"> absf0;</span><span class="id"> rewrite</span><span class="id"> near_simpl</span>.<br/>
<span class="id">apply:</span><span class="id"> filterS</span><span class="id"> absf0</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> /ball/=</span><span class="id"> /ereal_ball</span><span class="id"> !contract0</span><span class="id"> !sub0r</span><span class="id"> !normrN</span>.<br/>
<span class="id">have</span><span class="id"> [fx0|fx0]</span><span class="id"> :=</span><span class="id"> leP</span><span class="id"> 0</span> (<span class="id">f</span><span class="id"> x</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> gee0_abs</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">lte0_abs</span><span class="id"> fx0</span>)<span class="id"> contractN</span><span class="id"> normrN</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgeM_gt0_pinfty</span><span class="id"> f</span><span class="id"> g</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">0</span><span class="id"> &lt;</span><span class="id"> b</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> b_gt0</span><span class="id"> /cvgeyPge</span><span class="id"> foo</span><span class="id"> /fine_cvgP[gfin</span><span class="id"> gb];</span><span class="id"> apply/cvgeyPgey</span>.<br/>
<span class="id">near</span> (<span class="id">0%R</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> e;</span><span class="id"> near=&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">f</span><span class="id"> n</span><span class="id"> *</span><span class="id"> e%:E</span>))<span class="id">//</span><span class="id"> ?lee_pmul//</span><span class="id"> ?lee_fin//</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -lee_pdivrMr</span><span class="id"> ?divr_gt0//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> foo</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 1</span>)<span class="id"> ?lee_fin//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> foo</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@fineK</span><span class="id"> _</span> (<span class="id">g</span><span class="id"> n</span>))<span class="id"> ?lee_fin;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> gfin</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span> (<span class="id">cvgr_ge</span><span class="id"> b</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgeM_lt0_pinfty</span> <span class="id"> f</span><span class="id"> g</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">b</span><span class="id"> &lt;</span><span class="id"> 0</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> b0</span><span class="id"> /cvgeyPge</span><span class="id"> foo</span><span class="id"> /fine_cvgP</span><span class="id"> -[gfin</span><span class="id"> gb];</span><span class="id"> apply/cvgeNyPleNy</span>.<br/>
<span class="id">near</span> (<span class="id">0%R</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> e;</span><span class="id"> near=&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
<span class="id">rewrite</span><span class="id"> -leeN2</span><span class="id"> -muleN</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">f</span><span class="id"> n</span><span class="id"> *</span><span class="id"> e%:E</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -lee_pdivrMr</span><span class="id"> ?mulr_gt0</span><span class="id"> ?oppr_gt0//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> foo</span>.<br/>
<span class="id">rewrite</span><span class="id"> lee_pmul</span><span class="id"> ?lee_fin//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 1</span>)<span class="id"> ?lee_fin//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> foo</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@fineK</span><span class="id"> _</span> (<span class="id">g</span><span class="id"> n</span>))<span class="id"> ?lee_fin;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> gfin</span>.<br/>
<span class="id">near:</span><span class="id"> n;</span><span class="id"> apply:</span> (<span class="id">cvgr_ge</span> (<span class="id">-</span><span class="id"> b</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> 1?cvgNP//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> e;</span><span class="id"> apply:</span><span class="id"> nbhs_right_lt;</span><span class="id"> rewrite</span><span class="id"> oppr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgeM_gt0_ninfty</span><span class="id"> f</span><span class="id"> g</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">0</span><span class="id"> &lt;</span><span class="id"> b</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> b0</span><span class="id"> foo</span><span class="id"> gb;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -muleNN</span>.<br/>
<span class="id">apply:</span> (<span class="id">@cvgeM_lt0_pinfty</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">-</span><span class="id"> b</span>)<span class="id">%R</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> oppr_lt0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">oppeK</span><span class="id"> +oo</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> cvgeN</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> EFinN;</span><span class="id"> apply:</span><span class="id"> cvgeN</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> cvgeM_lt0_ninfty</span><span class="id"> f</span><span class="id"> g</span><span class="id"> b</span><span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">b</span><span class="id"> &lt;</span><span class="id"> 0</span>)<span class="id">%R</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b%:E</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> b0</span><span class="id"> foo</span><span class="id"> gb;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -muleNN</span>.<br/>
<span class="id">apply:</span> (<span class="id">@cvgeM_gt0_pinfty</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">-</span><span class="id"> b</span>)<span class="id">%R</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> oppr_gt0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">oppeK</span><span class="id"> +oo</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> cvgeN</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> EFinN;</span><span class="id"> apply:</span><span class="id"> cvgeN</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgeM</span><span class="id"> f</span><span class="id"> g</span> (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;<span class="id">a</span><span class="id"> *?</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> *</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [:apoo]</span><span class="id"> [:bnoo]</span><span class="id"> [:poopoo]</span><span class="id"> [:poonoo];</span><span class="id"> move:</span><span class="id"> a</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="id"> [a|</span><span class="id"> |]</span><span class="id"> [b|</span><span class="id"> |]</span><span class="id"> //</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> _</span><span class="id"> /fine_cvgP[finf</span><span class="id"> fa]</span><span class="id"> /fine_cvgP[fing</span><span class="id"> gb]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/fine_cvgP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near</span><span class="id"> do</span><span class="id"> apply:</span><span class="id"> fin_numM;</span><span class="id"> [apply:</span><span class="id"> finf</span><span class="id"> |</span><span class="id"> apply:</span><span class="id"> fing]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@cvg_trans</span><span class="id"> _</span> (((<span class="id">fine</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> \*</span> (<span class="id">fine</span><span class="id"> \o</span><span class="id"> g</span>))<span class="id"> @</span><span class="id"> F</span>)<span class="id">%R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> near_eq_cvg;</span><span class="id"> near=&gt;</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -[in</span><span class="id"> RHS]</span>(<span class="id">@fineK</span><span class="id"> _</span> (<span class="id">f</span><span class="id"> n</span>))<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> finf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[in</span><span class="id"> RHS]</span>(<span class="id">@fineK</span><span class="id"> _</span> (<span class="id">g</span><span class="id"> n</span>))<span class="id"> //;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> fing</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> cvgM</span>.<br/>
<span class="id">-</span><span class="id"> move:</span><span class="id"> f</span><span class="id"> g</span><span class="id"> a;</span><span class="id"> abstract:</span><span class="id"> apoo</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> {}f</span><span class="id"> {}g</span><span class="id"> {}a</span><span class="id"> +</span><span class="id"> fa</span><span class="id"> goo;</span><span class="id"> have</span><span class="id"> [a0</span><span class="id"> _|a0</span><span class="id"> _|-&gt;]</span><span class="id"> :=</span><span class="id"> ltgtP</span><span class="id"> a</span><span class="id"> 0%R</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> mulry</span><span class="id"> ltr0_sg//</span><span class="id"> ?mulN1e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> exact:</span> (<span class="id">cvgeM_lt0_pinfty</span><span class="id"> a0</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> mulry</span><span class="id"> gtr0_sg//</span><span class="id"> ?mul1e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> exact:</span> (<span class="id">cvgeM_gt0_pinfty</span><span class="id"> a0</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /mule_def</span><span class="id"> eqxx</span>.<br/>
<span class="id">-</span><span class="id"> move:</span><span class="id"> f</span><span class="id"> g</span><span class="id"> a;</span><span class="id"> abstract:</span><span class="id"> bnoo</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> {}f</span><span class="id"> {}g</span><span class="id"> {}a</span><span class="id"> +</span><span class="id"> fa</span><span class="id"> goo;</span><span class="id"> have</span><span class="id"> [a0</span><span class="id"> _|a0</span><span class="id"> _|-&gt;]</span><span class="id"> :=</span><span class="id"> ltgtP</span><span class="id"> a</span><span class="id"> 0%R</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> mulrNy</span><span class="id"> ltr0_sg//</span><span class="id"> ?mulN1e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> exact:</span> (<span class="id">cvgeM_lt0_ninfty</span><span class="id"> a0</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> mulrNy</span><span class="id"> gtr0_sg//</span><span class="id"> ?mul1e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> exact:</span> (<span class="id">cvgeM_gt0_ninfty</span><span class="id"> a0</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /mule_def</span><span class="id"> eqxx</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> mule_defC</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> foo</span><span class="id"> gb;</span><span class="id"> rewrite</span><span class="id"> muleC</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> exact:</span><span class="id"> apoo</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> _;</span><span class="id"> move:</span><span class="id"> f</span><span class="id"> g;</span><span class="id"> abstract:</span><span class="id"> poopoo</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> {}f</span><span class="id"> {}g</span><span class="id"> /cvgeyPge</span><span class="id"> foo</span><span class="id"> /cvgeyPge</span><span class="id"> goo</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> mulyy;</span><span class="id"> apply/cvgeyPgey;</span><span class="id"> near=&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> A_gt0</span><span class="id"> :</span> (<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> A</span>)<span class="id">%R</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[leLHS]mule1</span><span class="id"> lee_pmul//=;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> [apply:</span><span class="id"> foo|apply:</span><span class="id"> goo]</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> _;</span><span class="id"> move:</span><span class="id"> f</span><span class="id"> g;</span><span class="id"> abstract:</span><span class="id"> poonoo</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> {}f</span><span class="id"> {}g</span><span class="id"> /cvgeyPge</span><span class="id"> foo</span><span class="id"> /cvgeNyPle</span><span class="id"> goo</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> mulyNy;</span><span class="id"> apply/cvgeNyPle</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> near=&gt;</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">g</span><span class="id"> n</span>))<span class="id">//;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> goo</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> lee_nemull;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> foo</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">-</span><span class="id"> 1</span>)<span class="id">%:E</span>)<span class="id">//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> apply:</span><span class="id"> goo;</span><span class="id"> rewrite</span><span class="id"> ltrN10</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> mule_defC</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> foo</span><span class="id"> gb;</span><span class="id"> rewrite</span><span class="id"> muleC</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> exact:</span><span class="id"> bnoo</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> _</span><span class="id"> foo</span><span class="id"> goo</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> muleC;</span><span class="id"> exact:</span><span class="id"> poonoo</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> _</span><span class="id"> foo</span><span class="id"> goo;</span><span class="id"> rewrite</span><span class="id"> mulNyNy</span><span class="id"> -mulyy</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -muleNN;</span><span class="id"> apply:</span><span class="id"> poopoo;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -/</span>(<span class="id">-</span><span class="id"> -oo</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> cvgeN</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ecvg_realFieldType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> max_cts</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_min</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R^o</span>)<span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> g}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">f</span><span class="id"> \min</span><span class="id"> g</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ctsf</span><span class="id"> ctsg</span>.<br/>
<span class="id">under</span><span class="id"> [_</span><span class="id"> \min</span><span class="id"> _]eq_fun</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> minr_absE</span>.<br/>
<span class="id">apply:</span><span class="id"> cvgM;</span><span class="id"> [|exact:</span><span class="id"> cvg_cst];</span><span class="id"> apply:cvgD;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> cvgD</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvgN;</span><span class="id"> apply:</span><span class="id"> cvg_norm;</span><span class="id"> apply:</span><span class="id"> cvgB</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_max</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R^o</span>)<span class="id"> x</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span><span class="id"> g}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">f</span><span class="id"> \max</span><span class="id"> g</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ctsf</span><span class="id"> ctsg</span>.<br/>
<span class="id">under</span><span class="id"> [_</span><span class="id"> \max</span><span class="id"> _]eq_fun</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> maxr_absE</span>.<br/>
<span class="id">apply:</span><span class="id"> cvgM;</span><span class="id"> [|exact:</span><span class="id"> cvg_cst];</span><span class="id"> apply:cvgD;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> cvgD</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvg_norm;</span><span class="id"> apply:</span><span class="id"> cvgB</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> max_cts</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> pseudoMetricDist</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> edist</span> (<span class="id">xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span>)<span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">ereal_inf</span> (<span class="id">EFin</span><span class="id"> @`</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> |</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> /\</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> r</span><span class="id"> xy</span>.<span class="id">2]</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_ge0</span> (<span class="id">xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span>)<span class="id"> :</span> (<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> edist</span><span class="id"> xy</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> lb_ereal_inf</span><span class="id"> =&gt;</span><span class="id"> z</span><span class="id"> [+</span><span class="id"> []]</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[r]</span><span class="id"> _</span><span class="id"> &lt;-;</span><span class="id"> rewrite</span><span class="id"> lee_fin</span>.<br/>
Qed.</div></details>
<span class="vernacular">Hint</span><span class="id"> Resolve</span><span class="id"> edist_ge0</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_neqNy</span> (<span class="id">xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span>)<span class="id"> :</span> (<span class="id">edist</span><span class="id"> xy</span><span class="id"> !=</span><span class="id"> -oo</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -lteNye</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 0%E</span>). Qed.</div></details>
<span class="vernacular">Hint</span><span class="id"> Resolve</span><span class="id"> edist_neqNy</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_lt_ball</span><span class="id"> r</span> (<span class="id">xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span>)<span class="id"> :</span> (<span class="id">edist</span><span class="id"> xy</span><span class="id"> &lt;</span><span class="id"> r%:E</span>)<span class="id">%E</span><span class="id"> -&gt;</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> r</span><span class="id"> xy</span>.<span class="id">2</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case/ereal_inf_lt</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> [+</span><span class="id"> []]</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[eps]</span><span class="id"> bxye</span><span class="id"> &lt;-;</span><span class="id"> rewrite</span><span class="id"> lte_fin</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/ltW/le_ball;</span><span class="id"> exact</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_fin</span><span class="id"> r</span> (<span class="id">xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> r</span><span class="id"> xy</span>.<span class="id">2</span><span class="id"> -&gt;</span> (<span class="id">edist</span><span class="id"> xy</span><span class="id"> &lt;=</span><span class="id"> r%:E</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move:</span><span class="id"> r</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[r]</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">ereal_inf1</span><span class="id"> r%:num%:E</span>)<span class="id"> le_ereal_inf</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> -&gt;</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> r%:num;</span><span class="id"> split</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_pinftyP</span> (<span class="id">xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">edist</span><span class="id"> xy</span><span class="id"> =</span><span class="id"> +oo</span>)<span class="id">%E</span><span class="id"> &lt;-&gt;</span> (<span class="gallina-kwd">forall</span><span class="id"> r,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> r</span><span class="id"> xy</span>.<span class="id">2</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move/ereal_inf_pinfty</span><span class="id"> =&gt;</span><span class="id"> xrb</span><span class="id"> r</span><span class="id"> rpos</span><span class="id"> rb;</span><span class="id"> move:</span> (<span class="id">ltry</span><span class="id"> r</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltey</span><span class="id"> =&gt;</span><span class="id"> /eqP</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> apply:</span><span class="id"> xrb;</span><span class="gallina-kwd"> exists</span><span class="id"> r</span>.<br/>
<span class="id">rewrite</span><span class="id"> /edist=&gt;</span><span class="id"> nrb;</span><span class="id"> suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> |</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> /\</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> r</span><span class="id"> xy</span>.<span class="id">2]</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> image_set0</span><span class="id"> ereal_inf0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -subset0</span><span class="id"> =&gt;</span><span class="id"> r</span><span class="id"> [?]</span><span class="id"> rb;</span><span class="id"> apply:</span><span class="id"> nrb;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> rb</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_finP</span> (<span class="id">xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">edist</span><span class="id"> xy</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>)<span class="id">%E</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> r,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> &amp;</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> r</span><span class="id"> xy</span>.<span class="id">2</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> ge0_fin_numE</span><span class="id"> ?edist_ge0//</span><span class="id"> ltey</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">rwP</span> (<span class="id">negPP</span><span class="id"> eqP</span>))<span class="id">;</span><span class="id"> apply/iff_not2;</span><span class="id"> rewrite</span><span class="id"> notE</span>.<br/>
<span class="id">apply:</span> (<span class="id">iff_trans</span> (<span class="id">edist_pinftyP</span><span class="id"> _</span>))<span class="id">;</span><span class="id"> apply:</span> (<span class="id">iff_trans</span><span class="id"> _</span> (<span class="id">forall2NP</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
<span class="gallina-kwd">by</span><span class="id"> under</span><span class="id"> eq_forall</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> implyE</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_fin_open</span><span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span><span class="id"> |</span><span class="id"> edist</span><span class="id"> xy</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> z</span><span class="id"> /=</span><span class="id"> /edist_finP</span><span class="id"> []</span><span class="id"> _/posnumP[r]</span><span class="id"> bzr</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">ball</span><span class="id"> z</span>.<span class="id">1</span><span class="id"> r%:num,</span><span class="id"> ball</span><span class="id"> z</span>.<span class="id">2</span><span class="id"> r%:num</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> split;</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> a</span><span class="id"> b</span><span class="id"> [bza</span><span class="id"> bzb];</span><span class="id"> apply/edist_finP;</span><span class="gallina-kwd"> exists</span> (<span class="id">r%:num</span><span class="id"> +</span><span class="id"> r%:num</span><span class="id"> +</span><span class="id"> r%:num</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">exact/</span>(<span class="id">ball_triangle</span><span class="id"> _</span><span class="id"> bzb</span>)<span class="id">/</span>(<span class="id">ball_triangle</span><span class="id"> _</span><span class="id"> bzr</span>)<span class="id">/ball_sym</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_fin_closed</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span><span class="id"> |</span><span class="id"> edist</span><span class="id"> xy</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> z</span><span class="id"> /=</span><span class="id"> /</span>(_ (<span class="id">ball</span><span class="id"> z</span><span class="id"> 1</span>))<span class="id"> [];</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> w</span><span class="id"> [/edist_finP</span><span class="id"> []</span><span class="id"> _/posnumP[r]</span><span class="id"> babr</span><span class="id"> [bz1w1</span><span class="id"> bz2w2]];</span><span class="id"> apply/edist_finP</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">1</span><span class="id"> +</span> (<span class="id">r%:num</span><span class="id"> +</span><span class="id"> 1</span>))<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">exact/</span>(<span class="id">ball_triangle</span><span class="id"> bz1w1</span>)<span class="id">/</span>(<span class="id">ball_triangle</span><span class="id"> babr</span>)<span class="id">/ball_sym</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_pinfty_open</span><span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> :</span><span class="id"> X</span><span class="id"> *</span><span class="id"> X</span><span class="id"> |</span><span class="id"> edist</span><span class="id"> xy</span><span class="id"> =</span><span class="id"> +oo]%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -closedC;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> edist_fin_closed;</span><span class="id"> congr</span> (_<span class="id"> _</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ?ge0_fin_numE//</span><span class="id"> ltey</span><span class="id"> =&gt;</span><span class="id"> /eqP</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_sym</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> X</span>)<span class="id"> :</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> =</span><span class="id"> edist</span> (<span class="id">y,</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /edist</span><span class="id"> /=;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> ball_symE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_triangle</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> z</span><span class="id"> :</span><span class="id"> X</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">edist</span> (<span class="id">x,</span><span class="id"> z</span>)<span class="id"> &lt;=</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> +</span><span class="id"> edist</span> (<span class="id">y,</span><span class="id"> z</span>))<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [-&gt;|]</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>))<span class="id"> +oo%E;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> addye</span><span class="id"> ?leey</span>.<br/>
<span class="id">have</span><span class="id"> [-&gt;|]</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">edist</span> (<span class="id">y,</span><span class="id"> z</span>))<span class="id"> +oo%E;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> addey</span><span class="id"> ?leey</span>.<br/>
<span class="id">rewrite</span><span class="id"> -?ltey</span><span class="id"> -?ge0_fin_numE//</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /edist_finP</span><span class="id"> [_/posnumP[r2]</span><span class="id"> /=</span><span class="id"> yz]</span><span class="id"> /edist_finP</span><span class="id"> [_/posnumP[r1]</span><span class="id"> /=</span><span class="id"> xy]</span>.<br/>
<span class="id">have</span><span class="id"> [|]</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> z</span>))<span class="id"> +oo%E</span>.<br/>
&nbsp;&nbsp;<span class="id">move/edist_pinftyP</span><span class="id"> /</span>(_ (<span class="id">r1%:num</span><span class="id"> +</span><span class="id"> r2%:num</span>)<span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> -[//|]</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">ball_triangle</span><span class="id"> xy</span>).<br/>
<span class="id">rewrite</span><span class="id"> -ltey</span><span class="id"> -ge0_fin_numE//</span><span class="id"> =&gt;</span><span class="id"> /[dup]</span><span class="id"> xzfin</span>.<br/>
<span class="id">move/edist_finP</span><span class="id"> =&gt;</span><span class="id"> [_/posnumP[del]</span><span class="id"> /=</span><span class="id"> xz]</span>.<br/>
<span class="id">rewrite</span><span class="id"> /edist</span><span class="id"> /=</span><span class="id"> ?ereal_inf_EFin;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">r1%:num</span><span class="id"> +</span><span class="id"> r2%:num</span>)<span class="id">;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span> (<span class="id">ball_triangle</span><span class="id"> xy</span>).<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=</span><span class="id"> [/ltW]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r1%:num;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=</span><span class="id"> [/ltW]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r2%:num;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=</span><span class="id"> [/ltW]</span>.<br/>
<span class="id">rewrite</span><span class="id"> -EFinD</span><span class="id"> lee_fin</span><span class="id"> -inf_sumE</span><span class="id"> //;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> split;</span><span class="id"> [exists</span><span class="id"> r2%:num;</span><span class="id"> split|</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=</span><span class="id"> [/ltW]]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> split;</span><span class="id"> [exists</span><span class="id"> r1%:num;</span><span class="id"> split|</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=</span><span class="id"> [/ltW]]</span>.<br/>
<span class="id">apply:</span><span class="id"> lb_le_inf</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">r1%:num</span><span class="id"> +</span><span class="id"> r2%:num</span>)<span class="id">;</span><span class="gallina-kwd"> exists</span><span class="id"> r1%:num</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> r2%:num</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> ?</span><span class="id"> [+</span><span class="id"> []]</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[p]</span><span class="id"> xpy</span><span class="id"> [+</span><span class="id"> []]</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[q]</span><span class="id"> yqz</span><span class="id"> &lt;-</span>.<br/>
<span class="id">apply:</span><span class="id"> inf_lbound;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=</span><span class="id"> [/ltW]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span> (<span class="id">ball_triangle</span><span class="id"> xpy</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_continuous</span><span class="id"> :</span><span class="id"> continuous</span><span class="id"> edist</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [x</span><span class="id"> y];</span><span class="id"> have</span><span class="id"> [pE</span><span class="id"> U</span><span class="id"> /=</span><span class="id"> Upinf|]</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>))<span class="id"> +oo%E</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> nbhs_simpl</span><span class="id"> /=;</span><span class="id"> apply</span> (<span class="id">@filterS</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> |</span><span class="id"> edist</span><span class="id"> xy</span><span class="id"> =</span><span class="id"> +oo]%E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> z</span><span class="id"> /=</span><span class="id"> -&gt;;</span><span class="id"> apply:</span><span class="id"> nbhs_singleton;</span><span class="id"> move:</span><span class="id"> pE</span><span class="id"> Upinf</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> open_nbhs_nbhs;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> edist_pinfty_open</span>.<br/>
<span class="id">rewrite</span><span class="id"> -ltey</span><span class="id"> -ge0_fin_numE//</span><span class="id"> =&gt;</span><span class="id"> efin</span>.<br/>
<span class="id">rewrite</span><span class="id"> /continuous_at</span><span class="id"> -[edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id">]fineK//;</span><span class="id"> apply:</span><span class="id"> cvg_EFin</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> edist_fin_open</span><span class="id"> efin;</span><span class="id"> apply:</span><span class="id"> filter_app;</span><span class="id"> near=&gt;</span><span class="id"> w</span>.<br/>
<span class="id">apply/cvgrPdist_le</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[eps]</span>.<br/>
<span class="id">suff:</span><span class="id"> \forall</span><span class="id"> t</span><span class="id"> \near</span> (<span class="id">nbhs</span><span class="id"> x,</span><span class="id"> nbhs</span><span class="id"> y</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">`|fine</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>))<span class="id"> -</span><span class="id"> fine</span> (<span class="id">edist</span><span class="id"> t</span>)<span class="id">|</span><span class="id"> &lt;=</span><span class="id"> eps%:num</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
<span class="id">rewrite</span><span class="id"> -near2_pair;</span><span class="id"> near=&gt;</span><span class="id"> a</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">have</span><span class="id"> abxy</span><span class="id"> :</span> (<span class="id">edist</span> (<span class="id">a,</span><span class="id"> b</span>)<span class="id"> &lt;=</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> a</span>)<span class="id"> +</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> +</span><span class="id"> edist</span> (<span class="id">y,</span><span class="id"> b</span>))<span class="id">%E</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">edist_sym</span><span class="id"> x</span><span class="id"> a</span>)<span class="id"> -addeA</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_trans</span> (<span class="id">@edist_triangle</span><span class="id"> _</span><span class="id"> x</span><span class="id"> _</span>))<span class="id"> ?leeD</span><span class="id"> ?edist_triangle</span>.<br/>
<span class="id">have</span><span class="id"> xyab</span><span class="id"> :</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> &lt;=</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> a</span>)<span class="id"> +</span><span class="id"> edist</span> (<span class="id">a,</span><span class="id"> b</span>)<span class="id"> +</span><span class="id"> edist</span> (<span class="id">y,</span><span class="id"> b</span>))<span class="id">%E</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">edist_sym</span><span class="id"> y</span><span class="id"> b</span>)<span class="id"> -addeA</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">le_trans</span> (<span class="id">@edist_triangle</span><span class="id"> _</span><span class="id"> a</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> ?leeD//</span><span class="id"> ?edist_triangle</span>.<br/>
<span class="id">have</span><span class="id"> xafin</span><span class="id"> :</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> a</span>)<span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/edist_finP;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;//;</span><span class="id"> near:</span><span class="id"> a;</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="id">have</span><span class="id"> ybfin</span><span class="id"> :</span><span class="id"> edist</span> (<span class="id">y,</span><span class="id"> b</span>)<span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/edist_finP;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;//;</span><span class="id"> near:</span><span class="id"> b;</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="id">have</span><span class="id"> abfin</span><span class="id"> :</span><span class="id"> edist</span> (<span class="id">a,</span><span class="id"> b</span>)<span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ge0_fin_numE//</span> (<span class="id">le_lt_trans</span><span class="id"> abxy</span>)<span class="id"> ?lte_add_pinfty//</span><span class="id"> -ge0_fin_numE</span>.<br/>
<span class="id">have</span><span class="id"> xyabfin</span><span class="id"> :</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> -</span><span class="id"> edist</span> (<span class="id">a,</span><span class="id"> b</span>))<span class="id">%E</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> fin_numB</span><span class="id"> abfin</span><span class="id"> efin</span>.<br/>
<span class="id">rewrite</span><span class="id"> -fineB//</span><span class="id"> -fine_abse//</span><span class="id"> -lee_fin</span><span class="id"> fineK</span><span class="id"> ?abse_fin_num//</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> a</span>)<span class="id"> +</span><span class="id"> edist</span> (<span class="id">y,</span><span class="id"> b</span>))<span class="id">%E</span>)<span class="id">//;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> [eps%:num]splitr/=</span><span class="id"> EFinD</span><span class="id"> leeD//;</span><span class="id"> apply:</span><span class="id"> edist_fin</span><span class="id"> =&gt;</span><span class="id"> //=;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[near:</span><span class="id"> a</span><span class="id"> |</span><span class="id"> near:</span><span class="id"> b];</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="id">have</span><span class="id"> [ab_le_xy|/ltW</span><span class="id"> xy_le_ab]</span><span class="id"> :=</span><span class="id"> leP</span> (<span class="id">edist</span> (<span class="id">a,</span><span class="id"> b</span>)) (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gee0_abs</span><span class="id"> ?subre_ge0//</span><span class="id"> leeBlDr//</span><span class="id"> addeAC</span>.<br/>
<span class="id">rewrite</span><span class="id"> lee0_abs</span><span class="id"> ?sube_le0//</span><span class="id"> oppeB</span><span class="id"> ?fin_num_adde_defr//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> addeC</span><span class="id"> leeBlDr//</span><span class="id"> addeAC</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_closeP</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> close</span><span class="id"> x</span><span class="id"> y</span><span class="id"> &lt;-&gt;</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> =</span><span class="id"> 0%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> ball_close;</span><span class="id"> split=&gt;</span><span class="id"> [bxy|edist0</span><span class="id"> eps];</span><span class="id"> first</span><span class="id"> last</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">@edist_lt_ball</span><span class="id"> _</span> (<span class="id">x,</span><span class="id"> y</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> edist0</span>.<br/>
<span class="id">case:</span><span class="id"> ltgtP</span> (<span class="id">edist_ge0</span> (<span class="id">x,</span><span class="id"> y</span>))<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> dpos</span><span class="id"> _</span>.<br/>
<span class="id">have</span><span class="id"> xxfin</span><span class="id"> :</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ge0_fin_numE//</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 1%:E</span>)<span class="id"> ?ltey//</span><span class="id"> edist_fin</span>.<br/>
<span class="id">have</span><span class="id"> dpose</span><span class="id"> :</span><span class="id"> fine</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>))<span class="id"> &gt;</span><span class="id"> 0</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -lte_fin</span><span class="id"> fineK</span>.<br/>
<span class="id">pose</span><span class="id"> eps</span><span class="id"> :=</span><span class="id"> PosNum</span><span class="id"> dpose</span>.<br/>
<span class="id">have</span><span class="id"> :</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> &lt;=</span> (<span class="id">eps%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">%:E</span>)<span class="id">%E</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> ereal_inf_lbound;</span><span class="gallina-kwd"> exists</span> (<span class="id">eps%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">bxy</span> (<span class="id">eps%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">%:pos</span>).<br/>
<span class="id">apply:</span><span class="id"> contra_leP</span><span class="id"> =&gt;</span><span class="id"> _</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> EFinM</span><span class="id"> fineK//</span><span class="id"> lte_pdivrMr//</span><span class="id"> lte_pmulr//</span><span class="id"> lte1n</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_refl</span><span class="id"> x</span><span class="id"> :</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> x</span>)<span class="id"> =</span><span class="id"> 0%E</span><br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact/edist_closeP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_closel</span><span class="id"> x</span><span class="id"> y</span><span class="id"> z</span><span class="id"> :</span><span class="id"> close</span><span class="id"> x</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> z</span>)<span class="id"> =</span><span class="id"> edist</span> (<span class="id">y,</span><span class="id"> z</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /edist_closeP</span><span class="id"> xy0;</span><span class="id"> apply:</span><span class="id"> le_anti;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[edist</span> (<span class="id">y,</span><span class="id"> z</span>)<span class="id">]add0e</span><span class="id"> -xy0</span><span class="id"> edist_triangle</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[edist</span> (<span class="id">x,</span><span class="id"> z</span>)<span class="id">]add0e</span><span class="id"> -xy0</span><span class="id"> [edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id">]edist_sym</span><span class="id"> edist_triangle</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> pseudoMetricDist</span>.<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">0%R</span><span class="id"> &lt;=</span><span class="id"> edist</span><span class="id"> _</span>)<span class="id">%E</span>)<span class="id"> =&gt;</span><span class="id"> solve</span><span class="id"> [apply:</span><span class="id"> edist_ge0]</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">edist</span><span class="id"> _</span><span class="id"> !=</span><span class="id"> -oo%E</span>))<span class="id"> =&gt;</span><span class="id"> solve</span><span class="id"> [apply:</span><span class="id"> edist_neqNy]</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> edist_inf</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R}</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> edist_inf</span><span class="id"> z</span><span class="id"> :=</span><span class="id"> ereal_inf</span><span class="id"> [set</span><span class="id"> edist</span> (<span class="id">z,</span><span class="id"> a</span>)<span class="id"> |</span><span class="id"> a</span><span class="gallina-kwd"> in</span><span class="id"> A]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_inf_ge0</span><span class="id"> w</span><span class="id"> :</span> (<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> edist_inf</span><span class="id"> w</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> lb_ereal_inf</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=</span><span class="id"> [?</span><span class="id"> ?</span><span class="id"> &lt;-]</span>. Qed.</div></details>
<span class="vernacular">Hint</span><span class="id"> Resolve</span><span class="id"> edist_inf_ge0</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_inf_neqNy</span><span class="id"> w</span><span class="id"> :</span> (<span class="id">edist_inf</span><span class="id"> w</span><span class="id"> !=</span><span class="id"> -oo</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -lteNye</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span><span class="id"> 0%E</span>). Qed.</div></details>
<span class="vernacular">Hint</span><span class="id"> Resolve</span><span class="id"> edist_inf_neqNy</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_inf_triangle</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span> (<span class="id">edist_inf</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> +</span><span class="id"> edist_inf</span><span class="id"> y</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [A0|/set0P[a0</span><span class="id"> Aa0]]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> A</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /edist_inf</span><span class="id"> A0</span><span class="id"> ?image_set0</span><span class="id"> ?ereal_inf0</span><span class="id"> addey</span>.<br/>
<span class="id">have</span><span class="id"> [fyn|]</span><span class="id"> :=</span><span class="id"> boolP</span> (<span class="id">edist_inf</span><span class="id"> y</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ge0_fin_numE//</span><span class="id"> ?ltey</span><span class="id"> negbK</span><span class="id"> =&gt;</span><span class="id"> /eqP-&gt;;</span><span class="id"> rewrite</span><span class="id"> addey</span><span class="id"> ?leey</span>.<br/>
<span class="id">have</span><span class="id"> [xyfin|]</span><span class="id"> :=</span><span class="id"> boolP</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ge0_fin_numE//</span><span class="id"> ?ltey</span><span class="id"> //</span><span class="id"> negbK</span><span class="id"> =&gt;</span><span class="id"> /eqP-&gt;;</span><span class="id"> rewrite</span><span class="id"> addye</span><span class="id"> ?leey</span>.<br/>
<span class="id">apply/lee_addgt0Pr</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[eps]</span>.<br/>
<span class="id">have</span><span class="id"> [//|?</span><span class="id"> [a</span><span class="id"> Aa</span><span class="id"> &lt;-]</span><span class="id"> yaeps]</span><span class="id"> :=</span><span class="id"> @lb_ereal_inf_adherent</span><span class="id"> R</span><span class="id"> _</span><span class="id"> eps%:num</span><span class="id"> _</span><span class="id"> fyn</span>.<br/>
<span class="id">apply:</span><span class="id"> le_trans</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">@ereal_inf_lbound</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">edist</span> (<span class="id">x,</span><span class="id"> a</span>)))<span class="id">;</span><span class="gallina-kwd"> exists</span><span class="id"> a</span>.<br/>
<span class="id">apply:</span><span class="id"> le_trans;</span><span class="id"> first</span><span class="id"> exact:</span> (<span class="id">@edist_triangle</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> y</span>).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -addeA</span><span class="id"> leeD2lE</span><span class="id"> //</span><span class="id"> ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_inf_continuous</span><span class="id"> :</span><span class="id"> continuous</span><span class="id"> edist_inf</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> z;</span><span class="id"> have</span><span class="id"> [A0|/=</span><span class="id"> /set0P[a0</span><span class="id"> Aa0]]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> A</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /edist_inf</span><span class="id"> A0</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> image_set0</span><span class="id"> ereal_inf0</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> cvg_cst</span>.<br/>
<span class="id">have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> eqVneq</span> (<span class="id">edist_inf</span><span class="id"> z</span>)<span class="id"> +oo%E</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /[dup]</span><span class="id"> fzp</span><span class="id"> /ereal_inf_pinfty</span><span class="id"> =&gt;</span><span class="id"> zAp</span><span class="id"> U</span><span class="id"> /=</span><span class="id"> Ufz</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> nbhs</span><span class="id"> z</span> (<span class="id">ball</span><span class="id"> z</span><span class="id"> 1</span>)<span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> filter_app;</span><span class="id"> near_simpl;</span><span class="id"> near=&gt;</span><span class="id"> w</span><span class="id"> =&gt;</span><span class="id"> bz1w</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> /=</span><span class="id"> -&gt;</span><span class="id"> :</span> (<span class="id">edist_inf</span><span class="id"> w</span>)<span class="id"> =</span><span class="id"> +oo%E</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> nbhs_singleton;</span><span class="id"> rewrite</span><span class="id"> -fzp</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/ereal_inf_pinfty</span><span class="id"> =&gt;</span><span class="id"> r</span><span class="id"> [a</span><span class="id"> Aa]</span><span class="id"> war;</span><span class="id"> apply/zAp;</span><span class="gallina-kwd"> exists</span><span class="id"> a</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /gee0P[|[r'</span><span class="id"> r'pos</span><span class="id"> war']]</span><span class="id"> :=</span><span class="id"> edist_ge0</span> (<span class="id">w,</span><span class="id"> a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> war</span><span class="id"> =&gt;</span><span class="id"> -&gt;;</span><span class="id"> apply:</span><span class="id"> zAp;</span><span class="gallina-kwd"> exists</span><span class="id"> a</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :=</span><span class="id"> @edist_triangle</span><span class="id"> _</span><span class="id"> _</span><span class="id"> z</span><span class="id"> w</span><span class="id"> a;</span><span class="id"> rewrite</span><span class="id"> war';</span><span class="id"> apply:</span><span class="id"> contra_leP</span><span class="id"> =&gt;</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">@le_lt_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">1</span><span class="id"> +</span><span class="id"> r'%:E</span>)<span class="id">%E</span>)<span class="id"> ?leeD2r</span><span class="id"> ?edist_fin//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -EFinD</span><span class="id"> [edist</span> (<span class="id">z,</span><span class="id"> a</span>)<span class="id">]zAp</span><span class="id"> ?ltey</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> a</span>.<br/>
<span class="id">rewrite</span><span class="id"> -ltey</span><span class="id"> -ge0_fin_numE</span><span class="id"> ?edist_inf_ge0</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> fz_fin</span>.<br/>
<span class="id">rewrite</span><span class="id"> /continuous_at</span><span class="id"> -[edist_inf</span><span class="id"> z]fineK</span><span class="id"> //;</span><span class="id"> apply/fine_cvgP</span>.<br/>
<span class="id">have</span><span class="id"> fwfin</span><span class="id"> :</span><span class="id"> \forall</span><span class="id"> w</span><span class="id"> \near</span><span class="id"> z,</span><span class="id"> edist_inf</span><span class="id"> w</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
&nbsp;&nbsp;(<span class="id">have</span><span class="id"> :</span><span class="id"> nbhs</span><span class="id"> z</span> (<span class="id">ball</span><span class="id"> z</span><span class="id"> 1</span>)<span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>)<span class="id">;</span><span class="id"> apply:</span><span class="id"> filter_app</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> t</span><span class="id"> =&gt;</span><span class="id"> bz1;</span><span class="id"> rewrite</span><span class="id"> ge0_fin_numE</span><span class="id"> ?edist_inf_ge0</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">edist_inf_triangle</span><span class="id"> _</span><span class="id"> z</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -ge0_fin_numE</span><span class="id"> ?adde_ge0</span><span class="id"> ?edist_inf_ge0</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> fin_numD</span><span class="id"> fz_fin</span><span class="id"> andbT;</span><span class="id"> apply/edist_finP;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/ball_sym</span>.<br/>
<span class="id">split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply/cvgrPdist_le</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[eps]</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> nbhs</span><span class="id"> z</span> (<span class="id">ball</span><span class="id"> z</span><span class="id"> eps%:num</span>)<span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="id">apply:</span><span class="id"> filter_app;</span><span class="id"> near_simpl;</span><span class="id"> move:</span><span class="id"> fwfin;</span><span class="id"> apply:</span><span class="id"> filter_app</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> t</span><span class="id"> =&gt;</span><span class="id"> tfin</span><span class="id"> /=</span><span class="id"> /[dup]</span><span class="id"> ?</span>.<br/>
<span class="id">have</span><span class="id"> ztfin</span><span class="id"> :</span><span class="id"> edist</span> (<span class="id">z,</span><span class="id"> t</span>)<span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="gallina-kwd"> by</span><span class="id"> apply/edist_finP;</span><span class="gallina-kwd"> exists</span><span class="id"> eps%:num</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /</span>(<span class="id">@edist_fin</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">z,</span><span class="id"> t</span>))<span class="id"> -</span><span class="id"> /</span>(_<span class="id"> trivial</span>).<br/>
<span class="id">rewrite</span><span class="id"> -[edist</span> (<span class="id">z,</span><span class="id"> t</span>)<span class="id">]fineK</span><span class="id"> ?lee_fin</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> le_trans</span>.<br/>
<span class="id">rewrite</span><span class="id"> ler_norml;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> lerBrDr</span><span class="id"> addrC</span><span class="id"> lerBlDr</span> <span class="id"> addrC</span><span class="id"> -fineD</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -lee_fin</span><span class="id"> ?fineK</span><span class="id"> //</span><span class="id"> ?fin_numD</span><span class="id"> ?ztfin</span><span class="id"> ?fz_fin</span><span class="id"> //</span><span class="id"> edist_sym</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> edist_inf_triangle</span>.<br/>
<span class="id">rewrite</span><span class="id"> lerBlDr</span><span class="id"> -fineD</span><span class="id"> //</span><span class="id"> -lee_fin</span><span class="id"> ?fineK</span><span class="id"> //</span><span class="id"> ?fin_numD</span><span class="id"> ?tfin</span><span class="id"> ?ztfin</span><span class="id"> //</span>.<br/>
<span class="id">exact:</span><span class="id"> edist_inf_triangle</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> edist_inf0</span><span class="id"> a</span><span class="id"> :</span><span class="id"> A</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> edist_inf</span><span class="id"> a</span><span class="id"> =</span><span class="id"> 0%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Aa;</span><span class="id"> apply:</span><span class="id"> le_anti;</span><span class="id"> apply/andP;</span><span class="id"> split;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> edist_inf_ge0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ereal_inf_lbound;</span><span class="gallina-kwd"> exists</span><span class="id"> a</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> edist_refl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> edist_inf</span>.<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">0</span><span class="id"> &lt;=</span><span class="id"> edist_inf</span><span class="id"> _</span><span class="id"> _</span>)<span class="id">%E</span>)<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve</span><span class="id"> [apply:</span><span class="id"> edist_inf_ge0]</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">is_true</span> (<span class="id">edist_inf</span><span class="id"> _</span><span class="id"> _</span><span class="id"> !=</span><span class="id"> -oo%E</span>))<span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;<span class="id">solve</span><span class="id"> [apply:</span><span class="id"> edist_inf_neqNy]</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> urysohn_separator</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> uniformType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>) (<span class="id">E</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>)).<br/>
<span class="vernacular">Hypothesis</span><span class="id"> entE</span><span class="id"> :</span><span class="id"> entourage</span><span class="id"> E</span>.<br/>
<span class="vernacular">Hypothesis</span><span class="id"> AB0</span><span class="id"> :</span><span class="id"> A</span><span class="id"> `*`</span><span class="id"> B</span><span class="id"> `&amp;`</span><span class="id"> E</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> T'</span><span class="id"> :=</span><span class="id"> [the</span><span class="id"> pseudoMetricType</span><span class="id"> R</span><span class="id"> of</span><span class="id"> gauge</span>.<span class="id">type</span><span class="id"> entE]</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> urysohn_separation</span><span class="id"> :</span><span class="gallina-kwd"> exists</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">[/\</span><span class="id"> continuous</span><span class="id"> f,</span><span class="id"> range</span><span class="id"> f</span><span class="id"> `&lt;=`</span><span class="id"> `[0,</span><span class="id"> 1],</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span><span class="id"> @`</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> 0]</span><span class="id"> &amp;</span><span class="id"> f</span><span class="id"> @`</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> 1]</span><span class="id"> ]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [eps</span><span class="id"> exy]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span> (<span class="id">eps</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> T'</span>)<span class="id">,</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> B</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> eps%:num</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> @entourage</span><span class="id"> T'</span><span class="id"> E</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> O</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -entourage_ballE;</span><span class="id"> case=&gt;</span><span class="id"> _/posnumP[eps]</span><span class="id"> epsdiv;</span><span class="gallina-kwd"> exists</span><span class="id"> eps</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> y</span><span class="id"> Ax</span><span class="id"> By</span><span class="id"> bxy;</span><span class="id"> have</span><span class="id"> divxy</span><span class="id"> :=</span><span class="id"> epsdiv</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id"> bxy</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> :</span><span class="id"> set0</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -AB0;</span><span class="id"> split</span>.<br/>
<span class="id">have</span><span class="id"> [-&gt;|/set0P[a</span><span class="id"> A0]]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> A</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">fun=&gt;</span><span class="id"> 1</span>)<span class="id">;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> [?</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=;</span><span class="id"> apply/andP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> image_set0</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> [?</span><span class="id"> ?</span><span class="id"> &lt;-]</span>.<br/>
<span class="id">have</span><span class="id"> dfin</span><span class="id"> x</span><span class="id"> :</span><span class="id"> @edist_inf</span><span class="id"> R</span><span class="id"> T'</span><span class="id"> A</span><span class="id"> x</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ge0_fin_numE</span><span class="id"> ?edist_inf_ge0</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ereal_inf_lbound;</span><span class="gallina-kwd"> exists</span><span class="id"> a</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -ge0_fin_numE</span><span class="id"> ?edist_ge0</span><span class="id"> //;</span><span class="id"> apply/edist_finP</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> 2</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> countable_uniform</span>.<span class="id">countable_uniform_bounded</span>.<br/>
<span class="id">pose</span><span class="id"> f'</span><span class="id"> :=</span> (<span class="gallina-kwd">fun</span><span class="id"> z</span><span class="id"> =&gt;</span><span class="id"> fine</span> (<span class="id">@edist_inf</span><span class="id"> R</span><span class="id"> T'</span><span class="id"> A</span><span class="id"> z</span>))<span class="id"> \min</span> (<span class="id">fun=&gt;</span><span class="id"> eps%:num</span>).<br/>
<span class="id">pose</span><span class="id"> f</span><span class="id"> z</span><span class="id"> :=</span> (<span class="id">f'</span><span class="id"> z</span>)<span class="id">/eps%:num;</span><span class="gallina-kwd"> exists</span><span class="id"> f;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> /f;</span><span class="id"> apply:</span> (<span class="id">@cvgM</span><span class="id"> R</span><span class="id"> T</span> (<span class="id">nbhs</span><span class="id"> x</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> :</span><span class="id"> {for</span><span class="id"> x,</span><span class="id"> continuous</span> (<span class="id">f'</span><span class="id"> :</span><span class="id"> T'</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id">}</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> Q</span><span class="id"> U;</span><span class="id"> rewrite</span><span class="id"> nbhs_simpl</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> f'U</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> [J</span><span class="id"> /</span>(<span class="id">gauge</span>.<span class="id">gauge_ent</span><span class="id"> entE</span>)<span class="id"> entJ/filterS]</span><span class="id"> :=</span><span class="id"> Q</span><span class="id"> _</span><span class="id"> f'U;</span><span class="id"> apply</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> nbhs_simpl</span><span class="id"> /=</span><span class="id"> -nbhs_entourageE</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> J</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> continuous_min;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> cvg_cst;</span><span class="id"> exact:</span><span class="id"> nbhs_filter</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> fine_cvg;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> nbhs_filter</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> fineK</span><span class="id"> //;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> edist_inf_continuous</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> _</span><span class="id"> [x</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span><span class="id"> set_itvE</span><span class="id"> /=;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /f</span><span class="id"> divr_ge0</span><span class="id"> //</span><span class="id"> /f'</span><span class="id"> /=</span><span class="id"> le_min</span><span class="id"> fine_ge0//=</span><span class="id"> edist_inf_ge0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /f</span><span class="id"> ler_pdivrMr</span><span class="id"> //</span><span class="id"> mul1r</span><span class="id"> /f'</span><span class="id"> /=</span><span class="id"> /minr;</span><span class="id"> case:</span><span class="id"> ltP</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> /ltW</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> [z</span><span class="id"> Az]</span><span class="id"> &lt;-;</span><span class="id"> rewrite</span><span class="id"> /f/f'</span><span class="id"> /=</span><span class="id"> edist_inf0</span><span class="id"> //</span><span class="id"> /minr</span><span class="id"> fine0</span><span class="id"> ifT</span><span class="id"> ?mul0r</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> [b</span><span class="id"> Bb]</span><span class="id"> &lt;-;</span><span class="id"> rewrite</span><span class="id"> /f</span><span class="id"> /f'/=</span><span class="id"> /minr/=</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span><span class="id"> ltP</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ?divrr</span><span class="id"> //</span><span class="id"> ?unitf_gt0</span><span class="id"> //</span><span class="id"> -lte_fin</span><span class="id"> fineK//</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span><span class="id"> =&gt;</span><span class="id"> /ereal_inf_lt</span><span class="id"> [_</span><span class="id"> [z</span><span class="id"> Az</span><span class="id"> &lt;-]]</span><span class="id"> ebz;</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> exy</span><span class="id"> _</span><span class="id"> _</span><span class="id"> Az</span><span class="id"> Bb</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/ball_sym/</span>(<span class="id">@edist_lt_ball</span><span class="id"> R</span><span class="id"> T'</span><span class="id"> _</span> (<span class="id">b,</span><span class="id"> z</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> urysohn_separator</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> topological_urysohn_separator</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> uniform_separator</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">uT</span><span class="id"> :</span><span class="id"> @Uniform</span>.<span class="id">axioms_</span><span class="id"> T^o</span>) (<span class="id">E</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>))<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">let</span><span class="id"> UT</span><span class="id"> :=</span><span class="id"> Uniform</span>.<span class="id">Pack</span><span class="id"> uT</span><span class="gallina-kwd"> in</span><span class="id"> [/\</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">@entourage</span><span class="id"> UT</span><span class="id"> E,</span><span class="id"> A</span><span class="id"> `*`</span><span class="id"> B</span><span class="id"> `&amp;`</span><span class="id"> E</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> &amp;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> x,</span><span class="id"> @nbhs</span><span class="id"> UT</span><span class="id"> UT</span><span class="id"> x</span><span class="id"> `&lt;=`</span><span class="id"> @nbhs</span><span class="id"> T</span><span class="id"> T</span><span class="id"> x</span>)<span class="id">]</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> Urysohn'</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="gallina-kwd"> exists</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[/\</span><span class="id"> continuous</span><span class="id"> f,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">range</span><span class="id"> f</span><span class="id"> `&lt;=`</span><span class="id"> `[0,</span><span class="id"> 1]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">&amp;</span><span class="id"> uniform_separator</span><span class="id"> A</span><span class="id"> B</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span><span class="id"> @`</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> 0]</span><span class="id"> /\</span><span class="id"> f</span><span class="id"> @`</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> 1]]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [[?</span><span class="id"> [E</span><span class="id"> [entE</span><span class="id"> ABE0</span><span class="id"> coarseT]]]|nP]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [f]</span><span class="id"> :=</span><span class="id"> @urysohn_separation</span><span class="id"> _</span><span class="id"> R</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> entE</span><span class="id"> ABE0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case=&gt;</span><span class="id"> ctsf</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> f;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> /=</span><span class="id"> ?;</span><span class="id"> apply/coarseT/ctsf</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">fun=&gt;1</span>)<span class="id">;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> cvg_cst</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> [?</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv</span><span class="id"> /=;</span><span class="id"> apply/andP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> Urysohn</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span><span class="id"> :=</span><span class="id"> projT1</span> (<span class="id">cid</span> (<span class="id">Urysohn'</span><span class="id"> A</span><span class="id"> B</span>)).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> urysohn_facts</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Urysohn_continuous</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> continuous</span> (<span class="id">Urysohn</span><span class="id"> A</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">cid</span> (<span class="id">@Urysohn'</span><span class="id"> A</span><span class="id"> B</span>)). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Urysohn_range</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> range</span> (<span class="id">Urysohn</span><span class="id"> A</span><span class="id"> B</span>)<span class="id"> `&lt;=`</span><span class="id"> `[0,</span><span class="id"> 1]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">cid</span> (<span class="id">@Urysohn'</span><span class="id"> A</span><span class="id"> B</span>)). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Urysohn_sub0</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> Urysohn</span><span class="id"> A</span><span class="id"> B</span><span class="id"> @`</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> 0]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> eE;</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> _</span><span class="id"> /</span>(_<span class="id"> eE</span>)<span class="id">[]]</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">cid</span> (<span class="id">@Urysohn'</span><span class="id"> A</span><span class="id"> B</span>)). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Urysohn_sub1</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> Urysohn</span><span class="id"> A</span><span class="id"> B</span><span class="id"> @`</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> 1]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> eE;</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> _</span><span class="id"> /</span>(_<span class="id"> eE</span>)<span class="id">[]]</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">cid</span> (<span class="id">@Urysohn'</span><span class="id"> A</span><span class="id"> B</span>)). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Urysohn_eq0</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> !=set0</span><span class="id"> -&gt;</span><span class="id"> Urysohn</span><span class="id"> A</span><span class="id"> B</span><span class="id"> @`</span><span class="id"> A</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> 0]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> eE</span><span class="id"> Aa;</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> _</span><span class="id"> /</span>(_<span class="id"> eE</span>)<span class="id">[As0</span><span class="id"> _]]</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">cid</span> (<span class="id">@Urysohn'</span><span class="id"> A</span><span class="id"> B</span>)).<br/>
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> -&gt;;</span><span class="id"> case:</span><span class="id"> Aa</span><span class="id"> =&gt;</span><span class="id"> a</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> a</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> As0;</span><span class="gallina-kwd"> exists</span><span class="id"> a</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Urysohn_eq1</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B</span><span class="id"> -&gt;</span> (<span class="id">B</span><span class="id"> !=set0</span>)<span class="id"> -&gt;</span> (<span class="id">Urysohn</span><span class="id"> A</span><span class="id"> B</span>)<span class="id"> @`</span><span class="id"> B</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> 1]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> eE</span><span class="id"> Bb;</span><span class="id"> have</span><span class="id"> [_</span><span class="id"> _</span><span class="id"> /</span>(_<span class="id"> eE</span>)<span class="id">[_</span><span class="id"> Bs0]]</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">cid</span> (<span class="id">@Urysohn'</span><span class="id"> A</span><span class="id"> B</span>)).<br/>
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> -&gt;;</span><span class="id"> case:</span><span class="id"> Bb</span><span class="id"> =&gt;</span><span class="id"> b</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> Bs0;</span><span class="gallina-kwd"> exists</span><span class="id"> b</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> urysohn_facts</span>.<br/>
<span class="vernacular">End</span><span class="id"> topological_urysohn_separator</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> uniform_separatorW</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> uniformType}</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="gallina-kwd">exists2</span><span class="id"> E,</span><span class="id"> entourage</span><span class="id"> E</span><span class="id"> &amp;</span><span class="id"> A</span><span class="id"> `*`</span><span class="id"> B</span><span class="id"> `&amp;`</span><span class="id"> E</span><span class="id"> =</span><span class="id"> set0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> case=&gt;</span><span class="id"> E</span><span class="id"> entE</span><span class="id"> AB0;</span><span class="gallina-kwd"> exists</span> (<span class="id">Uniform</span>.<span class="id">class</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> E;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> Urysohn</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> relation_scope</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<span class="vernacular">Hypothesis</span><span class="id"> normalT</span><span class="id"> :</span><span class="id"> normal_space</span><span class="id"> T</span>.<br/>
<span class="vernacular">Section</span><span class="id"> normal_uniform_separators</span>.<br/>
<span class="vernacular">Context</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>).<br/>
<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> apxU</span> (<span class="id">UV</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> *</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">UV</span>.<span class="id">2</span><span class="id"> `*`</span><span class="id"> UV</span>.<span class="id">2</span>)<span class="id"> `|`</span> (<span class="id">~`</span><span class="id"> closure</span><span class="id"> UV</span>.<span class="id">1</span><span class="id"> `*`</span><span class="id"> ~`</span><span class="id"> closure</span><span class="id"> UV</span>.<span class="id">1</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> nested</span> (<span class="id">UV</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span><span class="id"> *</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">[/\</span><span class="id"> open</span><span class="id"> UV</span>.<span class="id">1,</span><span class="id"> open</span><span class="id"> UV</span>.<span class="id">2,</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> UV</span>.<span class="id">1</span><span class="id"> &amp;</span><span class="id"> closure</span><span class="id"> UV</span>.<span class="id">1</span><span class="id"> `&lt;=`UV</span>.<span class="id">2]</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> ury_base</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> apxU</span><span class="id"> UV</span><span class="id"> |</span><span class="id"> UV</span><span class="gallina-kwd"> in</span><span class="id"> nested]</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ury_base_refl</span><span class="id"> E</span><span class="id"> :</span><span class="id"> ury_base</span><span class="id"> E</span><span class="id"> -&gt;</span><span class="id"> diagonal</span><span class="id"> `&lt;=`</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case;</span><span class="id"> case=&gt;</span><span class="id"> L</span><span class="id"> R</span><span class="id"> [_</span><span class="id"> _</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> LR]</span><span class="id"> &lt;-</span><span class="id"> [?</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> /diagonalP</span><span class="id"> -&gt;]</span>.<br/>
<span class="id">case:</span> (<span class="id">pselect</span> (<span class="id">R</span><span class="id"> x</span>))<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> left</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/subsetC:</span><span class="id"> LR</span><span class="id"> =&gt;</span><span class="id"> /[apply]</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> right</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ury_base_inv</span><span class="id"> E</span><span class="id"> :</span><span class="id"> ury_base</span><span class="id"> E</span><span class="id"> -&gt;</span><span class="id"> ury_base</span><span class="id"> E^-1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case;</span><span class="id"> case=&gt;</span><span class="id"> L</span><span class="id"> R</span><span class="id"> ?</span><span class="id"> &lt;-;</span><span class="gallina-kwd"> exists</span> (<span class="id">L,</span><span class="id"> R</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span> (<span class="id">case=&gt;</span><span class="id"> x</span><span class="id"> y</span><span class="id"> []</span><span class="id"> [?</span><span class="id"> ?];</span><span class="id"> [left|</span><span class="id"> right]</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ury_base_split</span><span class="id"> E</span><span class="id"> :</span><span class="id"> ury_base</span><span class="id"> E</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> E1</span><span class="id"> E2,</span><span class="id"> [/\</span><span class="id"> ury_base</span><span class="id"> E1,</span><span class="id"> ury_base</span><span class="id"> E2</span><span class="id"> &amp;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">E1</span><span class="id"> `&amp;`</span><span class="id"> E2</span>)<span class="id"> \;</span> (<span class="id">E1</span><span class="id"> `&amp;`</span><span class="id"> E2</span>)<span class="id"> `&lt;=`</span><span class="id"> E]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case;</span><span class="id"> case</span><span class="id"> =&gt;</span><span class="id"> L</span><span class="id"> R</span><span class="id"> [/=</span><span class="id"> oL</span><span class="id"> oR</span><span class="id"> AL</span><span class="id"> cLR</span><span class="id"> &lt;-]</span>.<br/>
<span class="id">have</span><span class="id"> [R'</span><span class="id"> []]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> R',</span><span class="id"> [/\</span><span class="id"> open</span><span class="id"> R',</span><span class="id"> closure</span><span class="id"> L</span><span class="id"> `&lt;=`</span><span class="id"> R'</span><span class="id"> &amp;</span><span class="id"> closure</span><span class="id"> R'</span><span class="id"> `&lt;=`</span><span class="id"> R]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :=</span><span class="id"> @normalT</span> (<span class="id">closure</span><span class="id"> L</span>) (<span class="id">@closed_closure</span><span class="id"> T</span><span class="id"> L</span>).<br/>
&nbsp;&nbsp;<span class="id">case/</span>(_<span class="id"> R</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> /cLR</span><span class="id"> ?;</span><span class="id"> apply:</span><span class="id"> open_nbhs_nbhs</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> V</span><span class="id"> /set_nbhsP</span><span class="id"> [U]</span><span class="id"> [?</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> cVR];</span><span class="gallina-kwd"> exists</span><span class="id"> U;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">subset_trans</span><span class="id"> _</span><span class="id"> cVR</span>)<span class="id">;</span><span class="id"> exact:</span><span class="id"> closure_subset</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> oR'</span><span class="id"> cLR'</span><span class="id"> cR'R;</span><span class="gallina-kwd"> exists</span> (<span class="id">apxU</span> (<span class="id">L,</span><span class="id"> R'</span>))<span class="id">,</span> (<span class="id">apxU</span> (<span class="id">R',</span><span class="id"> R</span>)).<br/>
<span class="id">split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span> (<span class="id">L,</span><span class="id"> R'</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">R',</span><span class="id"> R</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span> (<span class="id">subset_trans</span><span class="id"> AL</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">subset_trans</span><span class="id"> _</span><span class="id"> cLR'</span>)<span class="id">;</span><span class="id"> exact:</span><span class="id"> subset_closure</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> x</span><span class="id"> z</span><span class="id"> /=</span><span class="id"> [y</span><span class="id"> [+</span><span class="id"> +]</span><span class="id"> []]</span>.<br/>
(<span class="id">do</span><span class="id"> 4</span> (<span class="id">case;</span><span class="id"> case=&gt;</span><span class="id"> /=</span><span class="id"> ?</span><span class="id"> ?</span>))<span class="id">;</span><span class="id"> try</span> (<span class="gallina-kwd">by</span><span class="id"> left</span>)<span class="id">;</span><span class="id"> try</span> (<span class="gallina-kwd">by</span><span class="id"> right</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">match</span><span class="id"> goal</span><span class="gallina-kwd"> with</span><span class="id"> nG</span><span class="id"> :</span> (<span class="id">~</span><span class="id"> closure</span><span class="id"> ?S</span><span class="id"> ?y</span>)<span class="id">,</span><span class="id"> G</span><span class="id"> :</span><span class="id"> ?S</span><span class="id"> ?y</span><span class="id"> |-</span><span class="id"> _</span><span class="id"> =&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/subset_closure:</span><span class="id"> G</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">end</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> ury_unif</span><span class="id"> :=</span><span class="id"> smallest</span><span class="id"> Filter</span><span class="id"> ury_base</span>.<br/>
<br/>
<span class="vernacular">Instance</span><span class="id"> ury_unif_filter</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> ury_unif</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> smallest_filter_filter</span>. Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ury_unif_refl</span><span class="id"> E</span><span class="id"> :</span><span class="id"> ury_unif</span><span class="id"> E</span><span class="id"> -&gt;</span><span class="id"> diagonal</span><span class="id"> `&lt;=`</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move/</span>(_ (<span class="id">globally</span><span class="id"> diagonal</span>))<span class="id">;</span><span class="id"> apply;</span><span class="id"> split;</span><br/>
&nbsp;&nbsp;<span class="id">[exact:</span><span class="id"> globally_filter|exact:</span><span class="id"> ury_base_refl]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ury_unif_inv</span><span class="id"> E</span><span class="id"> :</span><span class="id"> ury_unif</span><span class="id"> E</span><span class="id"> -&gt;</span><span class="id"> ury_unif</span><span class="id"> E^-1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ufE</span><span class="id"> F</span><span class="id"> [/filter_inv</span><span class="id"> FF</span><span class="id"> urF];</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> ufE</span><span class="id"> [set</span><span class="id"> V^-1</span><span class="id"> |</span><span class="id"> V</span><span class="gallina-kwd"> in</span><span class="id"> F]</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> K</span><span class="id"> /ury_base_inv/urF</span><span class="id"> /=</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span> (<span class="id">K^-1</span>)<span class="id">%classic</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> set_prod_invK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> R</span><span class="id"> FR</span><span class="id"> &lt;-;</span><span class="id"> rewrite</span><span class="id"> set_prod_invK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ury_unif_split_iter</span><span class="id"> E</span><span class="id"> n</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">filterI_iter</span><span class="id"> ury_base</span><span class="id"> n</span><span class="id"> E</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> K</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">T</span><span class="id"> *</span><span class="id"> T</span>)<span class="id">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">filterI_iter</span><span class="id"> ury_base</span><span class="id"> n</span>.<span class="id">+1</span><span class="id"> K</span><span class="id"> &amp;</span><span class="id"> K</span><span class="id"> \;</span><span class="id"> K</span><span class="id"> `&lt;=`</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">elim:</span><span class="id"> n</span><span class="id"> E;</span><span class="id"> first</span><span class="id"> move=&gt;</span><span class="id"> E</span><span class="id"> []</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> -&gt;;</span><span class="gallina-kwd"> exists</span><span class="id"> setT</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> setT;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> left</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> setT;</span><span class="id"> rewrite</span><span class="id"> ?setIT;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> left</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> /[dup]</span><span class="id"> /ury_base_split</span><span class="id"> [E1</span><span class="id"> [E2]</span><span class="id"> [?</span><span class="id"> ?</span><span class="id"> ?</span><span class="id"> ?]];</span><span class="gallina-kwd"> exists</span> (<span class="id">E1</span><span class="id"> `&amp;`</span><span class="id"> E2</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span> (<span class="gallina-kwd">exists</span><span class="id"> E1;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> right</span>)<span class="id">;</span><span class="gallina-kwd"> exists</span><span class="id"> E2;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> right</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> n</span><span class="id"> IH</span><span class="id"> E</span><span class="id"> /=</span><span class="id"> [E1</span><span class="id"> /IH</span><span class="id"> [F1</span><span class="id"> F1n1</span><span class="id"> F1E1]]</span><span class="id"> [E2</span><span class="id"> /IH</span><span class="id"> [F2</span><span class="id"> F2n1</span><span class="id"> F2E2]]</span><span class="id"> E12E</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">F1</span><span class="id"> `&amp;`</span><span class="id"> F2</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> F1</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> F2</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /=</span><span class="id"> [x</span><span class="id"> z</span><span class="id"> ]</span><span class="id"> [y</span><span class="id"> /=</span><span class="id"> [K1xy</span><span class="id"> K2xy]</span><span class="id"> [K1yz</span><span class="id"> K2yz]];</span><span class="id"> rewrite</span><span class="id"> -E12E;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> F1E1;</span><span class="gallina-kwd"> exists</span><span class="id"> y</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> F2E2;</span><span class="gallina-kwd"> exists</span><span class="id"> y</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ury_unif_split</span><span class="id"> E</span><span class="id"> :</span><span class="id"> ury_unif</span><span class="id"> E</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists2</span><span class="id"> K,</span><span class="id"> ury_unif</span><span class="id"> K</span><span class="id"> &amp;</span><span class="id"> K</span><span class="id"> \;</span><span class="id"> K</span><span class="id"> `&lt;=`</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /ury_unif</span><span class="id"> filterI_iterE;</span><span class="id"> case=&gt;</span><span class="id"> G</span><span class="id"> [n</span><span class="id"> _]</span><span class="id"> /ury_unif_split_iter</span><span class="id"> []</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> K</span><span class="id"> SnK</span><span class="id"> KG</span><span class="id"> GE;</span><span class="gallina-kwd"> exists</span><span class="id"> K;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> K</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<span class="id">+1</span>.<br/>
<span class="id">exact:</span> (<span class="id">subset_trans</span><span class="id"> _</span><span class="id"> GE</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> ury_unif_covA</span><span class="id"> E</span><span class="id"> :</span><span class="id"> ury_unif</span><span class="id"> E</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `*`</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /ury_unif</span><span class="id"> filterI_iterE;</span><span class="id"> case=&gt;</span><span class="id"> G</span><span class="id"> [n</span><span class="id"> _]</span><span class="id"> sG</span><span class="id"> /</span>(<span class="id">subset_trans</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> apply</span>.<br/>
<span class="id">elim:</span><span class="id"> n</span><span class="id"> G</span><span class="id"> sG</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> g</span><span class="id"> [-&gt;</span><span class="id"> //|</span><span class="id"> [[P</span><span class="id"> Q]]]</span><span class="id"> [/=</span><span class="id"> _</span><span class="id"> _</span><span class="id"> AP</span><span class="id"> cPQ</span><span class="id"> &lt;-]</span><span class="id"> [x</span><span class="id"> y]</span><span class="id"> [/=</span><span class="id"> /AP</span><span class="id"> ?</span><span class="id"> ?]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> left;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> apply/cPQ/subset_closure</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> AP</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> n</span><span class="id"> IH</span><span class="id"> G</span><span class="id"> [R]</span><span class="id"> /IH</span><span class="id"> AAR</span><span class="id"> [M]</span><span class="id"> /IH</span><span class="id"> AAM</span><span class="id"> &lt;-</span><span class="id"> z;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> AAR</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> AAM]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> urysohnType</span><span class="id"> :</span><span class="gallina-kwd"> Type</span><span class="id"> :=</span><span class="id"> T</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Choice</span>.<span class="id">on</span><span class="id"> urysohnType</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">isUniform</span>.<span class="id">Build</span><span class="id"> urysohnType</span><span class="id"> ury_unif_filter</span><span class="id"> ury_unif_refl</span><span class="id"> ury_unif_inv</span><br/>
&nbsp;&nbsp;<span class="id">ury_unif_split</span>.<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> {p</span><span class="id"> :</span><span class="id"> Pointed</span><span class="id"> T}</span><span class="id"> :=</span><span class="id"> Pointed</span>.<span class="id">copy</span><span class="id"> urysohnType</span> (<span class="id">Pointed</span>.<span class="id">Pack</span><span class="id"> p</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normal_uniform_separator</span> (<span class="id">B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> -&gt;</span><span class="id"> uniform_separator</span><span class="id"> A</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> clA</span><span class="id"> clB</span><span class="id"> AB0;</span><span class="id"> have</span><span class="id"> /</span>(_ (<span class="id">~`B</span>))<span class="id">[x</span><span class="id"> Ax|]</span><span class="id"> :=</span><span class="id"> normalT</span><span class="id"> clA</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> open_nbhs_nbhs;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> exact/closed_openC</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move:</span><span class="id"> x</span><span class="id"> Ax;</span><span class="id"> apply/</span><span class="id"> disjoints_subset</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> V</span><span class="id"> /set_nbhsP</span><span class="id"> [U</span><span class="id"> [oU</span><span class="id"> AU</span><span class="id"> UV]]</span><span class="id"> cVcb</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">Uniform</span>.<span class="id">class</span><span class="id"> urysohnType</span>)<span class="id">,</span> (<span class="id">apxU</span> (<span class="id">U,</span><span class="id"> ~`</span><span class="id"> B</span>))<span class="id">;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:sub_gen_smallest;</span><span class="gallina-kwd"> exists</span> (<span class="id">U,</span><span class="id"> ~`B</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/closed_openC</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> UV</span><span class="id"> =&gt;</span><span class="id"> /closure_subset/subset_trans;</span><span class="id"> apply</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split;</span><span class="id"> case=&gt;</span><span class="id"> //</span><span class="id"> a</span><span class="id"> b</span><span class="id"> [/=[Aa</span><span class="id"> Bb]</span><span class="id"> [[//]|]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /subset_closure</span><span class="id"> ?</span><span class="id"> :=</span><span class="id"> AU</span><span class="id"> _</span><span class="id"> Aa;</span><span class="id"> case</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> ?</span><span class="id"> [E</span><span class="id"> gE]</span><span class="id"> /</span>(<span class="id">@filterS</span><span class="id"> T</span>)<span class="id">;</span><span class="id"> apply;</span><span class="id"> move:</span><span class="id"> gE</span>.<br/>
<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> /ury_unif</span><span class="id"> filterI_iterE;</span><span class="id"> case</span><span class="id"> =&gt;</span><span class="id"> K</span><span class="id"> /=</span><span class="id"> [i</span><span class="id"> _]</span><span class="id"> /=</span><span class="id"> uiK</span><span class="id"> KE</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> @nbhs</span><span class="id"> T</span><span class="id"> T</span><span class="id"> x</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> K</span> (<span class="id">x,</span><span class="id"> y</span>)<span class="id">]</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /KE/xsectionP</span>.<br/>
<span class="id">elim:</span><span class="id"> i</span><span class="id"> K</span><span class="id"> uiK</span><span class="id"> {E</span><span class="id"> KE};</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> H</span><span class="id"> ?</span><span class="id"> [N]</span><span class="id"> /H</span><span class="id"> ?</span><span class="id"> [M]</span><span class="id"> /H</span><span class="id"> ?</span><span class="id"> &lt;-;</span><span class="id"> apply:</span><span class="id"> filterI</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> K</span><span class="id"> [-&gt;|];</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> filterT</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> [[/=</span><span class="id"> P</span><span class="id"> Q]</span><span class="id"> [/=</span><span class="id"> oP</span><span class="id"> oQ</span><span class="id"> AP</span><span class="id"> cPQ</span><span class="id"> &lt;-]];</span><span class="id"> rewrite</span><span class="id"> /apxU</span><span class="id"> /=</span>.<br/>
<span class="id">set</span><span class="id"> M</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> _</span><span class="id"> \/</span><span class="id"> _]</span>.<br/>
<span class="id">have</span><span class="id"> [Qx|nQx]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">Q</span><span class="id"> x</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> M</span><span class="id"> =</span><span class="id"> ~`</span><span class="id"> closure</span><span class="id"> P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> open_nbhs_nbhs;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> exact/closed_openC/closed_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/cPQ</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> eqEsubset</span><span class="id"> /M;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> z;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> do</span><span class="id"> 2!case</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> right;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> /cPQ</span>.<br/>
<span class="id">have</span><span class="id"> [nPx|cPx]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">closure</span><span class="id"> P</span><span class="id"> x</span>).<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> M</span><span class="id"> =</span><span class="id"> Q</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> open_nbhs_nbhs;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> eqEsubset</span><span class="id"> /M;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> z;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> do</span><span class="id"> 2!case</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> left;</span><span class="id"> split</span>.<br/>
<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> M</span><span class="id"> =</span><span class="id"> setT</span><span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> filterT</span>.<br/>
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> z</span><span class="id"> _</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [Qz|/</span>(<span class="id">subsetC</span><span class="id"> cPQ</span>)<span class="id">]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">Q</span><span class="id"> z</span>)<span class="id">;</span><span class="id"> constructor</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> normal_uniform_separators</span>.<br/>
<span class="vernacular">End</span><span class="id"> Urysohn</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> uniform_separatorP</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B</span><span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id">,</span><span class="id"> [/\</span><span class="id"> continuous</span><span class="id"> f,</span><span class="id"> range</span><span class="id"> f</span><span class="id"> `&lt;=`</span><span class="id"> `[0,</span><span class="id"> 1],</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span><span class="id"> @`</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> 0]</span><span class="id"> &amp;</span><span class="id"> f</span><span class="id"> @`</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> 1]]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split;</span><span class="id"> first</span><span class="id"> do</span><span class="id"> [move=&gt;</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span> (<span class="id">Urysohn</span><span class="id"> A</span><span class="id"> B</span>)<span class="id">;</span><span class="id"> split]</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> Urysohn_continuous</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> Urysohn_range</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> Urysohn_sub0</span>.<br/>
<span class="id">-</span><span class="id"> exact:</span><span class="id"> Urysohn_sub1</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> f</span><span class="id"> [ctsf</span><span class="id"> f01</span><span class="id"> fA0</span><span class="id"> fB1]</span>.<br/>
<span class="id">pose</span><span class="id"> T'</span><span class="id"> :</span><span class="id"> uniformType</span><span class="id"> :=</span><span class="id"> weak_topology</span><span class="id"> f</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">Uniform</span>.<span class="id">class</span><span class="id"> T'</span>)<span class="id">,</span> (<span class="id">[set</span><span class="id"> xy</span><span class="id"> |</span><span class="id"> ball</span> (<span class="id">f</span><span class="id"> xy</span>.<span class="id">1</span>)<span class="id"> 1</span> (<span class="id">f</span><span class="id"> xy</span>.<span class="id">2</span>)<span class="id">]</span>)<span class="id">;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> |</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> 1</span><span class="id"> xy</span>.<span class="id">2];</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> case</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -entourage_ballE;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> -subset0</span><span class="id"> =&gt;</span><span class="id"> -[a</span><span class="id"> b</span><span class="id"> [[/=</span><span class="id"> Aa</span><span class="id"> Bb]]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">imsub1</span><span class="id"> fA0</span>)<span class="id">//</span> (<span class="id">imsub1</span><span class="id"> fB1</span>)<span class="id">//</span><span class="id"> /ball/=</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> normr1</span><span class="id"> ltxx</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> U</span><span class="id"> [V</span><span class="id"> [[W</span><span class="id"> oW</span><span class="id"> &lt;-</span><span class="id"> /=]]]</span><span class="id"> ?</span><span class="id"> /filterS;</span><span class="id"> apply</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ctsf;</span><span class="id"> exact:</span><span class="id"> open_nbhs_nbhs</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> normalP</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> normal_spaceP</span><span class="id"> :</span><span class="id"> [&lt;-&gt;</span><br/>
<span class="id"> normal_space</span><span class="id"> T;</span><br/>
<span class="gallina-kwd"> forall</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B;</span><br/>
<span class="gallina-kwd"> forall</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> U</span><span class="id"> V,</span><span class="id"> [/\</span><span class="id"> open</span><span class="id"> U,</span><span class="id"> open</span><span class="id"> V,</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> U,</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> V</span><span class="id"> &amp;</span><span class="id"> U</span><span class="id"> `&amp;`</span><span class="id"> V</span><span class="id"> =</span><span class="id"> set0]</span><span class="id"> ]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">tfae;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> normal_uniform_separator</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> +</span><span class="id"> A</span><span class="id"> B</span><span class="id"> clA</span><span class="id"> clB</span><span class="id"> AB0</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> clA</span><span class="id"> clB</span><span class="id"> AB0</span>)<span class="id"> /</span>(<span class="id">@uniform_separatorP</span><span class="id"> _</span><span class="id"> R</span>).<br/>
&nbsp;&nbsp;<span class="id">case=&gt;</span><span class="id"> f</span><span class="id"> [cf</span><span class="id"> f01</span><span class="id"> /imsub1P/subset_trans</span><span class="id"> fa0</span><span class="id"> /imsub1P/subset_trans</span><span class="id"> fb1]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">f@^-1`</span><span class="id"> `]-1,</span><span class="id"> 1/2[</span>)<span class="id">,</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> `]1/2,</span><span class="id"> 2[</span>)<span class="id">;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> open_comp;</span><span class="id"> [|exact:</span><span class="id"> interval_open]</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> open_comp;</span><span class="id"> [|exact:</span><span class="id"> interval_open]</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> fa0</span><span class="id"> =&gt;</span><span class="id"> x/=</span><span class="id"> -&gt;;</span><span class="id"> rewrite</span> (<span class="id">@in_itv</span><span class="id"> _</span><span class="id"> R</span>)<span class="id">/=;</span><span class="id"> apply/andP;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> apply:</span><span class="id"> fb1</span><span class="id"> =&gt;</span><span class="id"> x/=</span><span class="id"> -&gt;;</span><span class="id"> rewrite</span> (<span class="id">@in_itv</span><span class="id"> _</span><span class="id"> R</span>)<span class="id">/=</span><span class="id"> ltr_pdivrMr//</span><span class="id"> mul1r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltr1n</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> -preimage_setI</span><span class="id"> ?set_itvoo</span><span class="id"> -subset0</span><span class="id"> =&gt;</span><span class="id"> t</span><span class="id"> []</span><span class="id"> /andP</span><span class="id"> [_</span><span class="id"> +]</span><span class="id"> /andP</span><span class="id"> [+</span><span class="id"> _]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /lt_trans</span><span class="id"> /[apply];</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> +</span><span class="id"> A</span><span class="id"> clA</span><span class="id"> B</span><span class="id"> /set_nbhsP</span><span class="id"> [C</span><span class="id"> [oC</span><span class="id"> AC</span><span class="id"> CB]]</span>.<br/>
<span class="id">have</span><span class="id"> AC0</span><span class="id"> :</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> ~`</span><span class="id"> C</span><span class="id"> =</span><span class="id"> set0</span><span class="gallina-kwd"> by</span><span class="id"> apply/disjoints_subset;</span><span class="id"> rewrite</span><span class="id"> setCK</span>.<br/>
<span class="id">case/</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> clA</span> (<span class="id">open_closedC</span><span class="id"> oC</span>)<span class="id"> AC0</span>)<span class="id"> =&gt;</span><span class="id"> U</span><span class="id"> [V]</span><span class="id"> [oU</span><span class="id"> oV</span><span class="id"> AU</span><span class="id"> nCV</span><span class="id"> UV0]</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">~`</span><span class="id"> closure</span><span class="id"> V</span>).<br/>
&nbsp;&nbsp;<span class="id">apply/set_nbhsP;</span><span class="gallina-kwd"> exists</span><span class="id"> U;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/subsetCr;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> open_closedC</span><span class="id"> oU;</span><span class="id"> rewrite</span><span class="id"> closure_id</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/closure_subset/disjoints_subset;</span><span class="id"> rewrite</span><span class="id"> setIC</span>.<br/>
<span class="id">apply/</span>(<span class="id">subset_trans</span><span class="id"> _</span><span class="id"> CB</span>)<span class="id">/subsetCP;</span><span class="id"> apply:</span> (<span class="id">subset_trans</span><span class="id"> nCV</span>).<br/>
<span class="id">apply/subsetCr;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> open_closedC</span><span class="id"> oV;</span><span class="id"> rewrite</span><span class="id"> closure_id</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span>.<br/>
<span class="id">exact/closure_subset/subsetC/subset_closure</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normal_openP</span><span class="id"> :</span><span class="id"> normal_space</span><span class="id"> T</span><span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> U</span><span class="id"> V,</span><span class="id"> [/\</span><span class="id"> open</span><span class="id"> U,</span><span class="id"> open</span><span class="id"> V,</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> U,</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> V</span><span class="id"> &amp;</span><span class="id"> U</span><span class="id"> `&amp;`</span><span class="id"> V</span><span class="id"> =</span><span class="id"> set0]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">normal_spaceP</span><span class="id"> 0%N</span><span class="id"> 2%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normal_separatorP</span><span class="id"> :</span><span class="id"> normal_space</span><span class="id"> T</span><span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">uniform_separator</span><span class="id"> A</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span> (<span class="id">normal_spaceP</span><span class="id"> 0%N</span><span class="id"> 1%N</span>). Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> normalP</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> completely_regular</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span>.<br/>
<br/>
<div class="doc md"> This is equivalent to uniformizable. Note there is a subtle
   distinction between being uniformizable and being uniformType.
   There is often more than one possible uniformity, and being a
   uniformType has a specific one.

   If you don't care, you can use the `completely_regular_uniformity.type`
   which builds the uniformity.
</div>
<span class="vernacular">Definition</span><span class="id"> completely_regular_space</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span class="id">a</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id">,</span><span class="id"> closed</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> B</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> uniform_separator</span><span class="id"> [set</span><span class="id"> a]</span><span class="id"> B</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> point_uniform_separator</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> uniformType}</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">closed</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> B</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> uniform_separator</span><span class="id"> [set</span><span class="id"> x]</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> clB</span><span class="id"> nBx;</span><span class="id"> have</span><span class="id"> :</span><span class="id"> open</span> (<span class="id">~`</span><span class="id"> B</span>)<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> openC</span>.<br/>
<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> nBx</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /interior</span><span class="id"> /=</span><span class="id"> -nbhs_entourageE</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> E</span><span class="id"> entE</span><span class="id"> EnB</span>.<br/>
<span class="id">pose</span><span class="id"> T'</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R</span><span class="id"> :=</span><span class="id"> gauge</span>.<span class="id">type</span><span class="id"> entE</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">Uniform</span>.<span class="id">class</span><span class="id"> T</span>)<span class="id">;</span><span class="gallina-kwd"> exists</span><span class="id"> E;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move</span><span class="id"> =&gt;</span><span class="id"> ?</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -subset0</span><span class="id"> =&gt;</span><span class="id"> -[?</span><span class="id"> w</span><span class="id"> [/=</span><span class="id"> [-&gt;</span><span class="id"> ?</span><span class="id"> /xsectionP</span><span class="id"> ?]]];</span><span class="id"> exact:</span> (<span class="id">EnB</span><span class="id"> w</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> uniform_completely_regular</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> uniformType}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">@completely_regular_space</span><span class="id"> T</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> B</span><span class="id"> clB</span><span class="id"> Bx;</span><span class="id"> exact:</span><span class="id"> point_uniform_separator</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> normal_completely_regular</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">normal_space</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> accessible_space</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> completely_regular_space</span><span class="id"> T</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move/normal_separatorP</span><span class="id"> =&gt;</span><span class="id"> +</span><span class="id"> /accessible_closed_set1</span><span class="id"> cl1</span><span class="id"> x</span><span class="id"> A</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/disjoints_subset</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> -&gt;</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> uniform_regular</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> uniformType}</span><span class="id"> :</span><span class="id"> @regular_space</span><span class="id"> X</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> A;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> -nbhs_entourageE</span><span class="id"> =&gt;</span><span class="id"> -[E</span><span class="id"> entE]</span>.<br/>
<span class="id">move/</span>(<span class="id">subset_trans</span> (<span class="id">ent_closure</span><span class="id"> entE</span>))<span class="id"> =&gt;</span><span class="id"> ExA</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">xsection</span> (<span class="id">split_ent</span><span class="id"> E</span>)<span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span> (<span class="id">split_ent</span><span class="id"> E</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> completely_regular</span>.<br/>
<br/>
<span class="vernacular">Module</span><span class="id"> completely_regular_uniformity</span>.<br/>
<span class="vernacular">Section</span><span class="id"> completely_regular_uniformity</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> topologicalType}</span>.<br/>
<span class="vernacular">Hypothesis</span><span class="id"> crs</span><span class="id"> :</span><span class="id"> completely_regular_space</span><span class="id"> X</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> X'</span><span class="id"> :</span><span class="id"> uniformType</span><span class="id"> :=</span><span class="id"> @sup_topology</span><span class="id"> X</span><span class="id"> {f</span><span class="id"> :</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> R</span><span class="id"> |</span><span class="id"> continuous</span><span class="id"> f}</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span><span class="id"> f</span><span class="id"> =&gt;</span><span class="id"> Uniform</span>.<span class="id">class</span> (<span class="id">weak_topology</span> (<span class="id">projT1</span><span class="id"> f</span>))).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> completely_regular_nbhsE</span><span class="id"> :</span><span class="id"> @nbhs</span><span class="id"> X</span><span class="id"> X</span><span class="id"> =</span><span class="id"> nbhs_</span> (<span class="id">@entourage</span><span class="id"> X'</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nbhs_entourageE;</span><span class="id"> apply/funext</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> apply/seteqP;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/cvg_sup</span><span class="id"> =&gt;</span><span class="id"> -[f</span><span class="id"> ctsf]</span><span class="id"> U</span><span class="id"> [/=</span><span class="id"> _</span><span class="id"> [[V</span><span class="id"> /=</span><span class="id"> oV</span><span class="id"> &lt;-</span><span class="id"> /=</span><span class="id"> Vfx]]]</span><span class="id"> /filterS</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> exact/ctsf/open_nbhs_nbhs</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> U;</span><span class="id"> wlog</span><span class="id"> oU</span><span class="id"> :</span><span class="id"> U</span><span class="id"> /</span><span class="id"> @open</span><span class="id"> X</span><span class="id"> U</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> WH;</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -[V</span><span class="id"> [oV</span><span class="id"> Vx</span><span class="id"> /filterS]]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply;</span><span class="id"> first</span><span class="id"> exact:</span> (<span class="id">@nbhs_filter</span><span class="id"> X'</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> WH</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> move:</span><span class="id"> oV;</span><span class="id"> rewrite</span><span class="id"> openE;</span><span class="id"> exact</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /[dup]</span><span class="id"> nUx</span><span class="id"> /nbhs_singleton</span><span class="id"> Ux</span>.<br/>
<span class="id">have</span><span class="id"> ufs</span><span class="id"> :</span><span class="id"> uniform_separator</span><span class="id"> [set</span><span class="id"> x]</span> (<span class="id">~`</span><span class="id"> U</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> crs;</span><span class="id"> [exact:</span><span class="id"> open_closedC</span><span class="id"> |</span><span class="id"> exact]</span>.<br/>
<span class="id">have</span><span class="id"> /uniform_separatorP</span><span class="id"> :=</span><span class="id"> ufs</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> R</span>)<span class="id">[f</span><span class="id"> [ctsf</span><span class="id"> f01</span><span class="id"> fx0</span><span class="id"> fU1]]</span>.<br/>
<span class="id">rewrite</span><span class="id"> -nbhs_entourageE</span><span class="id"> /entourage</span><span class="id"> /=</span><span class="id"> /sup_ent</span><span class="id"> /=</span><span class="id"> smallest_filter_finI</span>.<br/>
<span class="id">pose</span><span class="id"> E</span><span class="id"> :=</span><span class="id"> map_pair</span><span class="id"> f</span><span class="id"> @^-1`</span> (<span class="gallina-kwd">fun</span><span class="id"> pq</span><span class="id"> =&gt;</span><span class="id"> ball</span><span class="id"> pq</span>.<span class="id">1</span><span class="id"> 1</span><span class="id"> pq</span>.<span class="id">2</span>).<br/>
<span class="gallina-kwd">exists</span><span class="id"> E;</span><span class="id"> first</span><span class="id"> last</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> z</span><span class="id"> /=</span><span class="id"> /set_mem;</span><span class="id"> rewrite</span><span class="id"> /E</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> f</span><span class="id"> x</span><span class="id"> =</span><span class="id"> 0</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> fx0;</span><span class="gallina-kwd"> exists</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> sub0r</span><span class="id"> normrN;</span><span class="id"> apply:</span><span class="id"> contraPP</span><span class="id"> =&gt;</span><span class="id"> cUz</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> f</span><span class="id"> z</span><span class="id"> =</span><span class="id"> 1</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> normr1</span><span class="id"> ltxx</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> fU1;</span><span class="gallina-kwd"> exists</span><span class="id"> z</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> r</span><span class="id"> /=</span><span class="id"> [_];</span><span class="id"> apply</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">pose</span><span class="id"> f'</span><span class="id"> :</span><span class="id"> {classic</span><span class="id"> {f</span><span class="id"> :</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> R</span><span class="id"> |</span><span class="id"> continuous</span><span class="id"> f}}</span><span class="id"> :=</span><span class="id"> exist</span><span class="id"> _</span><span class="id"> f</span><span class="id"> ctsf</span>.<br/>
<span class="id">suff</span><span class="id"> /asboolP</span><span class="id"> entE</span><span class="id"> :</span><span class="id"> @entourage</span> (<span class="id">weak_topology</span><span class="id"> f</span>) (<span class="id">f',</span><span class="id"> E</span>).<span class="id">2</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">exist</span><span class="id"> _</span> (<span class="id">f',</span><span class="id"> E</span>)<span class="id"> entE</span>).<br/>
<span class="gallina-kwd">exists</span> (<span class="gallina-kwd">fun</span><span class="id"> pq</span><span class="id"> =&gt;</span><span class="id"> ball</span><span class="id"> pq</span>.<span class="id">1</span><span class="id"> 1</span><span class="id"> pq</span>.<span class="id">2</span>)<span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /entourage</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> type</span><span class="id"> :</span><span class="gallina-kwd"> Type</span><span class="id"> :=</span><span class="gallina-kwd"> let</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> completely_regular_nbhsE</span><span class="gallina-kwd"> in</span><span class="id"> X</span>.<br/>
<br/>
<span class="id">#[export]</span><span class="id"> HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Topological</span>.<span class="id">copy</span><span class="id"> type</span><span class="id"> X</span>.<br/>
<span class="id">#[export]</span><span class="id"> HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> @Nbhs_isUniform</span>.<span class="id">Build</span><br/>
&nbsp;&nbsp;<span class="id">type</span><br/>
&nbsp;&nbsp;(<span class="id">@entourage</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;(<span class="id">@entourage_filter</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;(<span class="id">@entourage_diagonal_subproof</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;(<span class="id">@entourage_inv</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;(<span class="id">@entourage_split_ex</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;<span class="id">completely_regular_nbhsE</span>.<br/>
<span class="id">#[export]</span><span class="id"> HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Uniform</span>.<span class="id">on</span><span class="id"> type</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> completely_regular_uniformity</span>.<br/>
<span class="vernacular">Module</span><span class="vernacular"> Exports</span>.<span class="id"> HB</span>.<span class="id">reexport</span>.<span class="vernacular"> End</span><span class="vernacular"> Exports</span>.<br/>
<span class="vernacular">End</span><span class="id"> completely_regular_uniformity</span>.<br/>
<span class="vernacular">Export</span><span class="id"> completely_regular_uniformity</span>.<span class="vernacular">Exports</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> locally_compact_uniform</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span>.<br/>
<span class="vernacular">Hypothesis</span><span class="id"> lcpt</span><span class="id"> :</span><span class="id"> locally_compact</span><span class="id"> [set:</span><span class="id"> X]</span>.<br/>
<span class="vernacular">Hypothesis</span><span class="id"> hsdf</span><span class="id"> :</span><span class="id"> hausdorff_space</span><span class="id"> X</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> opc</span><span class="id"> :=</span><span class="id"> @one_point_compactification</span><span class="id"> X</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> one_point_compactification_completely_reg</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">completely_regular_space</span><span class="id"> opc</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span> (<span class="id">@normal_completely_regular</span><span class="id"> R</span>).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> compact_normal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> one_point_compactification_hausdorff</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> one_point_compactification_compact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> hausdorff_accessible;</span><span class="id"> exact:</span><span class="id"> one_point_compactification_hausdorff</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">#[local]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Uniform</span>.<span class="id">copy</span><span class="id"> opc</span><br/>
&nbsp;&nbsp;(<span class="id">@completely_regular_uniformity</span>.<span class="id">type</span><span class="id"> R</span><span class="id"> _</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">one_point_compactification_completely_reg</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> X'</span><span class="id"> :=</span><span class="id"> @weak_topology</span><span class="id"> X</span><span class="id"> opc</span><span class="id"> Some</span>.<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_one_point_compactification_weakE</span><span class="id"> :</span><span class="id"> @nbhs</span><span class="id"> X</span><span class="id"> X</span><span class="id"> =</span><span class="id"> nbhs_</span> (<span class="id">@entourage</span><span class="id"> X'</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhs_entourageE</span><span class="id"> one_point_compactification_weak_topology</span>. Qed.</div></details>
<br/>
<span class="id">#[local,</span><span class="id"> non_forgetful_inheritance]</span><br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> @Nbhs_isUniform</span>.<span class="id">Build</span><br/>
&nbsp;&nbsp;<span class="id">X</span><br/>
&nbsp;&nbsp;(<span class="id">@entourage</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;(<span class="id">@entourage_filter</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;(<span class="id">@entourage_diagonal_subproof</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;(<span class="id">@entourage_inv</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;(<span class="id">@entourage_split_ex</span><span class="id"> X'</span>)<br/>
&nbsp;&nbsp;<span class="id">nbhs_one_point_compactification_weakE</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> locally_compact_completely_regular</span><span class="id"> :</span><span class="id"> completely_regular_space</span><span class="id"> X</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> uniform_completely_regular</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> locally_compact_uniform</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> completely_regular_regular</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">completely_regular_space</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> @regular_space</span><span class="id"> X</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> crsX;</span><span class="id"> pose</span><span class="id"> P'</span><span class="id"> :=</span><span class="id"> @completely_regular_uniformity</span>.<span class="id">type</span><span class="id"> R</span><span class="id"> _</span><span class="id"> crsX</span>.<br/>
<span class="id">exact:</span> (<span class="id">@uniform_regular</span><span class="id"> P'</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> pseudometric_normal</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> regular_openP</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> x,</span><span class="id"> @regular_space</span><span class="id"> T}</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> A,</span><span class="id"> closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> U</span><span class="id"> V</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T,</span><span class="id"> [/\</span><span class="id"> open</span><span class="id"> U,</span><span class="id"> open</span><span class="id"> V,</span><span class="id"> U</span><span class="id"> x,</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> V</span><span class="id"> &amp;</span><span class="id"> U</span><span class="id"> `&amp;`</span><span class="id"> V</span><span class="id"> =</span><span class="id"> set0]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> +</span><span class="id"> A</span><span class="id"> clA</span><span class="id"> nAx</span><span class="id"> =&gt;</span><span class="id"> /</span>(_ (<span class="id">~`</span><span class="id"> A</span>))<span class="id"> []</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> open_nbhs_nbhs;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> closed_openC</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> U</span><span class="id"> Ux</span><span class="id"> /subsetC;</span><span class="id"> rewrite</span><span class="id"> setCK</span><span class="id"> =&gt;</span><span class="id"> AclU;</span><span class="gallina-kwd"> exists</span><span class="id"> U^°</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">~`</span><span class="id"> closure</span><span class="id"> U</span>)<span class="id"> ;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open_interior</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/closed_openC/closed_closure</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/disjoints_subset;</span><span class="id"> rewrite</span><span class="id"> setCK</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">subset_trans</span> (<span class="id">@interior_subset</span><span class="id"> _</span><span class="id"> _</span>) (<span class="id">@subset_closure</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
<span class="id">move=&gt;</span><span class="id"> +</span><span class="id"> A</span><span class="id"> Ax</span><span class="id"> =&gt;</span><span class="id"> /</span>(_ (<span class="id">~`</span><span class="id"> A^°</span>))<span class="id"> [];</span><span class="id"> [|exact|]</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/open_closedC/open_interior</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> U</span><span class="id"> [V]</span><span class="id"> [oU</span><span class="id"> oV</span><span class="id"> Ux</span><span class="id"> /subsetC</span><span class="id"> cAV</span><span class="id"> /disjoints_subset</span><span class="id"> UV];</span><span class="gallina-kwd"> exists</span><span class="id"> U</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/open_nbhs_nbhs</span>.<br/>
<span class="id">apply:</span> (<span class="id">subset_trans</span> (<span class="id">closure_subset</span><span class="id"> UV</span>)).<br/>
<span class="id">move/open_closedC/closure_id</span><span class="id"> :</span><span class="id"> oV</span><span class="id"> =&gt;</span><span class="id"> &lt;-</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">subset_trans</span><span class="id"> cAV</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> setCK;</span><span class="id"> exact:</span><span class="id"> interior_subset</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> pseudometric_normal</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {X</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R}</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">normal_space</span><span class="id"> X</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/</span>(<span class="id">@normal_openP</span><span class="id"> R</span>)<span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> B</span><span class="id"> clA</span><span class="id"> clB</span><span class="id"> AB0</span>.<br/>
<span class="id">have</span><span class="id"> eps'</span> (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> X</span>)<span class="id"> :</span><span class="id"> closed</span><span class="id"> D</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="gallina-kwd"> exists</span><span class="id"> eps</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="id"> ~</span><span class="id"> D</span><span class="id"> x</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ball</span><span class="id"> x</span><span class="id"> eps%:num</span><span class="id"> `&amp;`</span><span class="id"> D</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> clD</span><span class="id"> x;</span><span class="id"> have</span><span class="id"> [nDx|?]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">~</span><span class="id"> D</span><span class="id"> x</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 1%:pos</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /regular_openP/</span>(_<span class="id"> _</span><span class="id"> clD</span>)<span class="id"> [//|]</span><span class="id"> :=</span><span class="id"> @uniform_regular</span><span class="id"> X</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> U</span><span class="id"> [V]</span><span class="id"> [+</span><span class="id"> oV]</span><span class="id"> Ux</span><span class="id"> /subsetC</span><span class="id"> BV</span><span class="id"> /disjoints_subset</span><span class="id"> UV0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> /interior</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> Ux</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> -nbhs_ballE</span><span class="id"> =&gt;</span><span class="id"> -[]</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[eps]</span><span class="id"> beU;</span><span class="gallina-kwd"> exists</span><span class="id"> eps</span><span class="id"> =&gt;</span><span class="id"> _;</span><span class="id"> apply/disjoints_subset</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">subset_trans</span><span class="id"> beU</span> (<span class="id">subset_trans</span><span class="id"> UV0</span><span class="id"> _</span>)).<br/>
<span class="id">pose</span><span class="id"> epsA</span><span class="id"> x</span><span class="id"> :=</span><span class="id"> projT1</span> (<span class="id">cid</span> (<span class="id">eps'</span><span class="id"> _</span><span class="id"> clB</span><span class="id"> x</span>)).<br/>
<span class="id">pose</span><span class="id"> epsB</span><span class="id"> x</span><span class="id"> :=</span><span class="id"> projT1</span> (<span class="id">cid</span> (<span class="id">eps'</span><span class="id"> _</span><span class="id"> clA</span><span class="id"> x</span>)).<br/>
<span class="gallina-kwd">exists</span> (<span class="id">\bigcup_</span>(<span class="id">x</span><span class="gallina-kwd"> in</span><span class="id"> A</span>)<span class="id"> interior</span> (<span class="id">ball</span><span class="id"> x</span> ((<span class="id">epsA</span><span class="id"> x</span>)<span class="id">%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">%:pos%:num</span>)).<br/>
<span class="gallina-kwd">exists</span> (<span class="id">\bigcup_</span>(<span class="id">x</span><span class="gallina-kwd"> in</span><span class="id"> B</span>)<span class="id"> interior</span> (<span class="id">ball</span><span class="id"> x</span> ((<span class="id">epsB</span><span class="id"> x</span>)<span class="id">%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">%:pos%:num</span>)).<br/>
<span class="id">split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> bigcup_open</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> open_interior</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> bigcup_open</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> open_interior</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> y</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="id">-</span><span class="id"> apply/eqP/negPn/negP/set0P</span><span class="id"> =&gt;</span><span class="id"> -[z</span><span class="id"> [[x</span><span class="id"> Ax</span><span class="id"> /interior_subset</span><span class="id"> Axe]]]</span>.<br/>
&nbsp;&nbsp;<span class="id">case=&gt;</span><span class="id"> y</span><span class="id"> By</span><span class="id"> /interior_subset</span><span class="id"> Bye;</span><span class="id"> have</span><span class="id"> nAy</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> A</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> AB0;</span><span class="id"> rewrite</span><span class="id"> setIC</span><span class="id"> =&gt;</span><span class="id"> /disjoints_subset;</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> nBx</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> B</span><span class="id"> x</span><span class="gallina-kwd"> by</span><span class="id"> move/disjoints_subset:</span><span class="id"> AB0;</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [|/ltW]</span><span class="id"> :=</span><span class="id"> leP</span> ((<span class="id">epsA</span><span class="id"> x</span>)<span class="id">%:num</span><span class="id"> /</span><span class="id"> 2</span>) ((<span class="id">epsB</span><span class="id"> y</span>)<span class="id">%:num</span><span class="id"> /</span><span class="id"> 2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move/ball_sym:</span><span class="id"> Axe</span><span class="id"> =&gt;</span><span class="id"> /[swap]</span><span class="id"> /le_ball</span><span class="id"> /[apply]</span><span class="id"> /</span>(<span class="id">ball_triangle</span><span class="id"> Bye</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -splitr</span><span class="id"> =&gt;</span><span class="id"> byx;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">cid</span> (<span class="id">eps'</span><span class="id"> _</span><span class="id"> clA</span><span class="id"> y</span>))<span class="id"> nAy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -subset0;</span><span class="id"> apply;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> byx|]</span>.<br/>
&nbsp;&nbsp;<span class="id">move/ball_sym:</span><span class="id"> Bye</span><span class="id"> =&gt;/[swap]</span><span class="id"> /le_ball</span><span class="id"> /[apply]</span><span class="id"> /</span>(<span class="id">ball_triangle</span><span class="id"> Axe</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -splitr</span><span class="id"> =&gt;</span><span class="id"> byx;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> projT2</span> (<span class="id">cid</span> (<span class="id">eps'</span><span class="id"> _</span><span class="id"> clB</span><span class="id"> x</span>))<span class="id"> nBx</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -subset0;</span><span class="id"> apply;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> byx|]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> pseudometric_normal</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> open_closed_sets_ereal</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realFieldType</span> .<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_ereal_lt</span><span class="id"> y</span><span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> r%:E</span><span class="id"> &lt;</span><span class="id"> y]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> [y||]</span><span class="id"> /=;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open_lt</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> [set</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _]</span><span class="id"> =</span><span class="id"> setT</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> openT</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> ltry</span><span class="id"> trueE</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> [set</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _]</span><span class="id"> =</span><span class="id"> set0</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> falseE</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_ereal_gt</span><span class="id"> y</span><span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> r%:E]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> [y||]</span><span class="id"> /=;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open_gt</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> [set</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _]</span><span class="id"> =</span><span class="id"> set0</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> falseE</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> [set</span><span class="id"> _</span><span class="id"> |</span><span class="id"> _]</span><span class="id"> =</span><span class="id"> setT</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> openT</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> ltNyr</span><span class="id"> trueE</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_ereal_lt'</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> ereal_nbhs</span><span class="id"> x</span> (<span class="gallina-kwd">fun</span><span class="id"> u</span><span class="id"> =&gt;</span><span class="id"> u</span><span class="id"> &lt;</span><span class="id"> y</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> [x|//|]</span><span class="id"> xy;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open_ereal_lt</span>.<br/>
<span class="id">-</span><span class="id"> case:</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> [y||//]</span><span class="id"> /=</span><span class="gallina-kwd"> in</span><span class="id"> xy</span><span class="id"> *;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 0%R</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> x</span><span class="id"> ?</span>.<br/>
<span class="id">-</span><span class="id"> case:</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> [y||//]</span><span class="id"> /=</span><span class="gallina-kwd"> in</span><span class="id"> xy</span><span class="id"> *</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> num_real;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> x</span><span class="id"> ?</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 0%R;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span><span class="id"> /lt_le_trans;</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> leey</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_ereal_gt'</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> ereal_nbhs</span><span class="id"> x</span> (<span class="gallina-kwd">fun</span><span class="id"> u</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> u</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case:</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> [x||]</span><span class="id"> //=;</span><span class="id"> do</span><span class="id"> ?[exact:</span><span class="id"> open_ereal_gt];</span><br/>
&nbsp;&nbsp;<span class="id">case:</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> [y||]</span><span class="id"> //=;</span><span class="id"> do</span><span class="id"> ?by</span><span class="gallina-kwd"> exists</span><span class="id"> 0</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> num_real</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> _;</span><span class="gallina-kwd"> exists</span><span class="id"> 0%R;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x;</span><span class="id"> apply/le_lt_trans;</span><span class="id"> rewrite</span><span class="id"> leNye</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_ereal_lt_ereal</span><span class="id"> x</span><span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> openr</span><span class="id"> r</span><span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> r%:E]</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;BUG:&nbsp;why&nbsp;doesn't&nbsp;case&nbsp;work?&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> [?</span><span class="id"> |</span><span class="id"> //</span><span class="id"> |</span><span class="id"> ?];</span><span class="id"> [rewrite</span><span class="id"> /=</span><span class="id"> lte_fin</span><span class="id"> =&gt;</span><span class="id"> xy</span><span class="id"> |</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">@open_ereal_lt</span><span class="id"> r%:E</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> openE;</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> lte_fin</span>.<br/>
<span class="id">move:</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> [</span><span class="id"> //</span><span class="id"> |</span><span class="id"> |</span><span class="id"> ];</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> []</span>. <span class="comment">(*&nbsp;same&nbsp;BUG&nbsp;*)</span><br/>
<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> +oo]</span><span class="id"> =</span><span class="id"> \bigcup_r</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> r%:E]</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> bigcup_open</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> -[r</span><span class="id"> |</span><span class="id"> |</span><span class="id"> ]/=</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> ltry;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">r</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">%R</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> lte_fin</span><span class="id"> ltrDl</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltxx;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> -[]</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> ltNge</span><span class="id"> leey</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> _;</span><span class="gallina-kwd"> exists</span><span class="id"> 0%R</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> ltNye</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_ereal_gt_ereal</span><span class="id"> x</span><span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> y]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> openr</span><span class="id"> r</span><span class="id"> :</span><span class="id"> open</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> r%:E</span><span class="id"> &lt;</span><span class="id"> x]</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> [?</span><span class="id"> |</span><span class="id"> ?</span><span class="id"> |</span><span class="id"> //];</span><span class="id"> [rewrite</span><span class="id"> /=</span><span class="id"> lte_fin</span><span class="id"> =&gt;</span><span class="id"> xy</span><span class="id"> |</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> r]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">@open_ereal_gt</span><span class="id"> r%:E</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> openE;</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> lte_fin</span>.<br/>
<span class="id">case:</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> [</span><span class="id"> //</span><span class="id"> |</span><span class="id"> |</span><span class="id"> ];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> []</span>.<br/>
<span class="id">suff</span><span class="id"> -&gt;</span><span class="id"> :</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> -oo</span><span class="id"> &lt;</span><span class="id"> y]</span><span class="id"> =</span><span class="id"> \bigcup_r</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span><span class="id"> |</span><span class="id"> r%:E</span><span class="id"> &lt;</span><span class="id"> y]</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> bigcup_open</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> -[r</span><span class="id"> |</span><span class="id"> |</span><span class="id"> ]/=</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> ltNyr;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">r</span><span class="id"> -</span><span class="id"> 1</span>)<span class="id">%R</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> lte_fin</span><span class="id"> ltrBlDr</span><span class="id"> ltrDl</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> _;</span><span class="gallina-kwd"> exists</span><span class="id"> 0%R</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> ltey</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltxx;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> -[]</span><span class="id"> x</span><span class="id"> _</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> ltNge</span><span class="id"> leNye</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ereal_le_ereal</span><span class="id"> y</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;=</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;=</span><span class="id"> x]</span><span class="id"> =</span><span class="id"> ~`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &gt;</span><span class="id"> x]</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE=&gt;</span><span class="id"> x;</span><span class="id"> split=&gt;</span><span class="id"> [rx|/negP];</span><span class="id"> [apply/negP|];</span><span class="id"> rewrite</span><span class="id"> -leNgt</span>.<br/>
<span class="id">exact/open_closedC/open_ereal_lt_ereal</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ereal_ge_ereal</span><span class="id"> y</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &gt;=</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &gt;=</span><span class="id"> x]</span><span class="id"> =</span><span class="id"> ~`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> x]</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE=&gt;</span><span class="id"> x;</span><span class="id"> split=&gt;</span><span class="id"> [rx|/negP];</span><span class="id"> [apply/negP|];</span><span class="id"> rewrite</span><span class="id"> -leNgt</span>.<br/>
<span class="id">exact/open_closedC/open_ereal_gt_ereal</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> open_closed_sets_ereal</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> closure_left_right_open</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realFieldType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> z</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_gt</span><span class="id"> z</span><span class="id"> :</span><span class="id"> closure</span> (<span class="id">[set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> x]</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> =</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> closureE;</span><span class="id"> apply:</span><span class="id"> smallest_sub</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> /ltW</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> v;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[&lt;-{v}|];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> subset_closure</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> B</span><span class="id"> [e</span><span class="id"> /=</span><span class="id"> e0</span><span class="id"> zB];</span><span class="id"> near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> d</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">z</span><span class="id"> +</span><span class="id"> d</span>)<span class="id">;</span><span class="id"> split;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ?ltrDl//;</span><span class="id"> apply:</span><span class="id"> zB</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprD</span><span class="id"> addNKr</span><span class="id"> normrN</span><span class="id"> gtr0_norm//</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_lt</span><span class="id"> z</span><span class="id"> :</span><span class="id"> closure</span> (<span class="id">[set</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> z]</span>)<span class="id"> =</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> z]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> closureE;</span><span class="id"> apply:</span><span class="id"> smallest_sub</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ?</span><span class="id"> /ltW</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> v;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[&lt;-{z}|];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> subset_closure</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> B</span><span class="id"> [e</span><span class="id"> /=</span><span class="id"> e0</span><span class="id"> vB];</span><span class="id"> near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> d</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">v</span><span class="id"> -</span><span class="id"> d</span>)<span class="id">;</span><span class="id"> split;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ?gtrDl</span><span class="id"> ?oppr_lt0//;</span><span class="id"> apply:</span><span class="id"> vB</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> opprB</span><span class="id"> addrC</span><span class="id"> addrNK</span><span class="id"> gtr0_norm//;</span><span class="id"> near:</span><span class="id"> d</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> closure_left_right_open</span>.<br/>
<br/>
<div class="doc">Complete Normed Modules </div>
<br/>
<span class="id">#[short</span>(<span class="id">type=</span><span class="id">&quot;completeNormedModType&quot;</span>)<span class="id">]</span><br/>
<span class="id">HB</span>.<span class="id">structure</span><span class="vernacular"> Definition</span><span class="id"> CompleteNormedModule</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">{T</span><span class="id"> of</span><span class="id"> NormedModule</span><span class="id"> K</span><span class="id"> T</span><span class="id"> &amp;</span><span class="id"> Complete</span><span class="id"> T}</span>.<br/>
<br/>
<div class="doc">The topology on real numbers </div>
<br/>
<span class="vernacular">Lemma</span><span class="id"> R_complete</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">ProperFilter</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> cauchy</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> cvg</span><span class="id"> F</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> FF</span><span class="id"> /cauchy_ballP</span><span class="id"> F_cauchy;</span><span class="id"> apply/cvg_ex</span>.<br/>
<span class="id">pose</span><span class="id"> D</span><span class="id"> :=</span><span class="id"> \bigcap_</span>(<span class="id">A</span><span class="gallina-kwd"> in</span><span class="id"> F</span>) (<span class="id">down</span><span class="id"> A</span>).<br/>
<span class="id">have</span><span class="id"> /cauchy_ballP</span><span class="id"> /cauchyP</span><span class="id"> /</span>(_<span class="id"> 1</span>)<span class="id"> [//|x0</span><span class="id"> x01]</span><span class="id"> :=</span><span class="id"> F_cauchy</span>.<br/>
<span class="id">have</span><span class="id"> D_has_sup</span><span class="id"> :</span><span class="id"> has_sup</span><span class="id"> D;</span><span class="id"> first</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span> (<span class="id">x0</span><span class="id"> -</span><span class="id"> 1</span>)<span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> FA</span>.<br/>
&nbsp;&nbsp;<span class="id">near</span><span class="id"> F</span><span class="id"> =&gt;</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/downP;</span><span class="gallina-kwd"> exists</span><span class="id"> x;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_distlBl</span><span class="id"> //</span><span class="id"> ltW</span><span class="id"> //;</span><span class="id"> near:</span><span class="id"> x</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span> (<span class="id">x0</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">;</span><span class="id"> apply/ubP</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> x01</span>)<span class="id"> /downP</span><span class="id"> [y]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -[ball</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _]/</span>(_ (_<span class="id"> &lt;</span><span class="id"> _</span>))<span class="id"> ltr_distl</span><span class="id"> ltrBlDr</span><span class="id"> =&gt;</span><span class="id"> /andP[/ltW]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(<span class="id">le_trans</span><span class="id"> _</span>)<span class="id"> yx01</span><span class="id"> _</span><span class="id"> /yx01</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">sup</span><span class="id"> D</span>).<br/>
<span class="id">apply/cvgrPdist_le</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> _</span><span class="id"> /posnumP[eps];</span><span class="id"> near=&gt;</span><span class="id"> x</span>.<br/>
<span class="id">rewrite</span><span class="id"> ler_distl;</span><span class="id"> move/ubP:</span> (<span class="id">sup_upper_bound</span><span class="id"> D_has_sup</span>)<span class="id"> =&gt;</span><span class="id"> -&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> sup_le_ub</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> case:</span><span class="id"> D_has_sup</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> Fxeps</span><span class="id"> :</span><span class="id"> F</span> (<span class="id">ball_</span><span class="id"> [eta</span><span class="id"> normr]</span><span class="id"> x</span><span class="id"> eps%:num</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> nearP_dep;</span><span class="id"> apply:</span><span class="id"> F_cauchy</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/ubP</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> Fxeps</span>)<span class="id"> /downP[z]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /ball_/=</span><span class="id"> ltr_distl</span><span class="id"> ltrBlDr</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /andP</span><span class="id"> [/ltW</span><span class="id"> /</span>(<span class="id">le_trans</span><span class="id"> _</span>)<span class="id"> le_xeps</span><span class="id"> _</span><span class="id"> /le_xeps]</span>.<br/>
<span class="id">rewrite</span><span class="id"> /D</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> FA;</span><span class="id"> near</span><span class="id"> F</span><span class="id"> =&gt;</span><span class="id"> y</span>.<br/>
<span class="id">apply/downP;</span><span class="gallina-kwd"> exists</span><span class="id"> y</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> y</span>.<br/>
<span class="id">rewrite</span><span class="id"> lerBlDl</span><span class="id"> -lerBlDr</span><span class="id"> ltW</span><span class="id"> //</span>.<br/>
<span class="id">suff:</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span><span class="id"> &lt;</span><span class="id"> eps%:num</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltr_norml</span><span class="id"> =&gt;</span><span class="id"> /andP[_]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> y;</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span><span class="id"> nearP_dep;</span><span class="id"> apply:</span><span class="id"> F_cauchy</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>)<span class="id"> :=</span><span class="id"> Uniform_isComplete</span>.<span class="id">Build</span><span class="id"> R^o</span><br/>
&nbsp;&nbsp;(<span class="id">@R_complete</span><span class="id"> R</span>). <br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>)<span class="id"> :=</span><span class="id"> Complete</span>.<span class="id">copy</span><span class="id"> R</span><br/>
&nbsp;&nbsp;<span class="id">[the</span><span class="id"> completeType</span><span class="id"> of</span><span class="id"> R^o]</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_seq_bounded</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numFieldType}</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span> <span class="id">&quot;'+oo'&quot;</span><span class="id"> :=</span> (<span class="id">@pinfty_nbhs</span><span class="id"> K</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_seq_bounded</span><span class="id"> {V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span> (<span class="id">a</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvgn</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> bounded_fun</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /cvg_bounded/ex_bound</span><span class="id"> =&gt;</span><span class="id"> -[/=</span><span class="id"> Moo]</span><span class="id"> =&gt;</span><span class="id"> -[N</span><span class="id"> _</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id"> aM]</span>.<br/>
<span class="id">have</span><span class="id"> Moo_real</span><span class="id"> :</span><span class="id"> Moo</span><span class="id"> \is</span><span class="id"> Num</span>.<span class="id">real</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ger0_real</span><span class="id"> ?</span>(<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">aM</span><span class="id"> N</span><span class="id"> _</span>))<span class="id">/=</span>.<br/>
<span class="id">rewrite</span><span class="id"> /bounded_near</span><span class="id"> /=;</span><span class="id"> near=&gt;</span><span class="id"> M</span><span class="id"> =&gt;</span><span class="id"> n</span><span class="id"> _</span>.<br/>
<span class="id">have</span><span class="id"> [nN|nN]/=</span><span class="id"> :=</span><span class="id"> leqP</span><span class="id"> N</span><span class="id"> n;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span> (<span class="id">le_trans</span> (<span class="id">aM</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
<span class="id">move:</span><span class="id"> n</span><span class="id"> nN;</span><span class="id"> suff</span><span class="id"> /</span>(_ (<span class="id">Ordinal</span><span class="id"> _</span>))<span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> n</span><span class="id"> :</span><span class="id"> 'I_N,</span><span class="id"> `|a</span><span class="id"> n|</span><span class="id"> &lt;=</span><span class="id"> M</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> M;</span><span class="id"> apply:</span><span class="id"> filter_forall</span><span class="id"> =&gt;</span><span class="id"> i;</span><span class="id"> apply:</span><span class="id"> nbhs_pinfty_ge</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_seq_bounded</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_sup</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">A</span><span class="id"> !=set0</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closure</span><span class="id"> A</span> (<span class="id">sup</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> A0</span><span class="id"> ?;</span><span class="id"> have</span><span class="id"> [|AsupA]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">A</span> (<span class="id">sup</span><span class="id"> A</span>))<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> subset_closure</span>.<br/>
<span class="id">rewrite</span><span class="id"> closure_limit_point;</span><span class="id"> right</span><span class="id"> =&gt;</span><span class="id"> U</span><span class="id"> /nbhs_ballP[_</span><span class="id"> /posnumP[e]]</span><span class="id"> supAeU</span>.<br/>
<span class="id">suff</span><span class="id"> [x</span><span class="id"> [Ax</span><span class="id"> /andP[sAex</span><span class="id"> xsA]]]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> x,</span><span class="id"> A</span><span class="id"> x</span><span class="id"> /\</span><span class="id"> sup</span><span class="id"> A</span><span class="id"> -</span><span class="id"> e%:num</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> sup</span><span class="id"> A</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> x;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> lt_eqF</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span><span class="id"> supAeU;</span><span class="id"> rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> ltr_distl</span> (<span class="id">addrC</span><span class="id"> x</span><span class="id"> e%:num</span>)<span class="id"> -ltrBlDl</span><span class="id"> sAex</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> andbT</span> (<span class="id">le_lt_trans</span><span class="id"> _</span><span class="id"> xsA</span>)<span class="id"> //</span><span class="id"> lerBlDl</span><span class="id"> lerDr</span>.<br/>
<span class="id">apply:</span><span class="id"> contrapT</span><span class="id"> =&gt;</span><span class="id"> /forallNP</span><span class="id"> Ax</span>.<br/>
<span class="id">suff</span><span class="id"> /</span>(<span class="id">sup_le_ub</span><span class="id"> A0</span>)<span class="id"> :</span><span class="id"> ubound</span><span class="id"> A</span> (<span class="id">sup</span><span class="id"> A</span><span class="id"> -</span><span class="id"> e%:num</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> leNgt</span><span class="id"> =&gt;</span><span class="id"> /negP;</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> ltrBlDl</span><span class="id"> ltrDr</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> y</span><span class="id"> Ay;</span><span class="id"> have</span><span class="id"> /not_andP[//|/negP]</span><span class="id"> :=</span><span class="id"> Ax</span><span class="id"> y</span>.<br/>
<span class="id">rewrite</span><span class="id"> negb_and</span><span class="id"> leNgt</span><span class="id"> =&gt;</span><span class="id"> /orP[//|];</span><span class="id"> apply:</span><span class="id"> contra</span><span class="id"> =&gt;</span><span class="id"> sAey</span>.<br/>
<span class="id">rewrite</span><span class="id"> lt_neqAle</span><span class="id"> sup_upper_bound</span><span class="id"> //</span><span class="id"> andbT</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> contra_not_neq</span><span class="id"> AsupA</span><span class="id"> =&gt;</span><span class="id"> &lt;-</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_infty_natSinv_lt</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> n</span>.<span class="id">+1%:R^-1</span><span class="id"> &lt;</span><span class="id"> e%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">near=&gt;</span><span class="id"> n;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">@ltr_pM2r</span><span class="id"> _</span><span class="id"> n</span>.<span class="id">+1%:R</span>)<span class="id"> //</span><span class="id"> mulVr</span><span class="id"> ?unitfE</span><span class="id"> //</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@ltr_pM2l</span><span class="id"> _</span><span class="id"> e%:num^-1</span>)<span class="id"> //</span><span class="id"> mulr1</span><span class="id"> mulrA</span><span class="id"> mulVr</span><span class="id"> ?unitfE</span><span class="id"> //</span><span class="id"> mul1r</span>.<br/>
<span class="id">rewrite</span> (<span class="id">lt_trans</span> (<span class="id">archi_boundP</span><span class="id"> _</span>))<span class="id"> //</span><span class="id"> ltr_nat</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span> (<span class="id">Num</span>.<span class="id">bound</span><span class="id"> e%:num^-1</span>).<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_infty_natSinv_expn_lt</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> archiFieldType</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> n</span><span class="id"> \near</span><span class="id"> \oo,</span><span class="id"> 1</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> ^+</span><span class="id"> n</span><span class="id"> &lt;</span><span class="id"> e%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">near=&gt;</span><span class="id"> n</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@ltr_pM2r</span><span class="id"> _</span> (<span class="id">2</span><span class="id"> ^+</span><span class="id"> n</span>))<span class="id"> //</span><span class="id"> -?natrX</span><span class="id"> ?ltr0n</span><span class="id"> ?expn_gt0//</span>.<br/>
<span class="id">rewrite</span><span class="id"> mul1r</span><span class="id"> mulVr</span><span class="id"> ?unitfE</span><span class="id"> ?gt_eqF//</span><span class="id"> ?ltr0n</span><span class="id"> ?expn_gt0//</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@ltr_pM2l</span><span class="id"> _</span><span class="id"> e%:num^-1</span>)<span class="id"> //</span><span class="id"> mulr1</span><span class="id"> mulrA</span><span class="id"> mulVr</span><span class="id"> ?unitfE</span><span class="id"> //</span><span class="id"> mul1r</span>.<br/>
<span class="id">rewrite</span> (<span class="id">lt_trans</span> (<span class="id">archi_boundP</span><span class="id"> _</span>))<span class="id"> //</span><span class="id"> natrX</span><span class="id"> upper_nthrootP</span><span class="id"> //</span>.<br/>
<span class="id">near:</span><span class="id"> n;</span><span class="id"> eexists;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> m;</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> []</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limit_pointP</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> archiFieldType</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> T</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">limit_point</span><span class="id"> A</span><span class="id"> x</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> a_</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> T,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[/\</span><span class="id"> a_</span><span class="id"> @`</span><span class="id"> setT</span><span class="id"> `&lt;=`</span><span class="id"> A,</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span><span class="id"> a_</span><span class="id"> n</span><span class="id"> !=</span><span class="id"> x</span><span class="id"> &amp;</span><span class="id"> a_</span><span class="id"> @</span><span class="id"> \oo</span><span class="id"> --&gt;</span><span class="id"> x]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [Ax|[a_</span><span class="id"> [aTA</span><span class="id"> a_x]</span><span class="id"> ax]];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> U</span><span class="id"> /ax[m</span><span class="id"> _</span><span class="id"> a_U];</span><span class="id"> near</span><span class="id"> \oo</span><span class="id"> =&gt;</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span> (<span class="id">a_</span><span class="id"> n</span>)<span class="id">;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply</span><span class="id"> aTA;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply</span><span class="id"> a_U;</span><span class="id"> near:</span><span class="id"> n;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
<span class="id">pose</span><span class="id"> U</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> n</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> =&gt;</span><span class="id"> [set</span><span class="id"> z</span><span class="id"> :</span><span class="id"> T</span><span class="id"> |</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> z|</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1%:R^-1]</span>.<br/>
<span class="id">suff</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/cid-/all_sig[a_</span><span class="id"> anx]</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span><span class="gallina-kwd"> exists</span><span class="id"> a,</span><span class="id"> a</span><span class="id"> !=</span><span class="id"> x</span><span class="id"> /\</span> (<span class="id">U</span><span class="id"> n</span><span class="id"> `&amp;`</span><span class="id"> A</span>)<span class="id"> a</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> a_;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> a</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> have</span><span class="id"> [?</span><span class="id"> []]</span><span class="id"> :=</span><span class="id"> anx</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> anx</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e];</span><span class="id"> near=&gt;</span><span class="id"> n;</span> <span class="id"> have</span><span class="id"> [?</span><span class="id"> []</span><span class="id"> Uan</span><span class="id"> Aan]</span><span class="id"> :=</span><span class="id"> anx</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">lt_le_trans</span><span class="id"> Uan</span>)<span class="id">//</span><span class="id"> ltW//;</span><span class="id"> near:</span><span class="id"> n;</span><span class="id"> exact:</span><span class="id"> near_infty_natSinv_lt</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> n;</span><span class="id"> have</span><span class="id"> :</span><span class="id"> nbhs</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> T</span>) (<span class="id">U</span><span class="id"> n</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/</span>(<span class="id">nbhs_ballP</span> (<span class="id">x:T</span>) (<span class="id">U</span><span class="id"> n</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> nbhs_ballE;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<span class="id">+1%:R^-1</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/Ax/cid</span><span class="id"> =&gt;</span><span class="id"> [/=</span><span class="id"> an</span><span class="id"> [anx</span><span class="id"> Aan</span><span class="id"> Uan]];</span><span class="gallina-kwd"> exists</span><span class="id"> an</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> interval</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> numDomainType</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> is_interval</span> (<span class="id">E</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> x</span><span class="id"> y,</span><span class="id"> E</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> E</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> z,</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> E</span><span class="id"> z</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_intervalPlt</span> (<span class="id">E</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">is_interval</span><span class="id"> E</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> x</span><span class="id"> y,</span><span class="id"> E</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> E</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="gallina-kwd"> forall</span><span class="id"> z,</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> y</span><span class="id"> -&gt;</span><span class="id"> E</span><span class="id"> z</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> iE</span><span class="id"> x</span><span class="id"> y</span><span class="id"> Ex</span><span class="id"> Ey</span><span class="id"> z</span><span class="id"> /andP[]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> xz</span><span class="id"> zy;</span><span class="id"> apply:</span> (<span class="id">iE</span><span class="id"> x</span><span class="id"> y</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?ltW</span>.<br/>
<span class="id">rewrite</span><span class="id"> !le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[&lt;-//|xz]</span><span class="id"> /predU1P[-&gt;//|zy]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">iE</span><span class="id"> x</span><span class="id"> y</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?xz</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interval_is_interval</span> (<span class="id">i</span><span class="id"> :</span><span class="id"> interval</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_interval</span><span class="id"> [set`</span><span class="id"> i]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> case:</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> -[[]a|[]]</span><span class="id"> [[]b|[]]</span><span class="id"> //</span><span class="id"> x</span><span class="id"> y</span><span class="id"> /=;</span><span class="id"> do</span><span class="id"> ?[by</span><span class="id"> rewrite</span><span class="id"> ?itv_ge//];</span><br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> xi</span><span class="id"> yi</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> -[x</span><span class="id"> &lt;=</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> y]/</span>(<span class="id">z</span><span class="id"> \in</span><span class="id"> `[x,</span><span class="id"> y]</span>)<span class="id">;</span><span class="id"> apply/subitvP;</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> subitvE</span><span class="id"> /Order</span>.<span class="id">le/=</span><span class="id"> ?</span>(<span class="id">itvP</span><span class="id"> xi,</span><span class="id"> itvP</span><span class="id"> yi</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> interval</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> ereal_is_hausdorff</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realFieldType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_image_EFin</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> x</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> nbhs</span><span class="id"> x%:E</span> ((<span class="gallina-kwd">fun</span><span class="id"> r</span><span class="id"> =&gt;</span><span class="id"> r%:E</span>)<span class="id"> @`</span><span class="id"> X</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">case</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span><span class="id"> xeX;</span><span class="gallina-kwd"> exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> r</span><span class="id"> xer</span>.<br/>
<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> r</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply</span><span class="id"> xeX</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_open_ereal_lt</span><span class="id"> r</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> r</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> r%:E</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;</span> (<span class="id">f</span><span class="id"> r</span>)<span class="id">%:E]%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> xfx;</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> /=;</span><span class="id"> eexists;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> y;</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [apply</span><span class="id"> open_ereal_lt_ereal</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> lte_fin]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_open_ereal_gt</span><span class="id"> r</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> f</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span><span class="id"> r%:E</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span> (<span class="id">f</span><span class="id"> r</span>)<span class="id">%:E</span><span class="id"> &lt;</span><span class="id"> y]%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> xfx;</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> /=;</span><span class="id"> eexists;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> y;</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [apply</span><span class="id"> open_ereal_gt_ereal</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> lte_fin]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_open_ereal_pinfty</span><span class="id"> r</span><span class="id"> :</span> (<span class="id">nbhs</span><span class="id"> +oo</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> r%:E</span><span class="id"> &lt;</span><span class="id"> y]</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nbhsE</span><span class="id"> /=;</span><span class="id"> eexists;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> y;</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [apply</span><span class="id"> open_ereal_gt_ereal</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ltry]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_open_ereal_ninfty</span><span class="id"> r</span><span class="id"> :</span> (<span class="id">nbhs</span><span class="id"> -oo</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> y</span><span class="id"> &lt;</span><span class="id"> r%:E]</span>)<span class="id">%E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> nbhsE</span><span class="id"> /=;</span><span class="id"> eexists;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> y;</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [apply</span><span class="id"> open_ereal_lt_ereal</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ltNyr]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ereal_hausdorff</span><span class="id"> :</span><span class="id"> hausdorff_space</span> (<span class="id">\bar</span><span class="id"> R</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> -[r|</span><span class="id"> |]</span><span class="id"> //</span><span class="id"> [r'</span><span class="id"> |</span><span class="id"> |]</span><span class="id"> //=</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> rr';</span><span class="id"> congr</span> (<span class="id">_%:E</span>)<span class="id">;</span><span class="id"> apply</span><span class="id"> Rhausdorff</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> A</span><span class="id"> B</span><span class="id"> rA</span><span class="id"> r'B</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [/=</span><span class="id"> z</span><span class="id"> [[r0</span><span class="id"> ?</span><span class="id"> r0z]</span><span class="id"> [r1</span><span class="id"> ?]]]</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rr'</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs_image_EFin</span><span class="id"> rA</span>) (<span class="id">nbhs_image_EFin</span><span class="id"> r'B</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -r0z</span><span class="id"> =&gt;</span><span class="id"> -[r1r0];</span><span class="gallina-kwd"> exists</span><span class="id"> r0;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> -r1r0</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> /</span>(<span class="id">@nbhs_open_ereal_lt</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> +</span><span class="id"> 1</span>))<span class="id"> loc_r</span><span class="id"> :</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> +</span><span class="id"> 1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
&nbsp;&nbsp;<span class="id">move/</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> loc_r</span> (<span class="id">nbhs_open_ereal_pinfty</span> (<span class="id">r</span><span class="id"> +</span><span class="id"> 1</span>)))<span class="id"> =&gt;</span><span class="id"> -[z</span><span class="id"> [zr</span><span class="id"> rz]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">lt_trans</span><span class="id"> rz</span><span class="id"> zr</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> lte_fin</span><span class="id"> ltxx</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> /</span>(<span class="id">@nbhs_open_ereal_gt</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> -</span><span class="id"> 1</span>))<span class="id"> loc_r</span><span class="id"> :</span><span class="id"> r</span><span class="id"> -</span><span class="id"> 1</span><span class="id"> &lt;</span><span class="id"> r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltrBlDr</span><span class="id"> ltrDl</span>.<br/>
&nbsp;&nbsp;<span class="id">move/</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> loc_r</span> (<span class="id">nbhs_open_ereal_ninfty</span> (<span class="id">r</span><span class="id"> -</span><span class="id"> 1</span>)))<span class="id"> =&gt;</span><span class="id"> -[z</span><span class="id"> [rz</span><span class="id"> zr]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">lt_trans</span><span class="id"> zr</span><span class="id"> rz</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> /</span>(<span class="id">@nbhs_open_ereal_lt</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> +</span><span class="id"> 1</span>))<span class="id"> loc_r'</span><span class="id"> :</span><span class="id"> r'</span><span class="id"> &lt;</span><span class="id"> r'</span><span class="id"> +</span><span class="id"> 1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
&nbsp;&nbsp;<span class="id">move/</span>(_<span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs_open_ereal_pinfty</span> (<span class="id">r'</span><span class="id"> +</span><span class="id"> 1</span>))<span class="id"> loc_r'</span>)<span class="id"> =&gt;</span><span class="id"> -[z</span><span class="id"> [r'z</span><span class="id"> zr']]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">lt_trans</span><span class="id"> zr'</span><span class="id"> r'z</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
<span class="id">-</span><span class="id"> move/</span>(_<span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs_open_ereal_pinfty</span><span class="id"> 0</span>) (<span class="id">nbhs_open_ereal_ninfty</span><span class="id"> 0</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> -[z</span><span class="id"> [zx</span><span class="id"> xz]];</span><span class="id"> move:</span> (<span class="id">lt_trans</span><span class="id"> xz</span><span class="id"> zx</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> /</span>(<span class="id">@nbhs_open_ereal_gt</span><span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> -</span><span class="id"> 1</span>))<span class="id"> yB</span><span class="id"> :</span><span class="id"> r'</span><span class="id"> -</span><span class="id"> 1</span><span class="id"> &lt;</span><span class="id"> r'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltrBlDr</span><span class="id"> ltrDl</span>.<br/>
&nbsp;&nbsp;<span class="id">move/</span>(_<span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs_open_ereal_ninfty</span> (<span class="id">r'</span><span class="id"> -</span><span class="id"> 1</span>))<span class="id"> yB</span>)<span class="id"> =&gt;</span><span class="id"> -[z</span><span class="id"> [zr'</span><span class="id"> r'z]]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">lt_trans</span><span class="id"> r'z</span><span class="id"> zr'</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
<span class="id">-</span><span class="id"> move/</span>(_<span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs_open_ereal_ninfty</span><span class="id"> 0</span>) (<span class="id">nbhs_open_ereal_pinfty</span><span class="id"> 0</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> -[z</span><span class="id"> [zO</span><span class="id"> Oz]];</span><span class="id"> move:</span> (<span class="id">lt_trans</span><span class="id"> Oz</span><span class="id"> zO</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltxx</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ereal_is_hausdorff</span>.<br/>
<br/>
<span class="id">#[global]</span><br/>
<span class="vernacular">Hint</span><span class="id"> Extern</span><span class="id"> 0</span> (<span class="id">hausdorff_space</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> solve[apply:</span><span class="id"> ereal_hausdorff]</span><span class="id"> :</span><span class="id"> core</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> EFin_lim</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> cvgn</span><span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">limn</span> (<span class="id">EFin</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> =</span> (<span class="id">limn</span><span class="id"> f</span>)<span class="id">%:E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> cf;</span><span class="id"> apply:</span><span class="id"> cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> move/cvg_ex</span><span class="id"> :</span><span class="id"> cf</span><span class="id"> =&gt;</span><span class="id"> [l</span><span class="id"> fl]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">cvg_comp</span><span class="id"> fl</span>)<span class="id">;</span><span class="id"> rewrite</span> (<span class="id">cvg_lim</span><span class="id"> _</span><span class="id"> fl</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> ProperFilterERealType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {a</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {Fa</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> a}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvge_to_ge</span><span class="id"> f</span><span class="id"> b</span><span class="id"> c</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> c</span><span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> b</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> b</span><span class="id"> &lt;=</span><span class="id"> c</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /[swap]/</span>(<span class="id">closed_cvg</span><span class="id"> _</span> (<span class="id">@closed_ereal_le_ereal</span><span class="id"> _</span><span class="id"> b</span>))<span class="id"> /[apply]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvge_to_le</span><span class="id"> f</span><span class="id"> b</span><span class="id"> c</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> c</span><span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span>)<span class="id"> -&gt;</span><span class="id"> c</span><span class="id"> &lt;=</span><span class="id"> b</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /[swap]/</span>(<span class="id">closed_cvg</span><span class="id"> _</span> (<span class="id">@closed_ereal_ge_ereal</span><span class="id"> _</span><span class="id"> b</span>))<span class="id">/[apply]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lime_ge</span><span class="id"> x</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> a</span>)<span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> a</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvge_to_ge</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lime_le</span><span class="id"> x</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> a</span>)<span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> x</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> &gt;=</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> a</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> cvge_to_le</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ProperFilterERealType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> ecvg_realFieldType_proper</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {I}</span><span class="id"> {F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> I}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> F}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">u</span><span class="id"> v</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgeD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> +?</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> \+</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> fg</span><span class="id"> fc</span><span class="id"> gc;</span><span class="id"> have</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/cvgP</span><span class="id"> :=</span><span class="id"> cvgeD</span><span class="id"> fg</span><span class="id"> fc</span><span class="id"> gc</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limeD</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> +?</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">f</span><span class="id"> \+</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> +</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf</span><span class="id"> cg</span><span class="id"> fg;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> cvgeD</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limeMl</span><span class="id"> f</span><span class="id"> y</span><span class="id"> :</span><span class="id"> y</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">lim</span> ((<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> *</span><span class="id"> f</span><span class="id"> n</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> y</span><span class="id"> *</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> yfn</span><span class="id"> cf;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> cvgeMl</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limeMr</span><span class="id"> f</span><span class="id"> y</span><span class="id"> :</span><span class="id"> y</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">lim</span> ((<span class="gallina-kwd">fun</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> f</span><span class="id"> n</span><span class="id"> *</span><span class="id"> y</span>)<span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> *</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> yfn</span><span class="id"> cf;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgeMr</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_cvgeM</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> *?</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> fg</span><span class="id"> fc</span><span class="id"> gc;</span><span class="id"> have</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/cvgP</span><span class="id"> :=</span><span class="id"> cvgeM</span><span class="id"> fg</span><span class="id"> fc</span><span class="id"> gc</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limeM</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> *?</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">f</span><span class="id"> \*</span><span class="id"> g</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> *</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf</span><span class="id"> cg</span><span class="id"> fg;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> cvgeM</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> limeN</span><span class="id"> f</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">\-</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span>)<span class="id"> =</span><span class="id"> -</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> F</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> cf;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvgeN</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvge_ge</span><span class="id"> f</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span> (<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> b</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> x</span>)<span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> b</span><span class="id"> &lt;=</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> fa;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">cvg_lim</span><span class="id"> _</span><span class="id"> fa</span>)<span class="id"> ?lime_ge//=;</span><span class="id"> apply:</span><span class="id"> cvgP</span><span class="id"> fa</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvge_le</span><span class="id"> f</span><span class="id"> a</span><span class="id"> b</span><span class="id"> :</span> (<span class="id">\forall</span><span class="id"> x</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> b</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> x</span>)<span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> b</span><span class="id"> &gt;=</span><span class="id"> a</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> fa;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">cvg_lim</span><span class="id"> _</span><span class="id"> fa</span>)<span class="id"> ?lime_le//=;</span><span class="id"> apply:</span><span class="id"> cvgP</span><span class="id"> fa</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_nnesum</span> (<span class="id">J</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> J</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> J</span><span class="id"> -&gt;</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">l</span><span class="id"> :</span><span class="id"> J</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> J</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> j,</span><span class="id"> P</span><span class="id"> j</span><span class="id"> -&gt;</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> j</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> j,</span><span class="id"> P</span><span class="id"> j</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> j</span><span class="id"> @</span><span class="id"> F</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> j</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\sum_</span>(<span class="id">j</span><span class="id"> &lt;-</span><span class="id"> r</span><span class="id"> |</span><span class="id"> P</span><span class="id"> j</span>)<span class="id"> f</span><span class="id"> j</span><span class="id"> i</span><span class="id"> @[i</span><span class="id"> --&gt;</span><span class="id"> F]</span><span class="id"> --&gt;</span><span class="id"> \sum_</span>(<span class="id">j</span><span class="id"> &lt;-</span><span class="id"> r</span><span class="id"> |</span><span class="id"> P</span><span class="id"> j</span>)<span class="id"> l</span><span class="id"> j</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">pose</span><span class="id"> bigsimp</span><span class="id"> :=</span> (<span class="id">big_nil,</span><span class="id"> big_cons</span>)<span class="id">;</span><br/>
<span class="id">elim:</span><span class="id"> r</span><span class="id"> =&gt;</span><span class="id"> [|x</span><span class="id"> r</span><span class="id"> IHr]/=</span><span class="id"> f0</span><span class="id"> fl;</span><span class="id"> rewrite</span><span class="id"> bigsimp;</span><span class="id"> under</span><span class="id"> eq_fun</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> bigsimp</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> cvg_cst</span>.<br/>
<span class="id">case:</span><span class="id"> ifPn</span><span class="id"> =&gt;</span><span class="id"> [Px|Pnx];</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> IHr</span>.<br/>
<span class="id">apply:</span><span class="id"> cvgeD;</span><span class="id"> [|exact:</span><span class="id"> fl|exact:</span><span class="id"> IHr]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ge0_adde_def</span><span class="id"> ?inE//</span><span class="id"> ?sume_ge0//</span><span class="id"> =&gt;</span><span class="id"> [|j</span><span class="id"> Pj];</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">cvge_ge</span><span class="id"> _</span> (<span class="id">fl</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//;</span><span class="id"> apply:</span><span class="id"> f0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lim_nnesum</span> (<span class="id">J</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> J</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> J</span><span class="id"> -&gt;</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">l</span><span class="id"> :</span><span class="id"> J</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> pred</span><span class="id"> J</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> j,</span><span class="id"> P</span><span class="id"> j</span><span class="id"> -&gt;</span><span class="id"> \near</span><span class="id"> F,</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> j</span><span class="id"> F</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> j,</span><span class="id"> P</span><span class="id"> j</span><span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> j</span><span class="id"> @</span><span class="id"> F</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">\sum_</span>(<span class="id">j</span><span class="id"> &lt;-</span><span class="id"> r</span><span class="id"> |</span><span class="id"> P</span><span class="id"> j</span>)<span class="id"> f</span><span class="id"> j</span><span class="id"> i</span><span class="id"> @[i</span><span class="id"> --&gt;</span><span class="id"> F]</span>)<span class="id"> =</span><span class="id"> \sum_</span>(<span class="id">j</span><span class="id"> &lt;-</span><span class="id"> r</span><span class="id"> |</span><span class="id"> P</span><span class="id"> j</span>) (<span class="id">lim</span> (<span class="id">f</span><span class="id"> j</span><span class="id"> @</span><span class="id"> F</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> apply/cvg_lim</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> cvg_nnesum</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ecvg_realFieldType_proper</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> cvg_0_pinfty</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span><span class="id"> {I</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {a</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> I}</span><span class="id"> {FF</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> a}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> gtr0_cvgV0</span><span class="id"> f</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> f\^-1</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> f_gt0;</span><span class="id"> split;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /cvgryPgt</span><span class="id"> cvg_f_oo;</span><span class="id"> apply/cvgr0Pnorm_lt</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span>.<br/>
&nbsp;&nbsp;<span class="id">near=&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> gtr0_norm</span><span class="id"> ?invr_gt0//=;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> near:</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -ltf_pV2</span><span class="id"> ?qualifE/=</span><span class="id"> ?invr_gt0</span><span class="id"> ?invrK//=;</span><span class="id"> near:</span><span class="id"> i</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /cvgr0Pnorm_lt</span><span class="id"> uB;</span><span class="id"> apply/cvgryPgty</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> M;</span><span class="id"> near=&gt;</span><span class="id"> i;</span><span class="id"> suff:</span><span class="id"> `|</span>(<span class="id">f</span><span class="id"> i</span>)<span class="id">^-1|</span><span class="id"> &lt;</span><span class="id"> M^-1</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gtr0_norm</span><span class="id"> ?ltf_pV2</span><span class="id"> ?qualifE</span><span class="id"> ?invr_gt0//=;</span><span class="id"> near:</span><span class="id"> i</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> i;</span><span class="id"> apply:</span><span class="id"> uB;</span><span class="id"> rewrite</span><span class="id"> ?invr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrVy</span><span class="id"> f</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> f</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> f\^-1</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> f_gt0;</span><span class="id"> rewrite</span><span class="id"> -gtr0_cvgV0</span><span class="id"> ?inv_funK//;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> invr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ltr0_cvgV0</span><span class="id"> f</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> 0</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> f\^-1</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> 0</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> fL0;</span><span class="id"> rewrite</span><span class="id"> -cvgNP</span><span class="id"> oppr0</span> (_<span class="id"> :</span><span class="id"> -</span><span class="id"> f\^-1</span><span class="id"> =</span>  (<span class="id">-</span><span class="id"> f</span>)<span class="id">\^-1</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/funeqP</span><span class="id"> =&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> opprfctE/=</span><span class="id"> invrN</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gtr0_cvgV0</span><span class="id"> ?cvgNry//;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> oppr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvgrVNy</span><span class="id"> f</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> 0</span><span class="id"> &gt;</span><span class="id"> f</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> f\^-1</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> &lt;-&gt;</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> f_lt0;</span><span class="id"> rewrite</span><span class="id"> -ltr0_cvgV0</span><span class="id"> ?inv_funK//;</span><span class="id"> near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> invr_lt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> cvg_0_pinfty</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> FilterRealType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {a</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {Fa</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> a}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> squeeze_cvgr</span><span class="id"> f</span><span class="id"> h</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> h</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">,</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> h</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> fgh</span><span class="id"> l</span><span class="id"> lfa</span><span class="id"> lga;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e_gt0</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> x;</span><span class="id"> have</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/andP[//|fg</span><span class="id"> gh]</span><span class="id"> :=</span><span class="id"> near</span><span class="id"> fgh</span><span class="id"> x</span>.<br/>
<span class="id">rewrite</span><span class="id"> distrC</span><span class="id"> ltr_distl</span> (<span class="id">lt_le_trans</span><span class="id"> _</span><span class="id"> fg</span>)<span class="id"> ?</span>(<span class="id">le_lt_trans</span><span class="id"> gh</span>)<span class="id">//=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span> (<span class="id">cvgr_lt</span><span class="id"> l</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> //</span><span class="id"> ltrDl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> x;</span><span class="id"> apply:</span> (<span class="id">cvgr_gt</span><span class="id"> l</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> //</span><span class="id"> gtrDl</span><span class="id"> oppr_lt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ger_cvgy</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> uv</span><span class="id"> /cvgryPge</span><span class="id"> ucvg;</span><span class="id"> apply/cvgryPge</span><span class="id"> =&gt;</span><span class="id"> A</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> do</span><span class="id"> rewrite</span> (<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">near</span><span class="id"> uv</span><span class="id"> x</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ler_cvgNy</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &gt;=</span><span class="id"> g</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> uv</span><span class="id"> /cvgrNyPle</span><span class="id"> ucvg;</span><span class="id"> apply/cvgrNyPle</span><span class="id"> =&gt;</span><span class="id"> A</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> do</span><span class="id"> rewrite</span> (<span class="id">le_trans</span> (<span class="id">near</span><span class="id"> uv</span><span class="id"> x</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> FilterRealType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> TopoProperFilterRealType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {a</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {Fa</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> a}</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ler_cvg_to</span><span class="id"> f</span><span class="id"> g</span> (<span class="id">l</span><span class="id"> l'</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l'</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> l</span><span class="id"> &lt;=</span><span class="id"> l'</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> fl</span><span class="id"> gl;</span><span class="id"> under</span><span class="id"> eq_near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> -subr_ge0;</span><span class="id"> rewrite</span><span class="id"> -subr_ge0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvgr_to_ge;</span><span class="id"> apply:</span><span class="id"> cvgB</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ler_lim</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> a</span>)<span class="id"> &lt;=</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> a</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> ler_cvg_to</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> TopoProperFilterRealType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> FilterERealType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {a</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {Fa</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> a}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> gee_cvgy</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> +oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> +oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> uv</span><span class="id"> /cvgeyPge</span><span class="id"> uecvg;</span><span class="id"> apply/cvgeyPge</span><span class="id"> =&gt;</span><span class="id"> A</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> do</span><span class="id"> rewrite</span> (<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">near</span><span class="id"> uv</span><span class="id"> x</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lee_cvgNy</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &gt;=</span><span class="id"> g</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> -oo</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> -oo</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> uv</span><span class="id"> /cvgeNyPle</span><span class="id"> uecvg;</span><span class="id"> apply/cvgeNyPle</span><span class="id"> =&gt;</span><span class="id"> A</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> do</span><span class="id"> rewrite</span> (<span class="id">le_trans</span> (<span class="id">near</span><span class="id"> uv</span><span class="id"> x</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> squeeze_fin</span><span class="id"> f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> h</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>)<span class="id"> -&gt;</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> h</span><span class="id"> a</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> a,</span><span class="id"> g</span><span class="id"> a</span><span class="id"> \is</span><span class="id"> a</span><span class="id"> fin_num</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span><span class="id"> filterS3</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /andP[fg</span><span class="id"> gh]</span>.<br/>
<span class="id">rewrite</span><span class="id"> !fin_numElt</span><span class="id"> =&gt;</span><span class="id"> /andP[oof</span><span class="id"> _]</span><span class="id"> /andP[_</span><span class="id"> hoo]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">lt_le_trans</span><span class="id"> oof</span>)<span class="id"> ?</span>(<span class="id">le_lt_trans</span><span class="id"> gh</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> squeeze_cvge</span><span class="id"> f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span> (<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> h</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span> (<span class="id">l</span><span class="id"> :</span><span class="id"> \bar</span><span class="id"> R</span>)<span class="id">,</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> h</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> fgh</span><span class="id"> [l||];</span><span class="id"> last</span><span class="id"> 2</span><span class="id"> first</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> +</span><span class="id"> _;</span><span class="id"> apply:</span><span class="id"> gee_cvgy;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> fgh</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /andP[]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> _;</span><span class="id"> apply:</span><span class="id"> lee_cvgNy;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> fgh</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /andP[]</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /fine_cvgP[Ff</span><span class="id"> fl]</span><span class="id"> /fine_cvgP[Fh</span><span class="id"> hl];</span><span class="id"> apply/fine_cvgP</span>.<br/>
<span class="id">have</span><span class="id"> Fg</span><span class="id"> :=</span><span class="id"> squeeze_fin</span><span class="id"> fgh</span><span class="id"> Ff</span><span class="id"> Fh;</span><span class="id"> split=&gt;</span><span class="id"> //</span>.<br/>
<span class="id">apply:</span><span class="id"> squeeze_cvgr</span><span class="id"> fl</span><span class="id"> hl;</span><span class="id"> near=&gt;</span><span class="id"> x</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/andP[//|fg</span><span class="id"> gh]</span><span class="id"> :=</span><span class="id"> near</span><span class="id"> fgh</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> !fine_le//=;</span><span class="id"> near:</span><span class="id"> x</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> FilterERealType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> TopoProperFilterERealType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> topologicalType}</span><span class="id"> {a</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> T}</span><span class="id"> {Fa</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> a}</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ereal_scope</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> f</span><span class="id"> g</span><span class="id"> h</span><span class="id"> :</span><span class="id"> T</span><span class="id"> -&gt;</span><span class="id"> \bar</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lee_cvg_to</span><span class="id"> f</span><span class="id"> g</span><span class="id"> l</span><span class="id"> l'</span><span class="id"> :</span><span class="id"> f</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> g</span><span class="id"> @</span><span class="id"> a</span><span class="id"> --&gt;</span><span class="id"> l'</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> l</span><span class="id"> &lt;=</span><span class="id"> l'</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> +</span><span class="id"> +</span><span class="id"> fg;</span><span class="id"> move:</span><span class="id"> l'</span><span class="id"> l</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /=</span><span class="id"> [l'||]</span><span class="id"> [l||]//=;</span><span class="id"> rewrite</span><span class="id"> ?leNye</span><span class="id"> ?leey//=;</span><span class="id"> first</span><span class="id"> 1</span><span class="id"> last</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(<span class="id">gee_cvgy</span><span class="id"> fg</span>)<span class="id"> /cvg_lim&lt;-//</span><span class="id"> /cvg_lim&lt;-</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /cvg_lim</span><span class="id"> &lt;-//</span><span class="id"> /</span>(<span class="id">lee_cvgNy</span><span class="id"> fg</span>)<span class="id"> /cvg_lim&lt;-</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(<span class="id">gee_cvgy</span><span class="id"> fg</span>)<span class="id"> /cvg_lim&lt;-//</span><span class="id"> /cvg_lim&lt;-</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /fine_cvgP[Ff</span><span class="id"> fl]</span><span class="id"> /fine_cvgP[Fg</span><span class="id"> gl]</span>.<br/>
<span class="id">rewrite</span><span class="id"> lee_fin</span><span class="id"> -</span>(<span class="id">cvg_lim</span><span class="id"> _</span><span class="id"> fl</span>)<span class="id">//</span><span class="id"> -</span>(<span class="id">cvg_lim</span><span class="id"> _</span><span class="id"> gl</span>)<span class="id">//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ler_lim;</span><span class="id"> [apply:</span><span class="id"> cvgP</span><span class="id"> fl|apply:</span><span class="id"> cvgP</span><span class="id"> gl|near</span><span class="id"> do</span><span class="id"> apply:</span><span class="id"> fine_le]</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> lee_lim</span><span class="id"> f</span><span class="id"> g</span><span class="id"> :</span><span class="id"> cvg</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> cvg</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> a</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> g</span><span class="id"> a</span>)<span class="id"> -&gt;</span><span class="id"> lim</span> (<span class="id">f</span><span class="id"> @</span><span class="id"> a</span>)<span class="id"> &lt;=</span><span class="id"> lim</span> (<span class="id">g</span><span class="id"> @</span><span class="id"> a</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> lee_cvg_to</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> TopoProperFilterERealType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> open_union_rat</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> A</span><span class="id"> U</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> ointsub</span><span class="id"> A</span><span class="id"> U</span><span class="id"> :=</span><span class="id"> [/\</span><span class="id"> open</span><span class="id"> A,</span><span class="id"> is_interval</span><span class="id"> A</span><span class="id"> &amp;</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> U]</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> ointsub_rat</span><span class="id"> U</span><span class="id"> q</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> A</span><span class="id"> |</span><span class="id"> ointsub</span><span class="id"> A</span><span class="id"> U</span><span class="id"> /\</span><span class="id"> A</span> (<span class="id">ratr</span><span class="id"> q</span>)<span class="id">]</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> ointsub_rat0</span><span class="id"> q</span><span class="id"> :</span><span class="id"> ointsub_rat</span><span class="id"> set0</span><span class="id"> q</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> A</span><span class="id"> [[_</span><span class="id"> _]];</span><span class="id"> rewrite</span><span class="id"> subset0</span><span class="id"> =&gt;</span><span class="id"> -&gt;</span>. Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> bigcup_ointsub</span><span class="id"> U</span><span class="id"> q</span><span class="id"> :=</span><span class="id"> \bigcup_</span>(<span class="id">A</span><span class="gallina-kwd"> in</span><span class="id"> ointsub_rat</span><span class="id"> U</span><span class="id"> q</span>)<span class="id"> A</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bigcup_ointsub0</span><span class="id"> q</span><span class="id"> :</span><span class="id"> bigcup_ointsub</span><span class="id"> set0</span><span class="id"> q</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /bigcup_ointsub</span><span class="id"> ointsub_rat0</span><span class="id"> bigcup_set0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_bigcup_ointsub</span><span class="id"> U</span><span class="id"> q</span><span class="id"> :</span><span class="id"> open</span> (<span class="id">bigcup_ointsub</span><span class="id"> U</span><span class="id"> q</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> bigcup_open</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> [[]]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_interval_bigcup_ointsub</span><span class="id"> U</span><span class="id"> q</span><span class="id"> :</span><span class="id"> is_interval</span> (<span class="id">bigcup_ointsub</span><span class="id"> U</span><span class="id"> q</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /=</span><span class="id"> a</span><span class="id"> b</span><span class="id"> [A</span><span class="id"> [[oA</span><span class="id"> iA</span><span class="id"> AU]</span><span class="id"> Aq]</span><span class="id"> Aa]</span><span class="id"> [B</span><span class="id"> [[oB</span><span class="id"> iB</span><span class="id"> BU]</span><span class="id"> Bq]</span><span class="id"> Bb]</span><span class="id"> c</span><span class="id"> /andP[ac</span><span class="id"> cb]</span>.<br/>
<span class="id">have</span><span class="id"> [cq|cq|-&gt;]</span><span class="id"> :=</span><span class="id"> ltgtP</span><span class="id"> c</span> (<span class="id">ratr</span><span class="id"> q</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> A</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> A</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span> (<span class="id">iA</span><span class="id"> a</span> (<span class="id">ratr</span><span class="id"> q</span>))<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ac</span> (<span class="id">ltW</span><span class="id"> cq</span>).<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> B</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span> (<span class="id">iB</span> (<span class="id">ratr</span><span class="id"> q</span>)<span class="id"> b</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> cb</span> (<span class="id">ltW</span><span class="id"> cq</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bigcup_ointsub_sub</span><span class="id"> U</span><span class="id"> q</span><span class="id"> :</span><span class="id"> bigcup_ointsub</span><span class="id"> U</span><span class="id"> q</span><span class="id"> `&lt;=`</span><span class="id"> U</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> y</span><span class="id"> [A</span><span class="id"> [[oA</span><span class="id"> _</span><span class="id"> +]</span><span class="id"> _</span><span class="id"> Ay]];</span><span class="id"> exact</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_bigcup_rat</span><span class="id"> U</span><span class="id"> :</span><span class="id"> open</span><span class="id"> U</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">U</span><span class="id"> =</span><span class="id"> \bigcup_</span>(<span class="id">q</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> q</span><span class="id"> |</span><span class="id"> ratr</span><span class="id"> q</span><span class="id"> \in</span><span class="id"> U]</span>)<span class="id"> bigcup_ointsub</span><span class="id"> U</span><span class="id"> q</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> oU;</span><span class="id"> have</span><span class="id"> [-&gt;|U0]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> U</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> bigcup0//</span><span class="id"> =&gt;</span><span class="id"> q</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> bigcup_ointsub0</span>.<br/>
<span class="id">apply/seteqP;</span><span class="id"> split=&gt;</span><span class="id"> [x</span><span class="id"> Ux|x</span><span class="id"> [p</span><span class="id"> _</span><span class="id"> Ipx]];</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> bigcup_ointsub_sub</span><span class="id"> Ipx</span>.<br/>
<span class="id">suff</span><span class="id"> [q</span><span class="id"> Iqx]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> q,</span><span class="id"> bigcup_ointsub</span><span class="id"> U</span><span class="id"> q</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> q</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> in_setE;</span><span class="id"> case:</span><span class="id"> Iqx</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> [[_</span><span class="id"> _</span><span class="id"> +]</span><span class="id"> ?</span><span class="id"> _];</span><span class="id"> exact</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> nbhs</span><span class="id"> x</span><span class="id"> U</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> U</span>.<br/>
<span class="id">rewrite</span><span class="id"> -nbhs_ballE</span><span class="id"> /nbhs_ball</span><span class="id"> /nbhs_ball_</span><span class="id"> =&gt;</span><span class="id"> -[_/posnumP[r]</span><span class="id"> xrU]</span>.<br/>
<span class="id">have</span><span class="id"> /rat_in_itvoo[q</span><span class="id"> qxxr]</span><span class="id"> :</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> r%:num</span><span class="id"> &lt;</span><span class="id"> x</span><span class="id"> +</span><span class="id"> r%:num</span>)<span class="id">%R</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltrBlDr</span><span class="id"> -addrA</span><span class="id"> ltrDl</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> q,</span><span class="id"> `]</span>(<span class="id">x</span><span class="id"> -</span><span class="id"> r%:num</span>)<span class="id">%R,</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> r%:num</span>)<span class="id">%R[%classic;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv/=</span><span class="id"> ltrBlDl</span><span class="id"> ltrDr//</span><span class="id"> ltrDl//;</span><span class="id"> apply/andP</span>.<br/>
<span class="id">split=&gt;</span><span class="id"> //;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> interval_open|exact:</span><span class="id"> interval_is_interval|]</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> y</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> in_itv/=</span><span class="id"> =&gt;</span><span class="id"> /andP[xy</span><span class="id"> yxr];</span><span class="id"> apply</span><span class="id"> xrU</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> /ball_</span><span class="id"> /=</span><span class="gallina-kwd"> in</span><span class="id"> xrU</span><span class="id"> *;</span><span class="id"> have</span><span class="id"> [yx|yx]</span><span class="id"> :=</span><span class="id"> leP</span><span class="id"> x</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler0_norm</span><span class="id"> ?subr_le0//</span><span class="id"> opprB</span><span class="id"> ltrBlDl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gtr0_norm</span><span class="id"> ?subr_gt0//</span><span class="id"> ltrBlDr</span><span class="id"> -ltrBlDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> open_union_rat</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> right_bounded_interior</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">has_ubound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> X^°</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> |</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> sup</span><span class="id"> X]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> uX</span><span class="id"> r</span><span class="id"> Xr;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> ltNge;</span><span class="id"> apply/negP</span>.<br/>
<span class="id">rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> supXr|];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/negP;</span><span class="id"> rewrite</span><span class="id"> -leNgt</span><span class="id"> sup_ubound//;</span><span class="id"> exact:</span><span class="id"> interior_subset</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> X^°</span> (<span class="id">sup</span><span class="id"> X</span>)<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> supXr</span>.<br/>
<span class="id">case/nbhs_ballP</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span><span class="id"> supXeX</span>.<br/>
<span class="id">have</span><span class="id"> [f</span><span class="id"> XsupXf]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> f</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="id"> X</span> (<span class="id">sup</span><span class="id"> X</span><span class="id"> +</span><span class="id"> f%:num</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">e%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">%:pos;</span><span class="id"> apply</span><span class="id"> supXeX;</span><span class="id"> rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> opprD</span><span class="id"> addNKr</span><span class="id"> normrN</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gtr0_norm</span><span class="id"> //</span><span class="id"> ltr_pdivrMr</span><span class="id"> //</span><span class="id"> ltr_pMr</span><span class="id"> //</span><span class="id"> ltr1n</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> sup</span><span class="id"> X</span><span class="id"> +</span><span class="id"> f%:num</span><span class="id"> &lt;=</span><span class="id"> sup</span><span class="id"> X</span><span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> sup_ubound</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/negP;</span><span class="id"> rewrite</span><span class="id"> -ltNge;</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> left_bounded_interior</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">has_lbound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> X^°</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> |</span><span class="id"> inf</span><span class="id"> X</span><span class="id"> &lt;</span><span class="id"> r]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> lX</span><span class="id"> r</span><span class="id"> Xr;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> ltNge;</span><span class="id"> apply/negP</span>.<br/>
<span class="id">rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> rinfX|];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/negP;</span><span class="id"> rewrite</span><span class="id"> -leNgt</span><span class="id"> inf_lbound//;</span><span class="id"> exact:</span><span class="id"> interior_subset</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> X^°</span> (<span class="id">inf</span><span class="id"> X</span>)<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -rinfX</span>.<br/>
<span class="id">case/nbhs_ballP</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[e]</span><span class="id"> supXeX</span>.<br/>
<span class="id">have</span><span class="id"> [f</span><span class="id"> XsupXf]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> f</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="id"> X</span> (<span class="id">inf</span><span class="id"> X</span><span class="id"> -</span><span class="id"> f%:num</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">e%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">%:pos;</span><span class="id"> apply</span><span class="id"> supXeX;</span><span class="id"> rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> opprB</span><span class="id"> addrC</span><span class="id"> subrK</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gtr0_norm</span><span class="id"> //</span><span class="id"> ltr_pdivrMr</span><span class="id"> //</span><span class="id"> ltr_pMr</span><span class="id"> //</span><span class="id"> ltr1n</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> inf</span><span class="id"> X</span><span class="id"> &lt;=</span><span class="id"> inf</span><span class="id"> X</span><span class="id"> -</span><span class="id"> f%:num</span><span class="gallina-kwd"> by</span><span class="id"> exact:</span><span class="id"> inf_lbound</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/negP;</span><span class="id"> rewrite</span><span class="id"> -ltNge;</span><span class="id"> rewrite</span><span class="id"> ltrBlDr</span><span class="id"> ltrDl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> interval_realType</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interval_unbounded_setT</span> (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_interval</span><span class="id"> X</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">~</span><span class="id"> has_lbound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> has_ubound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> X</span><span class="id"> =</span><span class="id"> setT</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> iX</span><span class="id"> lX</span><span class="id"> uX;</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> _</span>.<br/>
<span class="id">move/has_lbPn</span><span class="id"> :</span><span class="id"> lX</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> x</span>)<span class="id"> [y</span><span class="id"> Xy</span><span class="id"> xy]</span>.<br/>
<span class="id">move/has_ubPn</span><span class="id"> :</span><span class="id"> uX</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> x</span>)<span class="id"> [z</span><span class="id"> Xz</span><span class="id"> xz]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">iX</span><span class="id"> y</span><span class="id"> z</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interval_left_unbounded_interior</span> (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_interval</span><span class="id"> X</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">~</span><span class="id"> has_lbound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> X^°</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> |</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> sup</span><span class="id"> X]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> iX</span><span class="id"> lX</span><span class="id"> uX;</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> right_bounded_interior</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">open_subsetE</span><span class="id"> _</span> (<span class="id">@open_lt</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> r</span><span class="id"> rsupX</span>.<br/>
<span class="id">move/has_lbPn</span><span class="id"> :</span><span class="id"> lX</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> r</span>)<span class="id">[y</span><span class="id"> Xy</span><span class="id"> yr]</span>.<br/>
<span class="id">have</span><span class="id"> hsX</span><span class="id"> :</span><span class="id"> has_sup</span><span class="id"> X</span><span class="gallina-kwd"> by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> y</span>.<br/>
<span class="id">have</span><span class="id"> /sup_adherent/</span>(_<span class="id"> hsX</span>)<span class="id">[e</span><span class="id"> Xe]</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> sup</span><span class="id"> X</span><span class="id"> -</span><span class="id"> r</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> subKr</span><span class="id"> =&gt;</span><span class="id"> re;</span><span class="id"> apply:</span> (<span class="id">iX</span><span class="id"> y</span><span class="id"> e</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interval_right_unbounded_interior</span> (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_interval</span><span class="id"> X</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">has_lbound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> has_ubound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> X^°</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> |</span><span class="id"> inf</span><span class="id"> X</span><span class="id"> &lt;</span><span class="id"> r]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> iX</span><span class="id"> lX</span><span class="id"> uX;</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> left_bounded_interior</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">open_subsetE</span><span class="id"> _</span> (<span class="id">@open_gt</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> r</span><span class="id"> infXr</span>.<br/>
<span class="id">move/has_ubPn</span><span class="id"> :</span><span class="id"> uX</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> r</span>)<span class="id">[y</span><span class="id"> Xy</span><span class="id"> yr]</span>.<br/>
<span class="id">have</span><span class="id"> hiX</span><span class="id"> :</span><span class="id"> has_inf</span><span class="id"> X</span><span class="gallina-kwd"> by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> y</span>.<br/>
<span class="id">have</span><span class="id"> /inf_adherent/</span>(_<span class="id"> hiX</span>)<span class="id">[e</span><span class="id"> Xe]</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -</span><span class="id"> inf</span><span class="id"> X</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> addrC</span><span class="id"> subrK</span><span class="id"> =&gt;</span><span class="id"> er;</span><span class="id"> apply:</span> (<span class="id">iX</span><span class="id"> e</span><span class="id"> y</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interval_bounded_interior</span> (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_interval</span><span class="id"> X</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">has_lbound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> has_ubound</span><span class="id"> X</span><span class="id"> -&gt;</span><span class="id"> X^°</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> |</span><span class="id"> inf</span><span class="id"> X</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> &lt;</span><span class="id"> sup</span><span class="id"> X]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> iX</span><span class="id"> bX</span><span class="id"> aX;</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split=&gt;</span><span class="id"> [r</span><span class="id"> Xr|]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/andP;</span><span class="id"> split;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[exact:</span><span class="id"> left_bounded_interior|exact:</span><span class="id"> right_bounded_interior]</span>.<br/>
<span class="id">rewrite</span><span class="id"> -open_subsetE;</span><span class="id"> last</span><span class="id"> exact:</span> (<span class="id">@interval_open</span><span class="id"> _</span> (<span class="id">BRight</span><span class="id"> _</span>) (<span class="id">BLeft</span><span class="id"> _</span>)).<br/>
<span class="id">move=&gt;</span><span class="id"> r</span><span class="id"> /andP[iXr</span><span class="id"> rsX]</span>.<br/>
<span class="id">have</span><span class="id"> [X0|/set0P</span><span class="id"> X0]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> X</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">lt_trans</span><span class="id"> iXr</span><span class="id"> rsX</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> X0</span><span class="id"> inf_out</span><span class="id"> ?sup_out</span><span class="id"> ?ltxx</span><span class="id"> //</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [[]]</span>.<br/>
<span class="id">have</span><span class="id"> hiX</span><span class="id"> :</span><span class="id"> has_inf</span><span class="id"> X</span><span class="gallina-kwd"> by</span><span class="id"> split</span>.<br/>
<span class="id">have</span><span class="id"> /inf_adherent/</span>(_<span class="id"> hiX</span>)<span class="id">[e</span><span class="id"> Xe]</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -</span><span class="id"> inf</span><span class="id"> X</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">rewrite</span><span class="id"> addrC</span><span class="id"> subrK</span><span class="id"> =&gt;</span><span class="id"> er</span>.<br/>
<span class="id">have</span><span class="id"> hsX</span><span class="id"> :</span><span class="id"> has_sup</span><span class="id"> X</span><span class="gallina-kwd"> by</span><span class="id"> split</span>.<br/>
<span class="id">have</span><span class="id"> /sup_adherent/</span>(_<span class="id"> hsX</span>)<span class="id">[f</span><span class="id"> Xf]</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> sup</span><span class="id"> X</span><span class="id"> -</span><span class="id"> r</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> subKr</span><span class="id"> =&gt;</span><span class="id"> rf;</span><span class="id"> apply:</span> (<span class="id">iX</span><span class="id"> e</span><span class="id"> f</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ?ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> Rhull</span> (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> interval</span><span class="id"> R</span><span class="id"> :=</span><span class="id"> Interval</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">if</span><span class="id"> `[&lt;</span><span class="id"> has_lbound</span><span class="id"> X</span><span class="id"> &gt;]</span><span class="gallina-kwd"> then</span><span class="id"> BSide</span><span class="id"> `[&lt;</span><span class="id"> X</span> (<span class="id">inf</span><span class="id"> X</span>)<span class="id"> &gt;]</span> (<span class="id">inf</span><span class="id"> X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span><span class="id"> BInfty</span><span class="id"> _</span><span class="id"> true</span>)<br/>
&nbsp;&nbsp;(<span class="gallina-kwd">if</span><span class="id"> `[&lt;</span><span class="id"> has_ubound</span><span class="id"> X</span><span class="id"> &gt;]</span><span class="gallina-kwd"> then</span><span class="id"> BSide</span> (<span class="id">~~</span><span class="id"> `[&lt;</span><span class="id"> X</span> (<span class="id">sup</span><span class="id"> X</span>)<span class="id"> &gt;]</span>) (<span class="id">sup</span><span class="id"> X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">else</span><span class="id"> BInfty</span><span class="id"> _</span><span class="id"> false</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Rhull0</span><span class="id"> :</span><span class="id"> Rhull</span><span class="id"> set0</span><span class="id"> =</span><span class="id"> `]0,</span><span class="id"> 0[</span><span class="id"> :&gt;</span><span class="id"> interval</span><span class="id"> R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /Rhull</span>  (<span class="id">asboolT</span> (<span class="id">has_lbound0</span><span class="id"> R</span>)) (<span class="id">asboolT</span> (<span class="id">has_ubound0</span><span class="id"> R</span>))<span class="id"> asboolF</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> sup0</span><span class="id"> inf0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_Rhull</span> (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> X</span><span class="id"> `&lt;=`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> Rhull</span><span class="id"> X]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> Xx/=;</span><span class="id"> rewrite</span><span class="id"> in_itv/=</span>.<br/>
<span class="id">case:</span> (<span class="id">asboolP</span> (<span class="id">has_lbound</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> case:</span> (<span class="id">asboolP</span> (<span class="id">has_ubound</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> //=</span>.<br/>
<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> case:</span><span class="id"> asboolP</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> case:</span><span class="id"> asboolP</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> //=;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> !</span>(<span class="id">lteifF,lteifT,sup_ubound,inf_lbound,sup_ub_strict,inf_lb_strict</span>).<br/>
<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> case:</span><span class="id"> asboolP</span><span class="id"> =&gt;</span><span class="id"> XinfX;</span><span class="id"> rewrite</span><span class="id"> !</span>(<span class="id">lteifF,</span><span class="id"> lteifT</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[rewrite</span><span class="id"> inf_lbound</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> inf_lb_strict]</span>.<br/>
<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> case:</span><span class="id"> asboolP</span><span class="id"> =&gt;</span><span class="id"> XsupX;</span><span class="id"> rewrite</span><span class="id"> !</span>(<span class="id">lteifF,</span><span class="id"> lteifT</span>)<span class="id">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">[rewrite</span><span class="id"> sup_ubound</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> sup_ub_strict]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_intervalP</span> (<span class="id">X</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_interval</span><span class="id"> X</span><span class="id"> &lt;-&gt;</span><span class="id"> X</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> Rhull</span><span class="id"> X]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [iX|-&gt;];</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> interval_is_interval</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> sub_Rhull</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> in_itv/=]</span>.<br/>
<span class="id">case:</span> (<span class="id">asboolP</span> (<span class="id">has_lbound</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> case:</span> (<span class="id">asboolP</span> (<span class="id">has_ubound</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> //=</span>.<br/>
<span class="id">-</span><span class="id"> case:</span><span class="id"> asboolP</span><span class="id"> =&gt;</span><span class="id"> XinfX;</span><span class="id"> case:</span><span class="id"> asboolP</span><span class="id"> =&gt;</span><span class="id"> XsupX;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> !</span>(<span class="id">lteifF,</span><span class="id"> lteifT</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> move=&gt;</span><span class="id"> /andP[];</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> &lt;-</span><span class="id"> //|infXx]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> -&gt;</span><span class="id"> //|xsupX]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@interior_subset</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> R</span><span class="id"> :</span><span class="id"> Type]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interval_bounded_interior</span><span class="id"> //</span><span class="id"> /mkset</span><span class="id"> infXx</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> move=&gt;</span><span class="id"> /andP[];</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> &lt;-</span><span class="id"> //|infXx</span><span class="id"> supXx]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@interior_subset</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> R</span><span class="id"> :</span><span class="id"> Type]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interval_bounded_interior</span><span class="id"> //</span><span class="id"> /mkset</span><span class="id"> infXx</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> move=&gt;</span><span class="id"> /andP[infXx];</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> -&gt;</span><span class="id"> //|xsupX]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@interior_subset</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> R</span><span class="id"> :</span><span class="id"> Type]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interval_bounded_interior</span><span class="id"> //</span><span class="id"> /mkset</span><span class="id"> infXx</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> apply:</span> (<span class="id">@interior_subset</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> R</span><span class="id"> :</span><span class="id"> Type]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interval_bounded_interior</span><span class="id"> //</span><span class="id"> /mkset</span><span class="id"> infXx</span>.<br/>
<span class="id">-</span><span class="id"> case:</span><span class="id"> asboolP</span><span class="id"> =&gt;</span><span class="id"> XinfX;</span><span class="id"> rewrite</span><span class="id"> !</span>(<span class="id">lteifF,</span><span class="id"> lteifT,</span><span class="id"> andbT</span>).<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP&lt;-//|infXx]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@interior_subset</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> R</span><span class="id"> :</span><span class="id"> Type]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interval_right_unbounded_interior</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> move=&gt;</span><span class="id"> infXx;</span><span class="id"> apply:</span> (<span class="id">@interior_subset</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> R</span><span class="id"> :</span><span class="id"> Type]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interval_right_unbounded_interior</span>.<br/>
<span class="id">-</span><span class="id"> case:</span><span class="id"> asboolP</span><span class="id"> =&gt;</span><span class="id"> XsupX</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP-&gt;//|xsupX]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@interior_subset</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> R</span><span class="id"> :</span><span class="id"> Type]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interval_left_unbounded_interior</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> move=&gt;</span><span class="id"> xsupX;</span><span class="id"> apply:</span> (<span class="id">@interior_subset</span><span class="id"> [the</span><span class="id"> topologicalType</span><span class="id"> of</span><span class="id"> R</span><span class="id"> :</span><span class="id"> Type]</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interval_left_unbounded_interior</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> _;</span><span class="id"> rewrite</span> (<span class="id">interval_unbounded_setT</span><span class="id"> iX</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> connected_intervalP</span> (<span class="id">E</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> connected</span><span class="id"> E</span><span class="id"> &lt;-&gt;</span><span class="id"> is_interval</span><span class="id"> E</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split</span><span class="id"> =&gt;</span><span class="id"> [cE</span><span class="id"> x</span><span class="id"> y</span><span class="id"> Ex</span><span class="id"> Ey</span><span class="id"> z</span><span class="id"> /andP[xz</span><span class="id"> zy]|]</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> contrapT</span><span class="id"> =&gt;</span><span class="id"> Ez</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span><span class="id"> Az</span><span class="id"> :=</span><span class="id"> E</span><span class="id"> `&amp;`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> z];</span><span class="id"> pose</span><span class="id"> Bz</span><span class="id"> :=</span><span class="id"> E</span><span class="id"> `&amp;`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> x]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/connectedPn</span><span class="id"> :</span><span class="id"> cE;</span><span class="gallina-kwd"> exists</span> (<span class="gallina-kwd">fun</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="gallina-kwd"> if</span><span class="id"> b</span><span class="gallina-kwd"> then</span><span class="id"> Az</span><span class="gallina-kwd"> else</span><span class="id"> Bz</span>)<span class="id">;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> move:</span><span class="id"> xz</span><span class="id"> zy</span><span class="id"> Ez</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> !le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /predU1P[&lt;-//|xz]</span><span class="id"> /predU1P[-&gt;//|zy]</span><span class="id"> Ez</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case;</span><span class="id"> [exists</span><span class="id"> x</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> y]</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> /Az</span><span class="id"> /Bz</span><span class="id"> -setIUr;</span><span class="id"> apply/esym/setIidPl</span><span class="id"> =&gt;</span><span class="id"> u</span><span class="id"> Eu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/orP;</span><span class="id"> rewrite</span><span class="id"> -neq_lt;</span><span class="id"> apply/negP;</span><span class="id"> apply:</span><span class="id"> contraPnot</span><span class="id"> Eu</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> &lt;-</span>.<br/>
&nbsp;&nbsp;<span class="id">+</span><span class="id"> split;</span><span class="id"> [|rewrite</span><span class="id"> setIC]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> apply/disjoints_subset</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> u</span><span class="id"> /closureI[_];</span><span class="id"> rewrite</span><span class="id"> closure_gt</span><span class="id"> =&gt;</span><span class="id"> zu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /Az</span><span class="id"> setCI;</span><span class="id"> right;</span><span class="id"> apply/negP;</span><span class="id"> rewrite</span><span class="id"> -leNgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> apply/disjoints_subset</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> u</span><span class="id"> /closureI[_];</span><span class="id"> rewrite</span><span class="id"> closure_lt</span><span class="id"> =&gt;</span><span class="id"> zu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /Bz</span><span class="id"> setCI;</span><span class="id"> right;</span><span class="id"> apply/negP;</span><span class="id"> rewrite</span><span class="id"> -leNgt</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> contraPP</span><span class="id"> =&gt;</span><span class="id"> /connectedPn[A</span><span class="id"> [A0</span><span class="id"> EU</span><span class="id"> sepA]]</span><span class="id"> intE</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [/=</span><span class="id"> x</span><span class="id"> A0x]</span><span class="id"> :=</span><span class="id"> A0</span><span class="id"> false;</span><span class="id"> have</span><span class="id"> [/=</span><span class="id"> y</span><span class="id"> A1y]</span><span class="id"> :=</span><span class="id"> A0</span><span class="id"> true</span>.<br/>
&nbsp;&nbsp;<span class="id">wlog</span><span class="id"> xy</span><span class="id"> :</span><span class="id"> A</span><span class="id"> A0</span><span class="id"> EU</span><span class="id"> sepA</span><span class="id"> x</span><span class="id"> A0x</span><span class="id"> y</span><span class="id"> A1y</span><span class="id"> /</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /=</span><span class="id"> wlog_hypo;</span><span class="id"> have</span><span class="id"> [xy|yx|{wlog_hypo}yx]</span><span class="id"> :=</span><span class="id"> ltgtP</span><span class="id"> x</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> exact:</span> (<span class="id">wlog_hypo</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> A0x</span><span class="id"> _</span><span class="id"> A1y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> apply:</span> (<span class="id">wlog_hypo</span> (<span class="id">A</span><span class="id"> \o</span><span class="id"> negb</span>)<span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> y</span><span class="id"> _</span><span class="id"> x</span>)<span class="id"> =&gt;</span><span class="id"> //=;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> [rewrite</span><span class="id"> setUC</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> separatedC]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> move/separated_disjoint</span><span class="id"> :</span><span class="id"> sepA;</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> x</span>)<span class="id">[]</span><span class="id"> +</span><span class="id"> _;</span><span class="id"> apply</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> yx</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span><span class="id"> z</span><span class="id"> :=</span><span class="id"> sup</span> (<span class="id">A</span><span class="id"> false</span><span class="id"> `&amp;`</span><span class="id"> [set</span><span class="id"> z</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> y]</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> A1z</span><span class="id"> :</span><span class="id"> ~</span> (<span class="id">A</span><span class="id"> true</span>)<span class="id"> z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> cA0z</span><span class="id"> :</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> false</span>)<span class="id"> z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">suff</span><span class="id"> :</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> false</span><span class="id"> `&amp;`</span><span class="id"> [set</span><span class="id"> z</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> y]</span>)<span class="id"> z</span><span class="gallina-kwd"> by</span><span class="id"> case/closureI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> closure_sup;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> u</span><span class="id"> [_]</span><span class="id"> /andP[]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> x;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> lexx</span><span class="id"> /=</span> (<span class="id">ltW</span><span class="id"> xy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> sepA;</span><span class="id"> rewrite</span><span class="id"> /separated</span><span class="id"> =&gt;</span><span class="id"> -[]</span><span class="id"> /disjoints_subset</span><span class="id"> +</span><span class="id"> _;</span><span class="id"> apply</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /andP[xz</span><span class="id"> zy]</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> sup_ubound//=;</span><span class="id"> [|by</span><span class="gallina-kwd"> exists</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> u</span><span class="id"> [_]</span><span class="id"> /andP[]|]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> rewrite</span><span class="id"> lt_neqAle</span><span class="id"> sup_le_ub</span><span class="id"> ?andbT;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> u</span><span class="id"> [_]</span><span class="id"> /andP[]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span><span class="gallina-kwd"> by</span><span class="id"> apply/negP;</span><span class="id"> apply:</span><span class="id"> contraPnot</span><span class="id"> A1y</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> &lt;-</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">*</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> x;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> /=</span><span class="id"> lexx</span><span class="id"> /=</span> (<span class="id">ltW</span><span class="id"> xy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> lexx</span> (<span class="id">ltW</span><span class="id"> xy</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [A0z|A0z]</span><span class="id"> :=</span><span class="id"> pselect</span> ((<span class="id">A</span><span class="id"> false</span>)<span class="id"> z</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> {}xzy</span><span class="id"> :</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> y</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> xz</span><span class="id"> ltW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> E</span><span class="id"> z</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> EU</span><span class="id"> =&gt;</span><span class="id"> -[]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> apply</span> (<span class="id">intE</span><span class="id"> x</span><span class="id"> y</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> EU;</span><span class="id"> [left|right]</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> [z1</span><span class="id"> [/andP[zz1</span><span class="id"> z1y]</span><span class="id"> Ez1]]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> z1</span><span class="id"> :</span><span class="id"> R,</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> z1</span><span class="id"> &lt;=</span><span class="id"> y</span><span class="id"> /\</span><span class="id"> ~</span><span class="id"> E</span><span class="id"> z1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span><span class="id"> Ez1;</span><span class="id"> apply</span> (<span class="id">intE</span><span class="id"> x</span><span class="id"> y</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> ?EU;</span><span class="id"> [by</span><span class="id"> left|by</span><span class="id"> right|]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> z1y</span> (<span class="id">le_trans</span><span class="id"> _</span><span class="id"> zz1</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [r</span><span class="id"> zcA1]</span><span class="id"> :</span><span class="id"> {r:{posnum</span><span class="id"> R}|</span><span class="id"> ball</span><span class="id"> z</span><span class="id"> r%:num</span><span class="id"> `&lt;=`</span><span class="id"> ~`</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> true</span>)<span class="id">}</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> ?</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> true</span>)<span class="id"> z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> sepA;</span><span class="id"> rewrite</span><span class="id"> /separated</span><span class="id"> =&gt;</span><span class="id"> -[]</span><span class="id"> _</span><span class="id"> /disjoints_subset;</span><span class="id"> apply</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> ?</span><span class="id"> :</span><span class="id"> open</span> (<span class="id">~`</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> true</span>))<span class="gallina-kwd"> by</span><span class="id"> exact/closed_openC/closed_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact/nbhsC_ball/open_nbhs_nbhs</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span><span class="id"> z1</span><span class="id"> :</span><span class="id"> R</span><span class="id"> :=</span><span class="id"> z</span><span class="id"> +</span><span class="id"> r%:num</span><span class="id"> /</span><span class="id"> 2;</span><span class="gallina-kwd"> exists</span><span class="id"> z1</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> z1y</span><span class="id"> :</span><span class="id"> z1</span><span class="id"> &lt;=</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> leNgt;</span><span class="id"> apply/negP</span><span class="id"> =&gt;</span><span class="id"> yz1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">suff</span><span class="id"> :</span> (<span class="id">~`</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> true</span>))<span class="id"> y</span><span class="gallina-kwd"> by</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> subset_closure</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span><span class="id"> zcA1;</span><span class="id"> rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> ltr_distl</span> (<span class="id">lt_le_trans</span><span class="id"> zy</span>)<span class="id"> //</span><span class="id"> ?lerDl</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> andbT</span><span class="id"> ltrBlDl</span><span class="id"> addrC</span> (<span class="id">lt_trans</span><span class="id"> yz1</span>)<span class="id"> //</span><span class="id"> ltrD2l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltr_pdivrMr</span><span class="id"> //</span><span class="id"> ltr_pMr</span><span class="id"> //</span><span class="id"> ltr1n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> z1y</span><span class="id"> andbT</span><span class="id"> lerDl;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> ncA1z1</span><span class="id"> :</span> (<span class="id">~`</span><span class="id"> closure</span> (<span class="id">A</span><span class="id"> true</span>))<span class="id"> z1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span><span class="id"> zcA1;</span><span class="id"> rewrite</span><span class="id"> /ball</span><span class="id"> /=</span><span class="id"> /z1</span><span class="id"> opprD</span><span class="id"> addNKr</span><span class="id"> normrN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ger0_norm</span><span class="id"> //</span><span class="id"> ltr_pdivrMr</span><span class="id"> //</span><span class="id"> ltr_pMr</span><span class="id"> //</span><span class="id"> ltr1n</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> nA0z1</span><span class="id"> :</span><span class="id"> ~</span> (<span class="id">A</span><span class="id"> false</span>)<span class="id"> z1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> A0z1;</span><span class="id"> have</span><span class="id"> :</span><span class="id"> z</span><span class="id"> &lt;</span><span class="id"> z1</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /z1</span><span class="id"> ltrDl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply/negP;</span><span class="id"> rewrite</span><span class="id"> -leNgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> sup_ubound;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> u</span><span class="id"> [_]</span><span class="id"> /andP[]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> /mkset</span><span class="id"> /z1</span> (<span class="id">le_trans</span><span class="id"> xz</span>)<span class="id"> /=</span><span class="id"> ?lerDl</span><span class="id"> //</span> (<span class="id">ltW</span><span class="id"> z1y</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> EU</span><span class="id"> =&gt;</span><span class="id"> -[//|];</span><span class="id"> apply:</span><span class="id"> contra_not</span><span class="id"> ncA1z1;</span><span class="id"> exact:</span><span class="id"> subset_closure</span>.<br/>
Qed.</div></details>
<span class="vernacular">End</span><span class="id"> interval_realType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> segment</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<br/>
<div class="doc">properties of segments in R </div>
<br/>
<span class="vernacular">Lemma</span><span class="id"> segment_connected</span> (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> connected</span><span class="id"> `[a,</span><span class="id"> b]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact/connected_intervalP/interval_is_interval</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> segment_compact</span> (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> compact</span><span class="id"> `[a,</span><span class="id"> b]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [leab|ltba]</span><span class="id"> :=</span><span class="id"> lerP</span><span class="id"> a</span><span class="id"> b;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> /filter_ex</span><span class="id"> [x</span><span class="id"> abx];</span><span class="id"> move:</span><span class="id"> ltba;</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> abx</span>).<br/>
<span class="id">rewrite</span><span class="id"> compact_cover</span><span class="id"> =&gt;</span><span class="id"> I</span><span class="id"> D</span><span class="id"> f</span><span class="id"> fop</span><span class="id"> sabUf</span>.<br/>
<span class="id">set</span><span class="id"> B</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="gallina-kwd"> exists2</span><span class="id"> E</span><span class="id"> :</span><span class="id"> {fset</span><span class="id"> I},</span><span class="id"> {subset</span><span class="id"> E</span><span class="id"> &lt;=</span><span class="id"> D}</span><span class="id"> &amp;</span><br/>
&nbsp;&nbsp;<span class="id">`[a,</span><span class="id"> x]</span><span class="id"> `&lt;=`</span><span class="id"> \bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> E]</span>)<span class="id"> f</span><span class="id"> i</span><span class="id"> /\</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="gallina-kwd"> in</span><span class="id"> [set`</span><span class="id"> E]</span>)<span class="id"> f</span><span class="id"> i</span>)<span class="id"> x]</span>.<br/>
<span class="id">set</span><span class="id"> A</span><span class="id"> :=</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> `&amp;`</span><span class="id"> B</span>.<br/>
<span class="id">suff</span><span class="id"> Aeab</span><span class="id"> :</span><span class="id"> A</span><span class="id"> =</span><span class="id"> `[a,</span><span class="id"> b]%classic</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> [_</span><span class="id"> [E</span><span class="id"> ?</span><span class="id"> []]]</span><span class="id"> :</span><span class="id"> A</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> E</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> Aeab/=</span><span class="id"> inE/=;</span><span class="id"> exact/andP</span>.<br/>
<span class="id">apply:</span><span class="id"> segment_connected</span>.<br/>
<span class="id">-</span><span class="id"> have</span><span class="id"> aba</span><span class="id"> :</span><span class="id"> a</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> /=</span><span class="id"> lexx</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> a;</span><span class="id"> split=&gt;</span><span class="id"> //;</span><span class="id"> have</span><span class="id"> /sabUf</span><span class="id"> [i</span><span class="id"> /=</span><span class="id"> Di</span><span class="id"> fia]</span><span class="id"> :=</span><span class="id"> aba</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [fset</span><span class="id"> i]%fset;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> inE</span><span class="id"> =&gt;</span><span class="id"> /eqP-&gt;</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> inE</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> aex;</span><span class="gallina-kwd"> exists</span><span class="id"> i;</span><span class="id"> [by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> inE|suff</span><span class="id"> /eqP-&gt;</span><span class="id"> :</span><span class="id"> x</span><span class="id"> ==</span><span class="id"> a</span><span class="gallina-kwd"> by</span><span class="id"> []]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> eq_le</span><span class="id"> !</span>(<span class="id">itvP</span><span class="id"> aex</span>).<br/>
<span class="id">-</span><span class="gallina-kwd"> exists</span><span class="id"> B</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> [E</span><span class="id"> sD</span><span class="id"> [saxUf</span><span class="id"> [i</span><span class="id"> Di</span><span class="id"> fx]]]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> open</span> (<span class="id">f</span><span class="id"> i</span>)<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> /sD</span><span class="id"> :=</span><span class="id"> Di;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> =&gt;</span><span class="id"> /fop</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> fx</span>)<span class="id"> [e</span><span class="id"> egt0</span><span class="id"> xe_fi];</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> y</span><span class="id"> xe_y</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> E</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> split;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply/xe_fi</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> z</span><span class="id"> /=</span><span class="id"> ayz;</span><span class="id"> have</span><span class="id"> [lezx|ltxz]</span><span class="id"> :=</span><span class="id"> lerP</span><span class="id"> z</span><span class="id"> x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/saxUf;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_itv/=</span> (<span class="id">itvP</span><span class="id"> ayz</span>)<span class="id"> lezx</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply/xe_fi;</span><span class="id"> rewrite</span><span class="id"> /ball_/=</span><span class="id"> distrC</span><span class="id"> ger0_norm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> lezy</span><span class="id"> :</span><span class="id"> z</span><span class="id"> &lt;=</span><span class="id"> y</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> ayz</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ltrBlDl;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span><span class="id"> lezy</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> -ltrBlDr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> xe_y;</span><span class="id"> rewrite</span><span class="id"> /ball_</span><span class="id"> =&gt;</span><span class="id"> /ltr_distlCBl</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> subr_ge0;</span><span class="id"> apply/ltW</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> A;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> x;</span><span class="id"> split=&gt;</span><span class="id"> [[]</span><span class="id"> |</span><span class="id"> []]</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> clAx;</span><span class="id"> have</span><span class="id"> abx</span><span class="id"> :</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> interval_closed;</span><span class="id"> have</span><span class="id"> /closureI</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> clAx</span>.<br/>
<span class="id">split=&gt;</span><span class="id"> //;</span><span class="id"> have</span><span class="id"> /sabUf</span><span class="id"> [i</span><span class="id"> Di</span><span class="id"> fx]</span><span class="id"> :=</span><span class="id"> abx</span>.<br/>
<span class="id">have</span><span class="id"> /fop</span><span class="id"> :=</span><span class="id"> Di;</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> fx</span>)<span class="id"> [_</span><span class="id"> /posnumP[e]</span><span class="id"> xe_fi]</span>.<br/>
<span class="id">have</span><span class="id"> /clAx</span><span class="id"> [y</span><span class="id"> [[aby</span><span class="id"> [E</span><span class="id"> sD</span><span class="id"> [sayUf</span><span class="id"> _]]]</span><span class="id"> xe_y]]</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">nbhsx_ballx</span><span class="id"> x</span><span class="id"> e%:num</span><span class="id"> ltac:</span>(<span class="gallina-kwd">by</span><span class="id"> []</span>).<br/>
<span class="gallina-kwd">exists</span> (<span class="id">i</span><span class="id"> |`</span><span class="id"> E</span>)<span class="id">%fset;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> j</span><span class="id"> /fset1UP[-&gt;|/sD]</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> inE</span>.<br/>
<span class="id">split=&gt;</span><span class="id"> [z</span><span class="id"> axz|];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> i;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> !inE</span><span class="id"> eq_refl</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/xe_fi;</span><span class="id"> rewrite</span><span class="id"> /ball_/=</span><span class="id"> subrr</span><span class="id"> normr0</span>.<br/>
<span class="id">have</span><span class="id"> [lezy|ltyz]</span><span class="id"> :=</span><span class="id"> lerP</span><span class="id"> z</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /sayUf</span><span class="id"> [j</span><span class="id"> Dj</span><span class="id"> fjz]</span><span class="id"> :</span><span class="id"> z</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> y]</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> /=</span> (<span class="id">itvP</span><span class="id"> axz</span>)<span class="id"> lezy</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> j</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> orbC</span><span class="id"> Dj</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> i;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> !inE</span><span class="id"> eq_refl</span>.<br/>
<span class="id">apply/xe_fi;</span><span class="id"> rewrite</span><span class="id"> /ball_/=</span><span class="id"> ger0_norm;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> subr_ge0</span> (<span class="id">itvP</span><span class="id"> axz</span>).<br/>
<span class="id">rewrite</span><span class="id"> ltrBlDl</span><span class="id"> -ltrBlDr;</span><span class="id"> apply:</span><span class="id"> lt_trans</span><span class="id"> ltyz</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ltr_distlCBl;</span><span class="id"> rewrite</span><span class="id"> distrC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> segment</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> IVT</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> R</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> v</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">a</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> {within</span><span class="id"> `[a,</span><span class="id"> b],</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">minr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>)<span class="id"> &lt;=</span><span class="id"> v</span><span class="id"> &lt;=</span><span class="id"> maxr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists2</span><span class="id"> c,</span><span class="id"> c</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;</span><span class="id"> f</span><span class="id"> c</span><span class="id"> =</span><span class="id"> v</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> leab</span><span class="id"> fcont;</span><span class="id"> gen</span><span class="id"> have</span><span class="id"> ivt</span><span class="id"> :</span><span class="id"> f</span><span class="id"> v</span><span class="id"> fcont</span><span class="id"> /</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> v</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists2</span><span class="id"> c,</span><span class="id"> c</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;</span><span class="id"> f</span><span class="id"> c</span><span class="id"> =</span><span class="id"> v;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span> (<span class="id">leP</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>))<span class="id"> =&gt;</span><span class="id"> []</span><span class="id"> _</span><span class="id"> fabv</span><span class="id"> /=;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> ivt</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [|</span><span class="id"> |c</span><span class="id"> cab</span><span class="id"> /oppr_inj]</span><span class="id"> :=</span><span class="id"> ivt</span> (<span class="id">-</span><span class="id"> f</span>) (<span class="id">-</span><span class="id"> v</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> c</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> apply/continuousN/fcont</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> lerNr</span><span class="id"> opprK</span><span class="id"> lerNr</span><span class="id"> opprK</span><span class="id"> andbC</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> favfb;</span><span class="id"> suff:</span><span class="id"> is_interval</span> (<span class="id">f</span><span class="id"> @`</span><span class="id"> `[a,b]</span>).<br/>
&nbsp;&nbsp;<span class="id">apply;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> favfb</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> a</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> in_itv/=</span><span class="id"> lexx</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> b</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> in_itv/=</span><span class="id"> leab</span><span class="id"> lexx</span>.<br/>
<span class="id">apply/connected_intervalP/connected_continuous_connected</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">exact:</span><span class="id"> segment_connected</span>.<br/>
Qed.</div></details>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> compact_bounded</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> V</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">compact</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> bounded_set</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> compact_cover</span><span class="id"> =&gt;</span><span class="id"> Aco</span>.<br/>
<span class="id">have</span><span class="id"> covA</span><span class="id"> :</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> \bigcup_</span>(<span class="id">n</span><span class="id"> :</span><span class="id"> int</span>)<span class="id"> [set</span><span class="id"> p</span><span class="id"> |</span><span class="id"> `|p|</span><span class="id"> &lt;</span><span class="id"> n%:~R]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> p</span><span class="id"> _;</span><span class="gallina-kwd"> exists</span> (<span class="id">floor</span><span class="id"> `|p|</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> lt_succ_floor</span>.<br/>
<span class="id">have</span><span class="id"> /Aco</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> covA</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> n</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> openE</span><span class="id"> =&gt;</span><span class="id"> p;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> -subr_gt0</span><span class="id"> =&gt;</span><span class="id"> ltpn</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/nbhs_ballP;</span><span class="gallina-kwd"> exists</span> (<span class="id">n%:~R</span><span class="id"> -</span><span class="id"> `|p|</span>)<span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> q</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -ball_normE</span><span class="id"> /=</span><span class="id"> ltrBrDr</span><span class="id"> distrC;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -{1}</span>(<span class="id">subrK</span><span class="id"> p</span><span class="id"> q</span>)<span class="id"> ler_normD</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> D</span><span class="id"> _</span><span class="id"> DcovA</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">\big[maxr/0]_</span>(<span class="id">i</span><span class="id"> :</span><span class="id"> D</span>) (<span class="id">fsval</span><span class="id"> i</span>)<span class="id">%:~R</span>).<br/>
<span class="id">rewrite</span><span class="id"> bigmax_real//;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> realz</span>.<br/>
<span class="id">split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span><span class="id"> ltmaxx</span><span class="id"> p</span><span class="id"> /DcovA</span><span class="id"> [n</span><span class="id"> Dn</span><span class="id"> /lt_trans</span><span class="id"> /</span>(_<span class="id"> _</span>)<span class="id">/ltW]</span>.<br/>
<span class="id">apply;</span><span class="id"> apply:</span><span class="id"> le_lt_trans</span><span class="id"> ltmaxx</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> n</span><span class="id"> \in</span><span class="id"> enum_fset</span><span class="id"> D</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> enum_fsetE</span><span class="id"> =&gt;</span><span class="id"> /mapP[/=</span><span class="id"> i</span><span class="id"> iD</span><span class="id"> -&gt;];</span><span class="id"> exact/le_bigmax</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> rV_compact</span> (<span class="id">T</span><span class="id"> :</span><span class="id"> ptopologicalType</span>)<span class="id"> n</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> 'I_n</span>.<span class="id">+1</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> compact</span> (<span class="id">A</span><span class="id"> i</span>))<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">compact</span><span class="id"> [</span><span class="id"> set</span><span class="id"> v</span><span class="id"> :</span><span class="id"> 'rV[T]_n</span>.<span class="id">+1</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> A</span><span class="id"> i</span> (<span class="id">v</span><span class="id"> ord0</span><span class="id"> i</span>)<span class="id">]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Aico</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> @compact</span> (<span class="id">prod_topology</span><span class="id"> _</span>)<span class="id"> [set</span><span class="id"> f</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> A</span><span class="id"> i</span> (<span class="id">f</span><span class="id"> i</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> tychonoff</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> Aco</span><span class="id"> F</span><span class="id"> FF</span><span class="id"> FA</span>.<br/>
<span class="id">set</span><span class="id"> G</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> [set</span><span class="id"> f</span><span class="id"> :</span><span class="id"> 'I_n</span>.<span class="id">+1</span><span class="id"> -&gt;</span><span class="id"> T</span><span class="id"> |</span><span class="id"> B</span> (<span class="id">\row_j</span><span class="id"> f</span><span class="id"> j</span>)<span class="id">]</span><span class="id"> |</span><span class="id"> B</span><span class="gallina-kwd"> in</span><span class="id"> F]</span>.<br/>
<span class="id">have</span><span class="id"> row_simpl</span> (<span class="id">v</span><span class="id"> :</span><span class="id"> 'rV[T]_n</span>.<span class="id">+1</span>)<span class="id"> :</span><span class="id"> \row_j</span> (<span class="id">v</span><span class="id"> ord0</span><span class="id"> j</span>)<span class="id"> =</span><span class="id"> v</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/rowP</span><span class="id"> =&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> mxE</span>.<br/>
<span class="id">have</span><span class="id"> row_simpl'</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> 'I_n</span>.<span class="id">+1</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> :</span> (<span class="id">\row_j</span><span class="id"> f</span><span class="id"> j</span>)<span class="id"> ord0</span><span class="id"> =</span><span class="id"> f</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> funeqE=&gt;</span><span class="id"> ?;</span><span class="id"> rewrite</span><span class="id"> mxE</span>.<br/>
<span class="id">have</span><span class="id"> [f</span><span class="id"> [Af</span><span class="id"> clGf]]</span><span class="id"> :</span><span class="id"> [set</span><span class="id"> f</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> A</span><span class="id"> i</span> (<span class="id">f</span><span class="id"> i</span>)<span class="id">]</span><span class="id"> `&amp;`</span><br/>
&nbsp;&nbsp;<span class="id">@cluster</span> (<span class="id">prod_topology</span><span class="id"> _</span>)<span class="id"> G</span><span class="id"> !=set0</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span><span class="id"> GF</span><span class="id"> :</span><span class="id"> ProperFilter</span><span class="id"> G</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> Aco;</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> v</span><span class="id"> :</span><span class="id"> 'rV[T]_n</span>.<span class="id">+1</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> A</span><span class="id"> i</span> (<span class="id">v</span><span class="id"> ord0</span><span class="id"> i</span>)<span class="id">]</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> f;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> Af</span><span class="id"> i;</span><span class="id"> [have</span><span class="id"> :=</span><span class="id"> Af</span><span class="id"> i|];</span><span class="id"> rewrite</span><span class="id"> row_simpl'</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span><span class="id"> Build_ProperFilter_ex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> _</span><span class="id"> [C</span><span class="id"> FC</span><span class="id"> &lt;-];</span><span class="id"> have</span><span class="id"> /filter_ex</span><span class="id"> [v</span><span class="id"> Cv]</span><span class="id"> :=</span><span class="id"> FC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span> (<span class="id">v</span><span class="id"> ord0</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> row_simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> setT</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> filterT</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> _</span><span class="id"> _</span><span class="id"> [C</span><span class="id"> FC</span><span class="id"> &lt;-]</span><span class="id"> [D</span><span class="id"> FD</span><span class="id"> &lt;-];</span><span class="gallina-kwd"> exists</span> (<span class="id">C</span><span class="id"> `&amp;`</span><span class="id"> D</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> filterI</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> C</span><span class="id"> D</span><span class="id"> sCD</span><span class="id"> [E</span><span class="id"> FE</span><span class="id"> EeqC];</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> v</span><span class="id"> :</span><span class="id"> 'rV[T]_n</span>.<span class="id">+1</span><span class="id"> |</span><span class="id"> D</span> (<span class="id">v</span><span class="id"> ord0</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> FE</span><span class="id"> =&gt;</span><span class="id"> v</span><span class="id"> Ev;</span><span class="id"> apply/sCD;</span><span class="id"> rewrite</span><span class="id"> -EeqC/=</span><span class="id"> row_simpl</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> ?</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> row_simpl'</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">\row_j</span><span class="id"> f</span><span class="id"> j</span>)<span class="id">;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> mxE;</span><span class="id"> apply:</span><span class="id"> Af</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> C</span><span class="id"> D</span><span class="id"> FC</span><span class="id"> f_D;</span><span class="id"> have</span><span class="id"> {}f_D</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">nbhs</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> prod_topology</span><span class="id"> _</span>)<span class="id"> [set</span><span class="id"> g</span><span class="id"> |</span><span class="id"> D</span> (<span class="id">\row_j</span><span class="id"> g</span><span class="id"> j</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [E</span><span class="id"> f_E</span><span class="id"> sED]</span><span class="id"> :=</span><span class="id"> f_D;</span><span class="id"> rewrite</span><span class="id"> nbhsE</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span><span class="id"> Pj</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> j</span><span class="id"> Bj</span><span class="id"> =&gt;</span><span class="id"> open_nbhs</span> (<span class="id">f</span><span class="id"> j</span>)<span class="id"> Bj</span><span class="id"> /\</span><span class="id"> Bj</span><span class="id"> `&lt;=`</span><span class="id"> E</span><span class="id"> ord0</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> exPj</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> j,</span><span class="gallina-kwd"> exists</span><span class="id"> Bj,</span><span class="id"> open_nbhs</span> (<span class="id">f</span><span class="id"> j</span>)<span class="id"> Bj</span><span class="id"> /\</span><span class="id"> Bj</span><span class="id"> `&lt;=`</span><span class="id"> E</span><span class="id"> ord0</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> j;</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> f_E</span><span class="id"> ord0</span><span class="id"> j;</span><span class="id"> rewrite</span><span class="id"> nbhsE</span><span class="id"> =&gt;</span><span class="id"> -</span><span class="id"> [Bj]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> row_simpl';</span><span class="gallina-kwd"> exists</span><span class="id"> Bj</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [set</span><span class="id"> g</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> j,</span> (<span class="id">get</span> (<span class="id">Pj</span><span class="id"> j</span>)) (<span class="id">g</span><span class="id"> j</span>)<span class="id">];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> g</span><span class="id"> Pg;</span><span class="id"> apply:</span><span class="id"> sED</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> j;</span><span class="id"> rewrite</span><span class="id"> ord1</span><span class="id"> row_simpl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /getPex</span><span class="id"> [_</span><span class="id"> /</span>(_<span class="id"> _</span> (<span class="id">Pg</span><span class="id"> j</span>))<span class="id">]</span><span class="id"> :=</span><span class="id"> exPj</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;<span class="id">split;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> j;</span><span class="id"> have</span><span class="id"> /getPex</span><span class="id"> [[]]</span><span class="id"> :=</span><span class="id"> exPj</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [set</span><span class="id"> [set</span><span class="id"> g</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> j,</span><span class="id"> get</span> (<span class="id">Pj</span><span class="id"> j</span>) (<span class="id">g</span><span class="id"> j</span>)<span class="id">]</span><span class="id"> |</span><span class="id"> k</span><span class="gallina-kwd"> in</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> 'I_n</span>.<span class="id">+1</span><span class="id"> x]];</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> g;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> [_</span><span class="id"> [_</span><span class="id"> _</span><span class="id"> &lt;-]]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> Pg;</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> g</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> j,</span><span class="id"> get</span> (<span class="id">Pj</span><span class="id"> j</span>) (<span class="id">g</span><span class="id"> j</span>)<span class="id">]</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> ord0</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> _</span><span class="id"> [_</span><span class="id"> _</span><span class="id"> &lt;-];</span><span class="id"> set</span><span class="id"> s</span><span class="id"> :=</span><span class="id"> [seq</span> (<span class="id">@^~</span><span class="id"> j</span>)<span class="id"> @^-1`</span> (<span class="id">get</span> (<span class="id">Pj</span><span class="id"> j</span>))<span class="id"> |</span><span class="id"> j</span><span class="id"> :</span><span class="id"> 'I_n</span>.<span class="id">+1]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [fset</span><span class="id"> x</span><span class="gallina-kwd"> in</span><span class="id"> s]%fset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> B';</span><span class="id"> rewrite</span><span class="id"> in_fset</span><span class="id"> =&gt;</span><span class="id"> /mapP</span><span class="id"> [j</span><span class="id"> _</span><span class="id"> -&gt;];</span><span class="id"> rewrite</span><span class="id"> inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> j</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span> (<span class="id">get</span> (<span class="id">Pj</span><span class="id"> j</span>))<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /getPex</span><span class="id"> [[]]</span><span class="id"> :=</span><span class="id"> exPj</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> g;</span><span class="id"> split=&gt;</span><span class="id"> [Ig</span><span class="id"> j|Ig</span><span class="id"> B']</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">Ig</span> ((<span class="id">@^~</span><span class="id"> j</span>)<span class="id"> @^-1`</span> (<span class="id">get</span> (<span class="id">Pj</span><span class="id"> j</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_fset;</span><span class="id"> apply/mapP;</span><span class="gallina-kwd"> exists</span><span class="id"> j</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> mem_enum</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> in_fset</span><span class="id"> =&gt;</span><span class="id"> /mapP</span><span class="id"> [j</span><span class="id"> _</span><span class="id"> -&gt;];</span><span class="id"> apply:</span><span class="id"> Ig</span>.<br/>
<span class="id">have</span><span class="id"> GC</span><span class="id"> :</span><span class="id"> G</span><span class="id"> [set</span><span class="id"> g</span><span class="id"> |</span><span class="id"> C</span> (<span class="id">\row_j</span><span class="id"> g</span><span class="id"> j</span>)<span class="id">]</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> C</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [g</span><span class="id"> []]</span><span class="id"> :=</span><span class="id"> clGf</span><span class="id"> _</span><span class="id"> _</span><span class="id"> GC</span><span class="id"> f_D;</span><span class="gallina-kwd"> exists</span> (<span class="id">\row_j</span> (<span class="id">g</span><span class="id"> j</span><span class="id"> :</span><span class="id"> T</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_closed_compact</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>)<span class="id"> n</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> 'rV[R]_n</span>.<span class="id">+1</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_set</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> closed</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> compact</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [M</span><span class="id"> [Mreal</span><span class="id"> normAltM]]</span><span class="id"> Acl</span>.<br/>
<span class="id">have</span><span class="id"> Mnco</span><span class="id"> :</span><span class="id"> compact</span><br/>
&nbsp;&nbsp;<span class="id">[set</span><span class="id"> v</span><span class="id"> :</span><span class="id"> 'rV[R]_n</span>.<span class="id">+1</span><span class="id"> |</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> v</span><span class="id"> ord0</span><span class="id"> i</span><span class="id"> \in</span><span class="id"> `[</span>(<span class="id">-</span> (<span class="id">M</span><span class="id"> +</span><span class="id"> 1</span>))<span class="id">,</span> (<span class="id">M</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">]]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@rV_compact</span><span class="id"> _</span> <span class="id"> _</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> `[</span>(<span class="id">-</span> (<span class="id">M</span><span class="id"> +</span><span class="id"> 1</span>))<span class="id">,</span> (<span class="id">M</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">]%classic</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> _;</span><span class="id"> apply:</span><span class="id"> segment_compact</span>.<br/>
<span class="id">apply:</span><span class="id"> subclosed_compact</span><span class="id"> Acl</span><span class="id"> Mnco</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> v</span><span class="id"> /normAltM</span><span class="id"> normvleM</span><span class="id"> i</span>.<br/>
<span class="id">suff</span><span class="id"> :</span><span class="id"> `|v</span><span class="id"> ord0</span><span class="id"> i</span><span class="id"> :</span><span class="id"> R|</span><span class="id"> &lt;=</span><span class="id"> M</span><span class="id"> +</span><span class="id"> 1</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ler_norml</span>.<br/>
<span class="id">apply:</span><span class="id"> le_trans</span> (<span class="id">normvleM</span><span class="id"> _</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltrDl</span>.<br/>
<span class="id">have</span><span class="id"> /mapP[j</span><span class="id"> Hj</span><span class="id"> -&gt;]</span><span class="id"> :</span><span class="id"> `|v</span><span class="id"> ord0</span><span class="id"> i|</span><span class="id"> \in</span><span class="id"> [seq</span><span class="id"> `|v</span><span class="id"> x</span>.<span class="id">1</span><span class="id"> x</span>.<span class="id">2|</span><span class="id"> |</span><span class="id"> x</span><span class="id"> :</span><span class="id"> 'I_1</span><span class="id"> *</span><span class="id"> 'I_n</span>.<span class="id">+1]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/mapP;</span><span class="gallina-kwd"> exists</span> (<span class="id">ord0,</span><span class="id"> i</span>)<span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> mem_enum</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> [leRHS]/normr</span><span class="id"> /=</span><span class="id"> mx_normrE;</span><span class="id"> apply/bigmax_geP;</span><span class="id"> right</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> j</span>.<br/>
Qed.</div></details>
<br/>
<div class="doc">Some limits on real functions </div>
<br/>
<span class="vernacular">Section</span><span class="id"> Shift</span>.<br/>
<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> zmodType}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> shift</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :=</span><span class="id"> y</span><span class="id"> +</span><span class="id"> x</span>.<br/>
<span class="vernacular">Notation</span><span class="id"> center</span><span class="id"> c</span><span class="id"> :=</span> (<span class="id">shift</span> (<span class="id">-</span><span class="id"> c</span>)).<br/>
<span class="vernacular">Arguments</span><span class="id"> shift</span><span class="id"> x</span><span class="id"> /</span><span class="id"> y</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> comp_shiftK</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> :</span> (<span class="id">f</span><span class="id"> \o</span><span class="id"> shift</span><span class="id"> x</span>)<span class="id"> \o</span><span class="id"> center</span><span class="id"> x</span><span class="id"> =</span><span class="id"> f</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> addrNK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> comp_centerK</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> :</span> (<span class="id">f</span><span class="id"> \o</span><span class="id"> center</span><span class="id"> x</span>)<span class="id"> \o</span><span class="id"> shift</span><span class="id"> x</span><span class="id"> =</span><span class="id"> f</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> addrK</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> shift0</span><span class="id"> :</span><span class="id"> shift</span><span class="id"> 0</span><span class="id"> =</span><span class="id"> id</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> addr0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> center0</span><span class="id"> :</span><span class="id"> center</span><span class="id"> 0</span><span class="id"> =</span><span class="id"> id</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> oppr0</span><span class="id"> shift0</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> Shift</span>.<br/>
<span class="vernacular">Arguments</span><span class="id"> shift</span><span class="id"> {R}</span><span class="id"> x</span><span class="id"> /</span><span class="id"> y</span>.<br/>
<span class="vernacular">Notation</span><span class="id"> center</span><span class="id"> c</span><span class="id"> :=</span> (<span class="id">shift</span> (<span class="id">-</span><span class="id"> c</span>)).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_shift</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">y</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">P</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">\near</span><span class="id"> x,</span><span class="id"> P</span><span class="id"> x</span>)<span class="id"> =</span> (<span class="id">\forall</span><span class="id"> z</span><span class="id"> \near</span><span class="id"> y,</span> (<span class="id">P</span><span class="id"> \o</span><span class="id"> shift</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> y</span>))<span class="id"> z</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="comment">(*&nbsp;rewrite&nbsp;propeqE&nbsp;nbhs0P&nbsp;[X&nbsp;in&nbsp;_&nbsp;&lt;-&gt;&nbsp;X]nbhs0P/=&nbsp;-propeqE.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;by&nbsp;apply:&nbsp;eq_near&nbsp;=&gt;&nbsp;e;&nbsp;rewrite&nbsp;![_&nbsp;+&nbsp;e]addrC&nbsp;addrACA&nbsp;subrr&nbsp;addr0.&nbsp;*)</span><br/>
<span class="id">rewrite</span><span class="id"> propeqE;</span><span class="id"> split=&gt;</span><span class="id"> /=</span><span class="id"> /nbhs_normP</span><span class="id"> [_/posnumP[e]</span><span class="id"> ye];</span><br/>
<span class="id">apply/nbhs_normP;</span><span class="gallina-kwd"> exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> t</span><span class="id"> et</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> ye;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> distrC</span><span class="id"> addrCA</span><span class="id"> [x</span><span class="id"> +</span><span class="id"> _]addrC</span><span class="id"> addrK</span><span class="id"> distrC</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /=</span><span class="id"> :=</span><span class="id"> ye</span> (<span class="id">t</span><span class="id"> -</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> y</span>))<span class="id">;</span><span class="id"> rewrite</span><span class="id"> opprB</span><span class="id"> addrCA</span><span class="id"> subrKA</span><span class="id"> addrNK;</span><span class="id"> exact</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_comp_shift</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {K</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K}</span><br/>
&nbsp;&nbsp;(<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> \o</span><span class="id"> shift</span><span class="id"> x</span>)<span class="id"> @</span><span class="id"> y</span><span class="id"> =</span><span class="id"> f</span><span class="id"> @</span> (<span class="id">y</span><span class="id"> +</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> funeqE</span><span class="id"> =&gt;</span><span class="id"> A;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> !near_simpl</span> (<span class="id">near_shift</span> (<span class="id">y</span><span class="id"> +</span><span class="id"> x</span>)).<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> _</span><span class="id"> \o</span><span class="id"> _</span><span class="id"> =</span><span class="id"> A</span><span class="id"> \o</span><span class="id"> f</span>)<span class="id"> //</span><span class="id"> funeqE=&gt;</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> opprD</span><span class="id"> addNKr</span><span class="id"> addrNK</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> continuous</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">K</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">U</span><span class="id"> V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> K</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_shift</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> U</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> u</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> u,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> =</span><span class="id"> {for</span><span class="id"> 0,</span><span class="id"> continuous</span> (<span class="id">f</span><span class="id"> \o</span><span class="id"> shift</span><span class="id"> u</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> [in</span><span class="id"> RHS]forE</span><span class="id"> /continuous_at/=</span><span class="id"> add0r</span><span class="id"> cvg_comp_shift</span><span class="id"> add0r</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_withinNshiftx</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> U</span><span class="id"> -&gt;</span><span class="id"> V</span>)<span class="id"> u</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> \o</span><span class="id"> shift</span><span class="id"> u</span><span class="id"> @</span><span class="id"> 0^'</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> u</span><span class="id"> &lt;-&gt;</span><span class="id"> {for</span><span class="id"> u,</span><span class="id"> continuous</span><span class="id"> f}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> continuous_shift;</span><span class="id"> split=&gt;</span><span class="id"> [cfu|]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/</span>(<span class="id">continuous_withinNx</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2/</span>(<span class="id">cvg_trans</span><span class="id"> cfu</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> add0r</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/</span>(<span class="id">continuous_withinNx</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">1/cvg_trans;</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> add0r</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> continuous</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> ball_realFieldType</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball0</span> (<span class="id">a</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> ball</span><span class="id"> a</span><span class="id"> r</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> &lt;-&gt;</span><span class="id"> r</span><span class="id"> &lt;=</span><span class="id"> 0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /seteqP[+</span><span class="id"> _]</span><span class="id"> =&gt;</span><span class="id"> H;</span><span class="id"> rewrite</span><span class="id"> leNgt;</span><span class="id"> apply/negP</span><span class="id"> =&gt;</span><span class="id"> r0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /</span>(_ (<span class="id">ballxx</span><span class="id"> _</span><span class="id"> r0</span>))<span class="id"> :=</span><span class="id"> H</span><span class="id"> a</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> r0;</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> y;</span><span class="id"> rewrite</span><span class="id"> /ball/=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/lt_le_trans</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> r0</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> normr_lt0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> ball_realFieldType</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_open</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> open</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> openE</span><span class="id"> -ball_normE</span><span class="id"> /interior</span><span class="id"> =&gt;</span><span class="id"> r0</span><span class="id"> y</span><span class="id"> /=</span><span class="id"> Bxy;</span><span class="id"> near=&gt;</span><span class="id"> z</span>.<br/>
<span class="id">rewrite</span><span class="id"> /=</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_distD</span><span class="id"> y</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> //</span><span class="id"> addrC</span><span class="id"> -ltrBrDr</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> z;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt;</span><span class="id"> rewrite</span><span class="id"> //</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_open_nbhs</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> open_nbhs</span><span class="id"> x</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> e0;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> ball_open|exact:</span><span class="id"> ballxx]</span>. Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="vernacular"> Closed_Ball</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> closed_ball_</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> zmodType</span>) (<span class="id">norm</span><span class="id"> :</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;(<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :=</span><span class="id"> [set</span><span class="id"> y</span><span class="id"> |</span><span class="id"> norm</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> y</span>)<span class="id"> &lt;=</span><span class="id"> e]</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_closed_ball_</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;(<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> closed</span> (<span class="id">closed_ball_</span><span class="id"> normr</span><span class="id"> x</span><span class="id"> e</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /closed_ball_</span><span class="id"> -/</span>((<span class="id">normr</span><span class="id"> \o</span> (<span class="gallina-kwd">fun</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> -</span><span class="id"> y</span>))<span class="id"> @^-1`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> |</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> e]</span>).<br/>
<span class="id">apply:</span> (<span class="id">closed_comp</span><span class="id"> _</span> (<span class="id">@closed_le</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> _</span>.<br/>
<span class="id">apply:</span> (<span class="id">continuous_comp</span><span class="id"> _</span> (<span class="id">@norm_continuous</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
<span class="id">exact:</span> (<span class="id">continuousB</span> (<span class="id">@cst_continuous</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Definition</span><span class="id"> closed_ball</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;(<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :=</span><span class="id"> closure</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> e</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ball0</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">a</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">r</span><span class="id"> &lt;=</span><span class="id"> 0</span><span class="id"> -&gt;</span><span class="id"> closed_ball</span><span class="id"> a</span><span class="id"> r</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /ball0</span><span class="id"> r0;</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> y</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /closed_ball</span><span class="id"> r0</span><span class="id"> closure0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ballxx</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<br/>
&nbsp;&nbsp;(<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> closed_ball</span><span class="id"> x</span><span class="id"> e</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?;</span><span class="id"> exact/subset_closure/ballxx</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ballE</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<br/>
&nbsp;&nbsp;(<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> closed_ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> closed_ball_</span><span class="id"> normr</span><span class="id"> x</span><span class="id"> r</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /posnumP[e];</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /closed_ball</span><span class="id"> closureE;</span><span class="id"> apply;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> closed_closed_ball_</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> -ball_normE;</span><span class="id"> exact:</span><span class="id"> ltW</span>.<br/>
<span class="id">have</span><span class="id"> [-&gt;</span><span class="id"> _|xy]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> x</span><span class="id"> y;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> closed_ballxx</span>.<br/>
<span class="id">rewrite</span><span class="id"> /closed_ball</span><span class="id"> closureE</span><span class="id"> -ball_normE</span>.<br/>
<span class="id">rewrite</span><span class="id"> /closed_ball_</span><span class="id"> /=</span><span class="id"> le_eqVlt</span>.<br/>
<span class="id">move</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> xye</span><span class="id"> B</span><span class="id"> [Bc</span><span class="id"> Be]|xye</span><span class="id"> _</span><span class="id"> [_</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> xye</span>)<span class="id">]//]</span>.<br/>
<span class="id">apply:</span><span class="id"> Bc</span><span class="id"> =&gt;</span><span class="id"> B0</span><span class="id"> /nbhs_ballP[s</span><span class="id"> s0]</span><span class="id"> B0y</span>.<br/>
<span class="id">have</span><span class="id"> [es|se]</span><span class="id"> :=</span><span class="id"> leP</span><span class="id"> s</span><span class="id"> e%:num;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> x;</span><span class="id"> split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> Be;</span><span class="id"> rewrite</span><span class="id"> ball_normE;</span><span class="id"> apply:</span><span class="id"> ballxx</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> B0y;</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span><span class="id"> /ball_</span><span class="id"> /=</span><span class="id"> distrC</span><span class="id"> xye</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">y</span><span class="id"> +</span> (<span class="id">s</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id"> *:</span> (<span class="id">`|x</span><span class="id"> -</span><span class="id"> y|^-1</span><span class="id"> *:</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> y</span>)))<span class="id">;</span><span class="id"> split;</span><span class="id"> [apply:</span><span class="id"> Be|apply:</span><span class="id"> B0y]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> opprD</span><span class="id"> addrA</span><span class="id"> -[X</span><span class="gallina-kwd"> in</span><span class="id"> `|X</span><span class="id"> -</span><span class="id"> _|]</span>(<span class="id">scale1r</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> y</span>))<span class="id"> scalerA</span><span class="id"> -scalerBl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -[X</span><span class="gallina-kwd"> in</span><span class="id"> X</span><span class="id"> -</span><span class="id"> _]</span>(<span class="id">@divrr</span><span class="id"> _</span><span class="id"> `|x</span><span class="id"> -</span><span class="id"> y|</span>)<span class="id"> ?unitfE</span><span class="id"> ?normr_eq0</span><span class="id"> ?subr_eq0//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -mulrBl</span><span class="id"> -scalerA</span><span class="id"> normrZ</span><span class="id"> normfZV</span><span class="id"> ?subr_eq0//</span><span class="id"> mulr1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> gtr0_norm;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ltrBlDl</span><span class="id"> xye</span><span class="id"> ltrDr</span><span class="id"> mulr_gt0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> subr_gt0</span><span class="id"> xye</span><span class="id"> ltr_pdivrMr</span><span class="id"> //</span><span class="id"> mulr_natr</span><span class="id"> mulr2n</span><span class="id"> ltr_pwDl</span>.<br/>
<span class="id">rewrite</span><span class="id"> -ball_normE</span><span class="id"> /ball_</span><span class="id"> /=</span><span class="id"> opprD</span><span class="id"> addrA</span><span class="id"> addrN</span><span class="id"> add0r</span><span class="id"> normrN</span><span class="id"> normrZ</span>.<br/>
<span class="id">rewrite</span><span class="id"> normfZV</span><span class="id"> ?subr_eq0//</span><span class="id"> mulr1</span><span class="id"> normrM</span> (<span class="id">gtr0_norm</span><span class="id"> s0</span>)<span class="id"> gtr0_norm</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltr_pdivrMr</span><span class="id"> //</span><span class="id"> ltr_pMr</span><span class="id"> //</span><span class="id"> ltr1n</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ball_closed</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<br/>
&nbsp;&nbsp;(<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> closed</span> (<span class="id">closed_ball</span><span class="id"> x</span><span class="id"> r</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> closed_closure</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ball_itv</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">x</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">closed_ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> `[x</span><span class="id"> -</span><span class="id"> r,</span><span class="id"> x</span><span class="id"> +</span><span class="id"> r]%classic</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> r0;</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> y;</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> closed_ballE//</span><span class="id"> /closed_ball_</span><span class="id"> /=</span><span class="id"> in_itv/=</span><span class="id"> ler_distlC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ball_ball</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span> (<span class="id">x</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">closed_ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> -</span><span class="id"> r]</span><span class="id"> `|`</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> `|`</span><span class="id"> [set</span><span class="id"> x</span><span class="id"> +</span><span class="id"> r]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0;</span><span class="id"> rewrite</span><span class="id"> closed_ball_itv//</span><span class="id"> -</span>(<span class="id">@setU1itv</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> r</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> bnd_simp</span><span class="id"> lerBlDr</span><span class="id"> -addrA</span><span class="id"> lerDl</span><span class="id"> ltW//</span><span class="id"> addr_gt0</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@setUitv1</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">x</span><span class="id"> +</span><span class="id"> r</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> bnd_simp</span><span class="id"> ltrBlDr</span><span class="id"> -addrA</span><span class="id"> ltrDl</span><span class="id"> addr_gt0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ball_itv</span><span class="id"> setUA</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ballR_compact</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">x</span><span class="id"> e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">compact</span> (<span class="id">closed_ball</span><span class="id"> x</span><span class="id"> e</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> e_gt0;</span><span class="id"> have</span><span class="id"> :</span><span class="id"> compact</span><span class="id"> `[x</span><span class="id"> -</span><span class="id"> e,</span><span class="id"> x</span><span class="id"> +</span><span class="id"> e]</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> segment_compact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> closed_ballE//;</span><span class="id"> under</span><span class="id"> eq_set</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> in_itv</span><span class="id"> -ler_distlC</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_ball_subset</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">M</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> M</span>)<br/>
&nbsp;&nbsp;(<span class="id">r0</span><span class="id"> r1</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r0</span><span class="id"> -&gt;</span><span class="id"> r0</span><span class="id"> &lt;</span><span class="id"> r1</span><span class="id"> -&gt;</span><span class="id"> closed_ball</span><span class="id"> x</span><span class="id"> r0</span><span class="id"> `&lt;=`</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r00</span><span class="id"> r01;</span><span class="id"> rewrite</span> (_<span class="id"> :</span><span class="id"> r0</span><span class="id"> =</span> (<span class="id">PosNum</span><span class="id"> r00</span>)<span class="id">%:num</span>)<span class="id"> //</span><span class="id"> closed_ballE</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> m</span><span class="id"> xm;</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span><span class="id"> /ball_</span><span class="id"> /=</span> (<span class="id">le_lt_trans</span><span class="id"> _</span><span class="id"> r01</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> nbhs_closedballP</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">M</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> M</span>)<br/>
&nbsp;&nbsp;(<span class="id">x</span><span class="id"> :</span><span class="id"> M</span>)<span class="id"> :</span><span class="id"> nbhs</span><span class="id"> x</span><span class="id"> B</span><span class="id"> &lt;-&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> r</span><span class="id"> :</span><span class="id"> {posnum</span><span class="id"> R},</span><span class="id"> closed_ball</span><span class="id"> x</span><span class="id"> r%:num</span><span class="id"> `&lt;=`</span><span class="id"> B</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [/nbhs_ballP[_/posnumP[r]</span><span class="id"> xrB]|[e</span><span class="id"> xeB]];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/nbhs_ballP;</span><span class="gallina-kwd"> exists</span><span class="id"> e%:num</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">subset_trans</span> (<span class="id">@subset_closure</span><span class="id"> _</span><span class="id"> _</span>)<span class="id"> xeB</span>).<br/>
<span class="gallina-kwd">exists</span> (<span class="id">r%:num</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">%:sgn</span>.<br/>
<span class="id">apply:</span> (<span class="id">subset_trans</span> (<span class="id">closed_ball_subset</span><span class="id"> _</span><span class="id"> _</span>)<span class="id"> xrB</span>)<span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> lter_pdivrMr</span><span class="id"> //</span><span class="id"> ltr_pMr</span><span class="id"> //</span><span class="id"> ltr1n</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> subset_closed_ball</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<br/>
&nbsp;&nbsp;(<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> `&lt;=`</span><span class="id"> closed_ball</span><span class="id"> x</span><span class="id"> r</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> subset_closure</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_subball</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span><span class="id"> {M</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R}</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> M</span>)<br/>
&nbsp;&nbsp;(<span class="id">x</span><span class="id"> :</span><span class="id"> M</span>)<span class="id"> :</span><span class="id"> open</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> \forall</span><span class="id"> e</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> e</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> aA</span><span class="id"> Ax</span>.<br/>
<span class="id">have</span><span class="id"> /</span>(<span class="id">@nbhs_closedballP</span><span class="id"> R</span><span class="id"> M</span><span class="id"> _</span><span class="id"> x</span>)<span class="id">[r</span><span class="id"> xrA]:</span><span class="id"> nbhs</span><span class="id"> x</span><span class="id"> A</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhsE/=;</span><span class="gallina-kwd"> exists</span><span class="id"> A</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> e</span>.<br/>
<span class="id">apply/</span>(<span class="id">subset_trans</span><span class="id"> _</span><span class="id"> xrA</span>)<span class="id">/</span>(<span class="id">subset_trans</span><span class="id"> _</span> (<span class="id">@subset_closed_ball</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> le_ball;</span><span class="id"> near:</span><span class="id"> e;</span><span class="id"> apply:</span><span class="id"> nbhs_right_le</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closed_disjoint_closed_ball</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span><span class="id"> {M</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R}</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">K</span><span class="id"> :</span><span class="id"> set</span><span class="id"> M</span>)<span class="id"> z</span><span class="id"> :</span><span class="id"> closed</span><span class="id"> K</span><span class="id"> -&gt;</span><span class="id"> ~</span><span class="id"> K</span><span class="id"> z</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> d</span><span class="id"> \near</span><span class="id"> 0^'+,</span><span class="id"> closed_ball</span><span class="id"> z</span><span class="id"> d</span><span class="id"> `&amp;`</span><span class="id"> K</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> -openC</span><span class="id"> =&gt;</span><span class="id"> /open_subball</span><span class="id"> /[apply];</span><span class="id"> move=&gt;</span><span class="id"> [e</span><span class="id"> /=</span><span class="id"> e0]</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /</span>(_ (<span class="id">e</span><span class="id"> /</span><span class="id"> 2</span>))<span class="id"> /=</span><span class="id"> ;</span><span class="id"> rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> gtr0_norm</span><span class="id"> ?divr_gt0//</span>.<br/>
<span class="id">rewrite</span><span class="id"> ltr_pdivrMr//</span><span class="id"> ltr_pMr//</span><span class="id"> ltr1n</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> erefl</span><span class="id"> isT</span>).<br/>
<span class="id">move/subsets_disjoint;</span><span class="id"> rewrite</span><span class="id"> setCK</span><span class="id"> =&gt;</span><span class="id"> ze2K0</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">e</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> divr_gt0</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> +</span><span class="id"> x0;</span><span class="id"> rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> gtr0_norm//</span><span class="id"> =&gt;</span><span class="id"> xe</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> ze2K0;</span><span class="id"> apply:</span><span class="id"> subsetI_eq0</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> exact:</span><span class="id"> closed_ball_subset</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> locally_compactR</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>)<span class="id"> :</span><span class="id"> locally_compact</span><span class="id"> [set:</span><span class="id"> R]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> withinET;</span><span class="gallina-kwd"> exists</span> (<span class="id">closed_ball</span><span class="id"> x</span><span class="id"> 1</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/nbhs_closedballP;</span><span class="gallina-kwd"> exists</span><span class="id"> 1%:pos</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> split;</span><span class="id"> [apply:</span><span class="id"> closed_ballR_compact</span><span class="id"> |</span><span class="id"> apply:</span><span class="id"> closed_ball_closed]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> subset_closure_half</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realFieldType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<br/>
&nbsp;&nbsp;(<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> closed_ball</span><span class="id"> x</span> (<span class="id">r</span><span class="id"> /</span><span class="id"> 2</span>)<span class="id"> `&lt;=`</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move:r</span><span class="id"> =&gt;</span><span class="id"> _/posnumP[r]</span><span class="id"> z</span><span class="id"> /</span>(_ (<span class="id">ball</span><span class="id"> z</span> ((<span class="id">r%:num/2</span>)<span class="id">%:pos</span>)<span class="id">%:num</span>))<span class="id"> []</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> nbhsx_ballx</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> y</span><span class="id"> [+/ball_sym];</span><span class="id"> rewrite</span><span class="id"> [t</span><span class="gallina-kwd"> in</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> t</span><span class="id"> z]splitr;</span><span class="id"> apply:</span><span class="id"> ball_triangle</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> le_closed_ball</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">M</span><span class="id"> :</span><span class="id"> pseudoMetricNormedZmodType</span><span class="id"> R</span>)<br/>
&nbsp;&nbsp;(<span class="id">x</span><span class="id"> :</span><span class="id"> M</span>) (<span class="id">e1</span><span class="id"> e2</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span> (<span class="id">e1</span><span class="id"> &lt;=</span><span class="id"> e2</span>)<span class="id">%O</span><span class="id"> -&gt;</span><span class="id"> closed_ball</span><span class="id"> x</span><span class="id"> e1</span><span class="id"> `&lt;=`</span><span class="id"> closed_ball</span><span class="id"> x</span><span class="id"> e2</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /closed_ball</span><span class="id"> =&gt;</span><span class="id"> le;</span><span class="id"> apply/closure_subset/le_ball</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> interior_closed_ballE</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<br/>
&nbsp;&nbsp;(<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span> (<span class="id">closed_ball</span><span class="id"> x</span><span class="id"> r</span>)<span class="id">^°</span><span class="id"> =</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0;</span><span class="id"> rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -open_subsetE;</span><span class="id"> [exact:</span><span class="id"> subset_closure</span><span class="id"> |</span><span class="id"> exact:</span><span class="id"> ball_open]</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> /=</span><span class="id"> t;</span><span class="id"> rewrite</span><span class="id"> closed_ballE</span><span class="id"> //</span><span class="id"> /interior</span><span class="id"> /=</span><span class="id"> -nbhs_ballE</span><span class="id"> =&gt;</span><span class="id"> [[]]</span><span class="id"> s</span><span class="id"> s0</span>.<br/>
<span class="id">have</span><span class="id"> [-&gt;</span><span class="id"> _|nxt]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> t</span><span class="id"> x;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> ballxx</span>.<br/>
<span class="id">near</span> ((<span class="id">0</span><span class="id"> :</span><span class="id"> R^o</span>)<span class="id">^'</span>)<span class="id"> =&gt;</span><span class="id"> e;</span><span class="id"> rewrite</span><span class="id"> -ball_normE</span><span class="id"> /closed_ball_</span><span class="id"> =&gt;</span><span class="id"> tsxr</span>.<br/>
<span class="id">pose</span><span class="id"> z</span><span class="id"> :=</span><span class="id"> t</span><span class="id"> +</span><span class="id"> `|e|</span><span class="id"> *:</span> (<span class="id">t</span><span class="id"> -</span><span class="id"> x</span>)<span class="id">;</span><span class="id"> have</span><span class="id"> /tsxr</span><span class="id"> /=</span><span class="id"> :</span><span class="id"> `|t</span><span class="id"> -</span><span class="id"> z|</span><span class="id"> &lt;</span><span class="id"> s</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> distrC</span><span class="id"> addrAC</span><span class="id"> subrr</span><span class="id"> add0r</span><span class="id"> normrZ</span><span class="id"> normr_id</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -ltr_pdivlMr</span><span class="id"> ?</span>(<span class="id">normr_gt0,subr_eq0</span>)<span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> e;</span><span class="id"> apply/dnbhs0_lt;</span><span class="id"> rewrite</span><span class="id"> divr_gt0</span><span class="id"> //</span><span class="id"> normr_gt0</span><span class="id"> subr_eq0</span>.<br/>
<span class="id">rewrite</span><span class="id"> /z</span><span class="id"> opprD</span><span class="id"> addrA</span><span class="id"> -scalerN</span><span class="id"> -{1}</span>(<span class="id">scale1r</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> t</span>))<span class="id"> opprB</span><span class="id"> -scalerDl</span><span class="id"> normrZ</span>.<br/>
<span class="id">apply</span><span class="id"> lt_le_trans;</span><span class="id"> rewrite</span><span class="id"> ltr_pMl;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> normr_gt0</span><span class="id"> subr_eq0</span><span class="id"> eq_sym</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ger0_norm</span><span class="id"> //</span><span class="id"> ltrDl</span><span class="id"> normr_gt0;</span><span class="id"> near:</span><span class="id"> e;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> open_nbhs_closed_ball</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> realType</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>)<br/>
&nbsp;&nbsp;(<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> open_nbhs</span><span class="id"> x</span> (<span class="id">closed_ball</span><span class="id"> x</span><span class="id"> r</span>)<span class="id">^°</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> open_interior</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> interior_closed_ballE</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> ballxx</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="vernacular"> Closed_Ball</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bound_itvE</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numDomainType</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;((<span class="id">a</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span>)<span class="id"> =</span> (<span class="id">a</span><span class="id"> &lt;=</span><span class="id"> b</span>))<span class="id"> *</span><br/>
&nbsp;&nbsp;((<span class="id">b</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span>)<span class="id"> =</span> (<span class="id">a</span><span class="id"> &lt;=</span><span class="id"> b</span>))<span class="id"> *</span><br/>
&nbsp;&nbsp;((<span class="id">a</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b[</span>)<span class="id"> =</span> (<span class="id">a</span><span class="id"> &lt;</span><span class="id"> b</span>))<span class="id"> *</span><br/>
&nbsp;&nbsp;((<span class="id">b</span><span class="id"> \in</span><span class="id"> `]a,</span><span class="id"> b]</span>)<span class="id"> =</span> (<span class="id">a</span><span class="id"> &lt;</span><span class="id"> b</span>))<span class="id"> *</span><br/>
&nbsp;&nbsp;(<span class="id">a</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> +oo[</span>)<span class="id"> *</span><br/>
&nbsp;&nbsp;(<span class="id">a</span><span class="id"> \in</span><span class="id"> `]-oo,</span><span class="id"> a]</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> !</span>(<span class="id">boundr_in_itv,</span><span class="id"> boundl_in_itv</span>). Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> near_in_itv</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span> (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_in_itvoo</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{in</span><span class="id"> `]a,</span><span class="id"> b[,</span><span class="gallina-kwd"> forall</span><span class="id"> y,</span><span class="id"> \forall</span><span class="id"> z</span><span class="id"> \near</span><span class="id"> y,</span><span class="id"> z</span><span class="id"> \in</span><span class="id"> `]a,</span><span class="id"> b[}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> interval_open</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_in_itvoy</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{in</span><span class="id"> `]a,</span><span class="id"> +oo[,</span><span class="gallina-kwd"> forall</span><span class="id"> y,</span><span class="id"> \forall</span><span class="id"> z</span><span class="id"> \near</span><span class="id"> y,</span><span class="id"> z</span><span class="id"> \in</span><span class="id"> `]a,</span><span class="id"> +oo[}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> interval_open</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> near_in_itvNyo</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{in</span><span class="id"> `]-oo,</span><span class="id"> b[,</span><span class="gallina-kwd"> forall</span><span class="id"> y,</span><span class="id"> \forall</span><span class="id"> z</span><span class="id"> \near</span><span class="id"> y,</span><span class="id"> z</span><span class="id"> \in</span><span class="id"> `]-oo,</span><span class="id"> b[}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id"> exact:</span><span class="id"> interval_open</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> near_in_itv</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 1.7.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;use `near_in_itvoo` instead&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> near_in_itv</span><span class="id"> :=</span><span class="id"> near_in_itvoo</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_patch</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> R^o</span>) (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span> (<span class="id">a</span><span class="id"> &lt;</span><span class="id"> b</span>)<span class="id">%R</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">x</span><span class="id"> \in</span><span class="id"> `]a,</span><span class="id"> b[</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> subspace</span><span class="id"> `[a,</span><span class="id"> b]</span>)<span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> \_</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> x</span>)<span class="id"> @[x</span><span class="id"> --&gt;</span><span class="id"> x]</span><span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ab</span><span class="id"> xab</span><span class="id"> xf;</span><span class="id"> apply/cvgrPdist_lt</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> e</span><span class="id"> e0</span>.<br/>
<span class="id">move/cvgrPdist_lt</span><span class="id"> :</span><span class="id"> xf</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> e</span><span class="id"> e0</span>)<span class="id"> xf</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> z</span>.<br/>
<span class="id">rewrite</span><span class="id"> patchE</span><span class="id"> ifT//;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> inE;</span><span class="id"> apply:</span><span class="id"> subset_itv_oo_cc</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> z;</span><span class="id"> exact:</span><span class="id"> near_in_itvoo</span>.<br/>
<span class="id">near:</span><span class="id"> z</span>.<br/>
<span class="id">rewrite</span><span class="id"> /prop_near1</span><span class="id"> /nbhs/=</span><span class="id"> /nbhs_subspace</span><span class="id"> ifT//</span><span class="gallina-kwd"> in</span><span class="id"> xf;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> inE/=;</span><span class="id"> exact:</span><span class="id"> subset_itv_oo_cc</span><span class="id"> xab</span>.<br/>
<span class="id">case:</span><span class="id"> xf</span><span class="id"> =&gt;</span><span class="id"> x0</span><span class="id"> /=</span><span class="id"> x00</span><span class="id"> xf</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> z</span>.<br/>
<span class="id">apply:</span><span class="id"> xf</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
<span class="id">rewrite</span><span class="id"> inE;</span><span class="id"> apply:</span><span class="id"> subset_itv_oo_cc</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> z;</span><span class="id"> exact:</span><span class="id"> near_in_itvoo</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;f @`[ a , b ]&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">`[minr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>)<span class="id">,</span><span class="id"> maxr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>)<span class="id">]</span>)<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;f @`[ a , b ]&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">`[minr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>)<span class="id">,</span><span class="id"> maxr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>)<span class="id">]%classic</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;f @`] a , b [&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">`]</span>(<span class="id">minr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>))<span class="id">,</span> (<span class="id">maxr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>))<span class="id">[</span>)<span class="id"> :</span><span class="id"> ring_scope</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;f @`] a , b [&quot;</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">`]</span>(<span class="id">minr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>))<span class="id">,</span> (<span class="id">maxr</span> (<span class="id">f</span><span class="id"> a</span>) (<span class="id">f</span><span class="id"> b</span>))<span class="id">[%classic</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> image_interval</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realDomainType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">a</span><span class="id"> b</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> R</span><span class="id"> -&gt;</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mono_mem_image_segment</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> monotonous</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{homo</span><span class="id"> f</span><span class="id"> :</span><span class="id"> x</span><span class="id"> /</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &gt;-&gt;</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> f</span><span class="id"> @`[a,</span><span class="id"> b]}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [fle|fge]</span><span class="id"> x</span><span class="id"> xab;</span><span class="id"> have</span><span class="id"> leab</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> xab</span>).<br/>
&nbsp;&nbsp;<span class="id">have:</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> fle</span><span class="id"> ?bound_itvE</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case:</span><span class="id"> leP</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> fafb</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> in_itv/=</span><span class="id"> !fle</span><span class="id"> ?</span>(<span class="id">itvP</span><span class="id"> xab</span>).<br/>
<span class="id">have:</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> fge</span><span class="id"> ?bound_itvE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> case:</span><span class="id"> leP</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> fafb</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> in_itv/=</span><span class="id"> !fge</span><span class="id"> ?</span>(<span class="id">itvP</span><span class="id"> xab</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mono_mem_image_itvoo</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> monotonous</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">{homo</span><span class="id"> f</span><span class="id"> :</span><span class="id"> x</span><span class="id"> /</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> `]a,</span><span class="id"> b[</span><span class="id"> &gt;-&gt;</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> f</span><span class="id"> @`]a,</span><span class="id"> b[}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> []/[dup]</span><span class="id"> =&gt;</span><span class="id"> [/leW_mono_in|/leW_nmono_in]</span><span class="id"> flt</span><span class="id"> fle</span><span class="id"> x</span><span class="id"> xab;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> ltab</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> xab</span>).<br/>
&nbsp;&nbsp;<span class="id">have:</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> ?fle</span><span class="id"> ?bound_itvE</span><span class="id"> ?ltW</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> case:</span><span class="id"> leP</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> fafb</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> in_itv/=</span><span class="id"> ?flt</span><span class="id"> ?in_itv/=</span><span class="id"> ?</span>(<span class="id">itvP</span><span class="id"> xab,</span><span class="id"> lexx</span>).<br/>
<span class="id">have:</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &gt;=</span><span class="id"> f</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> fle</span><span class="id"> ?bound_itvE</span><span class="id"> ?ltW</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> case:</span><span class="id"> leP</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> fafb</span><span class="id"> _;</span><span class="id"> rewrite</span><span class="id"> in_itv/=</span><span class="id"> ?flt</span><span class="id"> ?in_itv/=</span><span class="id"> ?</span>(<span class="id">itvP</span><span class="id"> xab,</span><span class="id"> lexx</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mono_surj_image_segment</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monotonous</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> set_surj</span><span class="id"> `[a,</span><span class="id"> b]</span> (<span class="id">f</span><span class="id"> @`[a,</span><span class="id"> b]</span>)<span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @`</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> =</span><span class="id"> f</span><span class="id"> @`[a,</span><span class="id"> b]%classic</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> leab</span><span class="id"> fmono;</span><span class="id"> apply:</span><span class="id"> surj_image_eq</span><span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> [x</span><span class="id"> xab</span><span class="id"> &lt;-];</span><br/>
<span class="id">exact:</span><span class="id"> mono_mem_image_segment</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> inc_segment_image</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> b</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @`[a,</span><span class="id"> b]</span><span class="id"> =</span><span class="id"> `[f</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> b]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> case:</span><span class="id"> ltrP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dec_segment_image</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> f</span><span class="id"> b</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> a</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @`[a,</span><span class="id"> b]</span><span class="id"> =</span><span class="id"> `[f</span><span class="id"> b,</span><span class="id"> f</span><span class="id"> a]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> case:</span><span class="id"> ltrP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> inc_surj_image_segment</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;,</span><span class="id"> {mono</span><span class="id"> f</span><span class="id"> :</span><span class="id"> x</span><span class="id"> y</span><span class="id"> /</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> y}}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set_surj</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> `[f</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> b]</span><span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @`</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> =</span><span class="id"> `[f</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> b]%classic</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> leab</span><span class="id"> fle</span><span class="id"> f_surj;</span><span class="id"> have</span><span class="id"> fafb</span><span class="id"> :</span><span class="id"> f</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> b</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> fle</span><span class="id"> ?bound_itvE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mono_surj_image_segment</span><span class="id"> ?inc_segment_image//;</span><span class="id"> left</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dec_surj_image_segment</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;,</span><span class="id"> {mono</span><span class="id"> f</span><span class="id"> :</span><span class="id"> x</span><span class="id"> y</span><span class="id"> /~</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> y}}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set_surj</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> `[f</span><span class="id"> b,</span><span class="id"> f</span><span class="id"> a]</span><span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">f</span><span class="id"> @`</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> =</span><span class="id"> `[f</span><span class="id"> b,</span><span class="id"> f</span><span class="id"> a]%classic</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> leab</span><span class="id"> fge</span><span class="id"> f_surj;</span><span class="id"> have</span><span class="id"> fafb</span><span class="id"> :</span><span class="id"> f</span><span class="id"> b</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="id"> a</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> fge</span><span class="id"> ?bound_itvE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mono_surj_image_segment</span><span class="id"> ?dec_segment_image//;</span><span class="id"> right</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> inc_surj_image_segmentP</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;,</span><span class="id"> {mono</span><span class="id"> f</span><span class="id"> :</span><span class="id"> x</span><span class="id"> y</span><span class="id"> /</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> y}}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set_surj</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> `[f</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> b]</span><span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> y,</span><span class="id"> reflect</span> (<span class="gallina-kwd">exists2</span><span class="id"> x,</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y</span>) (<span class="id">y</span><span class="id"> \in</span><span class="id"> `[f</span><span class="id"> a,</span><span class="id"> f</span><span class="id"> b]</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /inc_surj_image_segment/[apply]/[apply]/predeqP</span><span class="id"> +</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> y</span>)<span class="id"> fab</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/</span>(<span class="id">equivP</span><span class="id"> idP</span>)<span class="id">;</span><span class="id"> symmetry</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> dec_surj_image_segmentP</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;,</span><span class="id"> {mono</span><span class="id"> f</span><span class="id"> :</span><span class="id"> x</span><span class="id"> y</span><span class="id"> /~</span><span class="id"> x</span><span class="id"> &lt;=</span><span class="id"> y}}</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set_surj</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> `[f</span><span class="id"> b,</span><span class="id"> f</span><span class="id"> a]</span><span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> y,</span><span class="id"> reflect</span> (<span class="gallina-kwd">exists2</span><span class="id"> x,</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y</span>) (<span class="id">y</span><span class="id"> \in</span><span class="id"> `[f</span><span class="id"> b,</span><span class="id"> f</span><span class="id"> a]</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /dec_surj_image_segment/[apply]/[apply]/predeqP</span><span class="id"> +</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> y</span>)<span class="id"> fab</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/</span>(<span class="id">equivP</span><span class="id"> idP</span>)<span class="id">;</span><span class="id"> symmetry</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> mono_surj_image_segmentP</span><span class="id"> a</span><span class="id"> b</span><span class="id"> f</span><span class="id"> :</span><span class="id"> a</span><span class="id"> &lt;=</span><span class="id"> b</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">monotonous</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> f</span><span class="id"> -&gt;</span><span class="id"> set_surj</span><span class="id"> `[a,</span><span class="id"> b]</span> (<span class="id">f</span><span class="id"> @`[a,</span><span class="id"> b]</span>)<span class="id"> f</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> y,</span><span class="id"> reflect</span> (<span class="gallina-kwd">exists2</span><span class="id"> x,</span><span class="id"> x</span><span class="id"> \in</span><span class="id"> `[a,</span><span class="id"> b]</span><span class="id"> &amp;</span><span class="id"> f</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y</span>) (<span class="id">y</span><span class="id"> \in</span><span class="id"> f</span><span class="id"> @`[a,</span><span class="id"> b]</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /mono_surj_image_segment/[apply]/[apply]/predeqP</span><span class="id"> +</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> y</span>)<span class="id"> fab</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/</span>(<span class="id">equivP</span><span class="id"> idP</span>)<span class="id">;</span><span class="id"> symmetry</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> image_interval</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> LinearContinuousBounded</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">R</span><span class="id"> :</span><span class="id"> numFieldType</span>) (<span class="id">V</span><span class="id"> W</span><span class="id"> :</span><span class="id"> normedModType</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> linear_boundedP</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span>)<span class="id"> :</span><span class="id"> bounded_near</span><span class="id"> f</span> (<span class="id">nbhs</span><span class="id"> 0</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="id">\forall</span><span class="id"> r</span><span class="id"> \near</span><span class="id"> +oo,</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> r</span><span class="id"> *</span><span class="id"> `|x|</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split=&gt;</span><span class="id"> [|/pinfty_ex_gt0</span><span class="id"> [r</span><span class="id"> r0</span><span class="id"> Bf]];</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/ex_bound;</span><span class="gallina-kwd"> exists</span><span class="id"> r;</span><span class="id"> apply/nbhs_norm0P;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> x</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">gtr_pMr</span><span class="id"> _</span><span class="id"> r0</span>)<span class="id"> =&gt;</span><span class="id"> /ltW;</span><span class="id"> exact/le_trans/Bf</span>.<br/>
<span class="id">rewrite</span><span class="id"> /bounded_near</span><span class="id"> =&gt;</span><span class="id"> /pinfty_ex_gt0</span><span class="id"> [M</span><span class="id"> M0</span><span class="id"> /nbhs_norm0P</span><span class="id"> [_/posnumP[e]</span><span class="id"> efM]]</span>.<br/>
<span class="id">near</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> R</span>)<span class="id">^'+</span><span class="id"> =&gt;</span><span class="id"> d;</span><span class="id"> near=&gt;</span><span class="id"> r</span><span class="id"> =&gt;</span><span class="id"> x</span>.<br/>
<span class="id">have[-&gt;|x0]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> x</span><span class="id"> 0;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> raddf0</span><span class="id"> !normr0</span><span class="id"> mulr0</span>.<br/>
<span class="id">have</span><span class="id"> nd0</span><span class="id"> :</span><span class="id"> d</span><span class="id"> /</span><span class="id"> `|x|</span><span class="id"> &gt;</span><span class="id"> 0</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> divr_gt0</span><span class="id"> ?normr_gt0</span>.<br/>
<span class="id">have:</span><span class="id"> `|f</span> (<span class="id">d</span><span class="id"> /</span><span class="id"> `|x|</span><span class="id"> *:</span><span class="id"> x</span>)<span class="id">|</span><span class="id"> &lt;=</span><span class="id"> M</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> efM</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="id"> rewrite</span><span class="id"> normrZ</span><span class="id"> gtr0_norm//</span><span class="id"> divfK</span><span class="id"> ?normr_eq0//</span>.<br/>
<span class="id">rewrite</span><span class="id"> linearZ/=</span><span class="id"> normrZ</span><span class="id"> gtr0_norm//</span><span class="id"> -ler_pdivlMl//;</span><span class="id"> move/le_trans;</span><span class="id"> apply</span>.<br/>
<span class="id">rewrite</span><span class="id"> invfM</span><span class="id"> invrK</span><span class="id"> mulrAC</span><span class="id"> ler_wpM2r//;</span><span class="id"> near:</span><span class="id"> r;</span><span class="id"> apply:</span><span class="id"> nbhs_pinfty_ge</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> rpredM//</span><span class="id"> ?rpredV</span><span class="id"> ?gtr0_real</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuous_linear_bounded</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> V</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> 0,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> bounded_near</span><span class="id"> f</span> (<span class="id">nbhs</span><span class="id"> x</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /prop_for/continuous_at</span><span class="id"> linear0</span><span class="id"> /bounded_near</span><span class="id"> =&gt;</span><span class="id"> f0</span>.<br/>
<span class="id">near=&gt;</span><span class="id"> M;</span><span class="id"> apply/nbhs0P</span>.<br/>
<span class="id">near</span><span class="id"> do</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> linearD</span> (<span class="id">le_trans</span> (<span class="id">ler_normD</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> -lerBrDl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> cvgr0_norm_le;</span><span class="id"> rewrite</span><span class="id"> //</span><span class="id"> subr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_linear_continuous</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_near</span><span class="id"> f</span> (<span class="id">nbhs</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>))<span class="id"> -&gt;</span><span class="id"> continuous</span><span class="id"> f</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> /linear_boundedP</span><span class="id"> [y</span><span class="id"> [yreal</span><span class="id"> fr]]</span><span class="id"> x;</span><span class="id"> near</span><span class="id"> +oo_R</span><span class="id"> =&gt;</span><span class="id"> r</span>.<br/>
<span class="id">apply/</span>(<span class="id">@cvgrPdist_lt</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">nbhs</span><span class="id"> x</span>))<span class="id"> =&gt;</span><span class="id"> e</span><span class="id"> e_gt0;</span><span class="id"> near=&gt;</span><span class="id"> z;</span><span class="id"> rewrite</span><span class="id"> -linearB</span>.<br/>
<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">fr</span><span class="id"> r</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> -?ltr_pdivlMl//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> near:</span><span class="id"> z;</span><span class="id"> apply:</span><span class="id"> cvgr_dist_lt</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> mulrC</span><span class="id"> divr_gt0</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> __deprecated__linear_bounded0</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_near</span><span class="id"> f</span> (<span class="id">nbhs</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>))<span class="id"> -&gt;</span><span class="id"> {for</span><span class="id"> 0,</span><span class="id"> continuous</span><span class="id"> f}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> exact:</span><span class="id"> bounded_linear_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> continuousfor0_continuous</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{for</span><span class="id"> 0,</span><span class="id"> continuous</span><span class="id"> f}</span><span class="id"> -&gt;</span><span class="id"> continuous</span><span class="id"> f</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /continuous_linear_bounded/bounded_linear_continuous</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> linear_bounded_continuous</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">bounded_near</span><span class="id"> f</span> (<span class="id">nbhs</span><span class="id"> 0</span>)<span class="id"> &lt;-&gt;</span><span class="id"> continuous</span><span class="id"> f</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> bounded_linear_continuous</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_<span class="id"> 0</span>)<span class="id">;</span><span class="id"> exact:</span><span class="id"> continuous_linear_bounded</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> bounded_funP</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> {linear</span><span class="id"> V</span><span class="id"> -&gt;</span><span class="id"> W}</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> r,</span><span class="gallina-kwd"> exists</span><span class="id"> M,</span><span class="gallina-kwd"> forall</span><span class="id"> x,</span><span class="id"> `|x|</span><span class="id"> &lt;=</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> `|f</span><span class="id"> x|</span><span class="id"> &lt;=</span><span class="id"> M</span>)<span class="id"> &lt;-&gt;</span><br/>
&nbsp;&nbsp;<span class="id">bounded_near</span><span class="id"> f</span> (<span class="id">nbhs</span> (<span class="id">0</span><span class="id"> :</span><span class="id"> V</span>)).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">split</span><span class="id"> =&gt;</span><span class="id"> [/</span>(_<span class="id"> 1</span>)<span class="id"> [M</span><span class="id"> Bf]|/linear_boundedP</span><span class="id"> fr</span><span class="id"> y]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/ex_bound;</span><span class="gallina-kwd"> exists</span><span class="id"> M;</span><span class="id"> apply/nbhs_normP</span><span class="id"> =&gt;</span><span class="id"> /=;</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> //=</span><span class="id"> x</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> sub0r</span><span class="id"> normrN</span><span class="id"> =&gt;</span><span class="id"> x1;</span><span class="id"> exact/Bf/ltW</span>.<br/>
<span class="id">near</span><span class="id"> +oo_R</span><span class="id"> =&gt;</span><span class="id"> r;</span><span class="gallina-kwd"> exists</span> (<span class="id">r</span><span class="id"> *</span><span class="id"> y</span>)<span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> xe</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">r</span><span class="id"> *</span><span class="id"> `|x|</span>))<span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move:</span><span class="id"> {xe}</span><span class="id"> x;</span><span class="id"> near:</span><span class="id"> r</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_pM</span>.<br/>
<span class="id">Unshelve</span>.<span class="id"> all:</span><span class="gallina-kwd"> by</span><span class="id"> end_near</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> LinearContinuousBounded</span>.<br/>
<span class="id">#[deprecated</span>(<span class="id">since=</span><span class="id">&quot;mathcomp-analysis 0.6.0&quot;</span><span class="id">,</span><br/>
&nbsp;&nbsp;<span class="id">note=</span><span class="id">&quot;generalized to `bounded_linear_continuous`&quot;</span>)<span class="id">]</span><br/>
<span class="vernacular">Notation</span><span class="id"> linear_bounded0</span><span class="id"> :=</span><span class="id"> __deprecated__linear_bounded0</span> (<span class="id">only</span><span class="id"> parsing</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> center_radius</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> numDomainType}</span><span class="id"> {M</span><span class="id"> :</span><span class="id"> pseudoPMetricType</span><span class="id"> R}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> M</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> cpoint</span><span class="id"> A</span><span class="id"> :=</span><span class="id"> get</span><span class="id"> [set</span><span class="id"> c</span><span class="id"> |</span><span class="gallina-kwd"> exists</span><span class="id"> r,</span><span class="id"> A</span><span class="id"> =</span><span class="id"> ball</span><span class="id"> c</span><span class="id"> r]</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> radius</span><span class="id"> A</span><span class="id"> :</span><span class="id"> {nonneg</span><span class="id"> R}</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">xget</span><span class="id"> 0%:nng</span><span class="id"> [set</span><span class="id"> r</span><span class="id"> |</span><span class="id"> A</span><span class="id"> =</span><span class="id"> ball</span> (<span class="id">cpoint</span><span class="id"> A</span>)<span class="id"> r%:num]</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> :=</span><span class="id"> A</span><span class="id"> ==</span><span class="id"> ball</span> (<span class="id">cpoint</span><span class="id"> A</span>) (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> scale_ball</span> (<span class="id">k</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> A</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">if</span><span class="id"> is_ball</span><span class="id"> A</span><span class="gallina-kwd"> then</span><span class="id"> ball</span> (<span class="id">cpoint</span><span class="id"> A</span>) (<span class="id">k</span><span class="id"> *</span> (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span>)<span class="gallina-kwd"> else</span><span class="id"> set0</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span> <span class="id">&quot;k *` B&quot;</span><span class="id"> :=</span> (<span class="id">scale_ball</span><span class="id"> k</span><span class="id"> B</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub_scale_ball</span><span class="id"> A</span><span class="id"> k</span><span class="id"> l</span><span class="id"> :</span><span class="id"> k</span><span class="id"> &lt;=</span><span class="id"> l</span><span class="id"> -&gt;</span><span class="id"> k</span><span class="id"> *`</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> l</span><span class="id"> *`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> kl;</span><span class="id"> rewrite</span><span class="id"> /scale_ball;</span><span class="id"> case:</span><span class="id"> ifPn=&gt;</span><span class="id"> [Aball|_];</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> subset_refl</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> le_ball;</span><span class="id"> rewrite</span><span class="id"> ler_wpM2r</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> scale_ball1</span><span class="id"> A</span><span class="id"> :</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> 1</span><span class="id"> *`</span><span class="id"> A</span><span class="id"> =</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Aball;</span><span class="id"> rewrite</span><span class="id"> /scale_ball</span><span class="id"> Aball</span><span class="id"> mul1r;</span><span class="id"> move/eqP</span><span class="gallina-kwd"> in</span><span class="id"> Aball</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> sub1_scale_ball</span><span class="id"> A</span><span class="id"> l</span><span class="id"> :</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> `&lt;=`</span><span class="id"> l</span>.<span class="id">+1%:R</span><span class="id"> *`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move/scale_ball1</span><span class="id"> =&gt;</span><span class="id"> {1}&lt;-;</span><span class="id"> apply:</span><span class="id"> sub_scale_ball;</span><span class="id"> rewrite</span><span class="id"> ler1n</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> center_radius</span>.<br/>
<span class="vernacular">Notation</span> <span class="id">&quot;k *` B&quot;</span><span class="id"> :=</span> (<span class="id">scale_ball</span><span class="id"> k</span><span class="id"> B</span>)<span class="id"> :</span><span class="id"> classical_set_scope</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> scale_ball0</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> r</span><span class="id"> :</span> (<span class="id">r</span><span class="id"> &lt;=</span><span class="id"> 0</span>)<span class="id">%R</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">r</span><span class="id"> *`</span><span class="id"> A</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0;</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span>.<br/>
<span class="id">rewrite</span><span class="id"> /scale_ball;</span><span class="id"> case:</span><span class="id"> ifPn</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> ballA</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> ((<span class="id">ball0</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2</span><span class="id"> _</span>)<span class="id">//</span><span class="id"> mulr_le0_ge0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> center_radius_realFieldType</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realFieldType}</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> x</span><span class="id"> y</span><span class="id"> r</span><span class="id"> s</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> ball_inj_radius_gt0</span><span class="id"> x</span><span class="id"> y</span><span class="id"> r</span><span class="id"> s</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> ball</span><span class="id"> y</span><span class="id"> s</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> s</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0</span><span class="id"> xrys;</span><span class="id"> rewrite</span><span class="id"> ltNge;</span><span class="id"> apply/negP</span><span class="id"> =&gt;</span><span class="id"> /ball0</span><span class="id"> s0;</span><span class="id"> move:</span><span class="id"> xrys</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> s0</span><span class="id"> =&gt;</span><span class="id"> /seteqP[+</span><span class="id"> _]</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> x</span>)<span class="id">;</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> ballxx</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> ball_inj_center</span><span class="id"> x</span><span class="id"> y</span><span class="id"> r</span><span class="id"> s</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> ball</span><span class="id"> y</span><span class="id"> s</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0</span><span class="id"> xrys;</span><span class="id"> have</span><span class="id"> s0</span><span class="id"> :=</span><span class="id"> ball_inj_radius_gt0</span><span class="id"> r0</span><span class="id"> xrys</span>.<br/>
<span class="id">apply/eqP/negPn/negP</span><span class="id"> =&gt;</span><span class="id"> xy</span>.<br/>
<span class="id">wlog</span><span class="id"> :</span><span class="id"> x</span><span class="id"> y</span><span class="id"> r</span><span class="id"> s</span><span class="id"> xrys</span><span class="id"> r0</span><span class="id"> s0</span><span class="id"> xy</span><span class="id"> /</span><span class="id"> x</span><span class="id"> &lt;</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;<span class="id">move:</span><span class="id"> xy;</span><span class="id"> rewrite</span><span class="id"> neq_lt</span><span class="id"> =&gt;</span><span class="id"> /orP[xy|yx]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> xrys</span>)<span class="id">;</span><span class="id"> apply</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> lt_eqF</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/esym</span><span class="id"> :</span><span class="id"> xrys</span><span class="id"> =&gt;</span><span class="id"> /[swap]</span><span class="id"> /[apply];</span><span class="id"> apply</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> lt_eqF</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> {}xy;</span><span class="id"> have</span><span class="id"> [rs|sr]</span><span class="id"> :=</span><span class="id"> ltP</span><span class="id"> r</span><span class="id"> s</span>.<br/>
<span class="id">-</span><span class="id"> suff</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span> (<span class="id">y</span><span class="id"> +</span><span class="id"> r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply;</span><span class="id"> rewrite</span><span class="id"> xrys</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> !ltrD2l</span><span class="id"> -ltr_norml</span><span class="id"> gtr0_norm</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> ltrD2r</span> (<span class="id">ltNge</span><span class="id"> y</span>) (<span class="id">ltW</span><span class="id"> xy</span>)<span class="id"> andbF</span>.<br/>
<span class="id">-</span><span class="id"> suff</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> ball</span><span class="id"> y</span><span class="id"> s</span> (<span class="id">x</span><span class="id"> -</span><span class="id"> r</span><span class="id"> +</span><span class="id"> minr</span> ((<span class="id">y</span><span class="id"> -</span><span class="id"> x</span>)<span class="id"> /</span><span class="id"> 2</span>)<span class="id"> r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply;</span><span class="id"> rewrite</span><span class="id"> -xrys</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> ltrDl</span><span class="id"> lt_min</span><span class="id"> r0</span><span class="id"> andbT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> divr_gt0</span><span class="id"> ?subr_gt0//=</span><span class="id"> addrAC</span><span class="id"> ltrBlDl</span><span class="id"> addrCA</span><span class="id"> ler_ltD//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> gt_min</span><span class="id"> ltrDl</span><span class="id"> r0</span><span class="id"> orbT</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [yx2r|ryx2]</span><span class="id"> :=</span><span class="id"> ltP</span> ((<span class="id">y</span><span class="id"> -</span><span class="id"> x</span>)<span class="id"> /</span><span class="id"> 2</span>)<span class="id"> r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> =&gt;</span><span class="id"> /andP[+</span><span class="id"> _];</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">@ltr_pM2l</span><span class="id"> _</span><span class="id"> 2</span>)<span class="id">//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> !mulrDr</span><span class="id"> mulrCA</span><span class="id"> divff//</span><span class="id"> mulr1</span><span class="id"> ltNge</span><span class="id"> =&gt;</span><span class="id"> /negP;</span><span class="id"> apply</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> addrAC</span><span class="id"> !addrA</span> (<span class="id">addrC</span><span class="id"> _</span><span class="id"> y</span>)<span class="id"> mulr_natl</span><span class="id"> mulr2n</span><span class="id"> addrA</span><span class="id"> addrK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">mulr_natl</span><span class="id"> y</span>)<span class="id"> mulr2n</span><span class="id"> -!addrA</span><span class="id"> lerD2l</span> (<span class="id">lerD</span> (<span class="id">ltW</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ler_wpM2l//</span><span class="id"> lerNl</span><span class="id"> opprK</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> subrK</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> =&gt;</span><span class="id"> /andP[]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ltrBlDl</span><span class="id"> addrC</span><span class="id"> -ltrBlDl</span><span class="id"> -</span>(<span class="id">@ltr_pM2r</span><span class="id"> _</span> (<span class="id">2^-1</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /le_lt_trans</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> ryx2</span>)<span class="id"> /le_lt_trans</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> sr</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltr_pMr//</span><span class="id"> invf_gt1//</span><span class="id"> ltNge</span><span class="id"> ler1n</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Let</span><span class="id"> ball_inj_radius</span><span class="id"> x</span><span class="id"> y</span><span class="id"> r</span><span class="id"> s</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> ball</span><span class="id"> y</span><span class="id"> s</span><span class="id"> -&gt;</span><span class="id"> r</span><span class="id"> =</span><span class="id"> s</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0</span><span class="id"> xrys;</span><span class="id"> have</span><span class="id"> s0</span><span class="id"> :=</span><span class="id"> ball_inj_radius_gt0</span><span class="id"> r0</span><span class="id"> xrys</span>.<br/>
<span class="id">move:</span> (<span class="id">xrys</span>)<span class="id">;</span><span class="id"> rewrite</span> (<span class="id">ball_inj_center</span><span class="id"> r0</span><span class="id"> xrys</span>)<span class="id"> =&gt;</span><span class="id"> {}xrys</span>.<br/>
<span class="id">apply/eqP/negPn/negP;</span><span class="id"> rewrite</span><span class="id"> neq_lt</span><span class="id"> =&gt;</span><span class="id"> /orP[rs|sr]</span>.<br/>
<span class="id">-</span><span class="id"> suff</span><span class="id"> :</span><span class="id"> ball</span><span class="id"> y</span><span class="id"> s</span> (<span class="id">y</span><span class="id"> +</span><span class="id"> r</span>)<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> -xrys</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> ltxx</span><span class="id"> andbF</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> !ltrD2l</span><span class="id"> rs</span><span class="id"> andbT</span> (<span class="id">lt_trans</span><span class="id"> _</span><span class="id"> r0</span>)<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltrNl</span><span class="id"> oppr0</span> (<span class="id">lt_trans</span><span class="id"> r0</span>).<br/>
<span class="id">-</span><span class="id"> suff</span><span class="id"> :</span><span class="id"> ball</span><span class="id"> y</span><span class="id"> r</span> (<span class="id">y</span><span class="id"> +</span><span class="id"> s</span>)<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> xrys</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> ltxx</span><span class="id"> andbF</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /ball/=</span><span class="id"> ltr_distlC</span><span class="id"> !ltrD2l</span><span class="id"> sr</span><span class="id"> andbT</span> (<span class="id">lt_trans</span><span class="id"> _</span><span class="id"> s0</span>)<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ltrNl</span><span class="id"> oppr0</span> (<span class="id">lt_trans</span><span class="id"> s0</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ball_inj</span><span class="id"> x</span><span class="id"> y</span><span class="id"> r</span><span class="id"> s</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> ball</span><span class="id"> y</span><span class="id"> s</span><span class="id"> -&gt;</span><span class="id"> x</span><span class="id"> =</span><span class="id"> y</span><span class="id"> /\</span><span class="id"> r</span><span class="id"> =</span><span class="id"> s</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> r0</span><span class="id"> xrys;</span><span class="id"> split;</span><span class="id"> [exact:</span> (<span class="id">ball_inj_center</span><span class="id"> r0</span><span class="id"> xrys</span>)<span class="id">|</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span> (<span class="id">ball_inj_radius</span><span class="id"> r0</span><span class="id"> xrys</span>)<span class="id">]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> radius0</span><span class="id"> :</span><span class="id"> radius</span> (<span class="id">@set0</span><span class="id"> R</span>)<span class="id"> =</span><span class="id"> 0%:nng</span><span class="id"> :&gt;</span><span class="id"> {nonneg</span><span class="id"> R}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /radius/=;</span><span class="id"> case:</span><span class="id"> xgetP</span><span class="id"> =&gt;</span><span class="id"> [r</span><span class="id"> _</span><span class="id"> /=</span><span class="id"> /esym/ball0</span><span class="id"> r0|]/=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/val_inj/eqP;</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> eq_le</span><span class="id"> r0/=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_<span class="id"> 0%:nng</span>)<span class="id"> /nesym</span><span class="id"> /ball0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_ball0</span><span class="id"> :</span><span class="id"> is_ball</span> (<span class="id">@set0</span><span class="id"> R</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /is_ball;</span><span class="id"> apply/eqP/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x;</span><span class="id"> rewrite</span><span class="id"> radius0/=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">ball0</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cpoint_ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span><span class="id"> -&gt;</span><span class="id"> cpoint</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span>)<span class="id"> =</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> r0;</span><span class="id"> rewrite</span><span class="id"> /cpoint;</span><span class="id"> case:</span><span class="id"> xgetP</span><span class="id"> =&gt;</span><span class="id"> [y</span><span class="id"> _</span><span class="id"> [s]</span><span class="id"> /</span>(<span class="id">ball_inj</span><span class="id"> r0</span>)<span class="id">[]//|]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_<span class="id"> x</span>)<span class="id">/forallNP/</span>(_<span class="id"> r</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> radius_ball_num</span><span class="id"> x</span><span class="id"> r</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> r</span><span class="id"> -&gt;</span> (<span class="id">radius</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span>))<span class="id">%:num</span><span class="id"> =</span><span class="id"> r</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> le_eqVlt</span><span class="id"> =&gt;</span><span class="id"> /orP[/eqP</span><span class="id"> &lt;-|r0];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">ball0</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2//</span><span class="id"> radius0</span>.<br/>
<span class="id">rewrite</span><span class="id"> /radius;</span><span class="id"> case:</span><span class="id"> xgetP</span><span class="id"> =&gt;</span><span class="id"> [y</span><span class="id"> _</span><span class="id"> /</span>(<span class="id">ball_inj</span><span class="id"> r0</span>)<span class="id">[]//|]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /</span>(_ (<span class="id">NngNum</span> (<span class="id">ltW</span><span class="id"> r0</span>)))<span class="id">/=;</span><span class="id"> rewrite</span><span class="id"> cpoint_ball</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> radius_ball</span><span class="id"> x</span><span class="id"> r</span> (<span class="id">r0</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> r</span>)<span class="id"> :</span><span class="id"> radius</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span>)<span class="id"> =</span><span class="id"> NngNum</span><span class="id"> r0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/val_inj</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span><span class="id"> radius_ball_num</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_ballP</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> x</span><span class="id"> :</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> `|cpoint</span><span class="id"> A</span><span class="id"> -</span><span class="id"> x|</span><span class="id"> &lt;</span> (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /is_ball</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> {1}-&gt;</span><span class="id"> /lt_le_trans;</span><span class="id"> exact</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_ball_ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> :</span><span class="id"> is_ball</span> (<span class="id">ball</span><span class="id"> x</span><span class="id"> r</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [r0|/ball0</span><span class="id"> -&gt;]</span><span class="id"> :=</span><span class="id"> ltP</span><span class="id"> 0</span><span class="id"> r;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> is_ball0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply/eqP;</span><span class="id"> rewrite</span><span class="id"> cpoint_ball//</span> (<span class="id">radius_ball</span><span class="id"> _</span> (<span class="id">ltW</span><span class="id"> r0</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> scale_ball_set0</span> (<span class="id">k</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> k</span><span class="id"> *`</span><span class="id"> set0</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> :&gt;</span><span class="id"> set</span><span class="id"> R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /scale_ball</span><span class="id"> is_ball0//</span><span class="id"> radius0/=</span><span class="id"> mulr0</span><span class="id"> ball0</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ballE</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> =</span><span class="id"> ball</span> (<span class="id">cpoint</span><span class="id"> A</span>) (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ballA;</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [x</span><span class="id"> /is_ballP|x</span><span class="id"> Ax];</span><span class="id"> first</span><span class="id"> exact</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> ballA</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> -&gt;</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_ball_closureP</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> x</span><span class="id"> :</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">closure</span><span class="id"> A</span><span class="id"> x</span><span class="id"> -&gt;</span><span class="id"> `|cpoint</span><span class="id"> A</span><span class="id"> -</span><span class="id"> x|</span><span class="id"> &lt;=</span> (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> ballP</span><span class="id"> cAx</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> closed_ball</span> (<span class="id">cpoint</span><span class="id"> A</span>) (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span><span class="id"> x</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /closed_ball</span><span class="id"> -ballE</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [r0|r0]</span><span class="id"> :=</span><span class="id"> ltP</span><span class="id"> 0</span> (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num;</span><span class="id"> [rewrite</span><span class="id"> closed_ballE|</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> closed_ball0]</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_ball_closure</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">closure</span><span class="id"> A</span><span class="id"> =</span><span class="id"> closed_ball</span> (<span class="id">cpoint</span><span class="id"> A</span>) (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> ballA;</span><span class="id"> rewrite</span><span class="id"> /closed_ball</span><span class="id"> -ballE</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> closure_ball</span> (<span class="id">c</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> closure</span> (<span class="id">ball</span><span class="id"> c</span><span class="id"> r</span>)<span class="id"> =</span><span class="id"> closed_ball</span><span class="id"> c</span><span class="id"> r</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [r0|r0]</span><span class="id"> :=</span><span class="id"> leP</span><span class="id"> r</span><span class="id"> 0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> closed_ball0//</span> ((<span class="id">ball0</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2</span><span class="id"> r0</span>)<span class="id"> closure0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">is_ball_closure</span> (<span class="id">is_ball_ball</span><span class="id"> _</span><span class="id"> _</span>))<span class="id"> cpoint_ball//</span><span class="id"> radius_ball</span><span class="id"> ?ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> scale_ballE</span><span class="id"> k</span><span class="id"> x</span><span class="id"> r</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> k</span><span class="id"> *`</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> r</span><span class="id"> =</span><span class="id"> ball</span><span class="id"> x</span> (<span class="id">k</span><span class="id"> *</span><span class="id"> r</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> k0;</span><span class="id"> have</span><span class="id"> [r0|r0]</span><span class="id"> :=</span><span class="id"> ltP</span><span class="id"> 0</span><span class="id"> r</span>.<br/>
&nbsp;&nbsp;<span class="id">apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /scale_ball</span><span class="id"> is_ball_ball//=</span><span class="id"> cpoint_ball//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">radius_ball_num</span><span class="id"> _</span> (<span class="id">ltW</span><span class="id"> _</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /scale_ball</span><span class="id"> is_ball_ball</span><span class="id"> cpoint_ball//</span><span class="id"> radius_ball_num//</span><span class="id"> ltW</span>.<br/>
<span class="id">rewrite</span> ((<span class="id">ball0</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2</span><span class="id"> r0</span>)<span class="id"> scale_ball_set0;</span><span class="id"> apply/esym/ball0</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mulr_ge0_le0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cpoint_scale_ball</span><span class="id"> A</span> (<span class="id">k</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;</span> (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">cpoint</span> (<span class="id">k</span><span class="id"> *`</span><span class="id"> A</span>)<span class="id"> =</span><span class="id"> cpoint</span><span class="id"> A</span><span class="id"> :&gt;</span><span class="id"> R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> k0</span><span class="id"> ballA</span><span class="id"> r0</span>.<br/>
<span class="id">rewrite</span><span class="id"> [in</span><span class="id"> LHS]</span>(<span class="id">ballE</span><span class="id"> ballA</span>) (<span class="id">scale_ballE</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">ltW</span><span class="id"> k0</span>))<span class="id">//</span><span class="id"> cpoint_ball//</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> mulr_gt0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> radius_scale_ball</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> k</span><span class="id"> -&gt;</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;(<span class="id">radius</span> (<span class="id">k</span><span class="id"> *`</span><span class="id"> A</span>))<span class="id">%:num</span><span class="id"> =</span><span class="id"> k</span><span class="id"> *</span> (<span class="id">radius</span><span class="id"> A</span>)<span class="id">%:num</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> k0</span><span class="id"> ballA</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> [in</span><span class="id"> LHS]</span>(<span class="id">ballE</span><span class="id"> ballA</span>) (<span class="id">scale_ballE</span><span class="id"> _</span><span class="id"> _</span><span class="id"> k0</span>)<span class="id">//</span><span class="id"> radius_ball//</span><span class="id"> mulr_ge0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> is_scale_ball</span> (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>) (<span class="id">k</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> is_ball</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> is_ball</span> (<span class="id">k</span><span class="id"> *`</span><span class="id"> A</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Aball</span>.<br/>
<span class="id">have</span><span class="id"> [k0|k0]</span><span class="id"> :=</span><span class="id"> leP</span><span class="id"> 0</span><span class="id"> k</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">ballE</span><span class="id"> Aball</span>) (<span class="id">scale_ballE</span><span class="id"> _</span><span class="id"> _</span><span class="id"> k0</span>)<span class="id">;</span><span class="id"> exact:</span><span class="id"> is_ball_ball</span>.<br/>
<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> _</span><span class="id"> *`</span><span class="id"> _</span><span class="id"> =</span><span class="id"> set0</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> is_ball0</span>.<br/>
<span class="id">apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /scale_ball</span><span class="id"> Aball</span> (<span class="id">ball0</span><span class="id"> _</span><span class="id"> _</span>).<span class="id">2//</span><span class="id"> nmulr_rle0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> center_radius_realFieldType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> vitali_lemma_finite</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {I</span><span class="id"> :</span><span class="id"> eqType}</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">B</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> R</span>).<br/>
<span class="vernacular">Hypothesis</span><span class="id"> is_ballB</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> is_ball</span> (<span class="id">B</span><span class="id"> i</span>).<br/>
<span class="vernacular">Hypothesis</span><span class="id"> B_set0</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> B</span><span class="id"> i</span><span class="id"> !=set0</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> vitali_lemma_finite</span> (<span class="id">s</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> I</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{</span><span class="id"> D</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> I</span><span class="id"> |</span><span class="id"> [/\</span><span class="id"> uniq</span><span class="id"> D,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{subset</span><span class="id"> D</span><span class="id"> &lt;=</span><span class="id"> s},</span><span class="id"> trivIset</span><span class="id"> [set`</span><span class="id"> D]</span><span class="id"> B</span><span class="id"> &amp;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> i</span><span class="id"> \in</span><span class="id"> s</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> j,</span><span class="id"> [/\</span><span class="id"> j</span><span class="id"> \in</span><span class="id"> D,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">B</span><span class="id"> i</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> j</span><span class="id"> !=set0,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">radius</span> (<span class="id">B</span><span class="id"> j</span>)<span class="id"> &gt;=</span><span class="id"> radius</span> (<span class="id">B</span><span class="id"> i</span>)<span class="id"> &amp;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">B</span><span class="id"> i</span><span class="id"> `&lt;=`</span><span class="id"> 3</span><span class="id"> *`</span><span class="id"> B</span><span class="id"> j]</span><span class="id"> ]</span><span class="id"> }</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">pose</span><span class="id"> LE</span><span class="id"> x</span><span class="id"> y</span><span class="id"> :=</span><span class="id"> radius</span> (<span class="id">B</span><span class="id"> x</span>)<span class="id"> &lt;=</span><span class="id"> radius</span> (<span class="id">B</span><span class="id"> y</span>).<br/>
<span class="id">have</span><span class="id"> LE_trans</span><span class="id"> :</span><span class="id"> transitive</span><span class="id"> LE</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> y</span><span class="id"> z;</span><span class="id"> exact:</span><span class="id"> le_trans</span>.<br/>
<span class="id">wlog</span><span class="id"> :</span><span class="id"> s</span><span class="id"> /</span><span class="id"> sorted</span><span class="id"> LE</span><span class="id"> s</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> sorted</span><span class="id"> LE</span> (<span class="id">sort</span><span class="id"> LE</span><span class="id"> s</span>)<span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> sort_sorted</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> y;</span><span class="id"> exact:</span><span class="id"> le_total</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /[swap]</span><span class="id"> /[apply]</span><span class="id"> -[D</span><span class="id"> [uD</span><span class="id"> Ds</span><span class="id"> trivIset_DB</span><span class="id"> H]];</span><span class="gallina-kwd"> exists</span><span class="id"> D;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> /Ds;</span><span class="id"> rewrite</span><span class="id"> mem_sort</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">mem_sort</span><span class="id"> LE</span>)<span class="id"> =&gt;</span><span class="id"> /H</span>.<br/>
<span class="id">elim:</span><span class="id"> s</span><span class="id"> =&gt;</span><span class="id"> [_|i</span><span class="id"> [/=</span><span class="id"> _</span><span class="id"> _|j</span><span class="id"> t]];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> nil</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> [::</span><span class="id"> i];</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> set_cons1;</span><span class="id"> exact:</span><span class="id"> trivIset1</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> _</span><span class="id"> /[1!inE]</span><span class="id"> /eqP</span><span class="id"> -&gt;;</span><span class="gallina-kwd"> exists</span><span class="id"> i;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> mem_head</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> setIid;</span><span class="id"> exact:</span><span class="id"> B_set0</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> exact:</span><span class="id"> sub1_scale_ball</span>.<br/>
<span class="id">rewrite</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> +</span><span class="id"> /andP[ij</span><span class="id"> jt]</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> jt</span>)<span class="id">[u</span><span class="id"> [uu</span><span class="id"> ujt</span><span class="id"> trivIset_uB</span><span class="id"> H]]</span>.<br/>
<span class="id">have</span><span class="id"> [K|]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="gallina-kwd">forall</span><span class="id"> j,</span><span class="id"> j</span><span class="id"> \in</span><span class="id"> u</span><span class="id"> -&gt;</span><span class="id"> B</span><span class="id"> j</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> i</span><span class="id"> =</span><span class="id"> set0</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [iu|iu]</span><span class="id"> :=</span><span class="id"> boolP</span> (<span class="id">i</span><span class="id"> \in</span><span class="id"> u</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> u;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> /ujt</span><span class="id"> xjt;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> xjt</span><span class="id"> orbT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> k</span><span class="id"> /[1!inE]</span><span class="id"> /predU1P[-&gt;{k}|]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> i;</span><span class="id"> split;</span><span class="id"> [by</span><span class="id"> []|</span><span class="id"> |exact:</span><span class="id"> lexx|]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> setIid;</span><span class="id"> exact:</span><span class="id"> B_set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> sub1_scale_ball</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/H</span><span class="id"> =&gt;</span><span class="id"> [l</span><span class="id"> [lu</span><span class="id"> lk0</span><span class="id"> kl</span><span class="id"> k3l]];</span><span class="gallina-kwd"> exists</span><span class="id"> l;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> lu</span><span class="id"> orbT</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">i</span><span class="id"> ::</span><span class="id"> u</span>)<span class="id">;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> iu</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> /[1!inE]</span><span class="id"> /predU1P[-&gt;|];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> mem_head</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/ujt</span><span class="id"> =&gt;</span><span class="id"> xjt;</span><span class="id"> rewrite</span><span class="id"> in_cons</span><span class="id"> xjt</span><span class="id"> orbT</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> k</span><span class="id"> l</span><span class="id"> /=</span><span class="id"> /[1!inE]</span><span class="id"> /predU1P[-&gt;{k}|ku]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /predU1P[-&gt;{j}//|js]</span><span class="id"> /set0P;</span><span class="id"> rewrite</span><span class="id"> setIC</span><span class="id"> K//</span><span class="id"> eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> /predU1P[-&gt;{l}</span><span class="id"> /set0P|lu];</span><span class="id"> [rewrite</span><span class="id"> K//</span><span class="id"> eqxx|exact:</span><span class="id"> trivIset_uB]</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> k</span><span class="id"> /[1!inE]</span><span class="id"> /predU1P[-&gt;{k}|]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> i;</span><span class="id"> split;</span><span class="id"> [by</span><span class="id"> rewrite</span><span class="id"> mem_head|</span><span class="id"> |exact:</span><span class="id"> lexx|]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> setIid;</span><span class="id"> exact:</span><span class="id"> B_set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> sub1_scale_ball</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/H</span><span class="id"> =&gt;</span><span class="id"> [l</span><span class="id"> [lu</span><span class="id"> lk0</span><span class="id"> kl</span><span class="id"> k3l]];</span><span class="gallina-kwd"> exists</span><span class="id"> l;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> lu</span><span class="id"> orbT</span>.<br/>
<span class="id">move/existsNP/cid</span><span class="id"> =&gt;</span><span class="id"> [k</span><span class="id"> /not_implyP[ku</span><span class="id"> /eqP/set0P</span><span class="id"> ki0]]</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> u;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> l</span><span class="id"> /ujt</span><span class="id"> /[!inE]</span><span class="id"> /predU1P[-&gt;|-&gt;];</span><span class="id"> rewrite</span><span class="id"> ?eqxx</span><span class="id"> ?orbT</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> _</span><span class="id"> /[1!inE]</span><span class="id"> /predU1P[-&gt;|/H//];</span><span class="gallina-kwd"> exists</span><span class="id"> k;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> ku|</span><span class="id"> |</span><span class="id"> |]</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> setIC</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span> (<span class="id">le_trans</span><span class="id"> ij</span>)<span class="id">;</span><span class="id"> move/ujt</span><span class="id"> :</span><span class="id"> ku</span><span class="id"> =&gt;</span><span class="id"> /[1!inE]</span><span class="id"> /predU1P[&lt;-|kt]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> lexx</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /allP</span><span class="id"> :=</span><span class="id"> order_path_min</span><span class="id"> LE_trans</span><span class="id"> jt;</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> kt</span>.<br/>
<span class="id">-</span><span class="id"> case:</span><span class="id"> ki0</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> [Bkx</span><span class="id"> Bix]</span><span class="id"> y</span><span class="id"> =&gt;</span><span class="id"> iy</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">ballE</span> (<span class="id">is_ballB</span><span class="id"> k</span>))<span class="id"> scale_ballE//</span><span class="id"> /ball/=</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">subrK</span><span class="id"> x</span><span class="id"> y</span>)<span class="id"> -</span>(<span class="id">addrC</span><span class="id"> x</span>)<span class="id"> opprD</span><span class="id"> addrA</span><span class="id"> opprB</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_normD</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> -nat1r</span><span class="id"> mulrDl</span><span class="id"> mul1r</span><span class="id"> mulr_natl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">ltrD</span> (<span class="id">is_ballP</span> (<span class="id">is_ballB</span><span class="id"> k</span>)<span class="id"> _</span>))<span class="id">//</span><span class="id"> -</span>(<span class="id">subrK</span> (<span class="id">cpoint</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id"> y</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">addrC</span> (<span class="id">cpoint</span> (<span class="id">B</span><span class="id"> i</span>)))<span class="id"> opprD</span><span class="id"> addrA</span><span class="id"> opprB</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (<span class="id">ler_normD</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">@lt_le_trans</span><span class="id"> _</span><span class="id"> _</span> ((<span class="id">radius</span> (<span class="id">B</span><span class="id"> j</span>))<span class="id">%:num</span><span class="id"> *+</span><span class="id"> 2</span>))<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> ler_wMn2r;</span><span class="id"> move/ujt</span><span class="id"> :</span><span class="id"> ku;</span><span class="id"> rewrite</span><span class="id"> inE</span><span class="id"> =&gt;</span><span class="id"> /predU1P[&lt;-|kt]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /allP</span><span class="id"> :=</span><span class="id"> order_path_min</span><span class="id"> LE_trans</span><span class="id"> jt;</span><span class="id"> apply;</span><span class="id"> exact:</span><span class="id"> kt</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> mulr2n</span><span class="id"> ltrD//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> distrC</span> (<span class="id">lt_le_trans</span> (<span class="id">is_ballP</span> (<span class="id">is_ballB</span><span class="id"> i</span>)<span class="id"> _</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id">is_ballP</span> (<span class="id">is_ballB</span><span class="id"> i</span>)<span class="id"> _</span>)).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> vitali_lemma_finite_cover</span> (<span class="id">s</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> I</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">{</span><span class="id"> D</span><span class="id"> :</span><span class="id"> seq</span><span class="id"> I</span><span class="id"> |</span><span class="id"> [/\</span><span class="id"> uniq</span><span class="id"> D,</span><span class="id"> {subset</span><span class="id"> D</span><span class="id"> &lt;=</span><span class="id"> s},</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">trivIset</span><span class="id"> [set`</span><span class="id"> D]</span><span class="id"> B</span><span class="id"> &amp;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cover</span><span class="id"> [set`</span><span class="id"> s]</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> cover</span><span class="id"> [set`</span><span class="id"> D]</span> (<span class="id">scale_ball</span><span class="id"> 3%:R</span><span class="id"> \o</span><span class="id"> B</span>)<span class="id">]</span><span class="id"> }</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [D</span><span class="id"> [uD</span><span class="id"> DV</span><span class="id"> tD</span><span class="id"> maxD]]</span><span class="id"> :=</span><span class="id"> vitali_lemma_finite</span><span class="id"> s</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> D;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span><span class="id"> [i</span><span class="id"> Vi]</span><span class="id"> cBix/=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [j</span><span class="id"> [Dj</span><span class="id"> BiBj</span><span class="id"> ij]]</span><span class="id"> :=</span><span class="id"> maxD</span><span class="id"> i</span><span class="id"> Vi;</span><span class="id"> move/</span>(_<span class="id"> _</span><span class="id"> cBix</span>)<span class="id"> =&gt;</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> j</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> vitali_lemma_finite</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> vitali_collection_partition</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {I</span><span class="id"> :</span><span class="id"> eqType}</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">B</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> R</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>).<br/>
<span class="vernacular">Hypothesis</span><span class="id"> is_ballB</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> is_ball</span> (<span class="id">B</span><span class="id"> i</span>).<br/>
<span class="vernacular">Hypothesis</span><span class="id"> B_set0</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> 0</span><span class="id"> &lt;</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> vitali_collection_partition</span><span class="id"> n</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">[set</span><span class="id"> i</span><span class="id"> |</span><span class="id"> V</span><span class="id"> i</span><span class="id"> /\</span><span class="id"> r</span><span class="id"> /</span> (<span class="id">2</span><span class="id"> ^</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%:R</span><span class="id"> &lt;</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span><span class="id"> &lt;=</span><span class="id"> r</span><span class="id"> /</span> (<span class="id">2</span><span class="id"> ^</span><span class="id"> n</span>)<span class="id">%:R]</span>.<br/>
<br/>
<span class="vernacular">Hypothesis</span><span class="id"> VBr</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> V</span><span class="id"> i</span><span class="id"> -&gt;</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span><span class="id"> &lt;=</span><span class="id"> r</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> vitali_collection_partition_ub_gt0</span><span class="id"> i</span><span class="id"> :</span><span class="id"> V</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> r</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> Vi;</span><span class="id"> rewrite</span> (<span class="id">lt_le_trans</span><span class="id"> _</span> (<span class="id">VBr</span><span class="id"> Vi</span>)). Qed.</div></details>
<br/>
<span class="vernacular">Notation</span><span class="id"> r_gt0</span><span class="id"> :=</span><span class="id"> vitali_collection_partition_ub_gt0</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> ex_vitali_collection_partition</span><span class="id"> i</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">V</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> n,</span><span class="id"> vitali_collection_partition</span><span class="id"> n</span><span class="id"> i</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> Vi;</span><span class="id"> pose</span><span class="id"> f</span><span class="id"> :=</span><span class="id"> floor</span> (<span class="id">r</span><span class="id"> /</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span>).<br/>
<span class="id">have</span><span class="id"> f_ge0</span><span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;=</span><span class="id"> f</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> floor_ge0//</span><span class="id"> divr_ge0//</span><span class="id"> ltW//</span> (<span class="id">r_gt0</span><span class="id"> Vi</span>).<br/>
<span class="id">have</span><span class="id"> [m</span><span class="id"> /andP[mf</span><span class="id"> fm]]</span><span class="id"> :=</span><span class="id"> leq_ltn_expn</span><span class="id"> `|f|</span>.<span class="id">-1</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> m;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply/andP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [{mf}|{fm}]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@ler_nat</span><span class="id"> R</span>)<span class="gallina-kwd"> in</span><span class="id"> fm</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ltr_pdivrMr//</span><span class="id"> mulrC</span><span class="id"> -ltr_pdivrMr//</span> (<span class="id">lt_le_trans</span><span class="id"> _</span><span class="id"> fm</span>)<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id">lt_succ_floor</span><span class="id"> _</span>))<span class="id">//=</span><span class="id"> -/f</span><span class="id"> intrD</span><span class="id"> -natr1</span><span class="id"> lerD2r//</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [&lt;-|f0]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> 0</span><span class="id"> f;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /=</span><span class="id"> ler0n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> prednK//;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> absz_gt0</span><span class="id"> eq_sym</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> natr_absz//</span><span class="id"> ger0_norm</span>.<br/>
<span class="id">move:</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> [|m]</span><span class="gallina-kwd"> in</span><span class="id"> mf</span><span class="id"> *;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> expn0</span><span class="id"> divr1</span><span class="id"> VBr</span>.<br/>
<span class="id">rewrite</span><span class="id"> -</span>(<span class="id">@ler_nat</span><span class="id"> R</span>)<span class="gallina-kwd"> in</span><span class="id"> mf</span>.<br/>
<span class="id">rewrite</span><span class="id"> ler_pdivlMr//</span><span class="id"> mulrC</span><span class="id"> -ler_pdivlMr//</span>.<br/>
<span class="id">have</span><span class="id"> [f0|f0]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> 0</span><span class="id"> f</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> mf;</span><span class="id"> rewrite</span><span class="id"> -f0</span><span class="id"> absz0</span><span class="id"> leNgt</span><span class="id"> expnS</span><span class="id"> ltr_nat</span><span class="id"> leq_pmulr//</span><span class="id"> expn_gt0</span>.<br/>
<span class="id">rewrite</span> (<span class="id">le_trans</span><span class="id"> mf</span>)<span class="id">//</span><span class="id"> prednK//;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> absz_gt0</span><span class="id"> eq_sym</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> natr_absz//</span><span class="id"> ger0_norm//</span><span class="id"> ge_floor</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cover_vitali_collection_partition</span><span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">V</span><span class="id"> =</span><span class="id"> \bigcup_n</span><span class="id"> vitali_collection_partition</span><span class="id"> n</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> [|i</span><span class="id"> [n</span><span class="id"> _]</span><span class="id"> []//]</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> i</span><span class="id"> Vi;</span><span class="id"> have</span><span class="id"> [n</span><span class="id"> Hn]</span><span class="id"> :=</span><span class="id"> ex_vitali_collection_partition</span><span class="id"> Vi;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> disjoint_vitali_collection_partition</span><span class="id"> n</span><span class="id"> m</span><span class="id"> :</span><span class="id"> n</span><span class="id"> !=</span><span class="id"> m</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">vitali_collection_partition</span><span class="id"> n</span><span class="id"> `&amp;`</span><br/>
&nbsp;&nbsp;<span class="id">vitali_collection_partition</span><span class="id"> m</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> nm;</span><span class="id"> wlog</span><span class="id"> :</span><span class="id"> n</span><span class="id"> m</span><span class="id"> nm</span><span class="id"> /</span> (<span class="id">n</span><span class="id"> &lt;</span><span class="id"> m</span>)<span class="id">%N</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> wlg;</span><span class="id"> move:</span><span class="id"> nm;</span><span class="id"> rewrite</span><span class="id"> neq_lt</span><span class="id"> =&gt;</span><span class="id"> /orP[nm|mn]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> wlg//</span><span class="id"> lt_eqF</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> setIC</span><span class="id"> wlg//</span><span class="id"> lt_eqF</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> {}nm;</span><span class="id"> apply/seteqP;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> i</span><span class="id"> []</span><span class="id"> [Vi]</span><span class="id"> /andP[rnB</span><span class="id"> _]</span><span class="id"> [_</span><span class="id"> /andP[_]]</span>.<br/>
<span class="id">move/</span>(<span class="id">lt_le_trans</span><span class="id"> rnB</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltr_pM2l//;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span> (<span class="id">r_gt0</span><span class="id"> Vi</span>).<br/>
<span class="id">rewrite</span><span class="id"> ltf_pV2</span><span class="id"> ?posrE</span><span class="id"> ?ltr0n</span><span class="id"> ?expn_gt0//</span><span class="id"> ltr_nat</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move/ltn_pexp2l</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> isT</span>)<span class="id">;</span><span class="id"> rewrite</span><span class="id"> ltnNge</span><span class="id"> =&gt;</span><span class="id"> /negP;</span><span class="id"> apply</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> vitali_collection_partition</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> separated_closed_ball_countable</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">{R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">I</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">B</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> R</span>) (<span class="id">D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span><span class="id"> &gt;</span><span class="id"> 0</span>)<span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">trivIset</span><span class="id"> D</span> (<span class="gallina-kwd">fun</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> closed_ball</span> (<span class="id">cpoint</span> (<span class="id">B</span><span class="id"> i</span>)) (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span>)<span class="id"> -&gt;</span><span class="id"> countable</span><span class="id"> D</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> B0</span><span class="id"> tD</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> trivIset</span><span class="id"> D</span> (<span class="gallina-kwd">fun</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> ball</span> (<span class="id">cpoint</span> (<span class="id">B</span><span class="id"> i</span>)) (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span>).<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> i</span><span class="id"> j</span><span class="id"> Di</span><span class="id"> Dj</span><span class="id"> BiBj;</span><span class="id"> apply:</span><span class="id"> tD</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> subsetI_neq0</span><span class="id"> BiBj</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact:</span><span class="id"> subset_closed_ball</span>.<br/>
<span class="id">apply:</span><span class="id"> separated_open_countable</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> i;</span><span class="id"> exact:</span><span class="id"> ball_open</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> i;</span><span class="id"> eexists;</span><span class="id"> exact:</span><span class="id"> ballxx</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Section</span><span class="id"> vitali_lemma_infinite</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span><span class="id"> {I</span><span class="id"> :</span><span class="id"> eqType}</span>.<br/>
<span class="vernacular">Variables</span> (<span class="id">B</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> R</span>) (<span class="id">V</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>).<br/>
<span class="vernacular">Hypothesis</span><span class="id"> is_ballB</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> is_ball</span> (<span class="id">B</span><span class="id"> i</span>).<br/>
<span class="vernacular">Hypothesis</span><span class="id"> Bset0</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span><span class="id"> &gt;</span><span class="id"> 0</span>.<br/>
<span class="vernacular">Hypothesis</span><span class="id"> VBr</span><span class="id"> :</span><span class="gallina-kwd"> forall</span><span class="id"> i,</span><span class="id"> V</span><span class="id"> i</span><span class="id"> -&gt;</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span><span class="id"> &lt;=</span><span class="id"> r</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> B_</span><span class="id"> :=</span><span class="id"> vitali_collection_partition</span><span class="id"> B</span><span class="id"> V</span><span class="id"> r</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> H_</span><span class="id"> n</span> (<span class="id">U</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span>)<span class="id"> :=</span><span class="id"> [set</span><span class="id"> i</span><span class="id"> |</span><span class="id"> B_</span><span class="id"> n</span><span class="id"> i</span><span class="id"> /\</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> j,</span><span class="id"> U</span><span class="id"> j</span><span class="id"> -&gt;</span><span class="id"> i</span><span class="id"> !=</span><span class="id"> j</span><span class="id"> -&gt;</span><span class="id"> closure</span> (<span class="id">B</span><span class="id"> i</span>)<span class="id"> `&amp;`</span><span class="id"> closure</span> (<span class="id">B</span><span class="id"> j</span>)<span class="id"> =</span><span class="id"> set0]</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> elt_prop</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span><span class="id"> *</span><span class="id"> nat</span><span class="id"> *</span><span class="id"> set</span><span class="id"> I</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">x</span>.<span class="id">1</span>.<span class="id">1</span><span class="id"> `&lt;=`</span><span class="id"> V</span><span class="id"> /\</span><br/>
&nbsp;&nbsp;<span class="id">maximal_disjoint_subcollection</span> (<span class="id">closure</span><span class="id"> \o</span><span class="id"> B</span>)<span class="id"> x</span>.<span class="id">1</span>.<span class="id">1</span> (<span class="id">H_</span><span class="id"> x</span>.<span class="id">1</span>.<span class="id">2</span><span class="id"> x</span>.<span class="id">2</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> elt_type</span><span class="id"> :=</span><span class="id"> {x</span><span class="id"> |</span><span class="id"> elt_prop</span><span class="id"> x}</span>.<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> Rel</span> (<span class="id">x</span><span class="id"> y</span><span class="id"> :</span><span class="id"> elt_type</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;(<span class="id">sval</span><span class="id"> y</span>).<span class="id">2</span><span class="id"> =</span> (<span class="id">sval</span><span class="id"> x</span>).<span class="id">2</span><span class="id"> `|`</span> (<span class="id">sval</span><span class="id"> x</span>).<span class="id">1</span>.<span class="id">1</span><span class="id"> /\</span> (<span class="id">sval</span><span class="id"> x</span>).<span class="id">1</span>.<span class="id">2</span>.<span class="id">+1</span><span class="id"> =</span> (<span class="id">sval</span><span class="id"> y</span>).<span class="id">1</span>.<span class="id">2</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> vitali_lemma_infinite</span><span class="id"> :</span><span class="id"> {</span><span class="id"> D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span><span class="id"> |</span><span class="id"> [/\</span><span class="id"> countable</span><span class="id"> D,</span><br/>
&nbsp;&nbsp;<span class="id">D</span><span class="id"> `&lt;=`</span><span class="id"> V,</span><span class="id"> trivIset</span><span class="id"> D</span> (<span class="id">closure</span><span class="id"> \o</span><span class="id"> B</span>)<span class="id"> &amp;</span><br/>
&nbsp;&nbsp;<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> V</span><span class="id"> i</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists</span><span class="id"> j,</span><span class="id"> [/\</span><span class="id"> D</span><span class="id"> j,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closure</span> (<span class="id">B</span><span class="id"> i</span>)<span class="id"> `&amp;`</span><span class="id"> closure</span> (<span class="id">B</span><span class="id"> j</span>)<span class="id"> !=set0,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">radius</span> (<span class="id">B</span><span class="id"> j</span>))<span class="id">%:num</span><span class="id"> &gt;=</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span><span class="id"> /</span><span class="id"> 2</span><span class="id"> &amp;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closure</span> (<span class="id">B</span><span class="id"> i</span>)<span class="id"> `&lt;=`</span><span class="id"> closure</span> (<span class="id">5%:R</span><span class="id"> *`</span><span class="id"> B</span><span class="id"> j</span>)<span class="id">]</span><span class="id"> ]</span><span class="id"> }</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [D0</span><span class="id"> [D0B0</span><span class="id"> tD0</span><span class="id"> maxD0]]</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">ex_maximal_disjoint_subcollection</span> (<span class="id">closure</span><span class="id"> \o</span><span class="id"> B</span>) (<span class="id">B_</span><span class="id"> O</span>).<br/>
<span class="id">have</span><span class="id"> H0</span><span class="id"> :</span><span class="id"> elt_prop</span> (<span class="id">D0,</span><span class="id"> 0%N,</span><span class="id"> set0</span>).<br/>
&nbsp;&nbsp;<span class="id">split;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> i</span><span class="id"> /D0B0[]</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> D0x;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> D0B0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> s</span><span class="id"> D0s</span><span class="id"> xs;</span><span class="id"> move/trivIsetP</span><span class="id"> :</span><span class="id"> tD0;</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> F</span><span class="id"> D0F</span><span class="id"> FH0;</span><span class="id"> apply:</span><span class="id"> maxD0</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> i</span><span class="id"> Fi;</span><span class="id"> exact:</span> (<span class="id">FH0</span><span class="id"> _</span><span class="id"> Fi</span>).<span class="id">1</span>.<br/>
<span class="id">have</span><span class="id"> [v</span><span class="id"> [Hv0</span><span class="id"> HvRel]]</span><span class="id"> :</span><span class="id"> {v</span><span class="id"> :</span><span class="id"> nat</span><span class="id"> -&gt;</span><span class="id"> elt_type</span><span class="id"> |</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">v</span><span class="id"> 0%N</span><span class="id"> =</span><span class="id"> exist</span><span class="id"> _</span><span class="id"> _</span><span class="id"> H0</span><span class="id"> /\</span><span class="gallina-kwd"> forall</span><span class="id"> n,</span><span class="id"> Rel</span> (<span class="id">v</span><span class="id"> n</span>) (<span class="id">v</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">}</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> dependent_choice_Type</span><span class="id"> =&gt;</span><span class="id"> -[[[Dn</span><span class="id"> n]</span><span class="id"> Un]</span><span class="id"> Hn]</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span><span class="id"> Hn1</span><span class="id"> :=</span><span class="id"> H_</span><span class="id"> n</span>.<span class="id">+1</span> (<span class="id">Un</span><span class="id"> `|`</span><span class="id"> Dn</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [Dn1</span><span class="id"> maxDn1]</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ex_maximal_disjoint_subcollection</span> (<span class="id">closure\o</span><span class="id"> B</span>)<span class="id"> Hn1</span>.<br/>
&nbsp;&nbsp;<span class="id">suff:</span><span class="id"> elt_prop</span> (<span class="id">Dn1,</span><span class="id"> n</span>.<span class="id">+1,</span><span class="id"> Un</span><span class="id"> `|`</span><span class="id"> Dn</span>)<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> H;</span><span class="gallina-kwd"> exists</span> (<span class="id">exist</span><span class="id"> _</span><span class="id"> _</span><span class="id"> H</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> case:</span><span class="id"> maxDn1</span><span class="id"> =&gt;</span><span class="id"> +</span><span class="id"> _</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> /subset_trans;</span><span class="id"> apply</span><span class="id"> =&gt;</span><span class="id"> i</span><span class="id"> [[]]</span>.<br/>
<span class="id">pose</span><span class="id"> D</span><span class="id"> i</span><span class="id"> :=</span> (<span class="id">sval</span> (<span class="id">v</span><span class="id"> i</span>)).<span class="id">1</span>.<span class="id">1</span>.<br/>
<span class="id">pose</span><span class="id"> U</span><span class="id"> i</span><span class="id"> :=</span> (<span class="id">sval</span> (<span class="id">v</span><span class="id"> i</span>)).<span class="id">2</span>.<br/>
<span class="id">have</span><span class="id"> UE</span><span class="id"> n</span><span class="id"> :</span><span class="id"> U</span><span class="id"> n</span><span class="id"> =</span><span class="id"> \bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> D</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;<span class="id">elim:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> [|n</span><span class="id"> ih];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> bigcup_mkord</span><span class="id"> big_ord0</span><span class="id"> /U</span><span class="id"> /sval</span><span class="id"> /D</span><span class="id"> Hv0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> /U</span><span class="id"> /sval/=</span> (<span class="id">HvRel</span><span class="id"> n</span>).<span class="id">1</span><span class="id"> bigcup_mkord</span><span class="id"> big_ord_recr</span><span class="id"> -bigcup_mkord</span><span class="id"> -ih</span>.<br/>
<span class="id">pose</span><span class="id"> v_</span><span class="id"> i</span><span class="id"> :=</span> (<span class="id">sval</span> (<span class="id">v</span><span class="id"> i</span>)).<span class="id">1</span>.<span class="id">2</span>.<br/>
<span class="id">have</span><span class="id"> v_E</span><span class="id"> n</span><span class="id"> :</span><span class="id"> v_</span><span class="id"> n</span><span class="id"> =</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;<span class="id">elim:</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> /=</span><span class="id"> [|n];</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /v_</span><span class="id"> /sval/=</span><span class="id"> Hv0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span> (<span class="id">HvRel</span><span class="id"> n</span>).<span class="id">2;</span><span class="id"> rewrite</span><span class="id"> -!/</span>(<span class="id">v_</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> &lt;-</span><span class="id"> -&gt;</span>.<br/>
<span class="id">have</span><span class="id"> maxD</span><span class="id"> m</span><span class="id"> :</span><span class="id"> maximal_disjoint_subcollection</span> (<span class="id">closure\o</span><span class="id"> B</span>) (<span class="id">D</span><span class="id"> m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">H_</span><span class="id"> m</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> m</span>)<span class="id"> D</span><span class="id"> i</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -</span>(<span class="id">UE</span><span class="id"> m</span>)<span class="id"> -[m</span><span class="gallina-kwd"> in</span><span class="id"> H_</span><span class="id"> m</span><span class="id"> _]v_E</span><span class="id"> /v_</span><span class="id"> /U</span><span class="id"> /D;</span><span class="id"> move:</span> (<span class="id">v</span><span class="id"> m</span>)<span class="id"> =&gt;</span><span class="id"> [x</span><span class="id"> []]</span>.<br/>
<span class="id">have</span><span class="id"> DH</span><span class="id"> m</span><span class="id"> :</span><span class="id"> D</span><span class="id"> m</span><span class="id"> `&lt;=`</span><span class="id"> H_</span><span class="id"> m</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> m</span>)<span class="id"> D</span><span class="id"> i</span>)<span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> maxD</span><span class="id"> m</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">\bigcup_k</span><span class="id"> D</span><span class="id"> k</span>)<span class="id">;</span><span class="id"> split</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> bigcup_countable</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> n</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@separated_closed_ball_countable</span><span class="id"> R</span><span class="id"> _</span><span class="id"> B</span>)<span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [_</span><span class="id"> +</span><span class="id"> _]</span><span class="id"> :=</span><span class="id"> maxD</span><span class="id"> n;</span><span class="id"> move=&gt;</span><span class="id"> DB</span><span class="id"> i</span><span class="id"> j</span><span class="id"> Dni</span><span class="id"> Dnj</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -!is_ball_closure//;</span><span class="id"> exact:</span><span class="id"> DB</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> i</span><span class="id"> [n</span><span class="id"> _</span><span class="id"> Dni];</span><span class="id"> have</span><span class="id"> [+</span><span class="id"> _</span><span class="id"> _]</span><span class="id"> :=</span><span class="id"> maxD</span><span class="id"> n;</span><span class="id"> move/</span>(_<span class="id"> _</span><span class="id"> Dni</span>)<span class="id"> =&gt;</span><span class="id"> [[]]</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> trivIset_bigcup</span><span class="id"> =&gt;</span><span class="id"> m;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> []</span><span class="id"> :=</span><span class="id"> maxD</span><span class="id"> m</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> n</span><span class="id"> i</span><span class="id"> j</span><span class="id"> mn</span><span class="id"> Dmi</span><span class="id"> Dnj</span>.<br/>
&nbsp;&nbsp;<span class="id">wlog</span><span class="id"> :</span><span class="id"> i</span><span class="id"> j</span><span class="id"> n</span><span class="id"> m</span><span class="id"> mn</span><span class="id"> Dmi</span><span class="id"> Dnj</span><span class="id"> /</span> (<span class="id">m</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id">%N</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> wlg</span><span class="id"> ij</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move:</span><span class="id"> mn;</span><span class="id"> rewrite</span><span class="id"> neq_lt</span><span class="id"> =&gt;</span><span class="id"> /orP[mn|nm]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">wlg</span><span class="id"> i</span><span class="id"> j</span><span class="id"> n</span><span class="id"> m</span>)<span class="id">//</span><span class="id"> ?lt_eqF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">wlg</span><span class="id"> j</span><span class="id"> i</span><span class="id"> m</span><span class="id"> n</span>)<span class="id">//</span><span class="id"> ?lt_eqF//</span><span class="id"> setIC</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> {}mn</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [_</span><span class="id"> {}H]</span><span class="id"> :=</span><span class="id"> DH</span><span class="id"> _</span><span class="id"> _</span><span class="id"> Dnj</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /set0P/eqP;</span><span class="id"> apply:</span><span class="id"> contra_notP</span><span class="id"> =&gt;</span><span class="id"> /eqP</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> eq_sym</span><span class="id"> setIC;</span><span class="id"> apply:</span><span class="id"> H</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> i</span><span class="id"> Vi</span>.<br/>
<span class="id">have</span><span class="id"> [n</span><span class="id"> Bni]</span><span class="id"> :=</span><span class="id"> ex_vitali_collection_partition</span><span class="id"> Bset0</span><span class="id"> VBr</span><span class="id"> Vi</span>.<br/>
<span class="id">have</span><span class="id"> [[j</span><span class="id"> Dj</span><span class="id"> BiBj]|]</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pselect</span> (<span class="gallina-kwd">exists2</span><span class="id"> j,</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> D</span><span class="id"> i</span>)<span class="id"> j</span><span class="id"> &amp;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closure</span> (<span class="id">B</span><span class="id"> i</span>)<span class="id"> `&amp;`</span><span class="id"> closure</span> (<span class="id">B</span><span class="id"> j</span>)<span class="id"> !=set0</span>)<span class="id">;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">move/forall2NP</span><span class="id"> =&gt;</span><span class="id"> H</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> {}H</span><span class="id"> j</span><span class="id"> :</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> D</span><span class="id"> i</span>)<span class="id"> j</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closure</span> (<span class="id">B</span><span class="id"> i</span>)<span class="id"> `&amp;`</span><span class="id"> closure</span> (<span class="id">B</span><span class="id"> j</span>)<span class="id"> =</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [//|/set0P/negP/negPn/eqP]</span><span class="id"> :=</span><span class="id"> H</span><span class="id"> j</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> H_i</span><span class="id"> :</span> (<span class="id">H_</span><span class="id"> n</span> (<span class="id">\bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>)<span class="id"> D</span><span class="id"> i</span>))<span class="id"> i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> s</span><span class="id"> Hs</span><span class="id"> si;</span><span class="id"> apply:</span><span class="id"> H</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> Hs</span><span class="id"> =&gt;</span><span class="id"> [m</span><span class="id"> /=</span><span class="id"> nm</span><span class="id"> Dms];</span><span class="gallina-kwd"> exists</span><span class="id"> m</span><span class="id"> =&gt;</span><span class="id"> //=;</span><span class="id"> rewrite</span> (<span class="id">ltn_trans</span><span class="id"> nm</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> Dn_Bi</span><span class="id"> j</span><span class="id"> :</span><span class="id"> D</span><span class="id"> n</span><span class="id"> j</span><span class="id"> -&gt;</span><span class="id"> closure</span> (<span class="id">B</span><span class="id"> i</span>)<span class="id"> `&amp;`</span><span class="id"> closure</span> (<span class="id">B</span><span class="id"> j</span>)<span class="id"> =</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> Dnj;</span><span class="id"> apply:</span><span class="id"> H;</span><span class="gallina-kwd"> exists</span><span class="id"> n</span><span class="id"> =&gt;</span><span class="id"> //=</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [Dni|Dni]</span><span class="id"> :=</span><span class="id"> pselect</span> (<span class="id">D</span><span class="id"> n</span><span class="id"> i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> :=</span><span class="id"> Dn_Bi</span><span class="id"> _</span><span class="id"> Dni</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> setIid</span><span class="id"> =&gt;</span><span class="id"> /closure_eq0</span><span class="id"> Bi0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> Bset0</span><span class="id"> i;</span><span class="id"> rewrite</span><span class="id"> Bi0</span><span class="id"> radius0/=</span><span class="id"> ltxx</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> not_tB</span><span class="id"> :</span><span class="id"> ~</span><span class="id"> trivIset</span> (<span class="id">D</span><span class="id"> n</span><span class="id"> `|`</span><span class="id"> [set</span><span class="id"> i]</span>) (<span class="id">closure</span><span class="id"> \o</span><span class="id"> B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> [_</span><span class="id"> _]</span><span class="id"> :=</span><span class="id"> maxD</span><span class="id"> n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> subsetUl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> x;</span><span class="id"> apply/Dni;</span><span class="id"> apply:</span><span class="id"> x;</span><span class="id"> right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> subUset;</span><span class="id"> split;</span><span class="id"> [exact:</span><span class="id"> DH|];</span><span class="id"> rewrite</span><span class="id"> sub1set</span><span class="id"> inE</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [p</span><span class="id"> [q</span><span class="id"> [pq</span><span class="id"> Dnpi</span><span class="id"> Dnqi</span><span class="id"> pq0]]]</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> p</span><span class="id"> q,</span><span class="id"> [/\</span><span class="id"> p</span><span class="id"> !=</span><span class="id"> q,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">D</span><span class="id"> n</span><span class="id"> p</span><span class="id"> \/</span><span class="id"> p</span><span class="id"> =</span><span class="id"> i,</span><span class="id"> D</span><span class="id"> n</span><span class="id"> q</span><span class="id"> \/</span><span class="id"> q</span><span class="id"> =</span><span class="id"> i</span><span class="id"> &amp;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">closure</span> (<span class="id">B</span><span class="id"> p</span>)<span class="id"> `&amp;`</span><span class="id"> closure</span> (<span class="id">B</span><span class="id"> q</span>)<span class="id"> !=set0]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move/trivIsetP</span><span class="id"> :</span><span class="id"> not_tB</span><span class="id"> =&gt;</span><span class="id"> /existsNP[p</span><span class="id"> not_tB];</span><span class="gallina-kwd"> exists</span><span class="id"> p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move/existsNP</span><span class="id"> :</span><span class="id"> not_tB</span><span class="id"> =&gt;</span><span class="id"> [q</span><span class="id"> not_tB];</span><span class="gallina-kwd"> exists</span><span class="id"> q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move/not_implyP</span><span class="id"> :</span><span class="id"> not_tB</span><span class="id"> =&gt;</span><span class="id"> [Dnip]</span><span class="id"> /not_implyP[Dni1]</span><span class="id"> /not_implyP[pq</span><span class="id"> pq0]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> exact/set0P/eqP</span>.<br/>
&nbsp;&nbsp;<span class="id">case:</span><span class="id"> Dnpi</span><span class="id"> =&gt;</span><span class="id"> [Dnp|pi]</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> case:</span><span class="id"> Dnqi</span><span class="id"> =&gt;</span><span class="id"> [Dnq|qi]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> case:</span> (<span class="id">maxD</span><span class="id"> n</span>)<span class="id"> =&gt;</span><span class="id"> _</span><span class="id"> +</span><span class="id"> _</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move/trivIsetP</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> Dnp</span><span class="id"> Dnq</span><span class="id"> pq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/set0P</span><span class="id"> :</span><span class="id"> pq0</span><span class="id"> =&gt;</span><span class="id"> /eqP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> Dn_Bi</span><span class="id"> _</span><span class="id"> Dnp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> setIC</span><span class="id"> -qi;</span><span class="id"> move/set0P</span><span class="id"> :</span><span class="id"> pq0</span><span class="id"> =&gt;</span><span class="id"> /eqP</span>.<br/>
&nbsp;&nbsp;<span class="id">-</span><span class="id"> case:</span><span class="id"> Dnqi</span><span class="id"> =&gt;</span><span class="id"> [Dnq|qi]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="id"> have</span><span class="id"> :=</span><span class="id"> Dn_Bi</span><span class="id"> _</span><span class="id"> Dnq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -pi;</span><span class="id"> move/set0P</span><span class="id"> :</span><span class="id"> pq0</span><span class="id"> =&gt;</span><span class="id"> /eqP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">+</span><span class="gallina-kwd"> by</span><span class="id"> move:</span><span class="id"> pq;</span><span class="id"> rewrite</span><span class="id"> pi</span><span class="id"> qi</span><span class="id"> eqxx</span>.<br/>
<span class="id">have</span><span class="id"> Birn</span><span class="id"> :</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span><span class="id"> &lt;=</span><span class="id"> r</span><span class="id"> /</span> (<span class="id">2</span><span class="id"> ^</span><span class="id"> n</span>)<span class="id">%:R</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move:</span><span class="id"> Bni;</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /B_</span><span class="id"> /=</span><span class="id"> =&gt;</span><span class="id"> -[_]</span><span class="id"> /andP[]</span>.<br/>
<span class="id">have</span><span class="id"> Bjrn</span><span class="id"> :</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> j</span>))<span class="id">%:num</span><span class="id"> &gt;</span><span class="id"> r</span><span class="id"> /</span> (<span class="id">2</span><span class="id"> ^</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id">%:R</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> :</span><span class="id"> \bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>)<span class="id"> D</span><span class="id"> i</span><span class="id"> `&lt;=`</span><span class="id"> \bigcup_</span>(<span class="id">i</span><span class="id"> &lt;</span><span class="id"> n</span>.<span class="id">+1</span>) (<span class="id">B_</span><span class="id"> i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> k</span><span class="id"> [m/=</span><span class="id"> mn]</span><span class="id"> Dmk</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> [+</span><span class="id"> _</span><span class="id"> _]</span><span class="id"> :=</span><span class="id"> maxD</span><span class="id"> m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move/</span>(_<span class="id"> _</span><span class="id"> Dmk</span>)<span class="id"> =&gt;</span><span class="id"> -[Bmk]</span><span class="id"> _;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
&nbsp;&nbsp;<span class="id">move/</span>(_<span class="id"> _</span><span class="id"> Dj</span>)<span class="id"> =&gt;</span><span class="id"> [m/=</span><span class="id"> mn1]</span><span class="id"> [_]</span><span class="id"> /andP[+</span><span class="id"> _]</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> le_lt_trans</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> ler_pM2l</span><span class="id"> ?</span>(<span class="id">vitali_collection_partition_ub_gt0</span><span class="id"> Bset0</span><span class="id"> VBr</span><span class="id"> Vi</span>)<span class="id">//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> lef_pV2//</span><span class="id"> ?posrE</span><span class="id"> ?ltr0n</span><span class="id"> ?expn_gt0//</span><span class="id"> ler_nat</span><span class="id"> leq_pexp2l</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> j;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> case:</span><span class="id"> Dj</span><span class="id"> =&gt;</span><span class="id"> m</span><span class="id"> /=</span><span class="id"> mn</span><span class="id"> Dm;</span><span class="gallina-kwd"> exists</span><span class="id"> m</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span> (<span class="id">le_trans</span><span class="id"> _</span> (<span class="id">ltW</span><span class="id"> Bjrn</span>))<span class="id">//</span><span class="id"> ler_pdivrMr//</span><span class="id"> expnSr</span><span class="id"> natrM</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> invrM</span><span class="id"> ?unitfE//</span><span class="id"> mulrAC</span><span class="id"> -mulrA</span> (<span class="id">mulrA</span><span class="id"> 2</span>)<span class="id"> divff//</span><span class="id"> div1r</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> x</span><span class="id"> Bix</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> is_ball_closure//;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">ballE</span> (<span class="id">is_ballB</span><span class="id"> j</span>))<span class="id"> scale_ballE;</span><span class="id"> [exact:</span><span class="id"> is_ball_ball|]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> closed_ballE;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">ballE</span> (<span class="id">is_ballB</span><span class="id"> j</span>))<span class="id"> scale_ballE;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> radius_ball_num</span><span class="id"> ?mulr_ge0//</span><span class="id"> mulr_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /closed_ball_</span><span class="id"> /=</span><span class="id"> cpoint_scale_ball;</span><span class="id"> [|by</span><span class="id"> []</span>..<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> radius_scale_ball//</span>.<br/>
&nbsp;&nbsp;<span class="id">apply:</span> (<span class="id">@le_trans</span><span class="id"> _</span><span class="id"> _</span> (<span class="id">2</span><span class="id"> *</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id">%:num</span><span class="id"> +</span> (<span class="id">radius</span> (<span class="id">B</span><span class="id"> j</span>))<span class="id">%:num</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case:</span><span class="id"> BiBj</span><span class="id"> =&gt;</span><span class="id"> y</span><span class="id"> [Biy</span><span class="id"> Bjy]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ler_distD</span><span class="id"> y</span><span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span><span class="id"> [in</span><span class="id"> leRHS]addrC</span><span class="id"> lerD//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> is_ball_closureP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ler_distD</span> (<span class="id">cpoint</span> (<span class="id">B</span><span class="id"> i</span>))<span class="id"> _</span><span class="id"> _</span>))<span class="id">//</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (_<span class="id"> :</span><span class="id"> 2</span><span class="id"> =</span><span class="id"> 1</span><span class="id"> +</span><span class="id"> 1</span>)<span class="id">;</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> mulrDl</span><span class="id"> !mul1r//</span><span class="id"> lerD;</span><span class="id"> [by</span><span class="id"> []|</span><span class="id"> |exact:</span><span class="id"> is_ball_closureP]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> distrC;</span><span class="id"> exact:</span><span class="id"> is_ball_closureP</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> -lerBrDr//</span><span class="id"> -</span>(<span class="id">@natr1</span><span class="id"> _</span><span class="id"> 4</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">mulrDl</span><span class="id"> 4%:R</span>)<span class="id"> mul1r</span><span class="id"> addrK</span> (<span class="id">natrM</span><span class="id"> _</span><span class="id"> 2</span><span class="id"> 2</span>)<span class="id"> -mulrA</span><span class="id"> ler_pM2l//</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span><span class="id"> Birn</span>)<span class="id">//</span><span class="id"> [in</span><span class="id"> leRHS]mulrC</span><span class="id"> -ler_pdivrMr//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -mulrA</span><span class="id"> -invfM</span><span class="id"> -natrM</span><span class="id"> -expnSr</span><span class="id"> ltW</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> vitali_lemma_infinite_cover</span><span class="id"> :</span><span class="id"> {</span><span class="id"> D</span><span class="id"> :</span><span class="id"> set</span><span class="id"> I</span><span class="id"> |</span><span class="id"> [/\</span><span class="id"> countable</span><span class="id"> D,</span><br/>
&nbsp;&nbsp;<span class="id">D</span><span class="id"> `&lt;=`</span><span class="id"> V,</span><span class="id"> trivIset</span><span class="id"> D</span> (<span class="id">closure</span><span class="id"> \o</span><span class="id"> B</span>)<span class="id"> &amp;</span><br/>
&nbsp;&nbsp;<span class="id">cover</span><span class="id"> V</span> (<span class="id">closure</span><span class="id"> \o</span><span class="id"> B</span>)<span class="id"> `&lt;=`</span><span class="id"> cover</span><span class="id"> D</span> (<span class="id">closure</span><span class="id"> \o</span><span class="id"> scale_ball</span><span class="id"> 5%:R</span><span class="id"> \o</span><span class="id"> B</span>)<span class="id">]</span><span class="id"> }</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [D</span><span class="id"> [cD</span><span class="id"> DV</span><span class="id"> tD</span><span class="id"> maxD]]</span><span class="id"> :=</span><span class="id"> vitali_lemma_infinite</span>.<br/>
<span class="gallina-kwd">exists</span><span class="id"> D;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> x</span><span class="id"> [i</span><span class="id"> Vi]</span><span class="id"> cBix/=</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [j</span><span class="id"> [Dj</span><span class="id"> BiBj</span><span class="id"> ij]]</span><span class="id"> :=</span><span class="id"> maxD</span><span class="id"> i</span><span class="id"> Vi;</span><span class="id"> move/</span>(_<span class="id"> _</span><span class="id"> cBix</span>)<span class="id"> =&gt;</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> j</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> vitali_lemma_infinite</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> set_itv_realType</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span><span class="id"> x</span><span class="id"> :</span><span class="id"> R</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> set_itvK</span><span class="id"> :</span><span class="id"> {in</span><span class="id"> neitv,</span><span class="id"> cancel</span><span class="id"> pred_set</span> (<span class="id">@Rhull</span><span class="id"> R</span>)<span class="id">}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [[[]</span><span class="id"> x|[]]</span><span class="id"> [[]</span><span class="id"> y|[]]]</span><span class="id"> /neitvP</span><span class="id"> //;</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> /Rhull</span><span class="id"> /=</span><span class="id"> !</span>(<span class="id">in_itv,</span><span class="id"> inE</span>)<span class="id">/=</span><span class="id"> ?bnd_simp</span><span class="id"> =&gt;</span><span class="id"> xy</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> asboolT//</span><span class="id"> inf_itv//</span><span class="id"> lexx/=</span><span class="id"> xy</span><span class="id"> asboolT//</span><span class="id"> asboolT//=</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> asboolF//=</span><span class="id"> sup_itv//=</span><span class="id"> ltxx</span><span class="id"> ?andbF</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> asboolT//</span><span class="id"> inf_itv//</span><span class="id"> ?asboolT//</span><span class="id"> ?sup_itv//</span><span class="id"> ?lexx</span><span class="id"> ?xy</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> asboolT//=</span><span class="id"> inf_itv//</span><span class="id"> lexx</span><span class="id"> asboolT//</span><span class="id"> asboolF</span>.<br/>
<span class="id">-</span><span class="id"> rewrite</span><span class="id"> asboolT//</span><span class="id"> inf_itv//=</span><span class="id"> ltxx</span><span class="id"> asboolF//</span><span class="id"> asboolT//</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> sup_itv//</span><span class="id"> ltxx</span><span class="id"> andbF</span><span class="id"> asboolF</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> asboolT</span><span class="id"> //</span><span class="id"> inf_itv</span><span class="id"> //</span><span class="id"> ltxx</span><span class="id"> asboolF</span><span class="id"> //</span><span class="id"> asboolT</span><span class="id"> //</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> sup_itv</span><span class="id"> //</span><span class="id"> xy</span><span class="id"> lexx</span><span class="id"> asboolT</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> asboolT</span><span class="id"> //</span><span class="id"> inf_itv//</span><span class="id"> ltxx</span><span class="id"> asboolF</span><span class="id"> //</span><span class="id"> asboolF</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> asboolF</span><span class="id"> //</span><span class="id"> asboolT</span><span class="id"> //</span><span class="id"> sup_itv//</span><span class="id"> ltxx</span><span class="id"> asboolF</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> asboolF</span><span class="id"> //</span><span class="id"> asboolT</span><span class="id"> //</span><span class="id"> sup_itv//</span><span class="id"> lexx</span><span class="id"> asboolT</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> asboolF</span><span class="id"> //</span><span class="id"> asboolF</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> RhullT</span><span class="id"> :</span><span class="id"> Rhull</span><span class="id"> setT</span><span class="id"> =</span><span class="id"> `]-oo,</span><span class="id"> +oo[%R</span><span class="id"> :&gt;</span><span class="id"> interval</span><span class="id"> R</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> /Rhull</span><span class="id"> -set_itv_infty_infty</span><span class="id"> asboolF//</span><span class="id"> asboolF</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> RhullK</span><span class="id"> :</span><span class="id"> {in</span> (<span class="id">@is_interval</span><span class="id"> _</span><span class="id"> :</span><span class="id"> set</span> (<span class="id">set</span><span class="id"> R</span>))<span class="id">,</span><span class="id"> cancel</span> (<span class="id">@Rhull</span><span class="id"> R</span>)<span class="id"> pred_set}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> X</span><span class="id"> /asboolP</span><span class="id"> iX;</span><span class="id"> apply/esym/is_intervalP</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> set_itv_setT</span> (<span class="id">i</span><span class="id"> :</span><span class="id"> interval</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> [set`</span><span class="id"> i]</span><span class="id"> =</span><span class="id"> setT</span><span class="id"> -&gt;</span><span class="id"> i</span><span class="id"> =</span><span class="id"> `]-oo,</span><span class="id"> +oo[</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [i0</span> <span class="id"> /</span>(<span class="id">congr1</span> (<span class="id">@Rhull</span><span class="id"> _</span>))<span class="id">|]</span><span class="id"> :=</span><span class="id"> boolP</span> (<span class="id">neitv</span><span class="id"> i</span>).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> set_itvK//</span><span class="id"> =&gt;</span><span class="id"> -&gt;;</span><span class="id"> exact:</span><span class="id"> RhullT</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> negbK</span><span class="id"> =&gt;</span><span class="id"> /eqP</span><span class="id"> -&gt;;</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> 0</span>)<span class="id">[_]/</span>(_<span class="id"> Logic</span>.<span class="id">I</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> set_itv_realType</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> Rhull_lemmas</span>.<br/>
<span class="vernacular">Variable</span><span class="id"> R</span><span class="id"> :</span><span class="id"> realType</span>.<br/>
<span class="vernacular">Implicit</span><span class="id"> Types</span> (<span class="id">a</span><span class="id"> b</span><span class="id"> t</span><span class="id"> r</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">A</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Rhull_smallest</span><span class="id"> A</span><span class="id"> :</span><span class="id"> [set`</span><span class="id"> Rhull</span><span class="id"> A]</span><span class="id"> =</span><span class="id"> smallest</span> (<span class="id">@is_interval</span><span class="id"> R</span>)<span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply/seteqP;</span><span class="id"> split;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> smallest_sub;</span><span class="id"> [apply:</span><span class="id"> interval_is_interval</span><span class="id"> |</span><span class="id"> apply:</span><span class="id"> sub_Rhull]</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> x</span><span class="id"> /=</span><span class="id"> +</span><span class="id"> I</span><span class="id"> [Iitv</span><span class="id"> AI];</span><span class="id"> rewrite</span><span class="id"> /Rhull</span>.<br/>
<span class="id">have</span><span class="id"> [|]</span><span class="id"> :=</span><span class="id"> asboolP</span> (<span class="id">has_lbound</span><span class="id"> A</span>)<span class="id"> =&gt;</span><span class="id"> lA;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /forallNP/</span>(_<span class="id"> x</span>)<span class="id">/existsNP[a]</span><span class="id"> :=</span><span class="id"> lA</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /existsNP[Aa</span><span class="id"> /negP];</span><span class="id"> rewrite</span><span class="id"> -ltNge</span><span class="id"> =&gt;</span><span class="id"> ax</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [|]:=</span><span class="id"> asboolP</span> (<span class="id">has_ubound</span><span class="id"> A</span>)<span class="id"> =&gt;</span><span class="id"> uA;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> ?;</span><span class="id"> have</span><span class="id"> /forallNP/</span>(_<span class="id"> x</span>)<span class="id">/existsNP[b]</span><span class="id"> :=</span><span class="id"> uA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /existsNP[Ab</span><span class="id"> /negP];</span><span class="id"> rewrite</span><span class="id"> -ltNge</span><span class="id"> =&gt;</span><span class="id"> xb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> /is_intervalPlt/</span>(_<span class="id"> a</span><span class="id"> b</span>)<span class="id"> :=</span><span class="id"> Iitv;</span><span class="id"> apply;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> apply:</span><span class="id"> AI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ax</span><span class="id"> xb</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [As|NAs]/=</span><span class="id"> :=</span><span class="id"> asboolP</span> (<span class="id">A</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> xA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">Iitv</span><span class="id"> a</span> (<span class="id">sup</span><span class="id"> A</span>))<span class="id">;</span><span class="gallina-kwd"> by</span><span class="id"> [apply:</span><span class="id"> AI</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> ltW</span><span class="id"> ?ax]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [||b</span><span class="id"> Ab</span><span class="id"> xb]</span><span class="id"> :=</span><span class="id"> @sup_gt</span><span class="id"> _</span><span class="id"> A</span><span class="id"> x;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> [exists</span><span class="id"> a</span><span class="id"> |</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> xA</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /is_intervalPlt/</span>(_<span class="id"> a</span><span class="id"> b</span>)<span class="id"> :=</span><span class="id"> Iitv;</span><span class="id"> apply;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> apply:</span><span class="id"> AI</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ax</span><span class="id"> xb</span>.<br/>
<span class="id">have</span><span class="id"> [|]:=</span><span class="id"> asboolP</span> (<span class="id">has_ubound</span><span class="id"> A</span>)<span class="id"> =&gt;</span><span class="id"> uA;</span><span class="id"> last</span><span class="id"> first</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /forallNP/</span>(_<span class="id"> x</span>)<span class="id">/existsNP[b]</span><span class="id"> :=</span><span class="id"> uA</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /existsNP[Ab</span><span class="id"> /negP];</span><span class="id"> rewrite</span><span class="id"> -ltNge</span><span class="id"> =&gt;</span><span class="id"> xb</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [Ai|NAi]/=</span><span class="id"> :=</span><span class="id"> asboolP</span> (<span class="id">A</span><span class="id"> _</span>)<span class="id"> =&gt;</span><span class="id"> xA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply:</span> (<span class="id">Iitv</span> (<span class="id">inf</span><span class="id"> A</span>)<span class="id"> b</span>)<span class="id">;</span><span class="gallina-kwd"> by</span><span class="id"> [apply:</span><span class="id"> AI</span><span class="id"> |</span><span class="id"> rewrite</span> (<span class="id">ltW</span><span class="id"> xb</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [||a</span><span class="id"> Aa</span><span class="id"> ax]</span><span class="id"> :=</span><span class="id"> @inf_lt</span><span class="id"> _</span><span class="id"> A</span><span class="id"> x;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> [exists</span><span class="id"> b</span><span class="id"> |</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> xA</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /is_intervalPlt/</span>(_<span class="id"> a</span><span class="id"> b</span>)<span class="id"> :=</span><span class="id"> Iitv;</span><span class="id"> apply;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> apply:</span><span class="id"> AI</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ax</span><span class="id"> xb</span>.<br/>
<span class="id">have</span><span class="id"> [Ai|NAi]/=</span><span class="id"> :=</span><span class="id"> asboolP</span> (<span class="id">A</span><span class="id"> _</span>)<span class="id">;</span><span class="id"> have</span><span class="id"> [As|NAs]/=</span><span class="id"> :=</span><span class="id"> asboolP</span> (<span class="id">A</span><span class="id"> _</span>).<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> Iitv;</span><span class="id"> apply:</span><span class="id"> AI</span>.<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> xA</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [||b</span><span class="id"> Ab</span><span class="id"> xb]</span><span class="id"> :=</span><span class="id"> @sup_gt</span><span class="id"> _</span><span class="id"> A</span><span class="id"> x;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> [exists</span> (<span class="id">inf</span><span class="id"> A</span>)<span class="id"> |</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> xA</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /</span>(_ (<span class="id">inf</span><span class="id"> A</span>)<span class="id"> b</span>)<span class="id"> :=</span><span class="id"> Iitv;</span><span class="id"> apply;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> apply:</span><span class="id"> AI</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> xA</span>) (<span class="id">ltW</span><span class="id"> xb</span>).<br/>
<span class="id">-</span><span class="id"> move=&gt;</span><span class="id"> xA</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> [||a</span><span class="id"> Aa</span><span class="id"> ax]</span><span class="id"> :=</span><span class="id"> @inf_lt</span><span class="id"> _</span><span class="id"> A</span><span class="id"> x;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> [exists</span> (<span class="id">sup</span><span class="id"> A</span>)<span class="id"> |</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> xA</span>)<span class="id">]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /</span>(_<span class="id"> a</span> (<span class="id">sup</span><span class="id"> A</span>))<span class="id"> :=</span><span class="id"> Iitv;</span><span class="id"> apply;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> apply:</span><span class="id"> AI</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span> (<span class="id">itvP</span><span class="id"> xA</span>) (<span class="id">ltW</span><span class="id"> ax</span>).<br/>
<span class="id">have</span><span class="id"> [-&gt;|/set0P</span><span class="id"> AN0]</span><span class="id"> :=</span><span class="id"> eqVneq</span><span class="id"> A</span><span class="id"> set0</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> inf0</span><span class="id"> sup0</span><span class="id"> itv_ge//=</span><span class="id"> ltBSide/=</span><span class="id"> ltxx</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> xA</span>.<br/>
<span class="id">have</span><span class="id"> [||a</span><span class="id"> Aa</span><span class="id"> ax]</span><span class="id"> :=</span><span class="id"> @inf_lt</span><span class="id"> _</span><span class="id"> A</span><span class="id"> x;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> [|rewrite</span> (<span class="id">itvP</span><span class="id"> xA</span>)<span class="id">]</span>.<br/>
<span class="id">have</span><span class="id"> [||b</span><span class="id"> Ab</span><span class="id"> xb]</span><span class="id"> :=</span><span class="id"> @sup_gt</span><span class="id"> _</span><span class="id"> A</span><span class="id"> x;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> [|rewrite</span> (<span class="id">itvP</span><span class="id"> xA</span>)<span class="id">]</span>.<br/>
<span class="id">have</span><span class="id"> /is_intervalPlt/</span>(_<span class="id"> a</span><span class="id"> b</span>)<span class="id"> :=</span><span class="id"> Iitv;</span><span class="id"> apply;</span><span class="id"> do</span><span class="id"> ?by</span><span class="id"> apply:</span><span class="id"> AI</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> ax</span><span class="id"> xb</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> le_Rhull</span><span class="id"> :</span><span class="id"> {homo</span> (<span class="id">@Rhull</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> A</span><span class="id"> B</span><span class="id"> /</span> (<span class="id">A</span><span class="id"> `&lt;=`</span><span class="id"> B</span>)<span class="id"> &gt;-&gt;</span><span class="id"> {subset</span><span class="id"> A</span><span class="id"> &lt;=</span><span class="id"> B}}</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> A</span><span class="id"> B</span><span class="id"> AB;</span><span class="id"> suff:</span><span class="id"> [set`</span><span class="id"> Rhull</span><span class="id"> A]</span><span class="id"> `&lt;=`</span><span class="id"> [set`</span><span class="id"> Rhull</span><span class="id"> B]</span><span class="gallina-kwd"> by</span><span class="id"> []</span>.<br/>
<span class="id">rewrite</span><span class="id"> Rhull_smallest;</span><span class="id"> apply:</span><span class="id"> smallest_sub;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> interval_is_interval</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> Rhull_smallest;</span><span class="id"> apply:</span><span class="id"> sub_smallest</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> neitv_Rhull</span><span class="id"> A</span><span class="id"> :</span><span class="id"> ~~</span><span class="id"> neitv</span> (<span class="id">Rhull</span><span class="id"> A</span>)<span class="id"> -&gt;</span><span class="id"> A</span><span class="id"> =</span><span class="id"> set0</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move/negPn/eqP</span><span class="id"> =&gt;</span><span class="id"> A0;</span><span class="id"> rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> r;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> /sub_Rhull</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> A0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> Rhull_involutive</span><span class="id"> A</span><span class="id"> :</span><span class="id"> Rhull</span><span class="id"> [set`</span><span class="id"> Rhull</span><span class="id"> A]</span><span class="id"> =</span><span class="id"> Rhull</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">have</span><span class="id"> [A0|/neitv_Rhull]</span><span class="id"> :=</span><span class="id"> boolP</span> (<span class="id">neitv</span> (<span class="id">Rhull</span><span class="id"> A</span>))<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> set_itvK</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> -&gt;;</span><span class="id"> rewrite</span><span class="id"> ?Rhull0</span><span class="id"> set_itvE</span><span class="id"> Rhull0</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> Rhull_lemmas</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> disj_itv_Rhull</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> A</span><span class="id"> `&amp;`</span><span class="id"> B</span><span class="id"> =</span><span class="id"> set0</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">is_interval</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> is_interval</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> disjoint_itv</span> (<span class="id">Rhull</span><span class="id"> A</span>) (<span class="id">Rhull</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> AB0</span><span class="id"> iA</span><span class="id"> iB;</span><span class="id"> rewrite</span><span class="id"> /disjoint_itv</span><span class="id"> RhullK</span><span class="id"> ?inE//</span><span class="id"> RhullK</span><span class="id"> ?inE</span>.<br/>
Qed.</div></details>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
