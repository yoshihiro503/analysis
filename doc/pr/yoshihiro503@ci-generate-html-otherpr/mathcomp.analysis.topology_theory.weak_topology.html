
<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.topology_theory.weak_topology</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.topology_theory.weak_topology" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init()">

  <main>
    <div class="sidebar">
      <h2>Files</h2>
      
    </div>

  <div class="coq">

    <div class="content">
      <p><a href="./index.html">Top</a></p>
      <h1 class="title">Module mathcomp.analysis.topology_theory.weak_topology</h1>
<span class="vernacular">From</span><span class="id"> HB</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> structures</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> all_ssreflect</span><span class="id"> all_algebra</span><span class="id"> all_classical</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> signed</span><span class="id"> reals</span><span class="id"> topology_structure</span><span class="id"> uniform_structure</span>.<br/>
<span class="vernacular">From</span><span class="id"> mathcomp</span><span class="vernacular"> Require</span><span class="vernacular"> Import</span><span class="id"> order_topology</span><span class="id"> pseudometric_structure</span>.<br/>
<br/>
<div class="ssrdoc md">
# Weak topology

```
        weak_topology f == weak topology by a function f : S -&gt; T on S
                           S must be a choiceType and T a topologicalType.
```
`weak_topology` is equipped with the structures of:
- uniform space
- pseudometric space (the metric space for weak topologies)
</div>
<br/>
<span class="vernacular">Import</span><span class="id"> Order</span>.<span class="id">TTheory</span><span class="id"> GRing</span>.<span class="id">Theory</span><span class="id"> Num</span>.<span class="id">Theory</span>.<br/>
<br/>
<span class="gallina-kwd">Set</span><span class="vernacular"> Implicit</span><span class="vernacular"> Arguments</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Strict</span><span class="vernacular"> Implicit</span>.<br/>
<span class="vernacular">Unset</span><span class="vernacular"> Printing</span><span class="vernacular"> Implicit</span><span class="vernacular"> Defensive</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> classical_set_scope</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> ring_scope</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> weak_topology</span><span class="id"> {S</span><span class="id"> :</span><span class="id"> Type}</span><span class="id"> {T</span><span class="id"> :</span><span class="id"> Type}</span><br/>
&nbsp;&nbsp;(<span class="id">f</span><span class="id"> :</span><span class="id"> S</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> :</span><span class="gallina-kwd"> Type</span><span class="id"> :=</span><span class="id"> S</span>.<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> Weak_Topology</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">S</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> S</span><span class="id"> -&gt;</span><span class="id"> T</span>).<br/>
<span class="vernacular">Local</span><span class="vernacular"> Notation</span><span class="id"> W</span><span class="id"> :=</span> (<span class="id">weak_topology</span><span class="id"> f</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> wopen</span><span class="id"> :=</span><span class="id"> [set</span><span class="id"> f</span><span class="id"> @^-1`</span><span class="id"> A</span><span class="id"> |</span><span class="id"> A</span><span class="gallina-kwd"> in</span><span class="id"> open]</span>.<br/>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> wopT</span><span class="id"> :</span><span class="id"> wopen</span><span class="id"> [set:</span><span class="id"> W]</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> setT</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> openT</span>. Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> wopI</span> (<span class="id">A</span><span class="id"> B</span><span class="id"> :</span><span class="id"> set</span><span class="id"> W</span>)<span class="id"> :</span><span class="id"> wopen</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> wopen</span><span class="id"> B</span><span class="id"> -&gt;</span><span class="id"> wopen</span> (<span class="id">A</span><span class="id"> `&amp;`</span><span class="id"> B</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> [C</span><span class="id"> Cop</span><span class="id"> &lt;-]</span><span class="id"> [D</span><span class="id"> Dop</span><span class="id"> &lt;-];</span><span class="gallina-kwd"> exists</span> (<span class="id">C</span><span class="id"> `&amp;`</span><span class="id"> D</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> openI</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Local</span><span class="vernacular"> Lemma</span><span class="id"> wop_bigU</span> (<span class="id">I</span><span class="id"> :</span><span class="gallina-kwd"> Type</span>) (<span class="id">g</span><span class="id"> :</span><span class="id"> I</span><span class="id"> -&gt;</span><span class="id"> set</span><span class="id"> W</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;(<span class="gallina-kwd">forall</span><span class="id"> i,</span><span class="id"> wopen</span> (<span class="id">g</span><span class="id"> i</span>))<span class="id"> -&gt;</span><span class="id"> wopen</span> (<span class="id">\bigcup_i</span><span class="id"> g</span><span class="id"> i</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> gop</span>.<br/>
<span class="id">set</span><span class="id"> opi</span><span class="id"> :=</span><span class="gallina-kwd"> fun</span><span class="id"> i</span><span class="id"> =&gt;</span><span class="id"> [set</span><span class="id"> Ui</span><span class="id"> |</span><span class="id"> open</span><span class="id"> Ui</span><span class="id"> /\</span><span class="id"> g</span><span class="id"> i</span><span class="id"> =</span><span class="id"> f</span><span class="id"> @^-1`</span><span class="id"> Ui]</span>.<br/>
<span class="gallina-kwd">exists</span> (<span class="id">\bigcup_i</span><span class="id"> get</span> (<span class="id">opi</span><span class="id"> i</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply:</span><span class="id"> bigcup_open</span><span class="id"> =&gt;</span><span class="id"> i</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /getPex</span><span class="id"> []</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> U,</span><span class="id"> opi</span><span class="id"> i</span><span class="id"> U</span><span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> [U]</span><span class="id"> :=</span><span class="id"> gop</span><span class="id"> i;</span><span class="gallina-kwd"> exists</span><span class="id"> U</span>.<br/>
<span class="id">have</span><span class="id"> g_preim</span><span class="id"> i</span><span class="id"> :</span><span class="id"> g</span><span class="id"> i</span><span class="id"> =</span><span class="id"> f</span><span class="id"> @^-1`</span> (<span class="id">get</span> (<span class="id">opi</span><span class="id"> i</span>)).<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> /getPex</span><span class="id"> []</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> U,</span><span class="id"> opi</span><span class="id"> i</span><span class="id"> U</span><span class="gallina-kwd"> by</span><span class="id"> have</span><span class="id"> [U]</span><span class="id"> :=</span><span class="id"> gop</span><span class="id"> i;</span><span class="gallina-kwd"> exists</span><span class="id"> U</span>.<br/>
<span class="id">rewrite</span><span class="id"> predeqE</span><span class="id"> =&gt;</span><span class="id"> s;</span><span class="id"> split=&gt;</span><span class="id"> [[i</span><span class="id"> _]|[i</span><span class="id"> _]];</span><span class="id"> last</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> g_preim;</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> -[_</span><span class="id"> _]/</span>((<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> _</span>)<span class="id"> _</span>)<span class="id"> -g_preim;</span><span class="gallina-kwd"> exists</span><span class="id"> i</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Choice</span>.<span class="id">on</span><span class="id"> W</span>.<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">isOpenTopological</span>.<span class="id">Build</span><span class="id"> W</span><span class="id"> wopT</span><span class="id"> wopI</span><span class="id"> wop_bigU</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_continuous</span><span class="id"> :</span><span class="id"> continuous</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> W</span><span class="id"> -&gt;</span><span class="id"> T</span>).<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> apply/continuousP</span><span class="id"> =&gt;</span><span class="id"> A</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> A</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> cvg_image</span> (<span class="id">F</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> S</span>) (<span class="id">s</span><span class="id"> :</span><span class="id"> S</span>)<span class="id"> :</span><br/>
&nbsp;&nbsp;<span class="id">Filter</span><span class="id"> F</span><span class="id"> -&gt;</span><span class="id"> f</span><span class="id"> @`</span><span class="id"> setT</span><span class="id"> =</span><span class="id"> setT</span><span class="id"> -&gt;</span><br/>
&nbsp;&nbsp;<span class="id">F</span><span class="id"> --&gt;</span> (<span class="id">s</span><span class="id"> :</span><span class="id"> W</span>)<span class="id"> &lt;-&gt;</span> (<span class="id">[set</span><span class="id"> f</span><span class="id"> @`</span><span class="id"> A</span><span class="id"> |</span><span class="id"> A</span><span class="gallina-kwd"> in</span><span class="id"> F]</span><span class="id"> :</span><span class="id"> set_system</span><span class="id"> _</span>)<span class="id"> --&gt;</span><span class="id"> f</span><span class="id"> s</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> FF</span><span class="id"> fsurj;</span><span class="id"> split=&gt;</span><span class="id"> [cvFs|cvfFfs]</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> A</span><span class="id"> /weak_continuous</span><span class="id"> [B</span><span class="id"> [Bop</span><span class="id"> Bs</span><span class="id"> sBAf]]</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span><span class="id"> /cvFs</span><span class="id"> FB</span><span class="id"> :</span><span class="id"> nbhs</span> (<span class="id">s</span><span class="id"> :</span><span class="id"> W</span>)<span class="id"> B</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> open_nbhs_nbhs</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span><span class="id"> nbhs_simpl;</span><span class="gallina-kwd"> exists</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> A</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> filterS</span><span class="id"> FB</span>.<br/>
&nbsp;&nbsp;<span class="id">exact:</span><span class="id"> image_preimage</span>.<br/>
<span class="id">move=&gt;</span><span class="id"> A</span><span class="id"> /=</span><span class="id"> [_</span><span class="id"> [[B</span><span class="id"> Bop</span><span class="id"> &lt;-]</span><span class="id"> Bfs</span><span class="id"> sBfA]]</span>.<br/>
<span class="id">have</span><span class="id"> /cvfFfs</span><span class="id"> [C</span><span class="id"> FC</span><span class="id"> fCeB]</span><span class="id"> :</span><span class="id"> nbhs</span> (<span class="id">f</span><span class="id"> s</span>)<span class="id"> B</span><span class="gallina-kwd"> by</span><span class="id"> rewrite</span><span class="id"> nbhsE;</span><span class="gallina-kwd"> exists</span><span class="id"> B</span>.<br/>
<span class="id">rewrite</span><span class="id"> nbhs_filterE;</span><span class="id"> apply:</span><span class="id"> filterS</span><span class="id"> FC</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> apply:</span><span class="id"> subset_trans</span><span class="id"> sBfA;</span><span class="id"> rewrite</span><span class="id"> -fCeB;</span><span class="id"> apply:</span><span class="id"> preimage_image</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> Weak_Topology</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span> (<span class="id">S</span><span class="id"> :</span><span class="id"> pointedType</span>) (<span class="id">T</span><span class="id"> :</span><span class="id"> topologicalType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> S</span><span class="id"> -&gt;</span><span class="id"> T</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">Pointed</span>.<span class="id">on</span> (<span class="id">weak_topology</span><span class="id"> f</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> weak_uniform</span>.<br/>
<span class="vernacular">Local</span><span class="vernacular"> Open</span><span class="vernacular"> Scope</span><span class="id"> relation_scope</span>.<br/>
<span class="vernacular">Variable</span> (<span class="id">pS</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">U</span><span class="id"> :</span><span class="id"> uniformType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> pS</span><span class="id"> -&gt;</span><span class="id"> U</span>).<br/>
<br/>
<span class="vernacular">Let</span><span class="id"> S</span><span class="id"> :=</span><span class="id"> weak_topology</span><span class="id"> f</span>.<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> weak_ent</span><span class="id"> :</span><span class="id"> set_system</span> (<span class="id">S</span><span class="id"> *</span><span class="id"> S</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">filter_from</span> (<span class="id">@entourage</span><span class="id"> U</span>) (<span class="gallina-kwd">fun</span><span class="id"> V</span><span class="id"> =&gt;</span> (<span class="id">map_pair</span><span class="id"> f</span>)<span class="id">@^-1`</span><span class="id"> V</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_ent_filter</span><span class="id"> :</span><span class="id"> Filter</span><span class="id"> weak_ent</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">apply:</span><span class="id"> filter_from_filter;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> setT;</span><span class="id"> exact:</span><span class="id"> entourageT</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> P</span><span class="id"> Q</span><span class="id"> ??;</span> (<span class="gallina-kwd">exists</span> (<span class="id">P</span><span class="id"> `&amp;`</span><span class="id"> Q</span>)<span class="id">;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> filterI</span>)<span class="id"> =&gt;</span><span class="id"> ?</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_ent_refl</span><span class="id"> A</span><span class="id"> :</span><span class="id"> weak_ent</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> diagonal</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> [B</span><span class="id"> ?</span><span class="id"> sBA]</span><span class="id"> [x</span><span class="id"> y]/diagonalP</span><span class="id"> -&gt;;</span><span class="id"> apply/sBA;</span><span class="id"> exact:</span><span class="id"> entourage_refl</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_ent_inv</span><span class="id"> A</span><span class="id"> :</span><span class="id"> weak_ent</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="id"> weak_ent</span><span class="id"> A^-1</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [B</span><span class="id"> ?</span><span class="id"> sBA];</span><span class="gallina-kwd"> exists</span><span class="id"> B^-1;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> entourage_inv</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ??;</span><span class="id"> exact/sBA</span>.<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_ent_split</span><span class="id"> A</span><span class="id"> :</span><span class="id"> weak_ent</span><span class="id"> A</span><span class="id"> -&gt;</span><span class="gallina-kwd"> exists2</span><span class="id"> B,</span><span class="id"> weak_ent</span><span class="id"> B</span><span class="id"> &amp;</span><span class="id"> B</span><span class="id"> \;</span><span class="id"> B</span><span class="id"> `&lt;=`</span><span class="id"> A</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">move=&gt;</span><span class="id"> [B</span><span class="id"> entB</span><span class="id"> sBA];</span><span class="id"> have</span><span class="id"> :</span><span class="gallina-kwd"> exists</span><span class="id"> C,</span><span class="id"> entourage</span><span class="id"> C</span><span class="id"> /\</span><span class="id"> C</span><span class="id"> \;</span><span class="id"> C</span><span class="id"> `&lt;=`</span><span class="id"> B</span>.<br/>
&nbsp;&nbsp;<span class="id">exact/exists2P/entourage_split_ex</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> C</span><span class="id"> [entC</span><span class="id"> CsubB];</span><span class="gallina-kwd"> exists</span> ((<span class="id">map_pair</span><span class="id"> f</span>)<span class="id">@^-1`</span><span class="id"> C</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> C</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> case=&gt;</span><span class="id"> x</span><span class="id"> y</span><span class="id"> [a</span><span class="id"> ?</span><span class="id"> ?];</span><span class="id"> apply/sBA/CsubB;</span><span class="gallina-kwd"> exists</span> (<span class="id">f</span><span class="id"> a</span>).<br/>
Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_ent_nbhs</span><span class="id"> :</span><span class="id"> nbhs</span><span class="id"> =</span><span class="id"> nbhs_</span><span class="id"> weak_ent</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> predeq2E</span><span class="id"> =&gt;</span><span class="id"> x</span><span class="id"> V;</span><span class="id"> split</span>.<br/>
&nbsp;&nbsp;<span class="id">case=&gt;</span><span class="id"> [?</span><span class="id"> [[B</span> <span class="id"> ?</span><span class="id"> &lt;-]</span><span class="id"> ?</span><span class="id"> BsubV]];</span><span class="id"> have:</span><span class="id"> nbhs</span> (<span class="id">f</span><span class="id"> x</span>)<span class="id"> B</span><span class="gallina-kwd"> by</span><span class="id"> apply:</span><span class="id"> open_nbhs_nbhs</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> /nbhsP</span><span class="id"> [W</span><span class="id"> ?</span><span class="id"> WsubB];</span><span class="gallina-kwd"> exists</span> ((<span class="id">map_pair</span><span class="id"> f</span>)<span class="id"> @^-1`</span><span class="id"> W</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> W</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;??;</span><span class="id"> exact/BsubV/WsubB</span>.<br/>
<span class="id">case=&gt;</span><span class="id"> W</span><span class="id"> [V'</span><span class="id"> entV'</span><span class="id"> V'subW]</span><span class="id"> /filterS;</span><span class="id"> apply</span>.<br/>
<span class="id">have</span><span class="id"> :</span><span class="id"> nbhs</span> (<span class="id">f</span><span class="id"> x</span>) (<span class="id">xsection</span><span class="id"> V'</span> (<span class="id">f</span><span class="id"> x</span>))<span class="gallina-kwd"> by</span><span class="id"> apply/nbhsP;</span><span class="gallina-kwd"> exists</span><span class="id"> V'</span>.<br/>
<span class="id">rewrite</span> (<span class="id">@nbhsE</span><span class="id"> U</span>)<span class="id"> =&gt;</span><span class="id"> [[O</span><span class="id"> [openU</span><span class="id"> Ofx</span><span class="id"> Osub]]]</span>.<br/>
(<span class="gallina-kwd">exists</span> (<span class="id">f</span><span class="id"> @^-1`</span><span class="id"> O</span>)<span class="id">;</span><span class="id"> repeat</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //</span>)<span class="id">;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> O</span><span class="id"> =&gt;</span><span class="id"> //</span>.<br/>
<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> w</span><span class="id"> ?;</span><span class="id"> apply/mem_set;</span><span class="id"> apply:</span><span class="id"> V'subW;</span><span class="id"> apply/set_mem;</span><span class="id"> exact:</span><span class="id"> Osub</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> @Nbhs_isUniform</span>.<span class="id">Build</span> (<span class="id">weak_topology</span><span class="id"> f</span>)<span class="id"> weak_ent</span><br/>
&nbsp;&nbsp;<span class="id">weak_ent_filter</span><span class="id"> weak_ent_refl</span><span class="id"> weak_ent_inv</span><span class="id"> weak_ent_split</span><span class="id"> weak_ent_nbhs</span>.<br/>
<br/>
<span class="vernacular">End</span><span class="id"> weak_uniform</span>.<br/>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span> (<span class="id">pS</span><span class="id"> :</span><span class="id"> pointedType</span>) (<span class="id">U</span><span class="id"> :</span><span class="id"> uniformType</span>) (<span class="id">f</span><span class="id"> :</span><span class="id"> pS</span><span class="id"> -&gt;</span><span class="id"> U</span>)<span class="id"> :=</span><br/>
&nbsp;&nbsp;<span class="id">Pointed</span>.<span class="id">on</span> (<span class="id">weak_topology</span><span class="id"> f</span>).<br/>
<br/>
<span class="vernacular">Section</span><span class="id"> weak_pseudoMetric</span>.<br/>
<span class="vernacular">Context</span><span class="id"> {R</span><span class="id"> :</span><span class="id"> realType}</span> (<span class="id">pS</span><span class="id"> :</span><span class="id"> choiceType</span>) (<span class="id">U</span><span class="id"> :</span><span class="id"> pseudoMetricType</span><span class="id"> R</span>) .<br/>
<span class="vernacular">Variable</span> (<span class="id">f</span><span class="id"> :</span><span class="id"> pS</span><span class="id"> -&gt;</span><span class="id"> U</span>).<br/>
<br/>
<span class="vernacular">Notation</span><span class="id"> S</span><span class="id"> :=</span> (<span class="id">weak_topology</span><span class="id"> f</span>).<br/>
<br/>
<span class="vernacular">Definition</span><span class="id"> weak_ball</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> S</span>) (<span class="id">r</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">y</span><span class="id"> :</span><span class="id"> S</span>)<span class="id"> :=</span><span class="id"> ball</span> (<span class="id">f</span><span class="id"> x</span>)<span class="id"> r</span> (<span class="id">f</span><span class="id"> y</span>).<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_pseudo_metric_ball_center</span> (<span class="id">x</span><span class="id"> :</span><span class="id"> S</span>) (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>)<span class="id"> :</span><span class="id"> 0</span><span class="id"> &lt;</span><span class="id"> e</span><span class="id"> -&gt;</span><span class="id"> weak_ball</span><span class="id"> x</span><span class="id"> e</span><span class="id"> x</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> /posnumP[{}e];</span><span class="id"> exact:</span><span class="id"> ball_center</span>. Qed.</div></details>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_pseudo_metric_entourageE</span><span class="id"> :</span><span class="id"> entourage</span><span class="id"> =</span><span class="id"> entourage_</span><span class="id"> weak_ball</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="id">rewrite</span><span class="id"> /entourage</span><span class="id"> /=</span><span class="id"> /weak_ent</span><span class="id"> -entourage_ballE</span><span class="id"> /entourage_</span>.<br/>
<span class="id">have</span><span class="id"> -&gt;</span><span class="id"> :</span> (<span class="gallina-kwd">fun</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> |</span><span class="id"> ball</span> (<span class="id">f</span><span class="id"> xy</span>.<span class="id">1</span>)<span class="id"> e</span> (<span class="id">f</span><span class="id"> xy</span>.<span class="id">2</span>)<span class="id">]</span>)<span class="id"> =</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">preimage</span> (<span class="id">map_pair</span><span class="id"> f</span>)<span class="id"> \o</span><span class="gallina-kwd"> fun</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> |</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> e</span><span class="id"> xy</span>.<span class="id">2]</span>)<span class="id">%FUN</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> []</span>.<br/>
<span class="id">rewrite</span><span class="id"> eqEsubset;</span><span class="id"> split;</span><span class="id"> apply/filter_fromP</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> filter_from_filter;</span><span class="id"> first</span><span class="gallina-kwd"> by</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> e1</span><span class="id"> e2</span><span class="id"> e1pos</span><span class="id"> e2pos;</span><span class="id"> wlog</span><span class="id"> e1lee2</span><span class="id"> :</span><span class="id"> e1</span><span class="id"> e2</span><span class="id"> e1pos</span><span class="id"> e2pos</span><span class="id"> /</span><span class="id"> e1</span><span class="id"> &lt;=</span><span class="id"> e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> have</span><span class="id"> [?|/ltW</span><span class="id"> ?]</span><span class="id"> :=</span><span class="id"> lerP</span><span class="id"> e1</span><span class="id"> e2;</span><span class="id"> [exact</span><span class="id"> |</span><span class="id"> rewrite</span><span class="id"> setIC;</span><span class="id"> exact]</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span><span class="id"> e1</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> rewrite</span><span class="id"> -preimage_setI;</span><span class="id"> apply:</span><span class="id"> preimage_subset</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> move=&gt;</span><span class="id"> ?</span><span class="id"> ?;</span><span class="id"> split</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> le_ball;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> e1lee2</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> E</span><span class="id"> [e</span><span class="id"> ?]</span><span class="id"> heE;</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="id"> apply:</span><span class="id"> preimage_subset</span>.<br/>
<span class="id">-</span><span class="id"> apply:</span><span class="id"> filter_from_filter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> |</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> 1</span><span class="id"> xy</span>.<span class="id">2];</span><span class="gallina-kwd"> exists</span><span class="id"> 1</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
&nbsp;&nbsp;<span class="id">move=&gt;</span><span class="id"> E1</span><span class="id"> E2</span><span class="id"> [e1</span><span class="id"> e1pos</span><span class="id"> he1E1]</span><span class="id"> [e2</span><span class="id"> e2pos</span><span class="id"> he2E2]</span>.<br/>
&nbsp;&nbsp;<span class="id">wlog</span><span class="id"> ?</span><span class="id"> :</span><span class="id"> E1</span><span class="id"> E2</span><span class="id"> e1</span><span class="id"> e2</span><span class="id"> e1pos</span><span class="id"> e2pos</span><span class="id"> he1E1</span><span class="id"> he2E2</span><span class="id"> /</span><span class="id"> e1</span><span class="id"> &lt;=</span><span class="id"> e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span><span class="id"> [?</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> e1</span><span class="id"> e2</span>)<span class="id">|/ltW</span><span class="id"> ?</span><span class="id"> ]</span><span class="id"> :=</span><span class="id"> lerP</span><span class="id"> e1</span><span class="id"> e2;</span><span class="id"> first</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> rewrite</span><span class="id"> setIC</span><span class="id"> =&gt;</span><span class="id"> /</span>(_<span class="id"> _</span><span class="id"> _</span><span class="id"> e2</span><span class="id"> e1</span>)<span class="id">;</span><span class="id"> exact</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">exists</span> (<span class="id">E1</span><span class="id"> `&amp;`</span><span class="id"> E2</span>)<span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> e1</span><span class="id"> =&gt;</span><span class="id"> //</span><span class="id"> xy</span><span class="id"> /=</span><span class="id"> B;</span><span class="id"> split;</span><span class="id"> first</span><span class="id"> exact:</span><span class="id"> he1E1</span>.<br/>
&nbsp;&nbsp;<span class="gallina-kwd">by</span><span class="id"> apply/he2E2/le_ball;</span><span class="id"> last</span><span class="id"> exact:</span><span class="id"> B</span>.<br/>
<span class="id">-</span><span class="gallina-kwd"> by</span><span class="id"> move=&gt;</span><span class="id"> e</span><span class="id"> ?;</span><span class="gallina-kwd"> exists</span><span class="id"> [set</span><span class="id"> xy</span><span class="id"> |</span><span class="id"> ball</span><span class="id"> xy</span>.<span class="id">1</span><span class="id"> e</span><span class="id"> xy</span>.<span class="id">2]</span><span class="id"> =&gt;</span><span class="id"> //;</span><span class="gallina-kwd"> exists</span><span class="id"> e</span><span class="id"> =&gt;</span><span class="id"> /=</span>.<br/>
Qed.</div></details>
<br/>
<span class="id">HB</span>.<span class="id">instance</span><span class="vernacular"> Definition</span><span class="id"> _</span><span class="id"> :=</span><span class="id"> Uniform_isPseudoMetric</span>.<span class="id">Build</span><span class="id"> R</span><span class="id"> S</span><br/>
&nbsp;&nbsp;<span class="id">weak_pseudo_metric_ball_center</span> (<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> @ball_sym</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>)<br/>
&nbsp;&nbsp;(<span class="gallina-kwd">fun</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> =&gt;</span><span class="id"> @ball_triangle</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span><span class="id"> _</span>)<br/>
&nbsp;&nbsp;<span class="id">weak_pseudo_metric_entourageE</span>.<br/>
<br/>
<span class="vernacular">Lemma</span><span class="id"> weak_ballE</span> (<span class="id">e</span><span class="id"> :</span><span class="id"> R</span>) (<span class="id">x</span><span class="id"> :</span><span class="id"> S</span>)<span class="id"> :</span><span class="id"> f</span><span class="id"> @^-1`</span> (<span class="id">ball</span> (<span class="id">f</span><span class="id"> x</span>)<span class="id"> e</span>)<span class="id"> =</span><span class="id"> ball</span><span class="id"> x</span><span class="id"> e</span>.<br/>
<details>
<summary class="toggleproof">Proof.</summary>
<div class="proofscript">
<span class="gallina-kwd"> by</span><span class="id"> []</span>. Qed.</div></details>
<br/>
<span class="vernacular">End</span><span class="id"> weak_pseudoMetric</span>.<br/>
<br/>
<div class="doc">for an orderedTopologicalType T, and subtype U
    (order_topology (sub_type U)) `&lt;=` (weak_topology (sub_type U))
    but generally the topologies are not equal!
    Consider `<span class="bracket">0,1[ | {2}` <span class="gallina-kwd">as</span> <span class="id">a</span> <span class="id">subset</span> <span class="id">of</span> `[0,3]` <span class="gallina-kwd">for</span> <span class="id">an</span> <span class="id">example</span>
*)
<span class="vernacular">Section</span> <span class="id">weak_order_refine</span>.
<span class="vernacular">Context</span> {<span class="id">d</span>} {<span class="id">X</span> : <span class="id">orderTopologicalType</span> <span class="id">d</span>} {<span class="id">Y</span> : <span class="id">subType</span> <span class="id">X</span>}.

<span class="vernacular">Let</span> <span class="id">OrdU</span> : <span class="id">orderTopologicalType</span> <span class="id">d</span> := <span class="id">order_topology</span> (<span class="id">sub_type</span> <span class="id">Y</span>).
<span class="vernacular">Let</span> <span class="id">WeakU</span> : <span class="id">topologicalType</span> := @<span class="id">weak_topology</span> (<span class="id">sub_type</span> <span class="id">Y</span>) <span class="id">X</span> <span class="id">val</span>.

<span class="vernacular">Lemma</span> <span class="id">open_order_weak</span> (<span class="id">U</span> : <span class="id">set</span> <span class="id">Y</span>) : @<span class="id">open</span> <span class="id">OrdU</span> <span class="id">U</span> -&gt; @<span class="id">open</span> <span class="id">WeakU</span> <span class="id">U</span>.
<span class="vernacular">Proof</span>.
<span class="id">rewrite</span> ?<span class="id">openE</span> /= /<span class="id">interior</span> =&gt; + <span class="id">x</span> <span class="id">Ux</span> =&gt; /(_ <span class="id">x</span> <span class="id">Ux</span>); <span class="id">rewrite</span> <span class="id">itv_nbhsE</span> /=.
<span class="id">move</span>=&gt; [][][[]<span class="id">l</span>|[]] [[]<span class="id">r</span>|[]][][]//= _ <span class="id">xlr</span> /<span class="id">filterS</span>; <span class="id">apply</span>.
- <span class="gallina-kwd">exists</span> `]<span class="id">l</span>, <span class="id">r</span>[%<span class="id">classic</span>; <span class="id">split</span> =&gt; //=; <span class="gallina-kwd">exists</span> `]\<span class="id">val</span> <span class="id">l</span>, \<span class="id">val</span> <span class="id">r</span>[%<span class="id">classic</span>.
    <span class="id">exact</span>: <span class="id">itv_open</span>.
  <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">z</span>; <span class="id">rewrite</span> <span class="id">preimage_itv</span>.
- <span class="gallina-kwd">exists</span> `]<span class="id">l</span>, +<span class="id">oo</span>[%<span class="id">classic</span>; <span class="id">split</span> =&gt; //=; <span class="gallina-kwd">exists</span> `]\<span class="id">val</span> <span class="id">l</span>, +<span class="id">oo</span>[%<span class="id">classic</span>.
    <span class="id">exact</span>: <span class="id">rray_open</span>.
  <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">z</span>; <span class="id">rewrite</span> <span class="id">preimage_itv</span>.
- <span class="gallina-kwd">exists</span> `]-<span class="id">oo</span>, <span class="id">r</span>[%<span class="id">classic</span>; <span class="id">split</span> =&gt; //=; <span class="gallina-kwd">exists</span> `]-<span class="id">oo</span>, \<span class="id">val</span> <span class="id">r</span>[%<span class="id">classic</span>.
    <span class="id">exact</span>: <span class="id">lray_open</span>.
  <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">z</span>; <span class="id">rewrite</span> <span class="id">preimage_itv</span>.
- <span class="gallina-kwd">by</span> <span class="id">rewrite</span> <span class="id">set_itvE</span>; <span class="id">exact</span>: <span class="id">filterT</span>.
<span class="vernacular">Qed</span>.

<span class="vernacular">End</span> <span class="id">weak_order_refine</span>.

<span class="vernacular">Lemma</span> <span class="id">continuous_comp_weak</span> {<span class="id">Y</span> : <span class="id">choiceType</span>} {<span class="id">X</span> <span class="id">Z</span> : <span class="id">topologicalType</span>} (<span class="id">w</span> : <span class="id">Y</span> -&gt; <span class="id">Z</span>)
  (<span class="id">f</span> : <span class="id">X</span> -&gt; <span class="id">weak_topology</span> <span class="id">w</span>) :
  <span class="id">continuous</span> (<span class="id">w</span> \<span class="id">o</span> <span class="id">f</span>) -&gt; <span class="id">continuous</span> <span class="id">f</span>.
<span class="vernacular">Proof</span>.
<span class="id">move</span>=&gt; <span class="id">cf</span> <span class="id">z</span> <span class="id">U</span> [?/= [[<span class="id">W</span> <span class="id">oW</span> &lt;-]]] /= <span class="id">Wsfz</span> /<span class="id">filterS</span>; <span class="id">apply</span>; <span class="id">apply</span>: <span class="id">cf</span>.
<span class="id">exact</span>: <span class="id">open_nbhs_nbhs</span>.
<span class="vernacular">Qed</span>.
]</span></div>

      <div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/">a fork of coq2html</a></div>
    </div>
  </div>
    </main>
</body>
</html>
